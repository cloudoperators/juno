import{j as e,o as j,d,e as C,i as x,g as N,Y as E,V as m,P as D,n as h,f as y,h as S,k as R,l as F,N as k,m as B,u as V,p as P,q as K,z as b,Z as M}from"./Shell-B-ngUku6.js";import{r as c}from"./index-DcwzHWss.js";import{E as w}from"./ErrorMessage-CiSSG3cv.js";import"./index-uKB8A89h.js";const f=({colSpan:n,children:t})=>e.jsx(j,{children:e.jsx(d,{colSpan:n,children:t})}),A=({pluginPresetsPromise:n,colSpan:t})=>{const r=c.use(n);return!r||r.length===0?e.jsx(f,{colSpan:t,children:"No plugin presets found."}):e.jsx(e.Fragment,{children:r.map((s,l)=>e.jsxs(j,{children:[e.jsx(d,{children:e.jsx(C,{icon:x(s)?"checkCircle":"error",color:x(s)?"text-theme-success":"text-theme-danger"})}),e.jsxs(d,{children:[s.status?.readyPlugins||0,"/",s.status?.totalPlugins||0]}),e.jsx(d,{children:s.metadata?.name}),e.jsx(d,{children:s.spec?.plugin?.pluginDefinitionRef.name||s.spec?.plugin?.pluginDefinition}),e.jsx(d,{children:x(s)?"":N(s)?.message}),e.jsx(d,{className:"whitespace-nowrap",children:e.jsx(E,{size:"small",variant:"primary",children:"View details"})})]},l))})},L=({colSpan:n})=>e.jsx(f,{colSpan:n,children:e.jsx(m,{gap:"2",alignment:"center",children:e.jsx("div",{children:"Loading..."})})}),O=c.createContext(null),p={didCatch:!1,error:null};let T=class extends c.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=p}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var r,s,l=arguments.length,i=new Array(l),o=0;o<l;o++)i[o]=arguments[o];(r=(s=this.props).onReset)===null||r===void 0||r.call(s,{args:i,reason:"imperative-api"}),this.setState(p)}}componentDidCatch(t,r){var s,l;(s=(l=this.props).onError)===null||s===void 0||s.call(l,t,r)}componentDidUpdate(t,r){const{didCatch:s}=this.state,{resetKeys:l}=this.props;if(s&&r.error!==null&&z(t.resetKeys,l)){var i,o;(i=(o=this.props).onReset)===null||i===void 0||i.call(o,{next:l,prev:t.resetKeys,reason:"keys"}),this.setState(p)}}render(){const{children:t,fallbackRender:r,FallbackComponent:s,fallback:l}=this.props,{didCatch:i,error:o}=this.state;let u=t;if(i){const a={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")u=r(a);else if(s)u=c.createElement(s,a);else if(l!==void 0)u=l;else throw o}return c.createElement(O.Provider,{value:{didCatch:i,error:o,resetErrorBoundary:this.resetErrorBoundary}},u)}};function z(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return n.length!==t.length||n.some((r,s)=>!Object.is(r,t[s]))}const G=({children:n,displayErrorMessage:t,fallbackRender:r,resetKeys:s})=>e.jsx(T,{resetKeys:s,fallbackRender:t?r||w:()=>null,children:n}),U=({colspan:n})=>{const t=({error:r})=>e.jsx(f,{colSpan:n,children:e.jsx(m,{gap:"2",alignment:"center",children:e.jsx(w,{error:r})})});return t.displayName="ErrorDataRow",t},g=6,Y=({pluginPresetsPromise:n})=>e.jsx("div",{className:"datagrid-hover",children:e.jsxs(D,{minContentColumns:[0,1,5],columns:g,children:[e.jsxs(j,{children:[e.jsx(h,{children:e.jsx(C,{icon:"monitorHeart"})}),e.jsx(h,{children:"Instances"}),e.jsx(h,{children:"Name"}),e.jsx(h,{children:"Plugin Definition"}),e.jsx(h,{children:"Message"}),e.jsx(h,{children:"Actions"})]}),e.jsx(G,{displayErrorMessage:!0,fallbackRender:U({colspan:g}),resetKeys:[n],children:e.jsx(c.Suspense,{fallback:e.jsx(L,{colSpan:g}),children:e.jsx(A,{pluginPresetsPromise:n,colSpan:g})})})]})}),Z=({filters:n,onChange:t})=>{const[r,s]=c.useState(""),[l,i]=c.useState(""),o=n.find(a=>a.id===r)?.values?.filter(a=>a),u=c.useCallback(a=>{i(a),!y(r)&&!y(a)&&t({id:r,value:a}),setTimeout(()=>{i("")},0)},[r,i,t]);return e.jsx(m,{alignment:"center",gap:"8",children:e.jsxs(S,{children:[e.jsx(R,{className:"filter-label-select w-64 mb-0",name:"filter","data-testid":"select-filterValue",label:"Filter",value:r,onChange:a=>{s(String(a))},children:n?.map(({label:a,id:v})=>e.jsx(F,{value:v,label:a},v))}),e.jsx(k,{className:"filter-value-select w-64 bg-theme-background-lvl-0",name:"filterValue","data-testid":"combobox-filterValue",value:l,disabled:!r,onChange:u,children:o?.map(a=>e.jsx(B,{value:a,label:a,"data-testid":a},a))})]})})},q=[{id:"pluginPresetDefinition",label:"Plugin Preset Definition",values:["active","inactive","deprecated"]}],H=()=>{const n=V(),{filterSettings:t}=P({from:"/admin/plugin-presets"}),r=c.useCallback(s=>{n({to:"/admin/plugin-presets",search:l=>({...l,searchTerm:s})})},[n]);return e.jsx(m,{direction:"vertical",gap:"4",className:"bg-theme-background-lvl-1 py-2 px-4 ",children:e.jsxs(m,{alignment:"start",gap:"4",children:[e.jsx(S,{children:e.jsx(Z,{filters:q,onChange:s=>{}})}),e.jsx(E,{label:"Clear all",className:"ml-4",onClick:()=>{},variant:"subdued"}),e.jsx(K,{className:"w-96 ml-auto",placeholder:"Search plugin presets by name...",value:t?.searchTerm,onSearch:r,onClear:()=>r(void 0)})]})})},I=()=>{const{pluginPresetsPromise:n}=P({from:"/admin/plugin-presets"});return e.jsxs(e.Fragment,{children:[e.jsxs(b,{px:!1,py:!0,children:[e.jsx(M,{children:"Plugin Presets Overview"}),e.jsx("p",{children:"Manage and monitor plugin preset configurations across all clusters"})]}),e.jsxs(b,{px:!1,py:!0,children:[e.jsx(H,{}),e.jsx(Y,{pluginPresetsPromise:n})]})]})},_=I;export{_ as component};
