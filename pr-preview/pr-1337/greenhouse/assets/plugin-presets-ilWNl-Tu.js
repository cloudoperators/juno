import{j as e,d as p,e as c,f as y,Y as C,V as E,H as R,r as d,g as w,X as f,z as D}from"./Shell-CXu6ahMD.js";import{r as u}from"./index-CwjlyW0h.js";import{E as v}from"./ErrorMessage-DNqPlcZc.js";import"./index-DnEcuyMz.js";const g=({colSpan:s,children:n})=>e.jsx(p,{children:e.jsx(c,{colSpan:s,children:n})}),l=s=>s.status?.statusConditions?.conditions?.find(n=>n.type==="Ready"),B=({pluginPresetsPromise:s,colSpan:n})=>{const t=u.use(s);return!t||t.length===0?e.jsx(g,{colSpan:n,children:"No plugin presets found."}):e.jsx(e.Fragment,{children:t.map((r,a)=>e.jsxs(p,{children:[e.jsx(c,{children:e.jsx(y,{icon:l(r)?.type==="Ready"&&l(r)?.status==="True"?"checkCircle":"error",color:l(r)?.type==="Ready"&&l(r)?.status==="True"?"text-theme-success":"text-theme-danger"})}),e.jsxs(c,{children:[r.status?.readyPlugins||0,"/",r.status?.totalPlugins||0]}),e.jsx(c,{children:r.metadata?.name}),e.jsx(c,{children:r.spec?.plugin?.pluginDefinitionRef.name||r.spec?.plugin?.pluginDefinition}),e.jsx(c,{children:l(r)?.type==="Ready"&&l(r)?.status!=="True"?l(r)?.message:""}),e.jsx(c,{className:"whitespace-nowrap",children:e.jsx(C,{size:"small",variant:"primary",children:"View details"})})]},a))})},P=({colSpan:s})=>e.jsx(g,{colSpan:s,children:e.jsx(E,{gap:"2",alignment:"center",children:e.jsx("div",{children:"Loading..."})})}),S=u.createContext(null),x={didCatch:!1,error:null};let b=class extends u.Component{constructor(n){super(n),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=x}static getDerivedStateFromError(n){return{didCatch:!0,error:n}}resetErrorBoundary(){const{error:n}=this.state;if(n!==null){for(var t,r,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];(t=(r=this.props).onReset)===null||t===void 0||t.call(r,{args:i,reason:"imperative-api"}),this.setState(x)}}componentDidCatch(n,t){var r,a;(r=(a=this.props).onError)===null||r===void 0||r.call(a,n,t)}componentDidUpdate(n,t){const{didCatch:r}=this.state,{resetKeys:a}=this.props;if(r&&t.error!==null&&N(n.resetKeys,a)){var i,o;(i=(o=this.props).onReset)===null||i===void 0||i.call(o,{next:a,prev:n.resetKeys,reason:"keys"}),this.setState(x)}}render(){const{children:n,fallbackRender:t,FallbackComponent:r,fallback:a}=this.props,{didCatch:i,error:o}=this.state;let h=n;if(i){const j={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof t=="function")h=t(j);else if(r)h=u.createElement(r,j);else if(a!==void 0)h=a;else throw o}return u.createElement(S.Provider,{value:{didCatch:i,error:o,resetErrorBoundary:this.resetErrorBoundary}},h)}};function N(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return s.length!==n.length||s.some((t,r)=>!Object.is(t,n[r]))}const k=({children:s,displayErrorMessage:n,fallbackRender:t,resetKeys:r})=>e.jsx(b,{resetKeys:r,fallbackRender:n?t||v:()=>null,children:s}),M=({colspan:s})=>{const n=({error:t})=>e.jsx(g,{colSpan:s,children:e.jsx(E,{gap:"2",alignment:"center",children:e.jsx(v,{error:t})})});return n.displayName="ErrorDataRow",n},m=6,A=({pluginPresetsPromise:s})=>e.jsx("div",{className:"datagrid-hover",children:e.jsxs(R,{minContentColumns:[0,1,5],columns:m,children:[e.jsxs(p,{children:[e.jsx(d,{children:e.jsx(y,{icon:"monitorHeart"})}),e.jsx(d,{children:"Instances"}),e.jsx(d,{children:"Name"}),e.jsx(d,{children:"Plugin Definition"}),e.jsx(d,{children:"Message"}),e.jsx(d,{children:"Actions"})]}),e.jsx(k,{displayErrorMessage:!0,fallbackRender:M({colspan:m}),resetKeys:[s],children:e.jsx(u.Suspense,{fallback:e.jsx(P,{colSpan:m}),children:e.jsx(B,{pluginPresetsPromise:s,colSpan:m})})})]})}),F=()=>{const{pluginPresetsPromise:s}=w({from:"/admin/plugin-presets"});return e.jsxs(e.Fragment,{children:[e.jsxs(f,{px:!1,py:!0,children:[e.jsx(D,{children:"Plugin Presets Overview"}),e.jsx("p",{children:"Manage and monitor plugin preset configurations across all clusters"})]}),e.jsx(f,{px:!1,py:!0,children:e.jsx(A,{pluginPresetsPromise:s})})]})},O=F;export{O as component};
