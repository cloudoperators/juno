import{A as j,j as e,P as h,o as m,n as u,c as p,V as f,f as v,a as S,l as C,L as y,M as P,y as b,O as I,E as L,m as V}from"./App-CiZv55E8.js";import{r as a}from"./index-qATHN1PZ.js";import{I as $,u as E}from"./IssueCountsPerSeverityLevel-Cll3cfm4.js";import{S as R}from"./index-ttXKVyF5.js";import{S as D}from"./SectionContentHeading-C1X9b8fV.js";const K=({servicePromise:t})=>{const{data:i}=a.use(t),s=j(i).services[0];return e.jsxs(e.Fragment,{children:[e.jsxs(D,{children:["Service ",s.name]}),e.jsxs(h,{columns:2,gridColumnTemplate:"20% auto",className:"mb-6",children:[e.jsxs(m,{children:[e.jsx(u,{children:"Details"}),e.jsx(p,{children:e.jsxs(f,{gap:"1",direction:"horizontal",wrap:!0,children:[e.jsx(v,{pillKey:"service",pillKeyLabel:"service",pillValue:s.name,pillValueLabel:s.name}),s.serviceDetails?.supportGroups?.map(r=>e.jsx(v,{pillKey:"support_group",pillKeyLabel:"support_group",pillValue:r,pillValueLabel:r},r))]})})]}),e.jsxs(m,{children:[e.jsx(u,{children:"Vulnerabilities Counts"}),e.jsx(p,{children:e.jsx($,{counts:s.issuesCount})})]})]})]})},N=()=>{const t=S(),{queryClient:i,apiClient:s}=E({from:"/services/$service"}),{servicePromise:r}=C({from:"/services/$service"}),{service:o}=y({from:"/services/$service"}),[n,x]=a.useState(void 0),[l,d]=a.useState(void 0),g=P()({to:"/services/$service/$image"});return a.useEffect(()=>{const c=b({queryClient:i,apiClient:s,filter:{service:[o]},after:n});d(c)},[n,o,i,s]),g?e.jsx(I,{}):e.jsxs(e.Fragment,{children:[e.jsx(L,{displayErrorMessage:!0,children:e.jsx(a.Suspense,{fallback:e.jsx(V,{className:"mt-4"}),children:e.jsx(K,{servicePromise:r})})}),l&&e.jsx(R,{imagesPromise:l,onImageItemClick:c=>{t({to:"/services/$service/$image",params:{service:o,image:c.repository}})},goToPage:x})]})},T=N;export{T as component};
