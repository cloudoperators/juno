import{A as j,j as e,$ as h,i as m,o as u,c as p,V as f,E as v,b as S,p as C,K as y,M as $,y as b,O as I,n as P,m as E}from"./App-BdHY3hMg.js";import{r as a}from"./index-D-s5C_Be.js";import{I as V,u as L}from"./IssueCountsPerSeverityLevel-DBoxuEGH.js";import{S as R}from"./index-CSveaO7m.js";import{S as D}from"./SectionContentHeading-C25jF_oj.js";const K=({servicePromise:t})=>{const{data:i}=a.use(t),s=j(i).services[0];return e.jsxs(e.Fragment,{children:[e.jsxs(D,{children:["Service ",s.name]}),e.jsxs(h,{columns:2,gridColumnTemplate:"20% auto",className:"mb-6",children:[e.jsxs(m,{children:[e.jsx(u,{children:"Details"}),e.jsx(p,{children:e.jsxs(f,{gap:"1",direction:"horizontal",wrap:!0,children:[e.jsx(v,{pillKey:"service",pillKeyLabel:"service",pillValue:s.name,pillValueLabel:s.name}),s.serviceDetails?.supportGroups?.map(r=>e.jsx(v,{pillKey:"support_group",pillKeyLabel:"support_group",pillValue:r,pillValueLabel:r},r))]})})]}),e.jsxs(m,{children:[e.jsx(u,{children:"Vulnerabilities Counts"}),e.jsx(p,{children:e.jsx(V,{counts:s.issuesCount})})]})]})]})},N=()=>{const t=S(),{queryClient:i,apiClient:s}=L({from:"/services/$service"}),{servicePromise:r}=C({from:"/services/$service"}),{service:o}=y({from:"/services/$service"}),[n,x]=a.useState(void 0),[l,d]=a.useState(void 0),g=$()({to:"/services/$service/$image"});return a.useEffect(()=>{const c=b({queryClient:i,apiClient:s,filter:{service:[o]},after:n});d(c)},[n,o,i,s]),g?e.jsx(I,{}):e.jsxs(e.Fragment,{children:[e.jsx(P,{displayErrorMessage:!0,children:e.jsx(a.Suspense,{fallback:e.jsx(E,{className:"mt-4"}),children:e.jsx(K,{servicePromise:r})})}),l&&e.jsx(R,{imagesPromise:l,onImageItemClick:c=>{t({to:"/services/$service/$image",params:{service:o,image:c.repository}})},goToPage:x})]})},T=N;export{T as component};
