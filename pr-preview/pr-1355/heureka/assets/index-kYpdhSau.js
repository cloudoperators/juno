import{F as b,j as e,V as i,G as x,H as p,J as v,I as h,Z as V,C as E,E as k,Y as N,K as f}from"./App-CAKAOOdH.js";import{a as d}from"./index-2JnHHWUn.js";const y=({filtersPromise:r,onChange:a})=>{const[l,n]=d.useState(""),[o,t]=d.useState(""),c=d.use(r),m=c.find(s=>s.filterName===l)?.values?.filter(s=>s),F=d.useCallback(s=>{t(s),!b(l)&&!b(s)&&a({name:l,value:s}),setTimeout(()=>{t("")},0)},[l,t,a]);return e.jsx(i,{alignment:"center",gap:"8",children:e.jsxs(x,{children:[e.jsx(p,{className:"filter-label-select w-64 mb-0",name:"filter","data-testid":"select-filterValue",label:"Filter",value:l,onChange:s=>{n(String(s))},children:c?.map(({displayName:s,filterName:u})=>e.jsx(v,{value:u,label:s,"data-testid":u},u))}),e.jsx(h,{className:"filter-value-select w-64 bg-theme-background-lvl-0",name:"filterValue","data-testid":"combobox-filterValue",value:o,disabled:!l,onChange:F,children:m?.map(s=>e.jsx(V,{value:s,label:s,"data-testid":s},s))})]})})},g=({selectedFilters:r,onDelete:a})=>e.jsx(i,{gap:"2",wrap:!0,children:r?.map(l=>e.jsx(E,{closeable:!0,pillKey:l.name,pillValue:l.value,onClose:()=>a(l)},`${l.name}:${l.value}`))}),j=({loading:r,error:a})=>e.jsx(i,{alignment:"center",gap:"8",children:e.jsxs(x,{children:[e.jsx(p,{loading:r,className:"filter-label-select w-64 mb-0",name:"filter","data-testid":"select-filterValue",label:"Filter",errortext:a?a.message||"Error loading filters":void 0}),e.jsx(h,{disabled:!0,className:"filter-value-select w-64 bg-theme-background-lvl-0",name:"filterValue","data-testid":"combobox-filterValue"})]})}),D=({filtersPromise:r,filterSettings:a,onFilterChange:l,searchInputPlaceholder:n})=>{const o=d.useCallback(t=>{l({...a,selectedFilters:a.selectedFilters?.filter(c=>!(c.name===t.name&&c.value===t.value))})},[a,l]);return e.jsxs(i,{direction:"vertical",gap:"4",className:"bg-theme-background-lvl-1 py-2 px-4 ",children:[e.jsxs(i,{alignment:"start",gap:"4",children:[e.jsx(x,{children:e.jsx(k,{displayErrorMessage:!0,fallbackRender:t=>e.jsx(j,{...t}),children:e.jsx(d.Suspense,{fallback:e.jsx(j,{loading:!0}),children:e.jsx(y,{filtersPromise:r,onChange:t=>{a.selectedFilters?.some(m=>m.name===t.name&&m.value===t.value)||l({...a,selectedFilters:[...a.selectedFilters||[],t]})}})})})}),e.jsx(N,{label:"Clear all",className:"ml-4",onClick:()=>l({...a,selectedFilters:[]}),variant:"subdued"}),e.jsx(f,{placeholder:n||"search term for",className:"w-96 ml-auto","data-testid":"searchbar",value:a.searchTerm,onSearch:t=>{l({...a,searchTerm:t})},onClear:()=>l({...a,searchTerm:""})})]}),a.selectedFilters&&a.selectedFilters.length>0&&e.jsx(g,{selectedFilters:a.selectedFilters,onDelete:o})]})};export{D as F};
