import{j as e,i as O,V as S,T as dt,l as ut,q as ht,p as mt,u as M,r as Me,s as se,t as X,b as K,v as Y,x as ne,A as U,y as Ve,B as pt,g as Z,C as xt,D as He,w as re,d as Ue,a as Q,Y as ae,E as qe,F as ge,G as We,$ as fe,H as I,I as be,S as ze,R as we,K as Ne,L as Ge,P as ie,o as L,n as N,c as v,Q as gt,M as Fe,N as Ae,z as je,m as J,O as Ye,U as ft,W as bt,X as jt,Z as vt,_ as yt,a0 as Ee,a1 as Te,a2 as St,a3 as wt,a4 as Nt,a5 as Ft,a6 as At,a7 as Et,a8 as Tt,J as Ct,a9 as Lt,aa as kt,ab as _t,ac as It,ad as Dt,ae as $t,h as Pt,af as Rt,ag as Ce,ah as Ke,ai as Bt,aj as he,ak as Le,al as me,am as Ot,an as Mt,ao as Vt,ap as Ht,aq as Ut,ar as qt,as as ke,at as Wt,au as _e,av as zt}from"./App-DdADuUuj.js";import{r as y,R as H,g as Gt}from"./index-DmEPtcYC.js";import{s as Yt,l as Kt,g as Qt,a as Qe,p as le,d as Xe,E as Xt,R as Zt,u as oe,C as Jt,F as es}from"./FirefoxCorsWarning-DGW2WEdi.js";import"./index-DrQIQp5F.js";const ts=({severity:t},s)=>{const r=()=>{switch(t){case"critical":return"text-theme-danger";case"warning":return"text-theme-warning";case"info":return"text-theme-info"}};return e.jsx(e.Fragment,{children:t==="critical"?e.jsx(O,{ref:s,icon:"danger",color:r()}):t?.match(/^(warning|info)$/)?e.jsx(O,{icon:t,color:r(),ref:s}):e.jsx(O,{ref:s,icon:"errorOutline"})})},Ze=y.forwardRef(ts),Je=({startTimestamp:t})=>{const s=new Date(t),a=(new Date().getTime()-s.getTime())/(1e3*60*60*24),i=s.toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"}),d=s.toLocaleString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZoneName:"short"});return e.jsxs(S,{direction:"vertical",gap:"1",children:[e.jsx("div",{children:i}),e.jsx("div",{children:d}),a>7&&e.jsxs(dt,{variant:"warning",triggerEvent:"hover",children:[e.jsx(ut,{asChild:!0,children:e.jsx(O,{icon:"warning",color:"text-theme-warning"})}),e.jsx(ht,{children:`Alert has been firing for ${Math.round(a)} days`})]})]})},b=1,et=2,tt=4,T=8,ve=16,ee=32,D=64,ye={a:{content:b|T,self:!1,type:b|T|ee|D},address:{invalid:["h1","h2","h3","h4","h5","h6","address","article","aside","section","div","header","footer"],self:!1},audio:{children:["track","source"]},br:{type:b|T,void:!0},body:{content:b|et|tt|T|ve|ee|D},button:{content:T,type:b|T|ee|D},caption:{content:b,parent:["table"]},col:{parent:["colgroup"],void:!0},colgroup:{children:["col"],parent:["table"]},details:{children:["summary"],type:b|ee|D},dd:{content:b,parent:["dl"]},dl:{children:["dt","dd"],type:b},dt:{content:b,invalid:["footer","header"],parent:["dl"]},figcaption:{content:b,parent:["figure"]},footer:{invalid:["footer","header"]},header:{invalid:["footer","header"]},hr:{type:b,void:!0},img:{void:!0},li:{content:b,parent:["ul","ol","menu"]},main:{self:!1},ol:{children:["li"],type:b},picture:{children:["source","img"],type:b|T|ve},rb:{parent:["ruby","rtc"]},rp:{parent:["ruby","rtc"]},rt:{content:T,parent:["ruby","rtc"]},rtc:{content:T,parent:["ruby"]},ruby:{children:["rb","rp","rt","rtc"]},source:{parent:["audio","video","picture"],void:!0},summary:{content:T,parent:["details"]},table:{children:["caption","colgroup","thead","tbody","tfoot","tr"],type:b},tbody:{parent:["table"],children:["tr"]},td:{content:b,parent:["tr"]},tfoot:{parent:["table"],children:["tr"]},th:{content:b,parent:["tr"]},thead:{parent:["table"],children:["tr"]},tr:{parent:["table","tbody","thead","tfoot"],children:["th","td"]},track:{parent:["audio","video"],void:!0},ul:{children:["li"],type:b},video:{children:["track","source"]},wbr:{type:b|T,void:!0}};function q(t){return s=>{ye[s]={...t,...ye[s]}}}["address","main","div","figure","p","pre"].forEach(q({content:b,type:b|D}));["abbr","b","bdi","bdo","cite","code","data","dfn","em","i","kbd","mark","q","ruby","samp","strong","sub","sup","time","u","var"].forEach(q({content:T,type:b|T|D}));["p","pre"].forEach(q({content:T,type:b|D}));["s","small","span","del","ins"].forEach(q({content:T,type:b|T}));["article","aside","footer","header","nav","section","blockquote"].forEach(q({content:b,type:b|et|D}));["h1","h2","h3","h4","h5","h6"].forEach(q({content:T,type:b|tt|D}));["audio","canvas","iframe","img","video"].forEach(q({type:b|T|ve|D}));const Se=Object.freeze(ye),ss=["applet","base","body","command","embed","frame","frameset","head","html","link","meta","noscript","object","script","style","title"],ns=Object.keys(Se).filter(t=>t!=="canvas"&&t!=="iframe"),j=1,rs=2,G=3,z=4,st=5,Ie=Object.freeze({alt:j,cite:j,class:j,colspan:G,controls:z,datetime:j,default:z,disabled:z,dir:j,height:j,href:j,id:j,kind:j,label:j,lang:j,loading:j,loop:z,media:j,muted:z,poster:j,rel:j,role:j,rowspan:G,scope:j,sizes:j,span:G,start:G,style:st,src:j,srclang:j,srcset:j,tabindex:j,target:j,title:j,type:j,width:j}),as=Object.freeze({class:"className",colspan:"colSpan",datetime:"dateTime",rowspan:"rowSpan",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex"});function te(){return te=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},te.apply(this,arguments)}function nt({attributes:t={},className:s,children:r=null,selfClose:n=!1,tagName:a}){const i=a;return n?H.createElement(i,te({className:s},t)):H.createElement(i,te({className:s},t),r)}class is{attribute(s,r){return r}node(s,r){return r}}var pe,De;function ls(){if(De)return pe;De=1;var t=/["'&<>]/;pe=s;function s(r){var n=""+r,a=t.exec(n);if(!a)return n;var i,d="",c=0,h=0;for(c=a.index;c<n.length;c++){switch(n.charCodeAt(c)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#39;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}h!==c&&(d+=n.substring(h,c)),h=c+1,d+=i}return h!==c?d+n.substring(h,c):d}return pe}var os=ls();const cs=Gt(os);function B(t,s,r){return s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}const ds=/(url|image|image-set)\(/i;class us extends is{attribute(s,r){return s==="style"&&Object.keys(r).forEach(n=>{String(r[n]).match(ds)&&delete r[n]}),r}}const $e=1,hs=3,ms=/^<(!doctype|(html|head|body)(\s|>))/i,ps=/^(aria-|data-|\w+:)/iu,xs=/{{{(\w+)\/?}}}/;function gs(){if(!(typeof window>"u"||typeof document>"u"))return document.implementation.createHTMLDocument("Interweave")}class fs{constructor(s,r={},n=[],a=[]){var i;B(this,"allowed",void 0),B(this,"banned",void 0),B(this,"blocked",void 0),B(this,"container",void 0),B(this,"content",[]),B(this,"props",void 0),B(this,"matchers",void 0),B(this,"filters",void 0),B(this,"keyIndex",void 0),this.props=r,this.matchers=n,this.filters=[...a,new us],this.keyIndex=-1,this.container=this.createContainer(s||""),this.allowed=new Set((i=r.allowList)!==null&&i!==void 0?i:ns),this.banned=new Set(ss),this.blocked=new Set(r.blockList)}applyAttributeFilters(s,r){return this.filters.reduce((n,a)=>n!==null&&typeof a.attribute=="function"?a.attribute(s,n):n,r)}applyNodeFilters(s,r){return this.filters.reduce((n,a)=>n!==null&&typeof a.node=="function"?a.node(s,n):n,r)}applyMatchers(s,r){const n={},{props:a}=this;let i=s,d=0,c=null;return this.matchers.forEach(h=>{const m=h.asTag().toLowerCase(),l=this.getTagConfig(m);if(a[h.inverseName]||!this.isTagAllowed(m)||!this.canRenderChild(r,l))return;let o="";for(;i&&(c=h.match(i));){const{index:u,length:f,match:p,valid:E,void:_,...x}=c,k=h.propName+String(d);u>0&&(o+=i.slice(0,u)),E?(o+=_?`{{{${k}/}}}`:`{{{${k}}}}${p}{{{/${k}}}}`,this.keyIndex+=1,d+=1,n[k]={children:p,matcher:h,props:{...a,...x,key:this.keyIndex}}):o+=p,h.greedy?(i=o+i.slice(u+f),o=""):i=i.slice(u+(f||p.length))}h.greedy||(i=o+i)}),d===0?s:this.replaceTokens(i,n)}canRenderChild(s,r){return!s.tagName||!r.tagName||s.void?!1:s.children.length>0?s.children.includes(r.tagName):s.invalid.length>0&&s.invalid.includes(r.tagName)?!1:r.parent.length>0?r.parent.includes(s.tagName):!s.self&&s.tagName===r.tagName?!1:!!(s&&s.content&r.type)}convertLineBreaks(s){const{noHtml:r,disableLineBreaks:n}=this.props;if(r||n||s.match(/<((?:\/[ a-z]+)|(?:[ a-z]+\/))>/gi))return s;let a=s.replace(/\r\n/g,`
`);return a=a.replace(/\n{3,}/g,`


`),a=a.replace(/\n/g,"<br/>"),a}createContainer(s){var r;const a=(typeof global<"u"&&global.INTERWEAVE_SSR_POLYFILL||gs)();if(!a)return;const i=(r=this.props.containerTagName)!==null&&r!==void 0?r:"body",d=i==="body"||i==="fragment"?a.body:a.createElement(i);return s.match(ms)||(d.innerHTML=this.convertLineBreaks(this.props.escapeHtml?cs(s):s)),d}extractAttributes(s){const{allowAttributes:r}=this.props,n={};let a=0;return s.nodeType!==$e||!s.attributes||([...s.attributes].forEach(i=>{const{name:d,value:c}=i,h=d.toLowerCase(),m=Ie[h]||Ie[d];if(!this.isSafe(s)||!h.match(ps)&&(!r&&(!m||m===rs)||h.startsWith("on")||c.replace(/(\s|\0|&#x0([9AD]);)/,"").match(/(javascript|vbscript|livescript|xss):/i)))return;let l=h==="style"?this.extractStyleAttribute(s):c;m===z?l=!0:m===G?l=Number.parseFloat(String(l)):m!==st&&(l=String(l)),n[as[h]||h]=this.applyAttributeFilters(h,l),a+=1}),a===0)?null:n}extractStyleAttribute(s){const r={};return Array.from(s.style).forEach(n=>{const a=s.style[n];(typeof a=="string"||typeof a=="number")&&(r[n.replace(/-([a-z])/g,(i,d)=>String(d).toUpperCase())]=a)}),r}getTagConfig(s){const r={children:[],content:0,invalid:[],parent:[],self:!0,tagName:"",type:0,void:!1};return Se[s]?{...r,...Se[s],tagName:s}:r}isSafe(s){if(typeof HTMLAnchorElement<"u"&&s instanceof HTMLAnchorElement){const r=s.getAttribute("href");if(r!=null&&r.startsWith("#"))return!0;const n=s.protocol.toLowerCase();return n===":"||n==="http:"||n==="https:"||n==="mailto:"||n==="tel:"}return!0}isTagAllowed(s){return this.banned.has(s)||this.blocked.has(s)?!1:this.props.allowElements||this.allowed.has(s)}parse(){return this.container?this.parseNode(this.container,this.getTagConfig(this.container.nodeName.toLowerCase())):[]}parseNode(s,r){const{noHtml:n,noHtmlExceptMatchers:a,allowElements:i,transform:d,transformOnlyAllowList:c}=this.props;let h=[],m="";return[...s.childNodes].forEach(l=>{if(l.nodeType===$e){const u=l.nodeName.toLowerCase(),f=this.getTagConfig(u);m&&(h.push(m),m="");const p=this.applyNodeFilters(u,l);if(!p)return;let E;if(d&&!(c&&!this.isTagAllowed(u))){this.keyIndex+=1;const _=this.keyIndex;E=this.parseNode(p,f);const x=d(p,E,f);if(x===null)return;if(typeof x<"u"){h.push(H.cloneElement(x,{key:_}));return}this.keyIndex=_-1}if(this.banned.has(u))return;if(!(n||a&&u!=="br")&&this.isTagAllowed(u)&&(i||this.canRenderChild(r,f))){var o;this.keyIndex+=1;const _=this.extractAttributes(p),x={tagName:u};_&&(x.attributes=_),f.void&&(x.selfClose=f.void),h.push(H.createElement(nt,{...x,key:this.keyIndex},(o=E)!==null&&o!==void 0?o:this.parseNode(p,f)))}else h=[...h,...this.parseNode(p,f.tagName?f:r)]}else if(l.nodeType===hs){const u=n&&!a?l.textContent:this.applyMatchers(l.textContent||"",r);Array.isArray(u)?h=[...h,...u]:m+=u}}),m&&h.push(m),h}replaceTokens(s,r){if(!s.includes("{{{"))return s;const n=[];let a=s,i=null;for(;i=a.match(xs);){const[d,c]=i,h=i.index,m=d.includes("/");h>0&&(n.push(a.slice(0,h)),a=a.slice(h));const{children:l,matcher:o,props:u}=r[c];let f;if(m)f=d.length,n.push(o.createElement(l,u));else{const p=a.match(new RegExp(`{{{/${c}}}}`));f=p.index+p[0].length,n.push(o.createElement(this.replaceTokens(a.slice(d.length,p.index),r),u))}a=a.slice(f)}return a.length>0&&n.push(a),n.length===0?"":n.length===1&&typeof n[0]=="string"?n[0]:n}}function bs(t){var s;const{attributes:r,className:n,containerTagName:a,content:i,emptyContent:d,parsedContent:c,tagName:h,noWrap:m}=t,l=(s=a??h)!==null&&s!==void 0?s:"span",o=l==="fragment"?!0:m;let u;if(c)u=c;else{const f=new fs(i??"",t).parse();f.length>0&&(u=f)}return u||(u=d),o?H.createElement(H.Fragment,null,u):H.createElement(nt,{attributes:r,className:n,tagName:l},u)}const ce=({description:t,subdued:s})=>e.jsx(bs,{content:mt(t?.replace(/`([^`]+)`/g,"<code class='inline-code'>$1</code>")),tagName:"div",className:s?"text-theme-light":""}),rt=({alert:t,className:s})=>e.jsxs(S,{gap:"3",className:s,children:[t?.generatorURL&&e.jsx("a",{className:"underline",href:t?.generatorURL,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"Prometheus"}),t?.labels?.playbook&&e.jsx("a",{className:"underline",href:t.labels.playbook.startsWith("http")?t.labels.playbook:`https://operations.global.cloud.sap/${t.labels.playbook}`,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"Playbook"}),t?.labels?.kibana&&e.jsx("a",{className:"underline",href:`https://logs.${t?.labels?.region}.cloud.sap/${t?.labels?.kibana}`,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"Logs"}),t?.labels?.dashboard&&e.jsx("a",{className:"underline",href:`https://plutono.${t?.labels?.region}.cloud.sap/d/${t?.labels?.dashboard}`,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"Plutono"}),t?.labels?.spc&&e.jsx("a",{className:"underline",href:`https://spc.ondemand.com/ticket_create/?${t?.labels?.spc}`,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"SPC Ticket"}),t?.labels?.sentry&&e.jsx("a",{className:"underline",href:`https://sentry.${t?.labels?.region}.cloud.sap/monsoon/${t?.labels?.sentry}`,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"Sentry"}),t?.labels?.cloudops&&e.jsx("a",{className:"underline",href:`https://dashboard.${t?.labels?.region}.cloud.sap/ccadmin/cloud_admin/cloudops#/universal-search/${t?.labels?.cloudops}`,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"CloudOps"}),t?.labels?.report&&e.jsx("a",{className:"underline",href:`https://dashboard.${t?.labels?.region}.cloud.sap/${t?.labels?.report}`,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"Report"}),t?.annotations?.mail_subject&&e.jsx("a",{className:"underline",href:`mailto:?subject=${encodeURIComponent(t?.annotations?.mail_subject)}&body=${encodeURIComponent(t?.annotations?.mail_body)}`,rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"Email Owner"})]}),at=({alert:t,showAll:s})=>{const r=M(),n=s?Object.keys(t?.labels):Me(),a=se(),{addActiveFilter:i,removeActiveFilter:d}=X(),c=(m,l,o)=>{a?.[l]?.includes(o)?h(m,l,o):(m.stopPropagation(),i(l,o),r({to:"/alerts",search:u=>ne({...u},`${U}${l}`,o)}))},h=(m,l,o)=>{m.stopPropagation(),d(l,o),r({to:"/alerts",search:u=>Y({...u},`${U}${l}`,o)})};return e.jsx(S,{gap:"2",alignment:"start",wrap:!0,children:n.map(m=>{const l=t?.labels?.[m],o=a?.[m]?.includes(l);return l&&e.jsx(K,{pillKey:m,pillValue:l,onClick:(u,f)=>c(u,m,l),closeable:o,onClose:(u,f)=>h(u,m,l)},m)})})},Pe=({matchers:t,onClickCallback:s,closeable:r})=>{const n=y.useMemo(()=>!t||t?.length<=0?[]:t.sort((i,d)=>i.configurable-d.configurable),[t]),a=i=>{const d={onClick:()=>i.configurable&&s(i),onClose:()=>s(i)};return i.configurable?d:{}};return e.jsx(S,{gap:"2",alignment:"start",wrap:!0,children:n.length>0?t.map(i=>y.createElement(K,{className:i.configurable?"opacity-100":"opacity-70",closeable:i.configurable&&r,...a(i),key:i.name,pillKey:i.name,pillValue:i.value})):e.jsx("span",{className:"text-theme-light",children:"No excluded matchers found"})})},js=t=>`
      transition-all
      ease-out
      max-h-0
      overflow-y-auto
			${t?"duration-1000 max-h-[34rem]":"duration-300"}
		`.replace(/\n/g," ").replace(/\s+/g," "),vs=({matchers:t,onMatchersChanged:s})=>{const[r,n]=y.useState(!1),a=i=>{i.preventDefault(),n(!r)};return e.jsx(e.Fragment,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"advance-link mt-4",children:e.jsx("a",{href:"#",rel:"noopener noreferrer",onClick:a,children:e.jsxs(S,{alignment:"center",children:["Advanced options",e.jsx(O,{color:"jn-global-text",icon:r?"expandLess":"expandMore"})]})})}),e.jsx("div",{className:"advanced-area overflow-hidden",children:e.jsxs("div",{className:js(r),children:[e.jsx("p",{className:"mt-2",children:"Matchers attached to this silence"}),e.jsx("div",{className:"mt-2",children:e.jsx(Pe,{matchers:t.filter(i=>!i.excluded),onClickCallback:s,closeable:!0})}),e.jsx("p",{className:"mt-4",children:"The default silence configuration excludes the following matchers because they typically make the silence too specific which can lead to alerts bypassing the silence unexpectedly. If you do want to include any of these matchers in the silence configuration, click on them to add them. If you change your mind, click again to remove."}),e.jsx("div",{className:"my-2",children:e.jsx(Pe,{matchers:t.filter(i=>i.excluded),onClickCallback:s,closeable:!1})})]})})]})})},ys=t=>{const n={};return t?.comment?.length<3&&(n.comment||(n.comment=[]),n.comment.push("Please enter at least 3 characters")),t?.createdBy?.length<1&&(n.createdBy||(n.createdBy=[]),n.createdBy.push("Please enter a name")),n},Re=t=>t.map((s,r)=>e.jsx("span",{className:"block text-theme-danger ",children:s},r)),Be={duration:2,comment:""},it=({alert:t,size:s,variant:r})=>{const n=Ve(),a=pt(),{getMappingSilences:i,setSilences:d}=Z(),c=xt(),h=He(),[m,l]=y.useState(!1),[o,u]=y.useState(Be),[f,p]=y.useState(null),[E,_]=y.useState({}),{addMessage:x}=re(),k=Ue(),$=g=>{const C=new Date(g),R=C.toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"}),V=C.toLocaleString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZoneName:"short"});return`${R} ${V}`},W=g=>`${g}h`;y.useLayoutEffect(()=>{u({...o,...Be,createdBy:h||"",matchers:Yt(t?.labels,a,c)}),p(Kt(i(t))),_({})},[m]);const de=y.useMemo(()=>{const g=Qt(f??0);return g.firstNotCovered&&u({...o,duration:g.firstNotCovered.value}),g.items},[f]),{mutate:w}=Qe("createSilences",{onMutate:g=>{n.cancelQueries({queryKey:["silences"]});const C={...g.silence,status:{state:Q.SILENCE_ACTIVE}},R=[...k,C];d({items:R}),l(!1)},onSuccess:g=>{x({variant:"success",text:`A silence object with id ${g?.silenceID} was created successfully. Please note that it may
            take up to 5 minutes for the alert to show up as silenced.`})},onError:g=>{x({variant:"error",text:le(g)})},onSettled:()=>{n.invalidateQueries({queryKey:["silences"]})}}),F=Xe(()=>{const g=ys(o);if(_(g),Object.keys(g).length>0)return;const C={...o};C.matchers?.length>0&&(C.matchers=C.matchers.filter(ue=>!ue.excluded).map(({...ue})=>ue));const R=new Date,V=new Date;V.setHours(V.getHours()+Number.parseInt(C.duration||4));const ct={...C,status:{state:Q.SILENCE_ACTIVE},startsAt:R.toISOString(),endsAt:V.toISOString(),alertFingerprint:t.fingerprint};w({silence:ct})},200),A=({key:g,value:C})=>{C&&u({...o,[g]:C})},P=g=>{const C=o.matchers.findIndex(V=>V.name==g.name),R=o.matchers.slice();C>=0&&(R[C]={...R[C],excluded:!g.excluded}),u({...o,matchers:R})};return e.jsxs(e.Fragment,{children:[e.jsx(ae,{size:s,variant:r,onClick:g=>{g.stopPropagation(),l(!m)},children:"Silence"}),m&&e.jsxs(qe,{title:"New Silence for",size:"large",open:!0,confirmButtonLabel:"Save",onCancel:()=>l(!1),onConfirm:F,children:[f&&e.jsxs(ge,{className:"mb-6",variant:"info",children:["There is already a silence for this alert that expires at",e.jsxs("b",{children:[" ",$(f)]})]}),e.jsx("span",{className:"text-lg font-bold",children:t?.labels?.alertname}),e.jsx(We,{className:"mt-2",children:e.jsx(ce,{description:t.annotations?.description})}),e.jsxs(e.Fragment,{children:[e.jsx(vs,{matchers:o.matchers,onMatchersChanged:P}),e.jsxs(fe,{className:"mt-6",children:[e.jsx(I,{children:e.jsx(be,{required:!0,label:"Silenced by",value:o.createdBy,onChange:g=>A({key:"createdBy",value:g.target.value}),errortext:E.createdBy&&Re(E.createdBy),disabled:!!h})}),e.jsx(I,{children:e.jsx(ze,{className:"h-20",label:"Description",value:o.comment,onChange:g=>A({key:"comment",value:g.target.value}),errortext:E.comment&&Re(E.comment),required:!0})}),e.jsx(I,{children:e.jsx(we,{required:!0,label:"Duration",value:o.duration,onChange:g=>A({key:"duration",value:g}),children:de?.map(g=>e.jsx(Ne,{label:W(g.value),value:String(g.value)},g.value))})})]})]})]})]})},Ss=(t,s)=>{if(!t)return null;const r=t.map(a=>s.find(i=>i.fingerprint===a));return r[0]?r.sort((a,i)=>new Date(i.endsAt).getTime()-new Date(a.endsAt).getTime())[0]:null},lt=({alert:t})=>{if(!t)return null;const s=Ge(),{getMappingSilences:r}=Z(),n=r(t).sort((d,c)=>new Date(c?.endsAt).getTime()-new Date(d?.endsAt).getTime()),a=n.length>0?n[0]:null,i=Ss(t?.status?.inhibitedBy,s);return e.jsxs("div",{className:"cursor-default",children:[t&&e.jsx("span",{children:t?.status?.state}),i&&e.jsx("div",{className:"text-xs mt-2",children:e.jsxs(S,{direction:"vertical",children:[e.jsx("span",{children:"Inhibited by:"}),e.jsx("span",{children:i?.annotations?.summary})]})}),a&&e.jsx("div",{className:"text-xs mt-2",children:e.jsxs(S,{direction:"vertical",children:[e.jsx("span",{children:"Silenced by:"}),e.jsx("span",{children:a?.createdBy||a.id},a.id)]})})]})},ot=({region:t,cluster:s})=>e.jsxs(e.Fragment,{children:[t,t!==s&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("span",{className:"text-theme-light",children:s})]})]}),ws=t=>t===Q.SILENCE_ACTIVE?"info":"default",Ns=({alert:t})=>{const{getSilencesForAlert:s}=Z(),r=s(t),n=a=>new Date(a).toLocaleString("en-GB",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1});return e.jsx(e.Fragment,{children:r.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold mb-2 mt-8",children:"Silences"}),e.jsxs(ie,{columns:6,minContentColumns:[5],children:[e.jsxs(L,{children:[e.jsx(N,{children:"Status"}),e.jsx(N,{children:"Silence start"}),e.jsx(N,{children:"Silence end"}),e.jsx(N,{children:"Created by"}),e.jsx(N,{children:"Comment"}),e.jsx(N,{children:"Action"})]}),r.map(a=>e.jsxs(L,{children:[e.jsx(v,{children:e.jsx("div",{children:e.jsx(gt,{variant:ws(a?.status?.state),children:a.status?.state})})}),e.jsx(v,{children:n(a.startsAt)}),e.jsx(v,{children:n(a.endsAt)}),e.jsx(v,{children:a.createdBy}),e.jsx(v,{className:"break-all",children:a.comment}),e.jsx(v,{children:a?.status?.state===Q.SILENCE_ACTIVE?e.jsx(Xt,{silence:a,fingerprint:t.fingerprint}):e.jsx(Zt,{silence:a,fingerprint:t.fingerprint})})]},a.id))]})]})})},Fs=({alert:t})=>{const s=M(),{getAlertByFingerprint:r}=Fe(),{setShowDetailsFor:n}=Ae(),{setSilences:a}=Z(),{addMessage:i}=re(),{error:d,data:c,isLoading:h}=oe("silences");return y.useEffect(()=>{c&&a({items:c?.silences})},[c]),d&&i({variant:"error",text:le(d)}),e.jsxs(je,{py:!0,px:!1,children:[h?e.jsxs(S,{gap:"2",children:[e.jsx("span",{children:"Loading"}),e.jsx(J,{variant:"primary"})]}):e.jsx(Ns,{alert:t}),t.status.inhibitedBy.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold mb-2 mt-8",children:"Inhibited by"}),e.jsxs(ie,{columns:2,children:[e.jsxs(L,{children:[e.jsx(N,{children:"Alert"}),e.jsx(N,{})]}),t.status.inhibitedBy.map(m=>e.jsxs(L,{children:[e.jsxs(v,{children:[e.jsx("div",{children:r(m)?.annotations?.summary}),e.jsx(ce,{description:r(m)?.annotations?.description})]}),e.jsx(v,{children:e.jsx(ae,{size:"small",onClick:()=>{n(m),s({to:"/",search:l=>({...l,showDetailsFor:m})})},icon:"exitToApp",children:"Go to details"})})]},m))]})]})]})},As=()=>{const t=M(),s=Ye(),{setShowDetailsFor:r}=Ae(),{getAlertByFingerprint:n}=Fe(),[a,i]=y.useState(void 0),d=Ge(),c=()=>{r(null),t({to:"/alerts",search:m=>{const{showDetailsFor:l,...o}=m;return{...o}}})},{isLoading:h}=oe("alerts");return y.useEffect(()=>{d?.length>0&&i(n(s))},[d,s]),e.jsxs(ft,{heading:e.jsxs(S,{gap:"2",children:[e.jsx(Ze,{severity:a?.labels?.severity}),e.jsx("span",{children:a?.annotations?.summary||"Not found"})]}),opened:!!s,onClose:c,size:"large",children:[e.jsxs(bt,{children:[e.jsx(jt,{className:"pb-6 absolute"}),e.jsxs(vt,{children:[e.jsxs(yt,{children:[e.jsx(Ee,{children:"Details"}),e.jsx(Ee,{children:"Raw Data"})]}),e.jsx(Te,{children:e.jsx(je,{px:!1,py:!0,children:a?e.jsxs(e.Fragment,{children:[e.jsxs(ie,{columns:2,children:[e.jsxs(L,{children:[e.jsx(N,{children:"Status"}),e.jsx(v,{children:e.jsx(lt,{alert:a})})]}),e.jsxs(L,{children:[e.jsx(N,{children:"Firing Since"}),e.jsx(v,{children:e.jsx(Je,{startTimestamp:a?.startsAt})})]}),e.jsxs(L,{children:[e.jsx(N,{children:"Service"}),e.jsx(v,{children:a?.labels?.service})]}),e.jsxs(L,{children:[e.jsx(N,{children:"Region"}),e.jsx(v,{children:e.jsx(ot,{region:a?.labels?.region,cluster:a?.labels?.cluster})})]}),e.jsxs(L,{children:[e.jsx(N,{children:"Description"}),e.jsx(v,{children:e.jsx(ce,{description:a?.annotations?.description})})]}),e.jsxs(L,{children:[e.jsx(N,{children:"Links"}),e.jsx(v,{children:e.jsx(rt,{alert:a})})]}),e.jsxs(L,{children:[e.jsx(N,{children:"Labels"}),e.jsx(v,{children:e.jsx(at,{alert:a,showAll:!0})})]})]}),e.jsx(Fs,{alert:a})]}):h?e.jsxs(S,{gap:"2",children:[e.jsx("span",{children:"Loading"}),e.jsx(J,{variant:"primary"})]}):"Not found - the alert is probably not firing at the moment"})}),e.jsx(Te,{children:e.jsx(je,{px:!1,py:!0,children:e.jsx(St,{children:a&&e.jsx(wt,{data:a,expanded:!0})})})})]})]}),e.jsx(Nt,{children:a&&e.jsx(it,{alert:a,variant:"primary"})})]})},Es=(t,s)=>{let r=`
    text-lg/5
  `;if(!s||s<1)return`${r} text-theme-light`;switch(t){case"critical":r+=" bg-theme-danger/50";break;case"warning":r+=" bg-theme-warning/50";break;case"info":r+=" bg-theme-info/40";break}return r},Ts=(t,s)=>t?s?t-s:t:"--",xe=({severity:t,severityCountTotal:s,severityCountSuppressed:r})=>e.jsxs(S,{direction:"vertical",alignment:"stretch",distribution:"center",className:Es(t,s),children:[e.jsx(S,{direction:"vertical",alignment:"center",distribution:"center",className:"h-full",children:Ts(s,r)}),r&&e.jsx("div",{className:"text-xs bg-black/10 mt-auto",children:e.jsxs(S,{alignment:"center",distribution:"center",children:[e.jsx(O,{icon:"notificationsOff",size:"0.75rem"}),e.jsx("span",{children:r})]})})]}),Cs=`
  grid
  grid-cols-[repeat(4,_minmax(5rem,_1fr))]

  group
  bg-theme-background-lvl-1
  hover:bg-theme-background-lvl-2
  hover:text-theme-high
  cursor-pointer
`,Ls=`
  bg-theme-background-lvl-2
  group-hover:bg-theme-background-lvl-3
  font-bold
  px-3
  py-2
  whitespace-nowrap
`,ks=({region:t,severityCounts:s})=>{const r=M(),{addActiveFilter:n,removeActiveFilter:a}=X(),i=se(),d=()=>{i?.region?.includes(t)?(a("region",t),r({to:"/alerts",search:c=>Y({...c},`${U}region`,t)})):(n("region",t),r({to:"/alerts",search:c=>ne({...c},`${U}region`,t)}))};return e.jsxs("div",{className:`region ${Cs}`,onClick:()=>d(),children:[e.jsx(S,{alignment:"center",distribution:"center",className:Ls,children:t||"Counts"}),e.jsx(xe,{severity:"critical",severityCountTotal:s?.critical?.total,severityCountSuppressed:s?.critical?.suppressed}),e.jsx(xe,{severity:"warning",severityCountTotal:s?.warning?.total,severityCountSuppressed:s?.warning?.suppressed}),e.jsx(xe,{severity:"info",severityCountTotal:s?.info?.total,severityCountSuppressed:s?.info?.suppressed})]})},_s=`
  grid
  auto-rows-fr
  grid-cols-[repeat(auto-fit,_minmax(21rem,_1fr))]
  gap-3
  mb-8
`,Is=()=>{const{isLoading:t}=oe("alerts"),s=Ft(),r=At(),n=()=>!t&&r?e.jsx("div",{className:`regions ${_s}`,children:r.map(a=>e.jsx(ks,{region:a,severityCounts:s[a]},`${a}`))}):null;return e.jsx(e.Fragment,{children:n()})},Ds=t=>{let s="border-text-theme-default";switch(t){case"critical":s="border-theme-danger";break;case"warning":s="border-theme-warning";break;case"info":s="border-theme-info";break}return`
    border-l-2
    ${s}
    h-full
    pl-5
  `},$s=({alert:t},s)=>{const r=M(),{showDetailsFor:n}=Et({from:"/alerts"}),a=y.useRef(null),i=d=>{d.target.parentNode!==a.current&&!d.target.classList.contains("interactive")&&!d.target.closest(".interactive")||(d.stopPropagation(),d.preventDefault(),r({to:"/alerts",search:c=>({...c,showDetailsFor:n!==t?.fingerprint?t?.fingerprint:void 0})}))};return e.jsxs(L,{className:`cursor-pointer ${Ye()===t?.fingerprint?"active":""}`,ref:a,onClick:d=>i(d),children:[e.jsx(v,{className:"pl-0 interactive",children:e.jsx("div",{className:Ds(t.labels?.severity),children:e.jsx(Ze,{ref:s,severity:t.labels?.severity})})}),e.jsx(v,{className:"interactive",children:e.jsx(ot,{region:t.labels?.region,cluster:t.labels?.cluster})}),e.jsx(v,{children:t.labels?.service}),e.jsxs(v,{className:"cursor-default",children:[e.jsx("div",{className:"interactive text-theme-high cursor-pointer",children:t.annotations?.summary}),e.jsxs("div",{children:[e.jsx(ce,{description:t.annotations?.description,subdued:!0}),e.jsx(rt,{alert:t,className:"mb-4 mt-1"})]}),e.jsx(at,{alert:t})]}),e.jsx(v,{className:"interactive",children:e.jsx(Je,{startTimestamp:t.startsAt})}),e.jsx(v,{children:e.jsx(lt,{alert:t})}),e.jsx(v,{children:e.jsx(it,{alert:t,size:"small"})})]})},Ps=y.forwardRef($s),Rs=()=>{const t=Tt(),{scrollListItems:s,iterator:r}=Ct(t,{loadingObject:e.jsx(L,{children:e.jsx(v,{colSpan:3,children:e.jsxs(S,{gap:"3",alignment:"center",direction:"horizontal",children:["Loading...",e.jsx(J,{})]})})}),refFunction:n=>e.jsx(L,{children:e.jsx(v,{colSpan:3,className:"border-b-0 py-0",children:e.jsx("span",{ref:n})})})});return e.jsxs(ie,{columns:7,minContentColumns:[0,2,5],cellVerticalAlignment:"top",className:"alerts",children:[e.jsxs(L,{children:[e.jsx(N,{children:e.jsx(O,{icon:"monitorHeart"})}),e.jsx(N,{children:"Region"}),e.jsx(N,{children:"Service"}),e.jsx(N,{children:"Description"}),e.jsx(N,{children:"Firing Since"}),e.jsx(N,{children:"Status"}),e.jsx(N,{})]}),s?.length?r.map(n=>e.jsx(Ps,{alert:n},n.fingerprint)):e.jsx(L,{className:"no-hover",children:e.jsx(v,{colSpan:7,children:e.jsxs(S,{gap:"3",children:[e.jsx(O,{icon:"info",color:"text-theme-info"}),e.jsx("div",{children:"We couldn't find anything. It's possible that the matching alerts are not active at the moment, or the chosen filters could be overly limiting."})]})})})]})},Bs=`
  bg-theme-background-lvl-1
  py-1.5
  px-4
  my-px
  text-theme-light
`,Os=({totalCounts:t,isUpdating:s,updatedAt:r})=>{const n=a=>new Date(a).toLocaleString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZoneName:"short"});return e.jsxs(S,{className:`status-bar ${Bs}`,alignment:"center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-theme-default pr-2",children:`${t.total} alerts`}),e.jsx("span",{children:`(${t.critical||0} critical, ${t.warning||0} warning, ${t.info||0} info)`})]}),e.jsxs(S,{alignment:"center",className:"ml-auto",children:[s&&e.jsx(J,{size:"small",className:"mr-2"}),r&&`updated ${n(r)}`]})]})},Ms=()=>{const t=M(),[s,r]=y.useState(""),[n,a]=y.useState(""),{addActiveFilter:i,loadFilterLabelValues:d,clearFilters:c,setSearchTerm:h}=X(),m=Me(),l=Lt(),o=se(),u=kt(),f=x=>{r(x),l[x]?.values||d(x)},p=x=>{a(x),s.trim()!==""&&x.trim()!==""&&(i(s,x),t({to:"/alerts",search:k=>ne({...k},`${U}${s}`,x)})),setTimeout(()=>{a("")},0)},E=x=>{const k=setTimeout(()=>{h(x.target.value),t({to:"/alerts",search:$=>({...$,searchTerm:x.target.value.trim()})})},500);return()=>clearTimeout(k)};return e.jsxs(S,{alignment:"center",gap:"8",children:[e.jsxs(_t,{children:[e.jsx(we,{name:"filter",className:"filter-label-select w-64 mb-0",label:"Filter",value:s,onChange:x=>f(x),children:m?.map(x=>e.jsx(Ne,{value:x,label:It(x)},x))}),e.jsx(Dt,{value:n,name:"filterValue",onChange:x=>p(x),disabled:!l[s],loading:l[s]?.isLoading,className:"filter-value-select w-96 bg-theme-background-lvl-0",children:l[s]?.values?.filter(x=>!o[s]?.includes(x)).slice(0,100).map(x=>e.jsx($t,{value:x},x))})]}),_(),e.jsx(Pt,{placeholder:"search term or regular expression",className:"w-96 ml-auto",value:u||"",onSearch:x=>h(x),onClear:()=>{h(""),t({to:"/alerts",search:x=>({...x,searchTerm:""})})},onChange:x=>E(x)})]});function _(){return o&&Object.keys(o).length>0&&e.jsx(ae,{label:"Clear all",onClick:()=>{c(),t({to:"/alerts",search:x=>Object.entries(x).reduce((k,[$,W])=>(W&&!$.startsWith("f_")&&!$.startsWith("pf_")&&(k[$]=W),k),{})})},variant:"subdued"})}},Vs=()=>{const t=M(),s=se(),r=Rt(),{removeActiveFilter:n,addActiveFilter:a,addPausedFilter:i,removePausedFilter:d}=X(),c=(l,o)=>{i(l,o),t({to:"/alerts",search:u=>({...u,...Ke("pf_",ne(r,l,o))})})},h=(l,o)=>{n(l,o),d(l,o),t({to:"/alerts",search:u=>{const f=Y({...u},`${U}${l}`,o);return Y({...f},`${Ce}${l}`,o)}})},m=(l,o)=>{a(l,o),d(l,o),t({to:"/alerts",search:u=>Y({...u},`${Ce}${l}`,o)})};return e.jsx(S,{gap:"2",wrap:!0,children:Object.entries(s).map(([l,o])=>o?.map(u=>r[l]?.includes(u)?e.jsx(K,{className:"bg-theme-background-lvl-4 opacity-70",pillKey:l,pillValue:u,closeable:!0,onClose:()=>h(l,u),onClick:()=>m(l,u)},`${l}:${u}`):e.jsx(K,{pillKey:l,pillValue:u,closeable:!0,onClose:()=>h(l,u),onClick:()=>c(l,u)},`${l}:${u}`)))})},Hs=`
  bg-theme-background-lvl-1
  py-2
  px-4
  my-px
`,Us=()=>e.jsxs(S,{direction:"vertical",gap:"4",className:`filters ${Hs}`,children:[e.jsx(Ms,{}),e.jsx(Vs,{})]}),qs=t=>{let n=t,a=!1;return n.comment.value.length<3&&(a=!0,n={...n,comment:{...n.comment,error:"Please enter at least 3 characters"}}),(!n?.createdBy?.value||n?.createdBy?.value.length<1)&&(a=!0,n={...n,createdBy:{...n.createdBy,error:"Created by cannot be empty"}}),new Date(n.date.start)>=new Date(n.date.end)&&(a=!0,n={...n,date:{...n.date,error:"The start date need to be before the end date"}}),Object.keys(n.editable_labels).map(i=>{Ws(n.editable_labels[i].value)||(a=!0,n={...n,editable_labels:{...n.editable_labels,[i]:{...n.editable_labels[i],error:`Value for ${i} is not a valid regular expression`}}}),n.editable_labels[i]?.value||(a=!0,n={...n,editable_labels:{...n.editable_labels,[i]:{...n.editable_labels[i],error:`Value for ${i} is empty`}}})}),a?n:null},Ws=t=>{try{return!!new RegExp(t)}catch(s){return console.error(s),!1}},Oe={fixed_labels:{},editable_labels:{},comment:{value:"",error:null},createdBy:{value:"",error:null},date:{start:null,end:null,error:null}},zs=()=>{const t=He(),{addMessage:s}=re(),r=Bt(),[n,a]=y.useState(null),i=Ve(),d=Ue(),{setSilences:c}=Z(),[h,m]=y.useState(null),l=y.useMemo(()=>{const w=new Date;return`${w.getFullYear()}-${w.getMonth()+1}-${w.getDate()}`},[]),[o,u]=y.useState(Oe),[f,p]=y.useState(!0),{mutate:E}=Qe("createSilences",{onMutate:w=>{i.cancelQueries({queryKey:["silences"]});const F={...w.silence,status:{state:Q.SILENCE_ACTIVE}},A=[...d,F];c({items:A})},onSuccess:w=>{p(!0),s({variant:"success",text:`A silence object with id ${w?.silenceID} was created successfully. Please note that it may take up
          to 5 minutes for the alert to show up as silenced.`})},onError:w=>{a(le(w))},onSettled:()=>{i.invalidateQueries({queryKey:["silences"]})}}),_=Xe(()=>{a(null);const w=qs(o);if(w){u(w),a("Please fix the errors in the form");return}const F={startsAt:o.date.start,endsAt:o.date.end,comment:o.comment.value,createdBy:o.createdBy.value,matchers:[]};for(const[A,P]of Object.entries(o.editable_labels)){const g={name:A,value:P.value,isRegex:!0};F.matchers.push(g)}for(const[A,P]of Object.entries(o.fixed_labels)){const g={name:A,value:P,isRegex:!0};F.matchers.push(g)}E({silence:F})},200),x=w=>{const F=r.find(P=>P.id===w),A={...Oe,fixed_labels:F?.fixed_labels||{},createdBy:{value:t,error:null},editable_labels:F?.editable_labels?.reduce((P,g)=>({...P,[g]:{value:"",error:null}}),{})};u(A),m(F)},k=({key:w,value:F})=>{u({...o,[w]:{value:F,error:null}})},$=w=>{const F=w.target.id;u(me(A=>{A.editable_labels[F].value=w.target.value,A.editable_labels[F].error=null}))},W=(w,F)=>{u(me(A=>{A.date.start=F,A.date.error=null}))},de=(w,F)=>{u(me(A=>{A.date.end=F,A.date.error=null}))};return e.jsx(e.Fragment,{children:Gs(r,p,f,h,_,n,x,o,k,t,l,W,de,$)})};function Gs(t,s,r,n,a,i,d,c,h,m,l,o,u,f){return t&&t?.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ae,{onClick:p=>{p.stopPropagation(),s(!1)},children:"Schedule Silence"}),!r&&e.jsxs(qe,{title:"Schedule new silence",size:"large",open:!0,confirmButtonLabel:!n||n?.invalid?void 0:"Save",onConfirm:!n||n?.invalid?void 0:a,onCancel:()=>s(!0),children:[i&&e.jsx(ge,{text:i,variant:"danger"}),e.jsxs(fe,{className:"mt-6",children:[n&&n?.invalid&&e.jsx(I,{children:e.jsx(ge,{text:`This silence template is invalid. ${n.invalid}`,variant:"error"})}),e.jsx(I,{children:e.jsx(we,{required:!0,label:"Silence Template",value:n?.id||"Select",onValueChange:p=>{d(p)},children:t?.map(p=>e.jsx(Ne,{id:p.id,label:p.title,value:p.id},p.id))})}),n&&!n?.invalid&&e.jsx(I,{children:e.jsx(We,{children:n?.description})})]}),n&&!n?.invalid&&e.jsxs(fe,{children:[e.jsxs(he,{children:[e.jsx(I,{children:e.jsx(be,{required:!0,label:"Silenced by",value:c?.createdBy?.value,errortext:c?.createdBy?.error,onChange:p=>h({key:"createdBy",value:p.target.value}),disabled:!!m})}),e.jsx(I,{children:e.jsxs("div",{className:"grid gap-2 grid-cols-2",children:[e.jsx(Le,{value:c?.date?.start||l,dateFormat:"Y-m-d H:i:S",label:"Select a start date",enableTime:!0,time_24hr:!0,required:!0,errortext:c?.date?.error,onChange:o,enableSeconds:!0}),e.jsx(Le,{value:c?.date?.end||l,dateFormat:"Y-m-d H:i:S",label:"Select a end date",enableTime:!0,time_24hr:!0,required:!0,errortext:c?.date?.error,onChange:u,enableSeconds:!0})]})}),e.jsx(I,{children:e.jsx(ze,{label:"Comment",value:c.comment.value,errortext:c.comment.error,onChange:p=>h({key:"comment",value:p.target.value}),required:!0})})]}),c?.editable_labels&&Object.keys(c?.editable_labels).length>0&&e.jsxs(he,{children:[e.jsx(I,{children:e.jsx("p",{children:"Editable Labels are labels that are editable. You can use regular expressions."})}),e.jsx(I,{children:e.jsx("div",{className:"grid gap-2 grid-cols-2",children:Object.keys(c.editable_labels).map((p,E)=>e.jsx(be,{required:!0,label:p,id:p,value:c?.editable_labels[p].value,errortext:c?.editable_labels[p]?.error,onChange:f},E))})})]}),Object.keys(c?.fixed_labels).length>0&&e.jsxs(he,{children:[e.jsx(I,{children:e.jsx("p",{children:"Fixed Labels are labels that are not editable."})}),e.jsx(I,{children:e.jsx(S,{gap:"2",alignment:"start",wrap:!0,className:"mt-2",children:Object.keys(c.fixed_labels).map((p,E)=>e.jsx(K,{pillKey:p,pillKeyLabel:p,pillValue:c?.fixed_labels[p],pillValueLabel:c?.fixed_labels[p]},E))})})]})]})]})," "]})}const Ys=()=>{const t=M(),s=Ot(),r=Mt(),n=i=>{typeof i=="string"&&t({to:"/alerts",search:d=>({...d,predefinedFilter:i})})};return e.jsxs(S,{children:[a(),e.jsx("div",{className:"ml-auto",children:e.jsx(zs,{})})]});function a(){return s&&r&&e.jsx(Vt,{activeItem:r,onActiveItemChange:n,children:s?.map(i=>e.jsx(Ht,{value:i.name,label:i.displayName},i.name))})}},Ks=()=>{const t=Ut(),s=qt(),{setAlertsData:r}=Fe(),{addMessage:n,resetMessages:a}=re(),{data:i,isLoading:d,error:c}=oe("alerts");return c&&(a(),c instanceof Jt&&n({variant:"warning",text:e.jsx(es,{})}),n({variant:"error",text:le(c)})),y.useEffect(()=>{i&&r({items:i.alerts,counts:i.counts})},[i]),e.jsx(e.Fragment,{children:d?e.jsxs(S,{gap:"2",children:[e.jsx("span",{children:"Loading"}),e.jsx(J,{variant:"primary"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ys,{}),e.jsx(Us,{}),e.jsx(Os,{totalCounts:t,isUpdating:d,updatedAt:s}),e.jsx(Rs,{})]})})};function en(){const{appProps:{initialFilters:t},appStateFromUrl:{activeFilters:s,pausedFilters:r,predefinedFilter:n,searchTerm:a,showDetailsFor:i}}=ke.useRouteContext(),d=ke.useNavigate(),c=Wt(),{setShowDetailsFor:h,setIsUrlRead:m}=Ae(),{setActiveFilters:l,setPausedFilters:o,setActivePredefinedFilter:u,setSearchTerm:f}=X();return y.useLayoutEffect(()=>{!c&&!_e(s)&&_e(t)?(m(),d({to:"/alerts",replace:!0,search:p=>({...p,...Ke(U,t)})})):(l(s),o(r),n&&u(n),f(a),h(i),m())},[s,r,n,a,i]),e.jsxs(e.Fragment,{children:[e.jsx(zt,{children:e.jsx(As,{})}),e.jsx(Is,{}),e.jsx(Ks,{})]})}export{en as component};
