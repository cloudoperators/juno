import{R as I,j as e,b as j,y as l,K as C,N as m,Y as S,A as b,U as y,B as L,S as c,x as R,k as v,e as D,V as E,X as P,l as h,h as Z}from"./App-DB-MlZZl.js";import{a as x}from"./index-BRXqOrMV.js";function Y(s){return I({...s,select:n=>s.select?s.select(n.context):n.context})}const f=({colSpan:s,children:n})=>e.jsx(j,{children:e.jsx(l,{colSpan:s,children:n})}),z=({children:s})=>e.jsx(C,{className:"my-6",children:s}),F=({imageVersionsPromise:s})=>{const{data:n}=x.use(s),{totalImageVersions:t}=m(n);return t},r=({icon:s,count:n,variant:t,tooltipContent:i,showDashIfZero:a=!1})=>a&&n===0?e.jsx("span",{children:"â€”"}):e.jsxs(S,{triggerEvent:"hover",children:[e.jsx(b,{children:e.jsx(y,{icon:s,text:n>0?n.toString():"0",variant:n>0?t:"default"})}),e.jsx(L,{children:i})]}),H=({version:s,selected:n=!1,displayDetailsButton:t=!0,onItemClick:i,onDetailClick:a})=>e.jsxs(j,{onClick:i,className:`cursor-pointer ${n?"active":""}`,children:[e.jsx(l,{className:"service-image-versions-cell",children:e.jsxs(c,{gap:"1",direction:"vertical",children:[e.jsxs(c,{gap:"0.5",direction:"vertical",children:[e.jsx("span",{children:s.repository}),e.jsx("span",{className:"text-sm text-theme-light",children:s.version})]}),e.jsx(c,{gap:"1",alignment:"center",children:e.jsx("a",{href:`https://${s.ccrn}`,target:"_blank",rel:"noopener noreferrer",className:"hover:underline text-sm",onClick:o=>o.stopPropagation(),children:e.jsxs(c,{gap:"1.5",alignment:"center",children:[e.jsx(R,{icon:"openInNew",size:"16",color:"jn-global-text"}),e.jsx("span",{children:"Image registry"})]})})})]})}),e.jsx(l,{className:"service-image-versions-cell",children:s.tag}),e.jsx(l,{className:"items-center",children:e.jsx(r,{showDashIfZero:!0,count:s.issueCounts.critical,icon:"danger",variant:"danger",tooltipContent:"Critical Issues"})}),e.jsx(l,{className:"items-center",children:e.jsx(r,{showDashIfZero:!0,count:s.issueCounts.high,icon:"warning",variant:"warning",tooltipContent:"High Issues"})}),e.jsx(l,{className:"items-center",children:e.jsx(r,{showDashIfZero:!0,count:s.issueCounts.medium,icon:"errorOutline",variant:"warning",tooltipContent:"Medium Issues"})}),e.jsx(l,{className:"items-center",children:e.jsx(r,{showDashIfZero:!0,count:s.issueCounts.low,icon:"info",variant:"info",tooltipContent:"Low Issues"})}),e.jsx(l,{className:"items-center",children:e.jsx(r,{showDashIfZero:!0,count:s.issueCounts.none,icon:"help",variant:"default",tooltipContent:"None Issues"})}),t&&e.jsx(l,{children:e.jsx(v,{size:"small",label:"Show Details",onClick:a})})]}),M=({columnSpan:s,selectedImageVersion:n,displayDetailsButton:t,imageVersionsPromise:i,onDetailsButtonClick:a,onImageVersionItemClick:o})=>{const{error:g,data:N}=x.use(i),{imageVersions:u}=m(N);return e.jsxs(e.Fragment,{children:[!g&&u.length>0&&u.map(d=>e.jsx(H,{version:d,selected:d.version===n,displayDetailsButton:t,onItemClick:()=>{o==null||o(d)},onDetailClick:w=>{w.stopPropagation(),a==null||a(d)}},d.version)),!g&&u.length===0&&e.jsx(f,{colSpan:s,children:"No services found"})]})},O=({imageVersionsPromise:s})=>{const{data:n}=x.use(s),{pages:t,pageNumber:i}=m(n);return e.jsx(c,{distribution:"end",className:"mt-4",children:e.jsx(D,{variant:"number",currentPage:i,onPressNext:()=>{},onPressPrevious:()=>{},pages:t.length})})},p=8,_=({imageVersionsPromise:s,selectedImageVersion:n,displayActions:t=!1,onImageVersionItemClick:i,onDetailsButtonClick:a})=>{const o=t?p:p-1;return e.jsxs(x.Suspense,{children:[e.jsxs(z,{children:["Image Versions",e.jsxs(x.Suspense,{children:["(",e.jsx(F,{imageVersionsPromise:s}),")"]})]}),t&&e.jsx(E,{children:e.jsx(v,{size:"small",onClick:()=>a==null?void 0:a(void 0),className:"whitespace-nowrap",children:"Full Details"})}),e.jsx("div",{className:"datagrid-hover",children:e.jsxs(P,{columns:o,minContentColumns:[2,3,4,5,6],children:[e.jsxs(j,{children:[e.jsx(h,{children:"Image Repository"}),e.jsx(h,{children:"Tag"}),e.jsx(h,{colSpan:5,children:"Issue Counts"}),t&&e.jsx(h,{})]}),e.jsx(x.Suspense,{fallback:e.jsx(f,{colSpan:o,children:e.jsxs(c,{gap:"2",alignment:"center",children:[e.jsx("div",{children:"Loading"}),e.jsx(Z,{variant:"primary"})]})}),children:e.jsx(M,{columnSpan:o,displayDetailsButton:t,imageVersionsPromise:s,selectedImageVersion:n,onDetailsButtonClick:a,onImageVersionItemClick:i})})]})}),e.jsx(x.Suspense,{children:e.jsx(O,{imageVersionsPromise:s})})]})},X=({counts:s})=>s.total===0?e.jsx("div",{children:"No issues found! ðŸš€"}):e.jsxs(c,{gap:"1",children:[e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-bold",children:"All issues:"}),e.jsx("div",{className:"font-bold mr-2",children:s.total})]}),e.jsx(r,{icon:"danger",count:s.critical,variant:s.critical>0?"danger":"default",tooltipContent:"Critical Issues"}),e.jsx(r,{icon:"warning",count:s.high,variant:s.high>0?"warning":"default",tooltipContent:"High Issues"}),e.jsx(r,{icon:"errorOutline",count:s.medium,variant:s.medium>0?"warning":"default",tooltipContent:"Medium Issues"}),e.jsx(r,{icon:"info",count:s.low,variant:s.low>0?"info":"default",tooltipContent:"Low Issues"}),e.jsx(r,{icon:"help",count:s.none,variant:"default",tooltipContent:"None Issues"})]});export{f as E,X as I,_ as S,r as a,z as b,Y as u};
