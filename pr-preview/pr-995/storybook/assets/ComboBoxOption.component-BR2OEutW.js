import{r as d,b as ae,e as k,j as T}from"./iframe-BWSVa5SS.js";import{u as St,f as Ot,a as Ct,d as Et,h as It,o as wt,s as jt,g as Tt,k as Mt}from"./floating-ui.react-cfxF16bX.js";import{L as $t}from"./Label.component-D_h8ZYDL.js";import{F as Oe}from"./FormHint.component-DCpHwsu_.js";import{I as ge}from"./Icon.component-BXsBOa6C.js";import{S as Rt}from"./Spinner.component-eS_bgyI9.js";import{u as _t}from"./PortalProvider.component-7H7uURfj.js";import{a7 as Ke,b as $,a9 as Fe,aa as Pt,ab as Ft,E as Vt,d as D,u as ce,c as Ge,k as At,f as Ve,P as zt,e as kt,K as he,a2 as Bt,S as L,y as Se,n as ue,g as Dt,L as be,a3 as Lt,F as Nt,i as Ie,s as qt,a4 as we,a5 as Wt,$ as Ye,D as Je,_ as je,B as Ht,C as fe,a as Ut,G as Kt,H as Gt,h as Yt,R as Jt,T as Qt,j as Xt,l as Zt,p as en,q as tn,r as nn,t as on,v as Ae,z as sn,a6 as an,I as ln,Q as rn,J as un,M as dn,m as xe,O as ze,U as Y,Y as cn,a1 as pn,ac as fn}from"./portal-DMQKWWjk.js";import{l as ke,f as mn,a as hn,T as bn,u as vn,j as gn}from"./frozen-Dou1Rv32.js";import{F as xn}from"./use-tree-walker-Bsl25Vjl.js";function de(t,s,e){let o=e.initialDeps??[],n;function i(){var a,l,c,u;let r;e.key&&((a=e.debug)!=null&&a.call(e))&&(r=Date.now());const v=t();if(!(v.length!==o.length||v.some((p,S)=>o[S]!==p)))return n;o=v;let m;if(e.key&&((l=e.debug)!=null&&l.call(e))&&(m=Date.now()),n=s(...v),e.key&&((c=e.debug)!=null&&c.call(e))){const p=Math.round((Date.now()-r)*100)/100,S=Math.round((Date.now()-m)*100)/100,O=S/16,V=(R,w)=>{for(R=String(R);R.length<w;)R=" "+R;return R};console.info(`%c⏱ ${V(S,5)} /${V(p,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*O,120))}deg 100% 31%);`,e==null?void 0:e.key)}return(u=e==null?void 0:e.onChange)==null||u.call(e,n),n}return i.updateDeps=a=>{o=a},i}function Ce(t,s){if(t===void 0)throw new Error("Unexpected undefined");return t}const yn=(t,s)=>Math.abs(t-s)<=1,Sn=(t,s,e)=>{let o;return function(...n){t.clearTimeout(o),o=t.setTimeout(()=>s.apply(this,n),e)}},Be=t=>{const{offsetWidth:s,offsetHeight:e}=t;return{width:s,height:e}},On=t=>t,Cn=t=>{const s=Math.max(t.startIndex-t.overscan,0),e=Math.min(t.endIndex+t.overscan,t.count-1),o=[];for(let n=s;n<=e;n++)o.push(n);return o},En=(t,s)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;const n=a=>{const{width:l,height:c}=a;s({width:Math.round(l),height:Math.round(c)})};if(n(Be(e)),!o.ResizeObserver)return()=>{};const i=new o.ResizeObserver(a=>{const l=()=>{const c=a[0];if(c!=null&&c.borderBoxSize){const u=c.borderBoxSize[0];if(u){n({width:u.inlineSize,height:u.blockSize});return}}n(Be(e))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(e,{box:"border-box"}),()=>{i.unobserve(e)}},De={passive:!0},Le=typeof window>"u"?!0:"onscrollend"in window,In=(t,s)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;let n=0;const i=t.options.useScrollendEvent&&Le?()=>{}:Sn(o,()=>{s(n,!1)},t.options.isScrollingResetDelay),a=r=>()=>{const{horizontal:v,isRtl:b}=t.options;n=v?e.scrollLeft*(b&&-1||1):e.scrollTop,i(),s(n,r)},l=a(!0),c=a(!1);c(),e.addEventListener("scroll",l,De);const u=t.options.useScrollendEvent&&Le;return u&&e.addEventListener("scrollend",c,De),()=>{e.removeEventListener("scroll",l),u&&e.removeEventListener("scrollend",c)}},wn=(t,s,e)=>{if(s!=null&&s.borderBoxSize){const o=s.borderBoxSize[0];if(o)return Math.round(o[e.options.horizontal?"inlineSize":"blockSize"])}return t[e.options.horizontal?"offsetWidth":"offsetHeight"]},jn=(t,{adjustments:s=0,behavior:e},o)=>{var n,i;const a=t+s;(i=(n=o.scrollElement)==null?void 0:n.scrollTo)==null||i.call(n,{[o.options.horizontal?"left":"top"]:a,behavior:e})};class Tn{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const o=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(n=>{n.forEach(i=>{const a=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var n;(n=o())==null||n.disconnect(),e=null},observe:n=>{var i;return(i=o())==null?void 0:i.observe(n,{box:"border-box"})},unobserve:n=>{var i;return(i=o())==null?void 0:i.unobserve(n)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([o,n])=>{typeof n>"u"&&delete e[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:On,rangeExtractor:Cn,onChange:()=>{},measureElement:wn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var o,n;(n=(o=this.options).onChange)==null||n.call(o,this,e)},this.maybeNotify=de(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const o=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==o){if(this.cleanup(),!o){this.maybeNotify();return}this.scrollElement=o,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(n=>{this.observer.observe(n)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(n,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,o)=>{const n=new Map,i=new Map;for(let a=o-1;a>=0;a--){const l=e[a];if(n.has(l.lane))continue;const c=i.get(l.lane);if(c==null||l.end>c.end?i.set(l.lane,l):l.end<c.end&&n.set(l.lane,!0),n.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((a,l)=>a.end===l.end?a.index-l.index:a.end-l.end)[0]:void 0},this.getMeasurementOptions=de(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,o,n,i,a)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:o,scrollMargin:n,getItemKey:i,enabled:a}),{key:!1}),this.getMeasurements=de(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:o,scrollMargin:n,getItemKey:i,enabled:a},l)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(r=>{this.itemSizeCache.set(r.key,r.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,c);for(let r=c;r<e;r++){const v=i(r),b=this.options.lanes===1?u[r-1]:this.getFurthestMeasurement(u,r),m=b?b.end+this.options.gap:o+n,p=l.get(v),S=typeof p=="number"?p:this.options.estimateSize(r),O=m+S,V=b?b.lane:r%this.options.lanes;u[r]={index:r,start:m,size:S,end:O,key:v,lane:V}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=de(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,o,n,i)=>this.range=e.length>0&&o>0?Mn({measurements:e,outerSize:o,scrollOffset:n,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=de(()=>{let e=null,o=null;const n=this.calculateRange();return n&&(e=n.startIndex,o=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,o]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,o]},(e,o,n,i,a)=>i===null||a===null?[]:e({startIndex:i,endIndex:a,overscan:o,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const o=this.options.indexAttribute,n=e.getAttribute(o);return n?parseInt(n,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(e,o)=>{const n=this.indexFromElement(e),i=this.measurementsCache[n];if(!i)return;const a=i.key,l=this.elementsCache.get(a);l!==e&&(l&&this.observer.unobserve(l),this.observer.observe(e),this.elementsCache.set(a,e)),e.isConnected&&this.resizeItem(n,this.options.measureElement(e,o,this))},this.resizeItem=(e,o)=>{const n=this.measurementsCache[e];if(!n)return;const i=this.itemSizeCache.get(n.key)??n.size,a=o-i;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,a,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,o)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((o,n)=>{o.isConnected||(this.observer.unobserve(o),this.elementsCache.delete(n))});return}this._measureElement(e,void 0)},this.getVirtualItems=de(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,o)=>{const n=[];for(let i=0,a=e.length;i<a;i++){const l=e[i],c=o[l];n.push(c)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const o=this.getMeasurements();if(o.length!==0)return Ce(o[Qe(0,o.length-1,n=>Ce(o[n]).start,e)])},this.getOffsetForAlignment=(e,o,n=0)=>{const i=this.getSize(),a=this.getScrollOffset();o==="auto"&&(o=e>=a+i?"end":"start"),o==="center"?e+=(n-i)/2:o==="end"&&(e-=i);const l=this.getTotalSize()-i;return Math.max(Math.min(l,e),0)},this.getOffsetForIndex=(e,o="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const n=this.measurementsCache[e];if(!n)return;const i=this.getSize(),a=this.getScrollOffset();if(o==="auto")if(n.end>=a+i-this.options.scrollPaddingEnd)o="end";else if(n.start<=a+this.options.scrollPaddingStart)o="start";else return[a,o];const l=o==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,o,n.size),o]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:o="start",behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,o),{adjustments:void 0,behavior:n})},this.scrollToIndex=(e,{align:o="auto",behavior:n}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const i=this.getOffsetForIndex(e,o);if(!i)return;const[a,l]=i;this._scrollToOffset(a,{adjustments:void 0,behavior:n}),n!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(e))){const[u]=Ce(this.getOffsetForIndex(e,l)),r=this.getScrollOffset();yn(u,r)||this.scrollToIndex(e,{align:l,behavior:n})}else this.scrollToIndex(e,{align:l,behavior:n})}))},this.scrollBy=(e,{behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var e;const o=this.getMeasurements();let n;if(o.length===0)n=this.options.paddingStart;else if(this.options.lanes===1)n=((e=o[o.length-1])==null?void 0:e.end)??0;else{const i=Array(this.options.lanes).fill(null);let a=o.length-1;for(;a>=0&&i.some(l=>l===null);){const l=o[a];i[l.lane]===null&&(i[l.lane]=l.end),a--}n=Math.max(...i.filter(l=>l!==null))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:o,behavior:n})=>{this.options.scrollToFn(e,{behavior:n,adjustments:o},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(s)}}const Qe=(t,s,e,o)=>{for(;t<=s;){const n=(t+s)/2|0,i=e(n);if(i<o)t=n+1;else if(i>o)s=n-1;else return n}return t>0?t-1:0};function Mn({measurements:t,outerSize:s,scrollOffset:e,lanes:o}){const n=t.length-1,i=c=>t[c].start;if(t.length<=o)return{startIndex:0,endIndex:n};let a=Qe(0,n,i,e),l=a;if(o===1)for(;l<n&&t[l].end<e+s;)l++;else if(o>1){const c=Array(o).fill(0);for(;l<n&&c.some(r=>r<e+s);){const r=t[l];c[r.lane]=r.end,l++}const u=Array(o).fill(e+s);for(;a>=0&&u.some(r=>r>=e);){const r=t[a];u[r.lane]=r.start,a--}a=Math.max(0,a-a%o),l=Math.min(n,l+(o-1-l%o))}return{startIndex:a,endIndex:l}}const Ne=typeof document<"u"?d.useLayoutEffect:d.useEffect;function $n(t){const s=d.useReducer(()=>({}),{})[1],e={...t,onChange:(n,i)=>{var a;i?ae.flushSync(s):s(),(a=t.onChange)==null||a.call(t,n,i)}},[o]=d.useState(()=>new Tn(e));return o.setOptions(e),Ne(()=>o._didMount(),[]),Ne(()=>o._willUpdate()),o}function Rn(t){return $n({observeElementRect:En,observeElementOffset:In,scrollToFn:jn,...t})}function _n(t,s,e,o){let n=Ke(e);d.useEffect(()=>{t=t??window;function i(a){n.current(a)}return t.addEventListener(s,i,o),()=>t.removeEventListener(s,i,o)},[t,s,o])}function Xe(t){let s=d.useRef({value:"",selectionStart:null,selectionEnd:null});return _n(t,"blur",e=>{let o=e.target;Fe(o)&&(s.current={value:o.value,selectionStart:o.selectionStart,selectionEnd:o.selectionEnd})}),$(()=>{if(document.activeElement!==t&&Fe(t)&&t.isConnected){if(t.focus({preventScroll:!0}),t.value!==s.current.value)t.setSelectionRange(t.value.length,t.value.length);else{let{selectionStart:e,selectionEnd:o}=s.current;e!==null&&o!==null&&t.setSelectionRange(e,o)}s.current={value:"",selectionStart:null,selectionEnd:null}}})}function qe(t,s){let e=d.useRef([]),o=$(t);d.useEffect(()=>{let n=[...e.current];for(let[i,a]of s.entries())if(e.current[i]!==a){let l=o(s,n);return e.current=s,l}},[o,...s])}function Pn(t){function s(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",s))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",s),s())}let re=[];Pn(()=>{function t(s){if(!Pt(s.target)||s.target===document.body||re[0]===s.target)return;let e=s.target;e=e.closest(Ft),re.unshift(e??s.target),re=re.filter(o=>o!=null&&o.isConnected),re.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});var Te=(t=>(t[t.Left=0]="Left",t[t.Right=2]="Right",t))(Te||{}),Fn=Object.defineProperty,Vn=(t,s,e)=>s in t?Fn(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,We=(t,s,e)=>(Vn(t,typeof s!="symbol"?s+"":s,e),e),x=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(x||{}),X=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(X||{}),le=(t=>(t[t.Pointer=0]="Pointer",t[t.Focus=1]="Focus",t[t.Other=2]="Other",t))(le||{}),Ze=(t=>(t[t.OpenCombobox=0]="OpenCombobox",t[t.CloseCombobox=1]="CloseCombobox",t[t.GoToOption=2]="GoToOption",t[t.SetTyping=3]="SetTyping",t[t.RegisterOption=4]="RegisterOption",t[t.UnregisterOption=5]="UnregisterOption",t[t.DefaultToFirstOption=6]="DefaultToFirstOption",t[t.SetActivationTrigger=7]="SetActivationTrigger",t[t.UpdateVirtualConfiguration=8]="UpdateVirtualConfiguration",t[t.SetInputElement=9]="SetInputElement",t[t.SetButtonElement=10]="SetButtonElement",t[t.SetOptionsElement=11]="SetOptionsElement",t))(Ze||{});function Ee(t,s=e=>e){let e=t.activeOptionIndex!==null?t.options[t.activeOptionIndex]:null,o=s(t.options.slice()),n=o.length>0&&o[0].dataRef.current.order!==null?o.sort((a,l)=>a.dataRef.current.order-l.dataRef.current.order):zt(o,a=>a.dataRef.current.domRef.current),i=e?n.indexOf(e):null;return i===-1&&(i=null),{options:n,activeOptionIndex:i}}let An={1(t){var s;return(s=t.dataRef.current)!=null&&s.disabled||t.comboboxState===1?t:{...t,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(t){var s,e;if((s=t.dataRef.current)!=null&&s.disabled||t.comboboxState===0)return t;if((e=t.dataRef.current)!=null&&e.value){let o=t.dataRef.current.calculateIndex(t.dataRef.current.value);if(o!==-1)return{...t,activeOptionIndex:o,comboboxState:0,__demoMode:!1}}return{...t,comboboxState:0,__demoMode:!1}},3(t,s){return t.isTyping===s.isTyping?t:{...t,isTyping:s.isTyping}},2(t,s){var e,o,n,i;if((e=t.dataRef.current)!=null&&e.disabled||t.optionsElement&&!((o=t.dataRef.current)!=null&&o.optionsPropsRef.current.static)&&t.comboboxState===1)return t;if(t.virtual){let{options:u,disabled:r}=t.virtual,v=s.focus===D.Specific?s.idx:Ve(s,{resolveItems:()=>u,resolveActiveIndex:()=>{var m,p;return(p=(m=t.activeOptionIndex)!=null?m:u.findIndex(S=>!r(S)))!=null?p:null},resolveDisabled:r,resolveId(){throw new Error("Function not implemented.")}}),b=(n=s.trigger)!=null?n:2;return t.activeOptionIndex===v&&t.activationTrigger===b?t:{...t,activeOptionIndex:v,activationTrigger:b,isTyping:!1,__demoMode:!1}}let a=Ee(t);if(a.activeOptionIndex===null){let u=a.options.findIndex(r=>!r.dataRef.current.disabled);u!==-1&&(a.activeOptionIndex=u)}let l=s.focus===D.Specific?s.idx:Ve(s,{resolveItems:()=>a.options,resolveActiveIndex:()=>a.activeOptionIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled}),c=(i=s.trigger)!=null?i:2;return t.activeOptionIndex===l&&t.activationTrigger===c?t:{...t,...a,isTyping:!1,activeOptionIndex:l,activationTrigger:c,__demoMode:!1}},4:(t,s)=>{var e,o,n,i;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:[...t.options,s.payload]};let a=s.payload,l=Ee(t,u=>(u.push(a),u));t.activeOptionIndex===null&&(n=(o=t.dataRef.current).isSelected)!=null&&n.call(o,s.payload.dataRef.current.value)&&(l.activeOptionIndex=l.options.indexOf(a));let c={...t,...l,activationTrigger:2};return(i=t.dataRef.current)!=null&&i.__demoMode&&t.dataRef.current.value===void 0&&(c.activeOptionIndex=0),c},5:(t,s)=>{var e;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:t.options.filter(n=>n.id!==s.id)};let o=Ee(t,n=>{let i=n.findIndex(a=>a.id===s.id);return i!==-1&&n.splice(i,1),n});return{...t,...o,activationTrigger:2}},6:(t,s)=>t.defaultToFirstOption===s.value?t:{...t,defaultToFirstOption:s.value},7:(t,s)=>t.activationTrigger===s.trigger?t:{...t,activationTrigger:s.trigger},8:(t,s)=>{var e,o;if(t.virtual===null)return{...t,virtual:{options:s.options,disabled:(e=s.disabled)!=null?e:()=>!1}};if(t.virtual.options===s.options&&t.virtual.disabled===s.disabled)return t;let n=t.activeOptionIndex;if(t.activeOptionIndex!==null){let i=s.options.indexOf(t.virtual.options[t.activeOptionIndex]);i!==-1?n=i:n=null}return{...t,activeOptionIndex:n,virtual:{options:s.options,disabled:(o=s.disabled)!=null?o:()=>!1}}},9:(t,s)=>t.inputElement===s.element?t:{...t,inputElement:s.element},10:(t,s)=>t.buttonElement===s.element?t:{...t,buttonElement:s.element},11:(t,s)=>t.optionsElement===s.element?t:{...t,optionsElement:s.element}};class Me extends Vt{constructor(s){super(s),We(this,"actions",{onChange:e=>{let{onChange:o,compare:n,mode:i,value:a}=this.state.dataRef.current;return ce(i,{0:()=>o==null?void 0:o(e),1:()=>{let l=a.slice(),c=l.findIndex(u=>n(u,e));return c===-1?l.push(e):l.splice(c,1),o==null?void 0:o(l)}})},registerOption:(e,o)=>(this.send({type:4,payload:{id:e,dataRef:o}}),()=>{this.state.activeOptionIndex===this.state.dataRef.current.calculateIndex(o.current.value)&&this.send({type:6,value:!0}),this.send({type:5,id:e})}),goToOption:(e,o)=>(this.send({type:6,value:!1}),this.send({type:2,...e,trigger:o})),setIsTyping:e=>{this.send({type:3,isTyping:e})},closeCombobox:()=>{var e,o;this.send({type:1}),this.send({type:6,value:!1}),(o=(e=this.state.dataRef.current).onClose)==null||o.call(e)},openCombobox:()=>{this.send({type:0}),this.send({type:6,value:!0})},setActivationTrigger:e=>{this.send({type:7,trigger:e})},selectActiveOption:()=>{let e=this.selectors.activeOptionIndex(this.state);if(e!==null){if(this.actions.setIsTyping(!1),this.state.virtual)this.actions.onChange(this.state.virtual.options[e]);else{let{dataRef:o}=this.state.options[e];this.actions.onChange(o.current.value)}this.actions.goToOption({focus:D.Specific,idx:e})}},setInputElement:e=>{this.send({type:9,element:e})},setButtonElement:e=>{this.send({type:10,element:e})},setOptionsElement:e=>{this.send({type:11,element:e})}}),We(this,"selectors",{activeDescendantId:e=>{var o,n;let i=this.selectors.activeOptionIndex(e);if(i!==null)return e.virtual?(n=e.options.find(a=>!a.dataRef.current.disabled&&e.dataRef.current.compare(a.dataRef.current.value,e.virtual.options[i])))==null?void 0:n.id:(o=e.options[i])==null?void 0:o.id},activeOptionIndex:e=>{if(e.defaultToFirstOption&&e.activeOptionIndex===null&&(e.virtual?e.virtual.options.length>0:e.options.length>0)){if(e.virtual){let{options:n,disabled:i}=e.virtual,a=n.findIndex(l=>{var c;return!((c=i==null?void 0:i(l))!=null&&c)});if(a!==-1)return a}let o=e.options.findIndex(n=>!n.dataRef.current.disabled);if(o!==-1)return o}return e.activeOptionIndex},activeOption:e=>{var o,n;let i=this.selectors.activeOptionIndex(e);return i===null?null:e.virtual?e.virtual.options[i??0]:(n=(o=e.options[i])==null?void 0:o.dataRef.current.value)!=null?n:null},isActive:(e,o,n)=>{var i;let a=this.selectors.activeOptionIndex(e);return a===null?!1:e.virtual?a===e.dataRef.current.calculateIndex(o):((i=e.options[a])==null?void 0:i.id)===n},shouldScrollIntoView:(e,o,n)=>!(e.virtual||e.__demoMode||e.comboboxState!==0||e.activationTrigger===0||!this.selectors.isActive(e,o,n))});{let e=this.state.id,o=Ge.get(null);this.disposables.add(o.on(At.Push,n=>{!o.selectors.isTop(n,e)&&this.state.comboboxState===0&&this.actions.closeCombobox()})),this.on(0,()=>o.actions.push(e)),this.on(1,()=>o.actions.pop(e))}}static new({id:s,virtual:e=null,__demoMode:o=!1}){var n;return new Me({id:s,dataRef:{current:{}},comboboxState:o?0:1,isTyping:!1,options:[],virtual:e?{options:e.options,disabled:(n=e.disabled)!=null?n:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:o})}reduce(s,e){return ce(e.type,An,s,e)}}const et=d.createContext(null);function ve(t){let s=d.useContext(et);if(s===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,tt),e}return s}function tt({id:t,virtual:s=null,__demoMode:e=!1}){let o=d.useMemo(()=>Me.new({id:t,virtual:s,__demoMode:e}),[]);return kt(()=>o.dispose()),o}let me=d.createContext(null);me.displayName="ComboboxDataContext";function pe(t){let s=d.useContext(me);if(s===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,pe),e}return s}let nt=d.createContext(null);function zn(t){let s=ve("VirtualProvider"),e=pe("VirtualProvider"),{options:o}=e.virtual,n=L(s,m=>m.optionsElement),[i,a]=d.useMemo(()=>{let m=n;if(!m)return[0,0];let p=window.getComputedStyle(m);return[parseFloat(p.paddingBlockStart||p.paddingTop),parseFloat(p.paddingBlockEnd||p.paddingBottom)]},[n]),l=Rn({enabled:o.length!==0,scrollPaddingStart:i,scrollPaddingEnd:a,count:o.length,estimateSize(){return 40},getScrollElement(){return s.state.optionsElement},overscan:12}),[c,u]=d.useState(0);ue(()=>{u(m=>m+1)},[o]);let r=l.getVirtualItems(),v=L(s,m=>m.activationTrigger===le.Pointer),b=L(s,s.selectors.activeOptionIndex);return r.length===0?null:k.createElement(nt.Provider,{value:l},k.createElement("div",{style:{position:"relative",width:"100%",height:`${l.getTotalSize()}px`},ref:m=>{m&&(v||b!==null&&o.length>b&&l.scrollToIndex(b))}},r.map(m=>{var p;return k.createElement(d.Fragment,{key:m.key},k.cloneElement((p=t.children)==null?void 0:p.call(t,{...t.slot,option:o[m.index]}),{key:`${c}-${m.key}`,"data-index":m.index,"aria-setsize":o.length,"aria-posinset":m.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${m.start}px)`,overflowAnchor:"none"}}))})))}let kn=d.Fragment;function Bn(t,s){let e=d.useId(),o=an(),{value:n,defaultValue:i,onChange:a,form:l,name:c,by:u,invalid:r=!1,disabled:v=o||!1,onClose:b,__demoMode:m=!1,multiple:p=!1,immediate:S=!1,virtual:O=null,nullable:V,...R}=t,w=hn(i),[P=p?[]:void 0,B]=bn(n,a,w),y=tt({id:e,virtual:O,__demoMode:m}),H=d.useRef({static:!1,hold:!1}),j=vn(u),N=$(h=>O?u===null?O.options.indexOf(h):O.options.findIndex(F=>j(F,h)):y.state.options.findIndex(F=>j(F.dataRef.current.value,h))),J=d.useCallback(h=>ce(z.mode,{[X.Multi]:()=>P.some(F=>j(F,h)),[X.Single]:()=>j(P,h)}),[P]),_=L(y,h=>h.virtual),g=$(()=>b==null?void 0:b()),z=d.useMemo(()=>({__demoMode:m,immediate:S,optionsPropsRef:H,value:P,defaultValue:w,disabled:v,invalid:r,mode:p?X.Multi:X.Single,virtual:O?_:null,onChange:B,isSelected:J,calculateIndex:N,compare:j,onClose:g}),[P,w,v,r,p,B,J,m,y,O,_,g]);ue(()=>{var h;O&&y.send({type:Ze.UpdateVirtualConfiguration,options:O.options,disabled:(h=O.disabled)!=null?h:null})},[O,O==null?void 0:O.options,O==null?void 0:O.disabled]),ue(()=>{y.state.dataRef.current=z},[z]);let[A,C,K,ie]=L(y,h=>[h.comboboxState,h.buttonElement,h.inputElement,h.optionsElement]),Z=Ge.get(null),ee=L(Z,d.useCallback(h=>Z.selectors.isTop(h,e),[Z,e]));ln(ee,[C,K,ie],()=>y.actions.closeCombobox());let te=L(y,y.selectors.activeOptionIndex),ne=L(y,y.selectors.activeOption),Q=d.useMemo(()=>({open:A===x.Open,disabled:v,invalid:r,activeIndex:te,activeOption:ne,value:P}),[z,v,P,r,ne,A]),[se,f]=rn(),U=s===null?{}:{ref:s},M=d.useCallback(()=>{if(w!==void 0)return B==null?void 0:B(w)},[B,w]),q=be();return k.createElement(f,{value:se,props:{htmlFor:K==null?void 0:K.id},slot:{open:A===x.Open,disabled:v}},k.createElement(un,null,k.createElement(me.Provider,{value:z},k.createElement(et.Provider,{value:y},k.createElement(dn,{value:ce(A,{[x.Open]:xe.Open,[x.Closed]:xe.Closed})},c!=null&&k.createElement(gn,{disabled:v,data:P!=null?{[c]:P}:{},form:l,onReset:M}),q({ourProps:U,theirProps:R,slot:Q,defaultTag:kn,name:"Combobox"}))))))}let Dn="input";function Ln(t,s){var e,o;let n=ve("Combobox.Input"),i=pe("Combobox.Input"),a=d.useId(),l=Lt(),{id:c=l||`headlessui-combobox-input-${a}`,onChange:u,displayValue:r,disabled:v=i.disabled||!1,autoFocus:b=!1,type:m="text",...p}=t,[S]=L(n,f=>[f.inputElement]),O=d.useRef(null),V=Se(O,s,Nt(),n.actions.setInputElement),R=Ie(S),[w,P]=L(n,f=>[f.comboboxState,f.isTyping]),B=qt(),y=$(()=>{n.actions.onChange(null),n.state.optionsElement&&(n.state.optionsElement.scrollTop=0),n.actions.goToOption({focus:D.Nothing})}),H=d.useMemo(()=>{var f;return typeof r=="function"&&i.value!==void 0?(f=r(i.value))!=null?f:"":typeof i.value=="string"?i.value:""},[i.value,r]);qe(([f,U],[M,q])=>{if(n.state.isTyping)return;let h=O.current;h&&((q===x.Open&&U===x.Closed||f!==M)&&(h.value=f),requestAnimationFrame(()=>{if(n.state.isTyping||!h||(R==null?void 0:R.activeElement)!==h)return;let{selectionStart:F,selectionEnd:I}=h;Math.abs((I??0)-(F??0))===0&&F===0&&h.setSelectionRange(h.value.length,h.value.length)}))},[H,w,R,P]),qe(([f],[U])=>{if(f===x.Open&&U===x.Closed){if(n.state.isTyping)return;let M=O.current;if(!M)return;let q=M.value,{selectionStart:h,selectionEnd:F,selectionDirection:I}=M;M.value="",M.value=q,I!==null?M.setSelectionRange(h,F,I):M.setSelectionRange(h,F)}},[w]);let j=d.useRef(!1),N=$(()=>{j.current=!0}),J=$(()=>{B.nextFrame(()=>{j.current=!1})}),_=$(f=>{switch(n.actions.setIsTyping(!0),f.key){case Y.Enter:if(n.state.comboboxState!==x.Open||j.current)return;if(f.preventDefault(),f.stopPropagation(),n.selectors.activeOptionIndex(n.state)===null){n.actions.closeCombobox();return}n.actions.selectActiveOption(),i.mode===X.Single&&n.actions.closeCombobox();break;case Y.ArrowDown:return f.preventDefault(),f.stopPropagation(),ce(n.state.comboboxState,{[x.Open]:()=>n.actions.goToOption({focus:D.Next}),[x.Closed]:()=>n.actions.openCombobox()});case Y.ArrowUp:return f.preventDefault(),f.stopPropagation(),ce(n.state.comboboxState,{[x.Open]:()=>n.actions.goToOption({focus:D.Previous}),[x.Closed]:()=>{ae.flushSync(()=>n.actions.openCombobox()),i.value||n.actions.goToOption({focus:D.Last})}});case Y.Home:if(f.shiftKey)break;return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:D.First});case Y.PageUp:return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:D.First});case Y.End:if(f.shiftKey)break;return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:D.Last});case Y.PageDown:return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:D.Last});case Y.Escape:return n.state.comboboxState!==x.Open?void 0:(f.preventDefault(),n.state.optionsElement&&!i.optionsPropsRef.current.static&&f.stopPropagation(),i.mode===X.Single&&i.value===null&&y(),n.actions.closeCombobox());case Y.Tab:if(n.state.comboboxState!==x.Open)return;i.mode===X.Single&&n.state.activationTrigger!==le.Focus&&n.actions.selectActiveOption(),n.actions.closeCombobox();break}}),g=$(f=>{u==null||u(f),i.mode===X.Single&&f.target.value===""&&y(),n.actions.openCombobox()}),z=$(f=>{var U,M,q;let h=(U=f.relatedTarget)!=null?U:re.find(F=>F!==f.currentTarget);if(!((M=n.state.optionsElement)!=null&&M.contains(h))&&!((q=n.state.buttonElement)!=null&&q.contains(h))&&n.state.comboboxState===x.Open)return f.preventDefault(),i.mode===X.Single&&i.value===null&&y(),n.actions.closeCombobox()}),A=$(f=>{var U,M,q;let h=(U=f.relatedTarget)!=null?U:re.find(F=>F!==f.currentTarget);(M=n.state.buttonElement)!=null&&M.contains(h)||(q=n.state.optionsElement)!=null&&q.contains(h)||i.disabled||i.immediate&&n.state.comboboxState!==x.Open&&B.microTask(()=>{ae.flushSync(()=>n.actions.openCombobox()),n.actions.setActivationTrigger(le.Focus)})}),C=we(),K=Wt(),{isFocused:ie,focusProps:Z}=Ye({autoFocus:b}),{isHovered:ee,hoverProps:te}=Je({isDisabled:v}),ne=L(n,f=>f.optionsElement),Q=d.useMemo(()=>({open:w===x.Open,disabled:v,invalid:i.invalid,hover:ee,focus:ie,autofocus:b}),[i,ee,ie,b,v,i.invalid]),se=je({ref:V,id:c,role:"combobox",type:m,"aria-controls":ne==null?void 0:ne.id,"aria-expanded":w===x.Open,"aria-activedescendant":L(n,n.selectors.activeDescendantId),"aria-labelledby":C,"aria-describedby":K,"aria-autocomplete":"list",defaultValue:(o=(e=t.defaultValue)!=null?e:i.defaultValue!==void 0?r==null?void 0:r(i.defaultValue):null)!=null?o:i.defaultValue,disabled:v||void 0,autoFocus:b,onCompositionStart:N,onCompositionEnd:J,onKeyDown:_,onChange:g,onFocus:A,onBlur:z},Z,te);return be()({ourProps:se,theirProps:p,slot:Q,defaultTag:Dn,name:"Combobox.Input"})}let Nn="button";function qn(t,s){let e=ve("Combobox.Button"),o=pe("Combobox.Button"),[n,i]=d.useState(null),a=Se(s,i,e.actions.setButtonElement),l=d.useId(),{id:c=`headlessui-combobox-button-${l}`,disabled:u=o.disabled||!1,autoFocus:r=!1,...v}=t,[b,m,p]=L(e,g=>[g.comboboxState,g.inputElement,g.optionsElement]),S=Xe(m),O=b===x.Open;Ht(O,{trigger:n,action:d.useCallback(g=>{if(n!=null&&n.contains(g.target))return fe.Ignore;if(m!=null&&m.contains(g.target))return fe.Ignore;let z=g.target.closest('[role="option"]:not([data-disabled])');return Ut(z)?fe.Select(z):p!=null&&p.contains(g.target)?fe.Ignore:fe.Close},[n,m,p]),close:e.actions.closeCombobox,select:e.actions.selectActiveOption});let V=$(g=>{switch(g.key){case Y.Space:case Y.Enter:g.preventDefault(),g.stopPropagation(),e.state.comboboxState===x.Closed&&ae.flushSync(()=>e.actions.openCombobox()),S();return;case Y.ArrowDown:g.preventDefault(),g.stopPropagation(),e.state.comboboxState===x.Closed&&(ae.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:D.First})),S();return;case Y.ArrowUp:g.preventDefault(),g.stopPropagation(),e.state.comboboxState===x.Closed&&(ae.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:D.Last})),S();return;case Y.Escape:if(e.state.comboboxState!==x.Open)return;g.preventDefault(),e.state.optionsElement&&!o.optionsPropsRef.current.static&&g.stopPropagation(),ae.flushSync(()=>e.actions.closeCombobox()),S();return;default:return}}),R=$(g=>{g.preventDefault(),!cn(g.currentTarget)&&(g.button===Te.Left&&(e.state.comboboxState===x.Open?e.actions.closeCombobox():e.actions.openCombobox()),S())}),w=we([c]),{isFocusVisible:P,focusProps:B}=Ye({autoFocus:r}),{isHovered:y,hoverProps:H}=Je({isDisabled:u}),{pressed:j,pressProps:N}=Kt({disabled:u}),J=d.useMemo(()=>({open:b===x.Open,active:j||b===x.Open,disabled:u,invalid:o.invalid,value:o.value,hover:y,focus:P}),[o,y,P,j,u,b]),_=je({ref:a,id:c,type:Gt(t,n),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":p==null?void 0:p.id,"aria-expanded":b===x.Open,"aria-labelledby":w,disabled:u||void 0,autoFocus:r,onPointerDown:R,onKeyDown:V},B,H,N);return be()({ourProps:_,theirProps:v,slot:J,defaultTag:Nn,name:"Combobox.Button"})}let Wn="div",Hn=ze.RenderStrategy|ze.Static;function Un(t,s){var e,o,n;let i=d.useId(),{id:a=`headlessui-combobox-options-${i}`,hold:l=!1,anchor:c,portal:u=!1,modal:r=!0,transition:v=!1,...b}=t,m=ve("Combobox.Options"),p=pe("Combobox.Options"),S=Yt(c);S&&(u=!0);let[O,V]=Jt(S),[R,w]=d.useState(null),P=Qt(),B=Se(s,S?O:null,m.actions.setOptionsElement,w),[y,H,j,N,J]=L(m,I=>[I.comboboxState,I.inputElement,I.buttonElement,I.optionsElement,I.activationTrigger]),_=Ie(H||j),g=Ie(N),z=Xt(),[A,C]=Zt(v,R,z!==null?(z&xe.Open)===xe.Open:y===x.Open);en(A,H,m.actions.closeCombobox);let K=p.__demoMode?!1:r&&y===x.Open;tn(K,g);let ie=p.__demoMode?!1:r&&y===x.Open;nn(ie,{allowed:d.useCallback(()=>[H,j,N],[H,j,N])}),ue(()=>{var I;p.optionsPropsRef.current.static=(I=t.static)!=null?I:!1},[p.optionsPropsRef,t.static]),ue(()=>{p.optionsPropsRef.current.hold=l},[p.optionsPropsRef,l]),xn(y===x.Open,{container:N,accept(I){return I.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:I.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(I){I.setAttribute("role","none")}});let Z=we([j==null?void 0:j.id]),ee=d.useMemo(()=>({open:y===x.Open,option:void 0}),[y]),te=$(()=>{m.actions.setActivationTrigger(le.Pointer)}),ne=$(I=>{I.preventDefault(),m.actions.setActivationTrigger(le.Pointer)}),Q=je(S?P():{},{"aria-labelledby":Z,role:"listbox","aria-multiselectable":p.mode===X.Multi?!0:void 0,id:a,ref:B,style:{...b.style,...V,"--input-width":Ae(H,!0).width,"--button-width":Ae(j,!0).width},onWheel:J===le.Pointer?void 0:te,onMouseDown:ne,...on(C)}),se=A&&y===x.Closed,f=ke(se,(e=p.virtual)==null?void 0:e.options),U=ke(se,p.value),M=$(I=>p.compare(U,I)),q=d.useMemo(()=>{if(!p.virtual)return p;if(f===void 0)throw new Error("Missing `options` in virtual mode");return f!==p.virtual.options?{...p,virtual:{...p.virtual,options:f}}:p},[p,f,(o=p.virtual)==null?void 0:o.options]);p.virtual&&Object.assign(b,{children:k.createElement(me.Provider,{value:q},k.createElement(zn,{slot:ee},b.children))});let h=be(),F=d.useMemo(()=>p.mode===X.Multi?p:{...p,isSelected:M},[p,M]);return k.createElement(sn,{enabled:u?t.static||A:!1,ownerDocument:_},k.createElement(me.Provider,{value:F},h({ourProps:Q,theirProps:{...b,children:k.createElement(mn,{freeze:se},typeof b.children=="function"?(n=b.children)==null?void 0:n.call(b,ee):b.children)},slot:ee,defaultTag:Wn,features:Hn,visible:A,name:"Combobox.Options"})))}let Kn="div";function Gn(t,s){var e,o,n;let i=pe("Combobox.Option"),a=ve("Combobox.Option"),l=d.useId(),{id:c=`headlessui-combobox-option-${l}`,value:u,disabled:r=(n=(o=(e=i.virtual)==null?void 0:e.disabled)==null?void 0:o.call(e,u))!=null?n:!1,order:v=null,...b}=t,[m]=L(a,C=>[C.inputElement]),p=Xe(m),S=L(a,d.useCallback(C=>a.selectors.isActive(C,u,c),[u,c])),O=i.isSelected(u),V=d.useRef(null),R=Ke({disabled:r,value:u,domRef:V,order:v}),w=d.useContext(nt),P=Se(s,V,w?w.measureElement:null),B=$(()=>{a.actions.setIsTyping(!1),a.actions.onChange(u)});ue(()=>a.actions.registerOption(c,R),[R,c]);let y=L(a,d.useCallback(C=>a.selectors.shouldScrollIntoView(C,u,c),[u,c]));ue(()=>{if(y)return pn().requestAnimationFrame(()=>{var C,K;(K=(C=V.current)==null?void 0:C.scrollIntoView)==null||K.call(C,{block:"nearest"})})},[y,V]);let H=$(C=>{C.preventDefault(),C.button===Te.Left&&(r||(B(),fn()||requestAnimationFrame(()=>p()),i.mode===X.Single&&a.actions.closeCombobox()))}),j=$(()=>{if(r)return a.actions.goToOption({focus:D.Nothing});let C=i.calculateIndex(u);a.actions.goToOption({focus:D.Specific,idx:C})}),N=Dt(),J=$(C=>N.update(C)),_=$(C=>{if(!N.wasMoved(C)||r||S)return;let K=i.calculateIndex(u);a.actions.goToOption({focus:D.Specific,idx:K},le.Pointer)}),g=$(C=>{N.wasMoved(C)&&(r||S&&(i.optionsPropsRef.current.hold||a.actions.goToOption({focus:D.Nothing})))}),z=d.useMemo(()=>({active:S,focus:S,selected:O,disabled:r}),[S,O,r]),A={id:c,ref:P,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":O,disabled:void 0,onMouseDown:H,onFocus:j,onPointerEnter:J,onMouseEnter:J,onPointerMove:_,onMouseMove:_,onPointerLeave:g,onMouseLeave:g};return be()({ourProps:A,theirProps:b,slot:z,defaultTag:Kn,name:"Combobox.Option"})}let Yn=he(Bn),ot=he(qn),st=he(Ln),Jn=Bt,it=he(Un),at=he(Gn),Qn=Object.assign(Yn,{Input:st,Button:ot,Label:Jn,Options:it,Option:at});const Xn=`
  jn-relative
`,Zn=`
  jn-pointer-events-none
  jn-top-2
  jn-left-[0.9375rem]
`,eo=`
  jn-rounded-3px
  jn-bg-theme-textinput
  jn-text-theme-textinput
  jn-border
  jn-text-base
  jn-leading-4
  jn-w-full
  jn-px-4
  jn-h-textinput
  jn-text-left
  jn-overflow-hidden
  jn-text-ellipsis
  jn-whitespace-nowrap
  focus:jn-outline-none
  focus:jn-ring-2
  focus:jn-ring-theme-focus
`,to=`
  jn-pt-[1.125rem] 
  jn-pb-1
`,no=`
  jn-py-4
`,oo=`
  jn-cursor-not-allowed
  jn-pointer-events-none
  jn-opacity-50
`,so=`
  jn-border-theme-textinput-default
`,io=`
  jn-border-theme-success
`,ao=`
  jn-border-theme-error
`,lo=`
  jn-absolute
  jn-top-0
  jn-right-0
  jn-h-textinput
  jn-w-6
  jn-h-4
  jn-border-l-0
  jn-border-y-[1px]
  jn-border-r-[1px]
  jn-rounded-tr
  jn-rounded-br
  jn-appearance-none
  jn-bg-theme-textinput
  jn-text-theme-textinput
`,ro=`
  jn-border-theme-textinput-default
`,uo=`
  jn-border-theme-error
`,co=`
  jn-border-theme-success
`,po=`
  jn-cursor-not-allowed
  jn-pointer-events-none
  jn-bg-transparent
  jn-opacity-50
`,fo=`
  jn-rounded
  jn-bg-theme-background-lvl-1
  jn-w-full
  jn-overflow-y-auto
`,mo=`
  jn-absolute
  jn-top-[.4rem]
  jn-right-6
`,ho=`
  jn-absolute
  jn-top-1/2
  jn-left-1/2
  jn-translate-y-[-50%]
  jn-translate-x-[-0.75rem]
`,ye=d.createContext(void 0),He=({ariaLabel:t,children:s,className:e="",defaultValue:o="",disabled:n=!1,error:i=!1,errortext:a="",helptext:l="",id:c="",invalid:u=!1,loading:r=!1,label:v,name:b="",onBlur:m,onChange:p,onFocus:S,onInputChange:O,placeholder:V="Select…",required:R=!1,successtext:w="",truncateOptions:P=!1,valid:B=!1,value:y="",valueLabel:H,width:j="full",wrapperClassName:N="",...J})=>{const _=E=>!(typeof E=="string"&&E.trim().length===0),g=c||"juno-combobox-"+d.useId(),z="juno-combobox-helptext-"+d.useId(),[A,C]=d.useState(!1),[K,ie]=d.useState(new Map),[Z,ee]=d.useState(""),[te,ne]=d.useState(y),[Q,se]=d.useState(!1),[f,U]=d.useState(!1),[M,q]=d.useState(!1),[h,F]=d.useState(!1),[I,lt]=d.useState(!1),{x:rt,y:ut,strategy:dt,refs:$e,context:Re}=St({open:A,onOpenChange:C,placement:"bottom-start",middleware:[wt(4),jt(),Tt(),Mt({apply({availableWidth:E,availableHeight:G,elements:W,rects:oe}){Object.assign(W.floating.style,{maxWidth:`${E}px`,maxHeight:`${G}px`,minWidth:`${oe.reference.width}px`,overflowY:"auto"})}})],whileElementsMounted:It}),{getReferenceProps:ct,getFloatingProps:pt}=Ot([Ct(Re),Et(Re)]),ft=(E,G,W)=>{ie(oe=>new Map([...Array.from(oe),[E??W,{val:E,label:G,children:W}]]))},_e=d.useMemo(()=>u||!!(a&&_(a)),[u,a]),Pe=d.useMemo(()=>B||!!(w&&_(w)),[B,w]);d.useEffect(()=>{ne(y)},[y]),d.useEffect(()=>{U(i)},[i]),d.useEffect(()=>{se(r)},[r]),d.useEffect(()=>{F(_e)},[_e]),d.useEffect(()=>{lt(Pe)},[Pe]);const mt=E=>{ne(E),E&&C(!1),p&&p(E)},ht=E=>{var G;ee((G=E==null?void 0:E.target)==null?void 0:G.value),O&&O(E)},bt=E=>{q(!0),A||C(!0),S&&S(E)},vt=E=>{q(!1),C(!1),m&&m(E)},gt=_t(),xt=Z===""?k.Children.toArray(s):k.Children.toArray(s).filter(E=>{var G;if(k.isValidElement(E)){const W=((G=E.props.children)==null?void 0:G.toString())||E.props.label||E.props.value;return W==null?void 0:W.toLowerCase().includes(Z.toLowerCase())}else return!1}),yt=E=>{const G=oe=>oe==null?"":typeof oe=="object"?String(oe)!=="[object Object]"?String(oe):"":String(oe),W=K.get(E);return(W==null?void 0:W.children)&&G(W.children)||(W==null?void 0:W.label)||H||G(E)||""};return T.jsx(ye.Provider,{value:{selectedValue:te,truncateOptions:P,addOptionValueAndLabel:ft},children:T.jsxs("div",{className:`
          juno-combobox-wrapper
          jn-relative
          ${j=="auto"?"jn-inline-block":"jn-block"}
          ${j=="auto"?"jn-w-auto":"jn-w-full"}
          ${N}
        `,children:[T.jsx(Qn,{defaultValue:o,disabled:n||Q||f,name:b,onChange:mt,value:te||o,as:"div",...J,children:({open:E})=>(d.useEffect(()=>{E!==A&&C(E)},[E]),T.jsxs(T.Fragment,{children:[T.jsxs("div",{ref:$e.setReference,className:`juno-combobox-input-wrapper ${Xn} ${n?"jn-cursor-not-allowed":""}`,children:[v&&_(v)&&!Q&&!f?T.jsx($t,{text:v,disabled:n,required:R,htmlFor:g,className:`${Zn}`,floating:!0,minimized:!!(V||M||Z&&_(Z)||te&&_(te)),...ct()}):"",T.jsx(st,{autoComplete:"off","aria-label":t||v,"aria-describedby":l?z:"",id:g,onBlur:vt,onChange:ht,onFocus:bt,placeholder:!Q&&!f?V:"",displayValue:G=>yt(G),className:`
                      juno-combobox-input 
                      ${eo} 
                      ${v&&_(v)?to:no}
                      ${n?oo:""}
                      ${h?"juno-combobox-invalid "+ao:""} 
                      ${I?"juno-combobox-valid "+io:""}  
                      ${I||h?"":so} 
                      ${Q?"juno-combobox-loading jn-cursor-not-allowed":""}
                      ${f?"juno-combobox-error jn-cursor-not-allowed":""}
                      ${e}
                    `}),Q||f?T.jsx("span",{className:`${ho}`,children:Q?T.jsx(Rt,{className:"jn-cursor-not-allowed"}):T.jsx(ge,{icon:"errorOutline",color:"jn-text-theme-error",className:"jn-cursor-not-allowed"})}):I||h?T.jsx("span",{className:`
                        juno-combobox-icon-container 
                        ${mo} 
                        ${n?"jn-opacity-50":""}
                      `,children:T.jsx(ge,{icon:I?"checkCircle":"dangerous",color:I?"jn-text-theme-success":"jn-text-theme-error"})}):"",!f&&!Q?T.jsx(ot,{className:`
                        juno-combobox-toggle 
                        ${lo}
                        ${n?po:""}
                        ${h?"juno-combobox-toggle-invalid "+uo:""} 
                        ${I?"juno-combobox-toggle-valid "+co:""}  
                        ${I||h?"":ro} 
                      `,children:T.jsx(ge,{icon:A?"expandLess":"expandMore"})}):null]}),A&&ae.createPortal(T.jsx("div",{ref:$e.setFloating,className:`juno-combobox-options ${fo}`,style:{position:dt,top:ut??0,left:rt??0},...pt(),children:T.jsx(it,{static:!0,className:"jn-w-full",children:xt})}),gt??document.body)]}))}),a&&_(a)?T.jsx(Oe,{text:a,variant:"error"}):"",w&&_(w)?T.jsx(Oe,{text:w,variant:"success"}):"",l&&_(l)?T.jsx(Oe,{text:l,id:z}):""]})})};try{ye.displayName="ComboBoxContext",ye.__docgenInfo={description:"",displayName:"ComboBoxContext",props:{}}}catch{}try{He.displayName="ComboBox",He.__docgenInfo={description:"",displayName:"ComboBox",props:{ariaLabel:{defaultValue:null,description:"The aria-label of the ComboBox. Defaults to the label if label was passed.",name:"ariaLabel",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"The children to Render. Use `ComboBox.Option` elements.",name:"children",required:!1,type:{name:"ReactNode"}},className:{defaultValue:{value:""},description:"A custom className. Will be passed to the internal text input element of the ComboBox",name:"className",required:!1,type:{name:"string"}},defaultValue:{defaultValue:{value:""},description:"Pass a defaultValue to use as an uncontrolled Component that will handle its state internally",name:"defaultValue",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Whether the ComboBox is disabled",name:"disabled",required:!1,type:{name:"boolean"}},error:{defaultValue:{value:"false"},description:"Whether the ComboBox has an error. Note this refers to an internal error like failing to load options etc., to indicate failed validation use `invalid` instead.",name:"error",required:!1,type:{name:"boolean"}},errortext:{defaultValue:{value:""},description:"An errortext to display when the ComboBox failed validation or an internal error occurred.",name:"errortext",required:!1,type:{name:"ReactNode"}},helptext:{defaultValue:{value:""},description:"A helptext to render to explain meaning and significance of the ComboBox",name:"helptext",required:!1,type:{name:"ReactNode"}},id:{defaultValue:{value:""},description:"The Id of the ComboBox. Will be assigned to the text input part of the ComboBox. If not passed, an id will be auto-generated.",name:"id",required:!1,type:{name:"string"}},invalid:{defaultValue:{value:"false"},description:"Whether the ComboBox failed validation",name:"invalid",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"The label of the ComboBox",name:"label",required:!1,type:{name:"string"}},loading:{defaultValue:{value:"false"},description:"Whether the ComboBox is busy loading options",name:"loading",required:!1,type:{name:"boolean"}},name:{defaultValue:{value:""},description:"The name attribute of the ComboBox when used as part of a form",name:"name",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"A handler to execute when the ComboBox looses focus",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onChange:{defaultValue:null,description:"A handler to execute when the ComboBox' selected value changes",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},onFocus:{defaultValue:null,description:"A handler to execute when the ComboBox input receives focus",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onInputChange:{defaultValue:null,description:"Handler to execute when the ComboBox text input value changes",name:"onInputChange",required:!1,type:{name:"ChangeEventHandler<HTMLInputElement>"}},placeholder:{defaultValue:{value:"Select…"},description:"A placeholder to render in the text input",name:"placeholder",required:!1,type:{name:"string"}},required:{defaultValue:{value:"false"},description:"Whether the ComboBox is required",name:"required",required:!1,type:{name:"boolean"}},successtext:{defaultValue:{value:""},description:"A text to display in case the ComboBox was successfully validated. Will set the ComboBox to `valid` when passed.",name:"successtext",required:!1,type:{name:"ReactNode"}},truncateOptions:{defaultValue:{value:"false"},description:"Whether the option labels should be truncated in case they are longer/wider than the available space in an option or not. Default is FALSE.",name:"truncateOptions",required:!1,type:{name:"boolean"}},valid:{defaultValue:{value:"false"},description:"Whether the ComboBox was successfully validated",name:"valid",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"The selected value of the ComboBox in Controlled Mode.",name:"value",required:!1,type:{name:"string"}},valueLabel:{defaultValue:null,description:"The label of the passed value or defaultValue. If you want to use controlled mode or pass as defaultValue in uncontrolled mode and additionally use labels for human-readable SelectOptions, you need to also pass the matching label for the passed value/defaultValue so that the Select component can render itself properly",name:"valueLabel",required:!1,type:{name:"string"}},width:{defaultValue:{value:"full"},description:"The width of the text input. Either 'full' (default) or 'auto'.",name:"width",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"full"'}]}},wrapperClassName:{defaultValue:{value:""},description:"Pass a custom classname to the wrapping <div> element. This can be useful if you must add styling to the outermost wrapping element of this component, e.g. for positioning.",name:"wrapperClassName",required:!1,type:{name:"string"}}}}}catch{}const bo=`
  jn-flex
  jn-pt-[0.6875rem]
  jn-pb-[0.5rem]
  jn-pr-[0.875rem]
  jn-select-none
  data-[headlessui-state~=active]:jn-outline-none
  data-[headlessui-state~=active]:jn-ring-2
  data-[headlessui-state~=active]:jn-ring-inset
  data-[headlessui-state~=active]:jn-ring-theme-focus
  data-[headlessui-state~=active]:jn-bg-theme-background-lvl-3
`,vo=`
  jn-text-theme-default
  jn-pl-[2.375rem]
`,go=`
  jn-text-theme-accent
  jn-pl-3.5
`,xo=`
  jn-inline-block
  jn-mr-1.5
`,yo=`
  jn-opacity-50
  jn-cursor-not-allowed
`,So=`
  jn-block
  jn-h-6
  jn-overflow-hidden
  jn-text-ellipsis
  jn-whitespace-nowrap
`,Ue=({children:t,disabled:s=!1,value:e="",label:o="",className:n="",...i})=>{const a=d.useContext(ye),{selectedValue:l,truncateOptions:c,addOptionValueAndLabel:u}=a||{};d.useEffect(()=>{u&&u(e,o,t)},[e,o,t]);const r=e||t;return T.jsx(at,{value:r,disabled:s,as:d.Fragment,children:T.jsxs("li",{className:`
          juno-combobox-option 
          ${bo}
          ${l===e?go:vo}
          ${s?"jn-cursor-not-allowed":""}
          ${n}
        `,...i,children:[l===r?T.jsx(ge,{icon:"check",size:"18",className:`${xo}`}):"",T.jsx("span",{className:`
            ${s?yo:""}
            ${c?So:""}
          `,children:t||o||e})]})})};try{Ue.displayName="ComboBoxOption",Ue.__docgenInfo={description:"",displayName:"ComboBoxOption",props:{children:{defaultValue:null,description:"Content to render inside the ComboBoxOption. Is specified should be string.",name:"children",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"If option is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"Option value.",name:"value",required:!1,type:{name:"string"}},label:{defaultValue:{value:""},description:"Option label.",name:"label",required:!1,type:{name:"string"}},className:{defaultValue:{value:""},description:"CSS class for the option.",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{He as C,Ue as a};
