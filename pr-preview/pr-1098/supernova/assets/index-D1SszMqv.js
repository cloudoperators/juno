import{S as wn,p as Ts,r as re,s as ht,a as ut,n as Gr,i as qt,b as ks,t as Qr,f as Jr,c as Kr,d as Es,e as bt,h as Os,g as Xr,u as Ae,j as i,K as D,k as oe,l as Ge,m as St,o as ei,q as ti,v as bn,w as si,x as ni,Z as ri,z as ii,L as ai,y as oi,A as Sn,B as be,C as li,D as me,E as ci,F as cs,G as Te,H as Qe,R as Re,I as Tt,J as ft,M as Tn,N as mt,O as z,W as pt,P as us,Q as Je,T as ve,U as kn,V as Ke,X as _,Y as A,_ as C,$ as ui,a0 as ds,a1 as hs,a2 as Be,a3 as Se,a4 as En,a5 as di,a6 as hi,a7 as On,a8 as fi,a9 as mi,aa as js,ab as Ns,ac as pi,ad as yi,ae as gi,af as xi,ag as vi,ah as jn,ai as Nn,aj as wi,ak as bi,al as Si,am as Ti,an as ki,ao as Ei,ap as Oi,aq as ji,ar as Ni,as as Mt,at as Cs,au as Lt,av as Ci,aw as Ii,ax as Fi,ay as Di,az as Mi,aA as Li,aB as Ai,aC as Ri}from"./App-BJYFXLgk.js";import{r as w,R as we,g as Vi}from"./index-Ddw85wzb.js";import"./index-DSmT9BK2.js";var $i=class extends wn{constructor(t,e){super(),this.options=e,this.#s=t,this.#i=null,this.#o=Ts(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#s;#e=void 0;#n=void 0;#t=void 0;#r;#a;#o;#i;#p;#h;#f;#c;#u;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),Is(this.#e,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Bt(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Bt(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#b(),this.#e.removeObserver(this)}setOptions(t,e){const s=this.options,n=this.#e;if(this.options=this.#s.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof re(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#e.setOptions(this.options),s._defaulted&&!ht(this.options,s)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const r=this.hasListeners();r&&Fs(this.#e,n,this.options,s)&&this.#d(),this.updateResult(e),r&&(this.#e!==n||re(this.options.enabled,this.#e)!==re(s.enabled,this.#e)||ut(this.options.staleTime,this.#e)!==ut(s.staleTime,this.#e))&&this.#y();const a=this.#g();r&&(this.#e!==n||re(this.options.enabled,this.#e)!==re(s.enabled,this.#e)||a!==this.#l)&&this.#x(a)}getOptimisticResult(t){const e=this.#s.getQueryCache().build(this.#s,t),s=this.createResult(e,t);return _i(this,s)&&(this.#t=s,this.#a=this.options,this.#r=this.#e.state),s}getCurrentResult(){return this.#t}trackResult(t,e){const s={};return Object.keys(t).forEach(n=>{Object.defineProperty(s,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),e?.(n),t[n])})}),s}trackProp(t){this.#m.add(t)}getCurrentQuery(){return this.#e}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#s.defaultQueryOptions(t),s=this.#s.getQueryCache().build(this.#s,e);return s.fetch().then(()=>this.createResult(s,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#d(t){this.#S();let e=this.#e.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Gr)),e}#y(){this.#w();const t=ut(this.options.staleTime,this.#e);if(qt||this.#t.isStale||!ks(t))return;const s=Qr(this.#t.dataUpdatedAt,t)+1;this.#c=setTimeout(()=>{this.#t.isStale||this.updateResult()},s)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#x(t){this.#b(),this.#l=t,!(qt||re(this.options.enabled,this.#e)===!1||!ks(this.#l)||this.#l===0)&&(this.#u=setInterval(()=>{(this.options.refetchIntervalInBackground||Jr.isFocused())&&this.#d()},this.#l))}#v(){this.#y(),this.#x(this.#g())}#w(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#b(){this.#u&&(clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const s=this.#e,n=this.options,r=this.#t,a=this.#r,o=this.#a,c=t!==s?t.state:this.#n,{state:u}=t;let d={...u},h=!1,f;if(e._optimisticResults){const k=this.hasListeners(),v=!k&&Is(t,e),j=k&&Fs(t,s,e,n);(v||j)&&(d={...d,...Kr(u.data,t.options)}),e._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:m,errorUpdatedAt:p,status:E}=d;if(e.select&&d.data!==void 0)if(r&&d.data===a?.data&&e.select===this.#p)f=this.#h;else try{this.#p=e.select,f=e.select(d.data),f=Es(r?.data,f,e),this.#h=f,this.#i=null}catch(k){this.#i=k}else f=d.data;if(e.placeholderData!==void 0&&f===void 0&&E==="pending"){let k;if(r?.isPlaceholderData&&e.placeholderData===o?.placeholderData)k=r.data;else if(k=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,e.select&&k!==void 0)try{k=e.select(k),this.#i=null}catch(v){this.#i=v}k!==void 0&&(E="success",f=Es(r?.data,k,e),h=!0)}this.#i&&(m=this.#i,f=this.#h,p=Date.now(),E="error");const y=d.fetchStatus==="fetching",O=E==="pending",R=E==="error",T=O&&y,U=f!==void 0,S={status:E,fetchStatus:d.fetchStatus,isPending:O,isSuccess:E==="success",isError:R,isInitialLoading:T,isLoading:T,data:f,dataUpdatedAt:d.dataUpdatedAt,error:m,errorUpdatedAt:p,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:y,isRefetching:y&&!O,isLoadingError:R&&!U,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:R&&U,isStale:fs(t,e),refetch:this.refetch,promise:this.#o};if(this.options.experimental_prefetchInRender){const k=V=>{S.status==="error"?V.reject(S.error):S.data!==void 0&&V.resolve(S.data)},v=()=>{const V=this.#o=S.promise=Ts();k(V)},j=this.#o;switch(j.status){case"pending":t.queryHash===s.queryHash&&k(j);break;case"fulfilled":(S.status==="error"||S.data!==j.value)&&v();break;case"rejected":(S.status!=="error"||S.error!==j.reason)&&v();break}}return S}updateResult(t){const e=this.#t,s=this.createResult(this.#e,this.options);if(this.#r=this.#e.state,this.#a=this.options,this.#r.data!==void 0&&(this.#f=this.#e),ht(s,e))return;this.#t=s;const n={},r=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!this.#m.size)return!0;const l=new Set(o??this.#m);return this.options.throwOnError&&l.add("error"),Object.keys(this.#t).some(c=>{const u=c;return this.#t[u]!==e[u]&&l.has(u)})};t?.listeners!==!1&&r()&&(n.listeners=!0),this.#T({...n,...t})}#S(){const t=this.#s.getQueryCache().build(this.#s,this.options);if(t===this.#e)return;const e=this.#e;this.#e=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#T(t){bt.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function Wi(t,e){return re(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Is(t,e){return Wi(t,e)||t.state.data!==void 0&&Bt(t,e,e.refetchOnMount)}function Bt(t,e,s){if(re(e.enabled,t)!==!1){const n=typeof s=="function"?s(t):s;return n==="always"||n!==!1&&fs(t,e)}return!1}function Fs(t,e,s,n){return(t!==e||re(n.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&fs(t,s)}function fs(t,e){return re(e.enabled,t)!==!1&&t.isStaleByTime(ut(e.staleTime,t))}function _i(t,e){return!ht(t.getCurrentResult(),e)}var Pi=class extends wn{#s;#e=void 0;#n;#t;constructor(t,e){super(),this.#s=t,this.setOptions(e),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const e=this.options;this.options=this.#s.defaultMutationOptions(t),ht(this.options,e)||this.#s.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),e?.mutationKey&&this.options.mutationKey&&Os(e.mutationKey)!==Os(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(t){this.#r(),this.#a(t)}getCurrentResult(){return this.#e}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#a()}mutate(t,e){return this.#t=e,this.#n?.removeObserver(this),this.#n=this.#s.getMutationCache().build(this.#s,this.options),this.#n.addObserver(this),this.#n.execute(t)}#r(){const t=this.#n?.state??Xr();this.#e={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#a(t){bt.batch(()=>{if(this.#t&&this.hasListeners()){const e=this.#e.variables,s=this.#e.context;t?.type==="success"?(this.#t.onSuccess?.(t.data,e,s),this.#t.onSettled?.(t.data,null,e,s)):t?.type==="error"&&(this.#t.onError?.(t.error,e,s),this.#t.onSettled?.(void 0,t.error,e,s))}this.listeners.forEach(e=>{e(this.#e)})})}},Cn=w.createContext(!1),Ui=()=>w.useContext(Cn);Cn.Provider;function Zi(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var zi=w.createContext(Zi()),Hi=()=>w.useContext(zi);function In(t,e){return typeof t=="function"?t(...e):!!t}function Yt(){}var qi=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Bi=t=>{w.useEffect(()=>{t.clearReset()},[t])},Yi=({result:t,errorResetBoundary:e,throwOnError:s,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&In(s,[t.error,n]),Gi=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},Qi=(t,e)=>t.isLoading&&t.isFetching&&!e,Ji=(t,e)=>t?.suspense&&e.isPending,Ds=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function Ki(t,e,s){const n=Ae(),r=Ui(),a=Hi(),o=n.defaultQueryOptions(t);n.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=r?"isRestoring":"optimistic",Gi(o),qi(o,a),Bi(a);const l=!n.getQueryCache().get(o.queryHash),[c]=w.useState(()=>new e(n,o)),u=c.getOptimisticResult(o);if(w.useSyncExternalStore(w.useCallback(d=>{const h=r?Yt:c.subscribe(bt.batchCalls(d));return c.updateResult(),h},[c,r]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),w.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),Ji(o,u))throw Ds(o,c,a);if(Yi({result:u,errorResetBoundary:a,throwOnError:o.throwOnError,query:n.getQueryCache().get(o.queryHash)}))throw u.error;return n.getDefaultOptions().queries?._experimental_afterQuery?.(o,u),o.experimental_prefetchInRender&&!qt&&Qi(u,r)&&(l?Ds(o,c,a):n.getQueryCache().get(o.queryHash)?.promise)?.catch(Yt).finally(()=>{c.updateResult()}),o.notifyOnChangeProps?u:c.trackResult(u)}function Xi(t,e){return Ki(t,$i)}function ea(t,e){const s=Ae(),[n]=w.useState(()=>new Pi(s,t));w.useEffect(()=>{n.setOptions(t)},[n,t]);const r=w.useSyncExternalStore(w.useCallback(o=>n.subscribe(bt.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=w.useCallback((o,l)=>{n.mutate(o,l).catch(Yt)},[n]);if(r.error&&In(n.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:a,mutateAsync:r.mutate}}const ta=(t,e)=>{let s=`
    text-lg/5
  `;if(!e||e<1)return`${s} text-theme-light`;switch(t){case"critical":s+=" bg-theme-danger/50";break;case"warning":s+=" bg-theme-warning/50";break;case"info":s+=" bg-theme-info/40";break}return s},sa=(t,e)=>t?e?t-e:t:"--",At=({severity:t,severityCountTotal:e,severityCountSuppressed:s})=>i.jsxs(D,{direction:"vertical",alignment:"stretch",distribution:"center",className:ta(t,e),children:[i.jsx(D,{direction:"vertical",alignment:"center",distribution:"center",className:"h-full",children:sa(e,s)}),s&&i.jsx("div",{className:"text-xs bg-black/10 mt-auto",children:i.jsxs(D,{alignment:"center",distribution:"center",children:[i.jsx(oe,{icon:"notificationsOff",size:"0.75rem"}),i.jsx("span",{children:s})]})})]}),na=`
  grid
  grid-cols-[repeat(4,_minmax(5rem,_1fr))]

  group
  bg-theme-background-lvl-1
  hover:bg-theme-background-lvl-2
  hover:text-theme-high
  cursor-pointer
`,ra=`
  bg-theme-background-lvl-2
  group-hover:bg-theme-background-lvl-3
  font-bold
  px-3
  py-2
  whitespace-nowrap
`,ia=({region:t,severityCounts:e})=>{const{addActiveFilter:s,removeActiveFilter:n}=Ge(),r=St(),a=()=>{r?.region?.includes(t)?n("region",t):s("region",t)};return i.jsxs("div",{className:`region ${na}`,onClick:()=>a(),children:[i.jsx(D,{alignment:"center",distribution:"center",className:ra,children:t||"Counts"}),i.jsx(At,{severity:"critical",severityCountTotal:e?.critical?.total,severityCountSuppressed:e?.critical?.suppressed}),i.jsx(At,{severity:"warning",severityCountTotal:e?.warning?.total,severityCountSuppressed:e?.warning?.suppressed}),i.jsx(At,{severity:"info",severityCountTotal:e?.info?.total,severityCountSuppressed:e?.info?.suppressed})]})};let Ms;const aa=async t=>{try{const e=await fetch(`${t}/alerts`);if(!e.ok)throw await e.json().catch(()=>{throw new Error("Unexpected error: Unable to parse error response.")});const s=await e.json(),n=ei(s);n.forEach(a=>{a.labels&&(a.labels.status=a.status?.state)});const r=JSON.stringify(n);return Ms!==r?(Ms=r,{alerts:n,counts:ti(n)}):null}catch(e){throw console.error(e),e}},oa=async t=>{try{const e=await fetch(`${t}/silences`);if(!e.ok)throw await e.json().catch(()=>{throw new Error("Unexpected error: Unable to parse error response.")});return{silences:await e.json()}}catch(e){throw console.error(e),e}},la=async t=>{try{const e=await fetch(`${t.endpoint}/silence/${t.id}`,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!e.ok){const s=await e.json().catch(()=>null),n=s?.message||s||`Error ${e.status}: ${e.statusText}`;throw new Error(n)}return await e}catch(e){throw console.error(e),e}},ca=async t=>{try{const e=await fetch(`${t.endpoint}/silences`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t.silence)});if(!e.ok){const s=await e.json().catch(()=>null),n=s?.message||s||`Error ${e.status}: ${e.statusText}`;throw new Error(n)}return await e.json()}catch(e){throw console.error(e),e}},ua={alerts:aa,silences:oa};class ms extends Error{constructor(e){super(e.message),this.name="CorsNetworkError",e.stack&&(this.stack=e.stack)}}function da(t){if(!(t instanceof TypeError))return!1;const e=t.message||"";return!!(navigator.userAgent.includes("Firefox")&&e.includes("NetworkError"))}const Xe=(t,{options:e}={})=>{const s=bn(),n=ua[t];if(!n)throw new Error(`No fetch function mapped for key: ${t}`);return Xi({queryKey:[t],queryFn:()=>n(s).catch(r=>{throw da(r)?new ms(r):r}),...e})},ha=`
  grid
  auto-rows-fr
  grid-cols-[repeat(auto-fit,_minmax(21rem,_1fr))]
  gap-3
  mb-8
`,fa=()=>{const{isLoading:t}=Xe("alerts"),e=si(),s=ni(),n=()=>!t&&s?i.jsx("div",{className:`regions ${ha}`,children:s.map(r=>i.jsx(ia,{region:r,severityCounts:e[r]},`${r}`))}):null;return i.jsx(i.Fragment,{children:n()})},ma=({severity:t},e)=>{const s=()=>{switch(t){case"critical":return"text-theme-danger";case"warning":return"text-theme-warning";case"info":return"text-theme-info"}};return i.jsx(i.Fragment,{children:t==="critical"?i.jsx(oe,{ref:e,icon:"danger",color:s()}):t?.match(/^(warning|info)$/)?i.jsx(oe,{icon:t,color:s(),ref:e}):i.jsx(oe,{ref:e,icon:"errorOutline"})})},Fn=w.forwardRef(ma);class ke extends Error{}class pa extends ke{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class ya extends ke{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class ga extends ke{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Fe extends ke{}class Dn extends ke{constructor(e){super(`Invalid unit ${e}`)}}class H extends ke{}class ce extends ke{constructor(){super("Zone is an abstract class")}}const g="numeric",ne="short",Y="long",yt={year:g,month:g,day:g},Mn={year:g,month:ne,day:g},xa={year:g,month:ne,day:g,weekday:ne},Ln={year:g,month:Y,day:g},An={year:g,month:Y,day:g,weekday:Y},Rn={hour:g,minute:g},Vn={hour:g,minute:g,second:g},$n={hour:g,minute:g,second:g,timeZoneName:ne},Wn={hour:g,minute:g,second:g,timeZoneName:Y},_n={hour:g,minute:g,hourCycle:"h23"},Pn={hour:g,minute:g,second:g,hourCycle:"h23"},Un={hour:g,minute:g,second:g,hourCycle:"h23",timeZoneName:ne},Zn={hour:g,minute:g,second:g,hourCycle:"h23",timeZoneName:Y},zn={year:g,month:g,day:g,hour:g,minute:g},Hn={year:g,month:g,day:g,hour:g,minute:g,second:g},qn={year:g,month:ne,day:g,hour:g,minute:g},Bn={year:g,month:ne,day:g,hour:g,minute:g,second:g},va={year:g,month:ne,day:g,weekday:ne,hour:g,minute:g},Yn={year:g,month:Y,day:g,hour:g,minute:g,timeZoneName:ne},Gn={year:g,month:Y,day:g,hour:g,minute:g,second:g,timeZoneName:ne},Qn={year:g,month:Y,day:g,weekday:Y,hour:g,minute:g,timeZoneName:Y},Jn={year:g,month:Y,day:g,weekday:Y,hour:g,minute:g,second:g,timeZoneName:Y};class et{get type(){throw new ce}get name(){throw new ce}get ianaName(){return this.name}get isUniversal(){throw new ce}offsetName(e,s){throw new ce}formatOffset(e,s){throw new ce}offset(e){throw new ce}equals(e){throw new ce}get isValid(){throw new ce}}let Rt=null;class kt extends et{static get instance(){return Rt===null&&(Rt=new kt),Rt}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:s,locale:n}){return lr(e,s,n)}formatOffset(e,s){return qe(this.offset(e),s)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const Gt=new Map;function wa(t){let e=Gt.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Gt.set(t,e)),e}const ba={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Sa(t,e){const s=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(s),[,r,a,o,l,c,u,d]=n;return[o,r,a,l,c,u,d]}function Ta(t,e){const s=t.formatToParts(e),n=[];for(let r=0;r<s.length;r++){const{type:a,value:o}=s[r],l=ba[a];a==="era"?n[l]=o:b(l)||(n[l]=parseInt(o,10))}return n}const Vt=new Map;class le extends et{static create(e){let s=Vt.get(e);return s===void 0&&Vt.set(e,s=new le(e)),s}static resetCache(){Vt.clear(),Gt.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=le.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:s,locale:n}){return lr(e,s,n,this.name)}formatOffset(e,s){return qe(this.offset(e),s)}offset(e){if(!this.valid)return NaN;const s=new Date(e);if(isNaN(s))return NaN;const n=wa(this.name);let[r,a,o,l,c,u,d]=n.formatToParts?Ta(n,s):Sa(n,s);l==="BC"&&(r=-Math.abs(r)+1);const f=Ot({year:r,month:a,day:o,hour:c===24?0:c,minute:u,second:d,millisecond:0});let m=+s;const p=m%1e3;return m-=p>=0?p:1e3+p,(f-m)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Ls={};function ka(t,e={}){const s=JSON.stringify([t,e]);let n=Ls[s];return n||(n=new Intl.ListFormat(t,e),Ls[s]=n),n}const Qt=new Map;function Jt(t,e={}){const s=JSON.stringify([t,e]);let n=Qt.get(s);return n===void 0&&(n=new Intl.DateTimeFormat(t,e),Qt.set(s,n)),n}const Kt=new Map;function Ea(t,e={}){const s=JSON.stringify([t,e]);let n=Kt.get(s);return n===void 0&&(n=new Intl.NumberFormat(t,e),Kt.set(s,n)),n}const Xt=new Map;function Oa(t,e={}){const{base:s,...n}=e,r=JSON.stringify([t,n]);let a=Xt.get(r);return a===void 0&&(a=new Intl.RelativeTimeFormat(t,e),Xt.set(r,a)),a}let Ue=null;function ja(){return Ue||(Ue=new Intl.DateTimeFormat().resolvedOptions().locale,Ue)}const es=new Map;function Kn(t){let e=es.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),es.set(t,e)),e}const ts=new Map;function Na(t){let e=ts.get(t);if(!e){const s=new Intl.Locale(t);e="getWeekInfo"in s?s.getWeekInfo():s.weekInfo,"minimalDays"in e||(e={...Xn,...e}),ts.set(t,e)}return e}function Ca(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const s=t.indexOf("-u-");if(s===-1)return[t];{let n,r;try{n=Jt(t).resolvedOptions(),r=t}catch{const c=t.substring(0,s);n=Jt(c).resolvedOptions(),r=c}const{numberingSystem:a,calendar:o}=n;return[r,a,o]}}function Ia(t,e,s){return(s||e)&&(t.includes("-u-")||(t+="-u"),s&&(t+=`-ca-${s}`),e&&(t+=`-nu-${e}`)),t}function Fa(t){const e=[];for(let s=1;s<=12;s++){const n=x.utc(2009,s,1);e.push(t(n))}return e}function Da(t){const e=[];for(let s=1;s<=7;s++){const n=x.utc(2016,11,13+s);e.push(t(n))}return e}function rt(t,e,s,n){const r=t.listingMode();return r==="error"?null:r==="en"?s(e):n(e)}function Ma(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||Kn(t.locale).numberingSystem==="latn"}class La{constructor(e,s,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:a,...o}=n;if(!s||Object.keys(o).length>0){const l={useGrouping:!1,...n};n.padTo>0&&(l.minimumIntegerDigits=n.padTo),this.inf=Ea(e,l)}}format(e){if(this.inf){const s=this.floor?Math.floor(e):e;return this.inf.format(s)}else{const s=this.floor?Math.floor(e):vs(e,3);return P(s,this.padTo)}}}class Aa{constructor(e,s,n){this.opts=n,this.originalZone=void 0;let r;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&le.create(l).valid?(r=l,this.dt=e):(r="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const a={...this.opts};a.timeZone=a.timeZone||r,this.dtf=Jt(s,a)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(s=>{if(s.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...s,value:n}}else return s}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Ra{constructor(e,s,n){this.opts={style:"long",...n},!s&&ar()&&(this.rtf=Oa(e,n))}format(e,s){return this.rtf?this.rtf.format(e,s):ro(s,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,s){return this.rtf?this.rtf.formatToParts(e,s):[]}}const Xn={firstDay:1,minimalDays:4,weekend:[6,7]};class F{static fromOpts(e){return F.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,s,n,r,a=!1){const o=e||W.defaultLocale,l=o||(a?"en-US":ja()),c=s||W.defaultNumberingSystem,u=n||W.defaultOutputCalendar,d=ns(r)||W.defaultWeekSettings;return new F(l,c,u,d,o)}static resetCache(){Ue=null,Qt.clear(),Kt.clear(),Xt.clear(),es.clear(),ts.clear()}static fromObject({locale:e,numberingSystem:s,outputCalendar:n,weekSettings:r}={}){return F.create(e,s,n,r)}constructor(e,s,n,r,a){const[o,l,c]=Ca(e);this.locale=o,this.numberingSystem=s||l||null,this.outputCalendar=n||c||null,this.weekSettings=r,this.intl=Ia(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=a,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Ma(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),s=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&s?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:F.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,ns(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,s=!1){return rt(this,e,dr,()=>{const n=s?{month:e,day:"numeric"}:{month:e},r=s?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=Fa(a=>this.extract(a,n,"month"))),this.monthsCache[r][e]})}weekdays(e,s=!1){return rt(this,e,mr,()=>{const n=s?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=s?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=Da(a=>this.extract(a,n,"weekday"))),this.weekdaysCache[r][e]})}meridiems(){return rt(this,void 0,()=>pr,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[x.utc(2016,11,13,9),x.utc(2016,11,13,19)].map(s=>this.extract(s,e,"dayperiod"))}return this.meridiemCache})}eras(e){return rt(this,e,yr,()=>{const s={era:e};return this.eraCache[e]||(this.eraCache[e]=[x.utc(-40,1,1),x.utc(2017,1,1)].map(n=>this.extract(n,s,"era"))),this.eraCache[e]})}extract(e,s,n){const r=this.dtFormatter(e,s),a=r.formatToParts(),o=a.find(l=>l.type.toLowerCase()===n);return o?o.value:null}numberFormatter(e={}){return new La(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,s={}){return new Aa(e,this.intl,s)}relFormatter(e={}){return new Ra(this.intl,this.isEnglish(),e)}listFormatter(e={}){return ka(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Kn(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:or()?Na(this.locale):Xn}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let $t=null;class B extends et{static get utcInstance(){return $t===null&&($t=new B(0)),$t}static instance(e){return e===0?B.utcInstance:new B(e)}static parseSpecifier(e){if(e){const s=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(s)return new B(jt(s[1],s[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${qe(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${qe(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,s){return qe(this.fixed,s)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class Va extends et{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function he(t,e){if(b(t)||t===null)return e;if(t instanceof et)return t;if(Za(t)){const s=t.toLowerCase();return s==="default"?e:s==="local"||s==="system"?kt.instance:s==="utc"||s==="gmt"?B.utcInstance:B.parseSpecifier(s)||le.create(t)}else return fe(t)?B.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new Va(t)}const ps={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},As={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},$a=ps.hanidec.replace(/[\[|\]]/g,"").split("");function Wa(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let s=0;s<t.length;s++){const n=t.charCodeAt(s);if(t[s].search(ps.hanidec)!==-1)e+=$a.indexOf(t[s]);else for(const r in As){const[a,o]=As[r];n>=a&&n<=o&&(e+=n-a)}}return parseInt(e,10)}else return e}const ss=new Map;function _a(){ss.clear()}function ee({numberingSystem:t},e=""){const s=t||"latn";let n=ss.get(s);n===void 0&&(n=new Map,ss.set(s,n));let r=n.get(e);return r===void 0&&(r=new RegExp(`${ps[s]}${e}`),n.set(e,r)),r}let Rs=()=>Date.now(),Vs="system",$s=null,Ws=null,_s=null,Ps=60,Us,Zs=null;class W{static get now(){return Rs}static set now(e){Rs=e}static set defaultZone(e){Vs=e}static get defaultZone(){return he(Vs,kt.instance)}static get defaultLocale(){return $s}static set defaultLocale(e){$s=e}static get defaultNumberingSystem(){return Ws}static set defaultNumberingSystem(e){Ws=e}static get defaultOutputCalendar(){return _s}static set defaultOutputCalendar(e){_s=e}static get defaultWeekSettings(){return Zs}static set defaultWeekSettings(e){Zs=ns(e)}static get twoDigitCutoffYear(){return Ps}static set twoDigitCutoffYear(e){Ps=e%100}static get throwOnInvalid(){return Us}static set throwOnInvalid(e){Us=e}static resetCaches(){F.resetCache(),le.resetCache(),x.resetCache(),_a()}}class se{constructor(e,s){this.reason=e,this.explanation=s}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const er=[0,31,59,90,120,151,181,212,243,273,304,334],tr=[0,31,60,91,121,152,182,213,244,274,305,335];function Q(t,e){return new se("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function ys(t,e,s){const n=new Date(Date.UTC(t,e-1,s));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const r=n.getUTCDay();return r===0?7:r}function sr(t,e,s){return s+(tt(t)?tr:er)[e-1]}function nr(t,e){const s=tt(t)?tr:er,n=s.findIndex(a=>a<e),r=e-s[n];return{month:n+1,day:r}}function gs(t,e){return(t-e+7)%7+1}function gt(t,e=4,s=1){const{year:n,month:r,day:a}=t,o=sr(n,r,a),l=gs(ys(n,r,a),s);let c=Math.floor((o-l+14-e)/7),u;return c<1?(u=n-1,c=Ye(u,e,s)):c>Ye(n,e,s)?(u=n+1,c=1):u=n,{weekYear:u,weekNumber:c,weekday:l,...Nt(t)}}function zs(t,e=4,s=1){const{weekYear:n,weekNumber:r,weekday:a}=t,o=gs(ys(n,1,e),s),l=De(n);let c=r*7+a-o-7+e,u;c<1?(u=n-1,c+=De(u)):c>l?(u=n+1,c-=De(n)):u=n;const{month:d,day:h}=nr(u,c);return{year:u,month:d,day:h,...Nt(t)}}function Wt(t){const{year:e,month:s,day:n}=t,r=sr(e,s,n);return{year:e,ordinal:r,...Nt(t)}}function Hs(t){const{year:e,ordinal:s}=t,{month:n,day:r}=nr(e,s);return{year:e,month:n,day:r,...Nt(t)}}function qs(t,e){if(!b(t.localWeekday)||!b(t.localWeekNumber)||!b(t.localWeekYear)){if(!b(t.weekday)||!b(t.weekNumber)||!b(t.weekYear))throw new Fe("Cannot mix locale-based week fields with ISO-based week fields");return b(t.localWeekday)||(t.weekday=t.localWeekday),b(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),b(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Pa(t,e=4,s=1){const n=Et(t.weekYear),r=J(t.weekNumber,1,Ye(t.weekYear,e,s)),a=J(t.weekday,1,7);return n?r?a?!1:Q("weekday",t.weekday):Q("week",t.weekNumber):Q("weekYear",t.weekYear)}function Ua(t){const e=Et(t.year),s=J(t.ordinal,1,De(t.year));return e?s?!1:Q("ordinal",t.ordinal):Q("year",t.year)}function rr(t){const e=Et(t.year),s=J(t.month,1,12),n=J(t.day,1,xt(t.year,t.month));return e?s?n?!1:Q("day",t.day):Q("month",t.month):Q("year",t.year)}function ir(t){const{hour:e,minute:s,second:n,millisecond:r}=t,a=J(e,0,23)||e===24&&s===0&&n===0&&r===0,o=J(s,0,59),l=J(n,0,59),c=J(r,0,999);return a?o?l?c?!1:Q("millisecond",r):Q("second",n):Q("minute",s):Q("hour",e)}function b(t){return typeof t>"u"}function fe(t){return typeof t=="number"}function Et(t){return typeof t=="number"&&t%1===0}function Za(t){return typeof t=="string"}function za(t){return Object.prototype.toString.call(t)==="[object Date]"}function ar(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function or(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Ha(t){return Array.isArray(t)?t:[t]}function Bs(t,e,s){if(t.length!==0)return t.reduce((n,r)=>{const a=[e(r),r];return n&&s(n[0],a[0])===n[0]?n:a},null)[1]}function qa(t,e){return e.reduce((s,n)=>(s[n]=t[n],s),{})}function Le(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ns(t){if(t==null)return null;if(typeof t!="object")throw new H("Week settings must be an object");if(!J(t.firstDay,1,7)||!J(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!J(e,1,7)))throw new H("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function J(t,e,s){return Et(t)&&t>=e&&t<=s}function Ba(t,e){return t-e*Math.floor(t/e)}function P(t,e=2){const s=t<0;let n;return s?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function de(t){if(!(b(t)||t===null||t===""))return parseInt(t,10)}function ye(t){if(!(b(t)||t===null||t===""))return parseFloat(t)}function xs(t){if(!(b(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function vs(t,e,s=!1){const n=10**e;return(s?Math.trunc:Math.round)(t*n)/n}function tt(t){return t%4===0&&(t%100!==0||t%400===0)}function De(t){return tt(t)?366:365}function xt(t,e){const s=Ba(e-1,12)+1,n=t+(e-s)/12;return s===2?tt(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][s-1]}function Ot(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function Ys(t,e,s){return-gs(ys(t,1,e),s)+e-1}function Ye(t,e=4,s=1){const n=Ys(t,e,s),r=Ys(t+1,e,s);return(De(t)-n+r)/7}function rs(t){return t>99?t:t>W.twoDigitCutoffYear?1900+t:2e3+t}function lr(t,e,s,n=null){const r=new Date(t),a={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(a.timeZone=n);const o={timeZoneName:e,...a},l=new Intl.DateTimeFormat(s,o).formatToParts(r).find(c=>c.type.toLowerCase()==="timezonename");return l?l.value:null}function jt(t,e){let s=parseInt(t,10);Number.isNaN(s)&&(s=0);const n=parseInt(e,10)||0,r=s<0||Object.is(s,-0)?-n:n;return s*60+r}function cr(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new H(`Invalid unit value ${t}`);return e}function vt(t,e){const s={};for(const n in t)if(Le(t,n)){const r=t[n];if(r==null)continue;s[e(n)]=cr(r)}return s}function qe(t,e){const s=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),r=t>=0?"+":"-";switch(e){case"short":return`${r}${P(s,2)}:${P(n,2)}`;case"narrow":return`${r}${s}${n>0?`:${n}`:""}`;case"techie":return`${r}${P(s,2)}${P(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Nt(t){return qa(t,["hour","minute","second","millisecond"])}const Ya=["January","February","March","April","May","June","July","August","September","October","November","December"],ur=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ga=["J","F","M","A","M","J","J","A","S","O","N","D"];function dr(t){switch(t){case"narrow":return[...Ga];case"short":return[...ur];case"long":return[...Ya];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const hr=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],fr=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Qa=["M","T","W","T","F","S","S"];function mr(t){switch(t){case"narrow":return[...Qa];case"short":return[...fr];case"long":return[...hr];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const pr=["AM","PM"],Ja=["Before Christ","Anno Domini"],Ka=["BC","AD"],Xa=["B","A"];function yr(t){switch(t){case"narrow":return[...Xa];case"short":return[...Ka];case"long":return[...Ja];default:return null}}function eo(t){return pr[t.hour<12?0:1]}function to(t,e){return mr(e)[t.weekday-1]}function so(t,e){return dr(e)[t.month-1]}function no(t,e){return yr(e)[t.year<0?0:1]}function ro(t,e,s="always",n=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},a=["hours","minutes","seconds"].indexOf(t)===-1;if(s==="auto"&&a){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${r[t][0]}`;case-1:return h?"yesterday":`last ${r[t][0]}`;case 0:return h?"today":`this ${r[t][0]}`}}const o=Object.is(e,-0)||e<0,l=Math.abs(e),c=l===1,u=r[t],d=n?c?u[1]:u[2]||u[1]:c?r[t][0]:t;return o?`${l} ${d} ago`:`in ${l} ${d}`}function Gs(t,e){let s="";for(const n of t)n.literal?s+=n.val:s+=e(n.val);return s}const io={D:yt,DD:Mn,DDD:Ln,DDDD:An,t:Rn,tt:Vn,ttt:$n,tttt:Wn,T:_n,TT:Pn,TTT:Un,TTTT:Zn,f:zn,ff:qn,fff:Yn,ffff:Qn,F:Hn,FF:Bn,FFF:Gn,FFFF:Jn};class q{static create(e,s={}){return new q(e,s)}static parseFormat(e){let s=null,n="",r=!1;const a=[];for(let o=0;o<e.length;o++){const l=e.charAt(o);l==="'"?(n.length>0&&a.push({literal:r||/^\s+$/.test(n),val:n}),s=null,n="",r=!r):r||l===s?n+=l:(n.length>0&&a.push({literal:/^\s+$/.test(n),val:n}),n=l,s=l)}return n.length>0&&a.push({literal:r||/^\s+$/.test(n),val:n}),a}static macroTokenToFormatOpts(e){return io[e]}constructor(e,s){this.opts=s,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,s){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...s}).format()}dtFormatter(e,s={}){return this.loc.dtFormatter(e,{...this.opts,...s})}formatDateTime(e,s){return this.dtFormatter(e,s).format()}formatDateTimeParts(e,s){return this.dtFormatter(e,s).formatToParts()}formatInterval(e,s){return this.dtFormatter(e.start,s).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,s){return this.dtFormatter(e,s).resolvedOptions()}num(e,s=0){if(this.opts.forceSimple)return P(e,s);const n={...this.opts};return s>0&&(n.padTo=s),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,s){const n=this.loc.listingMode()==="en",r=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",a=(m,p)=>this.loc.extract(e,m,p),o=m=>e.isOffsetFixed&&e.offset===0&&m.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,m.format):"",l=()=>n?eo(e):a({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(m,p)=>n?so(e,m):a(p?{month:m}:{month:m,day:"numeric"},"month"),u=(m,p)=>n?to(e,m):a(p?{weekday:m}:{weekday:m,month:"long",day:"numeric"},"weekday"),d=m=>{const p=q.macroTokenToFormatOpts(m);return p?this.formatWithSystemDefault(e,p):m},h=m=>n?no(e,m):a({era:m},"era"),f=m=>{switch(m){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return r?a({day:"numeric"},"day"):this.num(e.day);case"dd":return r?a({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return r?a({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?a({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return r?a({month:"numeric"},"month"):this.num(e.month);case"MM":return r?a({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return r?a({year:"numeric"},"year"):this.num(e.year);case"yy":return r?a({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?a({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?a({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return d(m)}};return Gs(q.parseFormat(s),f)}formatDurationFromString(e,s){const n=c=>{switch(c[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=c=>u=>{const d=n(u);return d?this.num(c.get(d),u.length):u},a=q.parseFormat(s),o=a.reduce((c,{literal:u,val:d})=>u?c:c.concat(d),[]),l=e.shiftTo(...o.map(n).filter(c=>c));return Gs(a,r(l))}}const gr=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Ve(...t){const e=t.reduce((s,n)=>s+n.source,"");return RegExp(`^${e}$`)}function $e(...t){return e=>t.reduce(([s,n,r],a)=>{const[o,l,c]=a(e,r);return[{...s,...o},l||n,c]},[{},null,1]).slice(0,2)}function We(t,...e){if(t==null)return[null,null];for(const[s,n]of e){const r=s.exec(t);if(r)return n(r)}return[null,null]}function xr(...t){return(e,s)=>{const n={};let r;for(r=0;r<t.length;r++)n[t[r]]=de(e[s+r]);return[n,null,s+r]}}const vr=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,ao=`(?:${vr.source}?(?:\\[(${gr.source})\\])?)?`,ws=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,wr=RegExp(`${ws.source}${ao}`),bs=RegExp(`(?:T${wr.source})?`),oo=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,lo=/(\d{4})-?W(\d\d)(?:-?(\d))?/,co=/(\d{4})-?(\d{3})/,uo=xr("weekYear","weekNumber","weekDay"),ho=xr("year","ordinal"),fo=/(\d{4})-(\d\d)-(\d\d)/,br=RegExp(`${ws.source} ?(?:${vr.source}|(${gr.source}))?`),mo=RegExp(`(?: ${br.source})?`);function Me(t,e,s){const n=t[e];return b(n)?s:de(n)}function po(t,e){return[{year:Me(t,e),month:Me(t,e+1,1),day:Me(t,e+2,1)},null,e+3]}function _e(t,e){return[{hours:Me(t,e,0),minutes:Me(t,e+1,0),seconds:Me(t,e+2,0),milliseconds:xs(t[e+3])},null,e+4]}function st(t,e){const s=!t[e]&&!t[e+1],n=jt(t[e+1],t[e+2]),r=s?null:B.instance(n);return[{},r,e+3]}function nt(t,e){const s=t[e]?le.create(t[e]):null;return[{},s,e+1]}const yo=RegExp(`^T?${ws.source}$`),go=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function xo(t){const[e,s,n,r,a,o,l,c,u]=t,d=e[0]==="-",h=c&&c[0]==="-",f=(m,p=!1)=>m!==void 0&&(p||m&&d)?-m:m;return[{years:f(ye(s)),months:f(ye(n)),weeks:f(ye(r)),days:f(ye(a)),hours:f(ye(o)),minutes:f(ye(l)),seconds:f(ye(c),c==="-0"),milliseconds:f(xs(u),h)}]}const vo={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Ss(t,e,s,n,r,a,o){const l={year:e.length===2?rs(de(e)):de(e),month:ur.indexOf(s)+1,day:de(n),hour:de(r),minute:de(a)};return o&&(l.second=de(o)),t&&(l.weekday=t.length>3?hr.indexOf(t)+1:fr.indexOf(t)+1),l}const wo=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function bo(t){const[,e,s,n,r,a,o,l,c,u,d,h]=t,f=Ss(e,r,n,s,a,o,l);let m;return c?m=vo[c]:u?m=0:m=jt(d,h),[f,new B(m)]}function So(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const To=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,ko=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Eo=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Qs(t){const[,e,s,n,r,a,o,l]=t;return[Ss(e,r,n,s,a,o,l),B.utcInstance]}function Oo(t){const[,e,s,n,r,a,o,l]=t;return[Ss(e,l,s,n,r,a,o),B.utcInstance]}const jo=Ve(oo,bs),No=Ve(lo,bs),Co=Ve(co,bs),Io=Ve(wr),Sr=$e(po,_e,st,nt),Fo=$e(uo,_e,st,nt),Do=$e(ho,_e,st,nt),Mo=$e(_e,st,nt);function Lo(t){return We(t,[jo,Sr],[No,Fo],[Co,Do],[Io,Mo])}function Ao(t){return We(So(t),[wo,bo])}function Ro(t){return We(t,[To,Qs],[ko,Qs],[Eo,Oo])}function Vo(t){return We(t,[go,xo])}const $o=$e(_e);function Wo(t){return We(t,[yo,$o])}const _o=Ve(fo,mo),Po=Ve(br),Uo=$e(_e,st,nt);function Zo(t){return We(t,[_o,Sr],[Po,Uo])}const Js="Invalid Duration",Tr={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},zo={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Tr},G=146097/400,je=146097/4800,Ho={years:{quarters:4,months:12,weeks:G/7,days:G,hours:G*24,minutes:G*24*60,seconds:G*24*60*60,milliseconds:G*24*60*60*1e3},quarters:{months:3,weeks:G/28,days:G/4,hours:G*24/4,minutes:G*24*60/4,seconds:G*24*60*60/4,milliseconds:G*24*60*60*1e3/4},months:{weeks:je/7,days:je,hours:je*24,minutes:je*24*60,seconds:je*24*60*60,milliseconds:je*24*60*60*1e3},...Tr},xe=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],qo=xe.slice(0).reverse();function ue(t,e,s=!1){const n={values:s?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new N(n)}function kr(t,e){let s=e.milliseconds??0;for(const n of qo.slice(1))e[n]&&(s+=e[n]*t[n].milliseconds);return s}function Ks(t,e){const s=kr(t,e)<0?-1:1;xe.reduceRight((n,r)=>{if(b(e[r]))return n;if(n){const a=e[n]*s,o=t[r][n],l=Math.floor(a/o);e[r]+=l*s,e[n]-=l*o*s}return r},null),xe.reduce((n,r)=>{if(b(e[r]))return n;if(n){const a=e[n]%1;e[n]-=a,e[r]+=a*t[n][r]}return r},null)}function Bo(t){const e={};for(const[s,n]of Object.entries(t))n!==0&&(e[s]=n);return e}class N{constructor(e){const s=e.conversionAccuracy==="longterm"||!1;let n=s?Ho:zo;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||F.create(),this.conversionAccuracy=s?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,s){return N.fromObject({milliseconds:e},s)}static fromObject(e,s={}){if(e==null||typeof e!="object")throw new H(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new N({values:vt(e,N.normalizeUnit),loc:F.fromObject(s),conversionAccuracy:s.conversionAccuracy,matrix:s.matrix})}static fromDurationLike(e){if(fe(e))return N.fromMillis(e);if(N.isDuration(e))return e;if(typeof e=="object")return N.fromObject(e);throw new H(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,s){const[n]=Vo(e);return n?N.fromObject(n,s):N.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,s){const[n]=Wo(e);return n?N.fromObject(n,s):N.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,s=null){if(!e)throw new H("need to specify a reason the Duration is invalid");const n=e instanceof se?e:new se(e,s);if(W.throwOnInvalid)throw new ga(n);return new N({invalid:n})}static normalizeUnit(e){const s={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!s)throw new Dn(e);return s}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,s={}){const n={...s,floor:s.round!==!1&&s.floor!==!1};return this.isValid?q.create(this.loc,n).formatDurationFromString(this,e):Js}toHuman(e={}){if(!this.isValid)return Js;const s=xe.map(n=>{const r=this.values[n];return b(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(r)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(s)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=vs(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const s=this.toMillis();return s<0||s>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},x.fromMillis(s,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?kr(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const s=N.fromDurationLike(e),n={};for(const r of xe)(Le(s.values,r)||Le(this.values,r))&&(n[r]=s.get(r)+this.get(r));return ue(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const s=N.fromDurationLike(e);return this.plus(s.negate())}mapUnits(e){if(!this.isValid)return this;const s={};for(const n of Object.keys(this.values))s[n]=cr(e(this.values[n],n));return ue(this,{values:s},!0)}get(e){return this[N.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const s={...this.values,...vt(e,N.normalizeUnit)};return ue(this,{values:s})}reconfigure({locale:e,numberingSystem:s,conversionAccuracy:n,matrix:r}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:s}),matrix:r,conversionAccuracy:n};return ue(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Ks(this.matrix,e),ue(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=Bo(this.normalize().shiftToAll().toObject());return ue(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>N.normalizeUnit(o));const s={},n={},r=this.toObject();let a;for(const o of xe)if(e.indexOf(o)>=0){a=o;let l=0;for(const u in n)l+=this.matrix[u][o]*n[u],n[u]=0;fe(r[o])&&(l+=r[o]);const c=Math.trunc(l);s[o]=c,n[o]=(l*1e3-c*1e3)/1e3}else fe(r[o])&&(n[o]=r[o]);for(const o in n)n[o]!==0&&(s[a]+=o===a?n[o]:n[o]/this.matrix[a][o]);return Ks(this.matrix,s),ue(this,{values:s},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const s of Object.keys(this.values))e[s]=this.values[s]===0?0:-this.values[s];return ue(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function s(n,r){return n===void 0||n===0?r===void 0||r===0:n===r}for(const n of xe)if(!s(this.values[n],e.values[n]))return!1;return!0}}const Ne="Invalid Interval";function Yo(t,e){return!t||!t.isValid?$.invalid("missing or invalid start"):!e||!e.isValid?$.invalid("missing or invalid end"):e<t?$.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class ${constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,s=null){if(!e)throw new H("need to specify a reason the Interval is invalid");const n=e instanceof se?e:new se(e,s);if(W.throwOnInvalid)throw new ya(n);return new $({invalid:n})}static fromDateTimes(e,s){const n=Pe(e),r=Pe(s),a=Yo(n,r);return a??new $({start:n,end:r})}static after(e,s){const n=N.fromDurationLike(s),r=Pe(e);return $.fromDateTimes(r,r.plus(n))}static before(e,s){const n=N.fromDurationLike(s),r=Pe(e);return $.fromDateTimes(r.minus(n),r)}static fromISO(e,s){const[n,r]=(e||"").split("/",2);if(n&&r){let a,o;try{a=x.fromISO(n,s),o=a.isValid}catch{o=!1}let l,c;try{l=x.fromISO(r,s),c=l.isValid}catch{c=!1}if(o&&c)return $.fromDateTimes(a,l);if(o){const u=N.fromISO(r,s);if(u.isValid)return $.after(a,u)}else if(c){const u=N.fromISO(n,s);if(u.isValid)return $.before(l,u)}}return $.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",s){if(!this.isValid)return NaN;const n=this.start.startOf(e,s);let r;return s?.useLocaleWeeks?r=this.end.reconfigure({locale:n.locale}):r=this.end,r=r.startOf(e,s),Math.floor(r.diff(n,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:s}={}){return this.isValid?$.fromDateTimes(e||this.s,s||this.e):this}splitAt(...e){if(!this.isValid)return[];const s=e.map(Pe).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),n=[];let{s:r}=this,a=0;for(;r<this.e;){const o=s[a]||this.e,l=+o>+this.e?this.e:o;n.push($.fromDateTimes(r,l)),r=l,a+=1}return n}splitBy(e){const s=N.fromDurationLike(e);if(!this.isValid||!s.isValid||s.as("milliseconds")===0)return[];let{s:n}=this,r=1,a;const o=[];for(;n<this.e;){const l=this.start.plus(s.mapUnits(c=>c*r));a=+l>+this.e?this.e:l,o.push($.fromDateTimes(n,a)),n=a,r+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const s=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return s>=n?null:$.fromDateTimes(s,n)}union(e){if(!this.isValid)return this;const s=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return $.fromDateTimes(s,n)}static merge(e){const[s,n]=e.sort((r,a)=>r.s-a.s).reduce(([r,a],o)=>a?a.overlaps(o)||a.abutsStart(o)?[r,a.union(o)]:[r.concat([a]),o]:[r,o],[[],null]);return n&&s.push(n),s}static xor(e){let s=null,n=0;const r=[],a=e.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),o=Array.prototype.concat(...a),l=o.sort((c,u)=>c.time-u.time);for(const c of l)n+=c.type==="s"?1:-1,n===1?s=c.time:(s&&+s!=+c.time&&r.push($.fromDateTimes(s,c.time)),s=null);return $.merge(r)}difference(...e){return $.xor([this].concat(e)).map(s=>this.intersection(s)).filter(s=>s&&!s.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Ne}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=yt,s={}){return this.isValid?q.create(this.s.loc.clone(s),e).formatInterval(this):Ne}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Ne}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ne}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Ne}toFormat(e,{separator:s=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${s}${this.e.toFormat(e)}`:Ne}toDuration(e,s){return this.isValid?this.e.diff(this.s,e,s):N.invalid(this.invalidReason)}mapEndpoints(e){return $.fromDateTimes(e(this.s),e(this.e))}}class it{static hasDST(e=W.defaultZone){const s=x.now().setZone(e).set({month:12});return!e.isUniversal&&s.offset!==s.set({month:6}).offset}static isValidIANAZone(e){return le.isValidZone(e)}static normalizeZone(e){return he(e,W.defaultZone)}static getStartOfWeek({locale:e=null,locObj:s=null}={}){return(s||F.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:s=null}={}){return(s||F.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:s=null}={}){return(s||F.create(e)).getWeekendDays().slice()}static months(e="long",{locale:s=null,numberingSystem:n=null,locObj:r=null,outputCalendar:a="gregory"}={}){return(r||F.create(s,n,a)).months(e)}static monthsFormat(e="long",{locale:s=null,numberingSystem:n=null,locObj:r=null,outputCalendar:a="gregory"}={}){return(r||F.create(s,n,a)).months(e,!0)}static weekdays(e="long",{locale:s=null,numberingSystem:n=null,locObj:r=null}={}){return(r||F.create(s,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:s=null,numberingSystem:n=null,locObj:r=null}={}){return(r||F.create(s,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return F.create(e).meridiems()}static eras(e="short",{locale:s=null}={}){return F.create(s,null,"gregory").eras(e)}static features(){return{relative:ar(),localeWeek:or()}}}function Xs(t,e){const s=r=>r.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=s(e)-s(t);return Math.floor(N.fromMillis(n).as("days"))}function Go(t,e,s){const n=[["years",(c,u)=>u.year-c.year],["quarters",(c,u)=>u.quarter-c.quarter+(u.year-c.year)*4],["months",(c,u)=>u.month-c.month+(u.year-c.year)*12],["weeks",(c,u)=>{const d=Xs(c,u);return(d-d%7)/7}],["days",Xs]],r={},a=t;let o,l;for(const[c,u]of n)s.indexOf(c)>=0&&(o=c,r[c]=u(t,e),l=a.plus(r),l>e?(r[c]--,t=a.plus(r),t>e&&(l=t,r[c]--,t=a.plus(r))):t=l);return[t,r,l,o]}function Qo(t,e,s,n){let[r,a,o,l]=Go(t,e,s);const c=e-r,u=s.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);u.length===0&&(o<e&&(o=r.plus({[l]:1})),o!==r&&(a[l]=(a[l]||0)+c/(o-r)));const d=N.fromObject(a,n);return u.length>0?N.fromMillis(c,n).shiftTo(...u).plus(d):d}const Jo="missing Intl.DateTimeFormat.formatToParts support";function I(t,e=s=>s){return{regex:t,deser:([s])=>e(Wa(s))}}const Ko=" ",Er=`[ ${Ko}]`,Or=new RegExp(Er,"g");function Xo(t){return t.replace(/\./g,"\\.?").replace(Or,Er)}function en(t){return t.replace(/\./g,"").replace(Or," ").toLowerCase()}function te(t,e){return t===null?null:{regex:RegExp(t.map(Xo).join("|")),deser:([s])=>t.findIndex(n=>en(s)===en(n))+e}}function tn(t,e){return{regex:t,deser:([,s,n])=>jt(s,n),groups:e}}function at(t){return{regex:t,deser:([e])=>e}}function el(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function tl(t,e){const s=ee(e),n=ee(e,"{2}"),r=ee(e,"{3}"),a=ee(e,"{4}"),o=ee(e,"{6}"),l=ee(e,"{1,2}"),c=ee(e,"{1,3}"),u=ee(e,"{1,6}"),d=ee(e,"{1,9}"),h=ee(e,"{2,4}"),f=ee(e,"{4,6}"),m=y=>({regex:RegExp(el(y.val)),deser:([O])=>O,literal:!0}),E=(y=>{if(t.literal)return m(y);switch(y.val){case"G":return te(e.eras("short"),0);case"GG":return te(e.eras("long"),0);case"y":return I(u);case"yy":return I(h,rs);case"yyyy":return I(a);case"yyyyy":return I(f);case"yyyyyy":return I(o);case"M":return I(l);case"MM":return I(n);case"MMM":return te(e.months("short",!0),1);case"MMMM":return te(e.months("long",!0),1);case"L":return I(l);case"LL":return I(n);case"LLL":return te(e.months("short",!1),1);case"LLLL":return te(e.months("long",!1),1);case"d":return I(l);case"dd":return I(n);case"o":return I(c);case"ooo":return I(r);case"HH":return I(n);case"H":return I(l);case"hh":return I(n);case"h":return I(l);case"mm":return I(n);case"m":return I(l);case"q":return I(l);case"qq":return I(n);case"s":return I(l);case"ss":return I(n);case"S":return I(c);case"SSS":return I(r);case"u":return at(d);case"uu":return at(l);case"uuu":return I(s);case"a":return te(e.meridiems(),0);case"kkkk":return I(a);case"kk":return I(h,rs);case"W":return I(l);case"WW":return I(n);case"E":case"c":return I(s);case"EEE":return te(e.weekdays("short",!1),1);case"EEEE":return te(e.weekdays("long",!1),1);case"ccc":return te(e.weekdays("short",!0),1);case"cccc":return te(e.weekdays("long",!0),1);case"Z":case"ZZ":return tn(new RegExp(`([+-]${l.source})(?::(${n.source}))?`),2);case"ZZZ":return tn(new RegExp(`([+-]${l.source})(${n.source})?`),2);case"z":return at(/[a-z_+-/]{1,256}?/i);case" ":return at(/[^\S\n\r]/);default:return m(y)}})(t)||{invalidReason:Jo};return E.token=t,E}const sl={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function nl(t,e,s){const{type:n,value:r}=t;if(n==="literal"){const c=/^\s+$/.test(r);return{literal:!c,val:c?" ":r}}const a=e[n];let o=n;n==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=s.hour12?"hour12":"hour24");let l=sl[o];if(typeof l=="object"&&(l=l[a]),l)return{literal:!1,val:l}}function rl(t){return[`^${t.map(s=>s.regex).reduce((s,n)=>`${s}(${n.source})`,"")}$`,t]}function il(t,e,s){const n=t.match(e);if(n){const r={};let a=1;for(const o in s)if(Le(s,o)){const l=s[o],c=l.groups?l.groups+1:1;!l.literal&&l.token&&(r[l.token.val[0]]=l.deser(n.slice(a,a+c))),a+=c}return[n,r]}else return[n,{}]}function al(t){const e=a=>{switch(a){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let s=null,n;return b(t.z)||(s=le.create(t.z)),b(t.Z)||(s||(s=new B(t.Z)),n=t.Z),b(t.q)||(t.M=(t.q-1)*3+1),b(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),b(t.u)||(t.S=xs(t.u)),[Object.keys(t).reduce((a,o)=>{const l=e(o);return l&&(a[l]=t[o]),a},{}),s,n]}let _t=null;function ol(){return _t||(_t=x.fromMillis(1555555555555)),_t}function ll(t,e){if(t.literal)return t;const s=q.macroTokenToFormatOpts(t.val),n=Ir(s,e);return n==null||n.includes(void 0)?t:n}function jr(t,e){return Array.prototype.concat(...t.map(s=>ll(s,e)))}class Nr{constructor(e,s){if(this.locale=e,this.format=s,this.tokens=jr(q.parseFormat(s),e),this.units=this.tokens.map(n=>tl(n,e)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){const[n,r]=rl(this.units);this.regex=RegExp(n,"i"),this.handlers=r}}explainFromTokens(e){if(this.isValid){const[s,n]=il(e,this.regex,this.handlers),[r,a,o]=n?al(n):[null,null,void 0];if(Le(n,"a")&&Le(n,"H"))throw new Fe("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:s,matches:n,result:r,zone:a,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Cr(t,e,s){return new Nr(t,s).explainFromTokens(e)}function cl(t,e,s){const{result:n,zone:r,specificOffset:a,invalidReason:o}=Cr(t,e,s);return[n,r,a,o]}function Ir(t,e){if(!t)return null;const n=q.create(e,t).dtFormatter(ol()),r=n.formatToParts(),a=n.resolvedOptions();return r.map(o=>nl(o,t,a))}const Pt="Invalid DateTime",ul=864e13;function Ze(t){return new se("unsupported zone",`the zone "${t.name}" is not supported`)}function Ut(t){return t.weekData===null&&(t.weekData=gt(t.c)),t.weekData}function Zt(t){return t.localWeekData===null&&(t.localWeekData=gt(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function ge(t,e){const s={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new x({...s,...e,old:s})}function Fr(t,e,s){let n=t-e*60*1e3;const r=s.offset(n);if(e===r)return[n,e];n-=(r-e)*60*1e3;const a=s.offset(n);return r===a?[n,r]:[t-Math.min(r,a)*60*1e3,Math.max(r,a)]}function ot(t,e){t+=e*60*1e3;const s=new Date(t);return{year:s.getUTCFullYear(),month:s.getUTCMonth()+1,day:s.getUTCDate(),hour:s.getUTCHours(),minute:s.getUTCMinutes(),second:s.getUTCSeconds(),millisecond:s.getUTCMilliseconds()}}function dt(t,e,s){return Fr(Ot(t),e,s)}function sn(t,e){const s=t.o,n=t.c.year+Math.trunc(e.years),r=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,a={...t.c,year:n,month:r,day:Math.min(t.c.day,xt(n,r))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=N.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=Ot(a);let[c,u]=Fr(l,s,t.zone);return o!==0&&(c+=o,u=t.zone.offset(c)),{ts:c,o:u}}function Ce(t,e,s,n,r,a){const{setZone:o,zone:l}=s;if(t&&Object.keys(t).length!==0||e){const c=e||l,u=x.fromObject(t,{...s,zone:c,specificOffset:a});return o?u:u.setZone(l)}else return x.invalid(new se("unparsable",`the input "${r}" can't be parsed as ${n}`))}function lt(t,e,s=!0){return t.isValid?q.create(F.create("en-US"),{allowZ:s,forceSimple:!0}).formatDateTimeFromString(t,e):null}function zt(t,e){const s=t.c.year>9999||t.c.year<0;let n="";return s&&t.c.year>=0&&(n+="+"),n+=P(t.c.year,s?6:4),e?(n+="-",n+=P(t.c.month),n+="-",n+=P(t.c.day)):(n+=P(t.c.month),n+=P(t.c.day)),n}function nn(t,e,s,n,r,a){let o=P(t.c.hour);return e?(o+=":",o+=P(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!s)&&(o+=":")):o+=P(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!s)&&(o+=P(t.c.second),(t.c.millisecond!==0||!n)&&(o+=".",o+=P(t.c.millisecond,3))),r&&(t.isOffsetFixed&&t.offset===0&&!a?o+="Z":t.o<0?(o+="-",o+=P(Math.trunc(-t.o/60)),o+=":",o+=P(Math.trunc(-t.o%60))):(o+="+",o+=P(Math.trunc(t.o/60)),o+=":",o+=P(Math.trunc(t.o%60)))),a&&(o+="["+t.zone.ianaName+"]"),o}const Dr={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},dl={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},hl={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Mr=["year","month","day","hour","minute","second","millisecond"],fl=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],ml=["year","ordinal","hour","minute","second","millisecond"];function pl(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new Dn(t);return e}function rn(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return pl(t)}}function yl(t){if(ze===void 0&&(ze=W.now()),t.type!=="iana")return t.offset(ze);const e=t.name;let s=is.get(e);return s===void 0&&(s=t.offset(ze),is.set(e,s)),s}function an(t,e){const s=he(e.zone,W.defaultZone);if(!s.isValid)return x.invalid(Ze(s));const n=F.fromObject(e);let r,a;if(b(t.year))r=W.now();else{for(const c of Mr)b(t[c])&&(t[c]=Dr[c]);const o=rr(t)||ir(t);if(o)return x.invalid(o);const l=yl(s);[r,a]=dt(t,l,s)}return new x({ts:r,zone:s,loc:n,o:a})}function on(t,e,s){const n=b(s.round)?!0:s.round,r=(o,l)=>(o=vs(o,n||s.calendary?0:2,!0),e.loc.clone(s).relFormatter(s).format(o,l)),a=o=>s.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(s.unit)return r(a(s.unit),s.unit);for(const o of s.units){const l=a(o);if(Math.abs(l)>=1)return r(l,o)}return r(t>e?-0:0,s.units[s.units.length-1])}function ln(t){let e={},s;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],s=Array.from(t).slice(0,t.length-1)):s=Array.from(t),[e,s]}let ze;const is=new Map;class x{constructor(e){const s=e.zone||W.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new se("invalid input"):null)||(s.isValid?null:Ze(s));this.ts=b(e.ts)?W.now():e.ts;let r=null,a=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(s))[r,a]=[e.old.c,e.old.o];else{const l=fe(e.o)&&!e.old?e.o:s.offset(this.ts);r=ot(this.ts,l),n=Number.isNaN(r.year)?new se("invalid input"):null,r=n?null:r,a=n?null:l}this._zone=s,this.loc=e.loc||F.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=r,this.o=a,this.isLuxonDateTime=!0}static now(){return new x({})}static local(){const[e,s]=ln(arguments),[n,r,a,o,l,c,u]=s;return an({year:n,month:r,day:a,hour:o,minute:l,second:c,millisecond:u},e)}static utc(){const[e,s]=ln(arguments),[n,r,a,o,l,c,u]=s;return e.zone=B.utcInstance,an({year:n,month:r,day:a,hour:o,minute:l,second:c,millisecond:u},e)}static fromJSDate(e,s={}){const n=za(e)?e.valueOf():NaN;if(Number.isNaN(n))return x.invalid("invalid input");const r=he(s.zone,W.defaultZone);return r.isValid?new x({ts:n,zone:r,loc:F.fromObject(s)}):x.invalid(Ze(r))}static fromMillis(e,s={}){if(fe(e))return e<-864e13||e>ul?x.invalid("Timestamp out of range"):new x({ts:e,zone:he(s.zone,W.defaultZone),loc:F.fromObject(s)});throw new H(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,s={}){if(fe(e))return new x({ts:e*1e3,zone:he(s.zone,W.defaultZone),loc:F.fromObject(s)});throw new H("fromSeconds requires a numerical input")}static fromObject(e,s={}){e=e||{};const n=he(s.zone,W.defaultZone);if(!n.isValid)return x.invalid(Ze(n));const r=F.fromObject(s),a=vt(e,rn),{minDaysInFirstWeek:o,startOfWeek:l}=qs(a,r),c=W.now(),u=b(s.specificOffset)?n.offset(c):s.specificOffset,d=!b(a.ordinal),h=!b(a.year),f=!b(a.month)||!b(a.day),m=h||f,p=a.weekYear||a.weekNumber;if((m||d)&&p)throw new Fe("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&d)throw new Fe("Can't mix ordinal dates with month/day");const E=p||a.weekday&&!m;let y,O,R=ot(c,u);E?(y=fl,O=dl,R=gt(R,o,l)):d?(y=ml,O=hl,R=Wt(R)):(y=Mr,O=Dr);let T=!1;for(const V of y){const pe=a[V];b(pe)?T?a[V]=O[V]:a[V]=R[V]:T=!0}const U=E?Pa(a,o,l):d?Ua(a):rr(a),X=U||ir(a);if(X)return x.invalid(X);const S=E?zs(a,o,l):d?Hs(a):a,[k,v]=dt(S,u,n),j=new x({ts:k,zone:n,o:v,loc:r});return a.weekday&&m&&e.weekday!==j.weekday?x.invalid("mismatched weekday",`you can't specify both a weekday of ${a.weekday} and a date of ${j.toISO()}`):j.isValid?j:x.invalid(j.invalid)}static fromISO(e,s={}){const[n,r]=Lo(e);return Ce(n,r,s,"ISO 8601",e)}static fromRFC2822(e,s={}){const[n,r]=Ao(e);return Ce(n,r,s,"RFC 2822",e)}static fromHTTP(e,s={}){const[n,r]=Ro(e);return Ce(n,r,s,"HTTP",s)}static fromFormat(e,s,n={}){if(b(e)||b(s))throw new H("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:a=null}=n,o=F.fromOpts({locale:r,numberingSystem:a,defaultToEN:!0}),[l,c,u,d]=cl(o,e,s);return d?x.invalid(d):Ce(l,c,n,`format ${s}`,e,u)}static fromString(e,s,n={}){return x.fromFormat(e,s,n)}static fromSQL(e,s={}){const[n,r]=Zo(e);return Ce(n,r,s,"SQL",e)}static invalid(e,s=null){if(!e)throw new H("need to specify a reason the DateTime is invalid");const n=e instanceof se?e:new se(e,s);if(W.throwOnInvalid)throw new pa(n);return new x({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,s={}){const n=Ir(e,F.fromObject(s));return n?n.map(r=>r?r.val:null).join(""):null}static expandFormat(e,s={}){return jr(q.parseFormat(e),F.fromObject(s)).map(r=>r.val).join("")}static resetCache(){ze=void 0,is.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Ut(this).weekYear:NaN}get weekNumber(){return this.isValid?Ut(this).weekNumber:NaN}get weekday(){return this.isValid?Ut(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Zt(this).weekday:NaN}get localWeekNumber(){return this.isValid?Zt(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Zt(this).weekYear:NaN}get ordinal(){return this.isValid?Wt(this.c).ordinal:NaN}get monthShort(){return this.isValid?it.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?it.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?it.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?it.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,s=6e4,n=Ot(this.c),r=this.zone.offset(n-e),a=this.zone.offset(n+e),o=this.zone.offset(n-r*s),l=this.zone.offset(n-a*s);if(o===l)return[this];const c=n-o*s,u=n-l*s,d=ot(c,o),h=ot(u,l);return d.hour===h.hour&&d.minute===h.minute&&d.second===h.second&&d.millisecond===h.millisecond?[ge(this,{ts:c}),ge(this,{ts:u})]:[this]}get isInLeapYear(){return tt(this.year)}get daysInMonth(){return xt(this.year,this.month)}get daysInYear(){return this.isValid?De(this.year):NaN}get weeksInWeekYear(){return this.isValid?Ye(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Ye(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:s,numberingSystem:n,calendar:r}=q.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:s,numberingSystem:n,outputCalendar:r}}toUTC(e=0,s={}){return this.setZone(B.instance(e),s)}toLocal(){return this.setZone(W.defaultZone)}setZone(e,{keepLocalTime:s=!1,keepCalendarTime:n=!1}={}){if(e=he(e,W.defaultZone),e.equals(this.zone))return this;if(e.isValid){let r=this.ts;if(s||n){const a=e.offset(this.ts),o=this.toObject();[r]=dt(o,a,e)}return ge(this,{ts:r,zone:e})}else return x.invalid(Ze(e))}reconfigure({locale:e,numberingSystem:s,outputCalendar:n}={}){const r=this.loc.clone({locale:e,numberingSystem:s,outputCalendar:n});return ge(this,{loc:r})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const s=vt(e,rn),{minDaysInFirstWeek:n,startOfWeek:r}=qs(s,this.loc),a=!b(s.weekYear)||!b(s.weekNumber)||!b(s.weekday),o=!b(s.ordinal),l=!b(s.year),c=!b(s.month)||!b(s.day),u=l||c,d=s.weekYear||s.weekNumber;if((u||o)&&d)throw new Fe("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&o)throw new Fe("Can't mix ordinal dates with month/day");let h;a?h=zs({...gt(this.c,n,r),...s},n,r):b(s.ordinal)?(h={...this.toObject(),...s},b(s.day)&&(h.day=Math.min(xt(h.year,h.month),h.day))):h=Hs({...Wt(this.c),...s});const[f,m]=dt(h,this.o,this.zone);return ge(this,{ts:f,o:m})}plus(e){if(!this.isValid)return this;const s=N.fromDurationLike(e);return ge(this,sn(this,s))}minus(e){if(!this.isValid)return this;const s=N.fromDurationLike(e).negate();return ge(this,sn(this,s))}startOf(e,{useLocaleWeeks:s=!1}={}){if(!this.isValid)return this;const n={},r=N.normalizeUnit(e);switch(r){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(r==="weeks")if(s){const a=this.loc.getStartOfWeek(),{weekday:o}=this;o<a&&(n.weekNumber=this.weekNumber-1),n.weekday=a}else n.weekday=1;if(r==="quarters"){const a=Math.ceil(this.month/3);n.month=(a-1)*3+1}return this.set(n)}endOf(e,s){return this.isValid?this.plus({[e]:1}).startOf(e,s).minus(1):this}toFormat(e,s={}){return this.isValid?q.create(this.loc.redefaultToEN(s)).formatDateTimeFromString(this,e):Pt}toLocaleString(e=yt,s={}){return this.isValid?q.create(this.loc.clone(s),e).formatDateTime(this):Pt}toLocaleParts(e={}){return this.isValid?q.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:s=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:a=!1}={}){if(!this.isValid)return null;const o=e==="extended";let l=zt(this,o);return l+="T",l+=nn(this,o,s,n,r,a),l}toISODate({format:e="extended"}={}){return this.isValid?zt(this,e==="extended"):null}toISOWeekDate(){return lt(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:s=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:a=!1,format:o="extended"}={}){return this.isValid?(r?"T":"")+nn(this,o==="extended",s,e,n,a):null}toRFC2822(){return lt(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return lt(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?zt(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:s=!1,includeOffsetSpace:n=!0}={}){let r="HH:mm:ss.SSS";return(s||e)&&(n&&(r+=" "),s?r+="z":e&&(r+="ZZ")),lt(this,r,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Pt}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const s={...this.c};return e.includeConfig&&(s.outputCalendar=this.outputCalendar,s.numberingSystem=this.loc.numberingSystem,s.locale=this.loc.locale),s}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,s="milliseconds",n={}){if(!this.isValid||!e.isValid)return N.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},a=Ha(s).map(N.normalizeUnit),o=e.valueOf()>this.valueOf(),l=o?this:e,c=o?e:this,u=Qo(l,c,a,r);return o?u.negate():u}diffNow(e="milliseconds",s={}){return this.diff(x.now(),e,s)}until(e){return this.isValid?$.fromDateTimes(this,e):this}hasSame(e,s,n){if(!this.isValid)return!1;const r=e.valueOf(),a=this.setZone(e.zone,{keepLocalTime:!0});return a.startOf(s,n)<=r&&r<=a.endOf(s,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const s=e.base||x.fromObject({},{zone:this.zone}),n=e.padding?this<s?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],a=e.unit;return Array.isArray(e.unit)&&(r=e.unit,a=void 0),on(s,this.plus(n),{...e,numeric:"always",units:r,unit:a})}toRelativeCalendar(e={}){return this.isValid?on(e.base||x.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(x.isDateTime))throw new H("min requires all arguments be DateTimes");return Bs(e,s=>s.valueOf(),Math.min)}static max(...e){if(!e.every(x.isDateTime))throw new H("max requires all arguments be DateTimes");return Bs(e,s=>s.valueOf(),Math.max)}static fromFormatExplain(e,s,n={}){const{locale:r=null,numberingSystem:a=null}=n,o=F.fromOpts({locale:r,numberingSystem:a,defaultToEN:!0});return Cr(o,e,s)}static fromStringExplain(e,s,n={}){return x.fromFormatExplain(e,s,n)}static buildFormatParser(e,s={}){const{locale:n=null,numberingSystem:r=null}=s,a=F.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0});return new Nr(a,e)}static fromFormatParser(e,s,n={}){if(b(e)||b(s))throw new H("fromFormatParser requires an input string and a format parser");const{locale:r=null,numberingSystem:a=null}=n,o=F.fromOpts({locale:r,numberingSystem:a,defaultToEN:!0});if(!o.equals(s.locale))throw new H(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${s.locale}`);const{result:l,zone:c,specificOffset:u,invalidReason:d}=s.explainFromTokens(e);return d?x.invalid(d):Ce(l,c,n,`format ${s.format}`,e,u)}static get DATE_SHORT(){return yt}static get DATE_MED(){return Mn}static get DATE_MED_WITH_WEEKDAY(){return xa}static get DATE_FULL(){return Ln}static get DATE_HUGE(){return An}static get TIME_SIMPLE(){return Rn}static get TIME_WITH_SECONDS(){return Vn}static get TIME_WITH_SHORT_OFFSET(){return $n}static get TIME_WITH_LONG_OFFSET(){return Wn}static get TIME_24_SIMPLE(){return _n}static get TIME_24_WITH_SECONDS(){return Pn}static get TIME_24_WITH_SHORT_OFFSET(){return Un}static get TIME_24_WITH_LONG_OFFSET(){return Zn}static get DATETIME_SHORT(){return zn}static get DATETIME_SHORT_WITH_SECONDS(){return Hn}static get DATETIME_MED(){return qn}static get DATETIME_MED_WITH_SECONDS(){return Bn}static get DATETIME_MED_WITH_WEEKDAY(){return va}static get DATETIME_FULL(){return Yn}static get DATETIME_FULL_WITH_SECONDS(){return Gn}static get DATETIME_HUGE(){return Qn}static get DATETIME_HUGE_WITH_SECONDS(){return Jn}}function Pe(t){if(x.isDateTime(t))return t;if(t&&t.valueOf&&fe(t.valueOf()))return x.fromJSDate(t);if(t&&typeof t=="object")return x.fromObject(t);throw new H(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const Lr=({startTimestamp:t})=>{const e={...x.DATE_MED},s={...x.TIME_24_WITH_SHORT_OFFSET},n=x.fromISO(t),r=x.now().diff(n,"days");return i.jsxs(D,{direction:"vertical",gap:"1",children:[i.jsx("div",{children:n.toLocaleString(e)}),i.jsx("div",{children:n.toLocaleString(s)}),r.days>7&&i.jsxs(ri,{variant:"warning",triggerEvent:"hover",children:[i.jsx(ii,{asChild:!0,children:i.jsx(oe,{icon:"warning",color:"text-theme-warning"})}),i.jsx(ai,{children:`Alert has been firing for ${Math.round(r.days)} days`})]})]})},M=1,Ar=2,Rr=4,Z=8,as=16,ct=32,ie=64,os={a:{content:M|Z,self:!1,type:M|Z|ct|ie},address:{invalid:["h1","h2","h3","h4","h5","h6","address","article","aside","section","div","header","footer"],self:!1},audio:{children:["track","source"]},br:{type:M|Z,void:!0},body:{content:M|Ar|Rr|Z|as|ct|ie},button:{content:Z,type:M|Z|ct|ie},caption:{content:M,parent:["table"]},col:{parent:["colgroup"],void:!0},colgroup:{children:["col"],parent:["table"]},details:{children:["summary"],type:M|ct|ie},dd:{content:M,parent:["dl"]},dl:{children:["dt","dd"],type:M},dt:{content:M,invalid:["footer","header"],parent:["dl"]},figcaption:{content:M,parent:["figure"]},footer:{invalid:["footer","header"]},header:{invalid:["footer","header"]},hr:{type:M,void:!0},img:{void:!0},li:{content:M,parent:["ul","ol","menu"]},main:{self:!1},ol:{children:["li"],type:M},picture:{children:["source","img"],type:M|Z|as},rb:{parent:["ruby","rtc"]},rp:{parent:["ruby","rtc"]},rt:{content:Z,parent:["ruby","rtc"]},rtc:{content:Z,parent:["ruby"]},ruby:{children:["rb","rp","rt","rtc"]},source:{parent:["audio","video","picture"],void:!0},summary:{content:Z,parent:["details"]},table:{children:["caption","colgroup","thead","tbody","tfoot","tr"],type:M},tbody:{parent:["table"],children:["tr"]},td:{content:M,parent:["tr"]},tfoot:{parent:["table"],children:["tr"]},th:{content:M,parent:["tr"]},thead:{parent:["table"],children:["tr"]},tr:{parent:["table","tbody","thead","tfoot"],children:["th","td"]},track:{parent:["audio","video"],void:!0},ul:{children:["li"],type:M},video:{children:["track","source"]},wbr:{type:M|Z,void:!0}};function Ee(t){return e=>{os[e]={...t,...os[e]}}}["address","main","div","figure","p","pre"].forEach(Ee({content:M,type:M|ie}));["abbr","b","bdi","bdo","cite","code","data","dfn","em","i","kbd","mark","q","ruby","samp","strong","sub","sup","time","u","var"].forEach(Ee({content:Z,type:M|Z|ie}));["p","pre"].forEach(Ee({content:Z,type:M|ie}));["s","small","span","del","ins"].forEach(Ee({content:Z,type:M|Z}));["article","aside","footer","header","nav","section","blockquote"].forEach(Ee({content:M,type:M|Ar|ie}));["h1","h2","h3","h4","h5","h6"].forEach(Ee({content:Z,type:M|Rr|ie}));["audio","canvas","iframe","img","video"].forEach(Ee({type:M|Z|as|ie}));const ls=Object.freeze(os),gl=["applet","base","body","command","embed","frame","frameset","head","html","link","meta","noscript","object","script","style","title"],xl=Object.keys(ls).filter(t=>t!=="canvas"&&t!=="iframe"),L=1,vl=2,He=3,Ie=4,Vr=5,cn=Object.freeze({alt:L,cite:L,class:L,colspan:He,controls:Ie,datetime:L,default:Ie,disabled:Ie,dir:L,height:L,href:L,id:L,kind:L,label:L,lang:L,loading:L,loop:Ie,media:L,muted:Ie,poster:L,rel:L,role:L,rowspan:He,scope:L,sizes:L,span:He,start:He,style:Vr,src:L,srclang:L,srcset:L,tabindex:L,target:L,title:L,type:L,width:L}),wl=Object.freeze({class:"className",colspan:"colSpan",datetime:"dateTime",rowspan:"rowSpan",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex"});function wt(){return wt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},wt.apply(this,arguments)}function $r({attributes:t={},className:e,children:s=null,selfClose:n=!1,tagName:r}){const a=r;return n?we.createElement(a,wt({className:e},t)):we.createElement(a,wt({className:e},t),s)}class bl{attribute(e,s){return s}node(e,s){return s}}/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var Ht,un;function Sl(){if(un)return Ht;un=1;var t=/["'&<>]/;Ht=e;function e(s){var n=""+s,r=t.exec(n);if(!r)return n;var a,o="",l=0,c=0;for(l=r.index;l<n.length;l++){switch(n.charCodeAt(l)){case 34:a="&quot;";break;case 38:a="&amp;";break;case 39:a="&#39;";break;case 60:a="&lt;";break;case 62:a="&gt;";break;default:continue}c!==l&&(o+=n.substring(c,l)),c=l+1,o+=a}return c!==l?o+n.substring(c,l):o}return Ht}var Tl=Sl();const kl=Vi(Tl);function ae(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const El=/(url|image|image-set)\(/i;class Ol extends bl{attribute(e,s){return e==="style"&&Object.keys(s).forEach(n=>{String(s[n]).match(El)&&delete s[n]}),s}}const dn=1,jl=3,Nl=/^<(!doctype|(html|head|body)(\s|>))/i,Cl=/^(aria-|data-|\w+:)/iu,Il=/{{{(\w+)\/?}}}/;function Fl(){if(!(typeof window>"u"||typeof document>"u"))return document.implementation.createHTMLDocument("Interweave")}class Dl{constructor(e,s={},n=[],r=[]){var a;ae(this,"allowed",void 0),ae(this,"banned",void 0),ae(this,"blocked",void 0),ae(this,"container",void 0),ae(this,"content",[]),ae(this,"props",void 0),ae(this,"matchers",void 0),ae(this,"filters",void 0),ae(this,"keyIndex",void 0),this.props=s,this.matchers=n,this.filters=[...r,new Ol],this.keyIndex=-1,this.container=this.createContainer(e||""),this.allowed=new Set((a=s.allowList)!==null&&a!==void 0?a:xl),this.banned=new Set(gl),this.blocked=new Set(s.blockList)}applyAttributeFilters(e,s){return this.filters.reduce((n,r)=>n!==null&&typeof r.attribute=="function"?r.attribute(e,n):n,s)}applyNodeFilters(e,s){return this.filters.reduce((n,r)=>n!==null&&typeof r.node=="function"?r.node(e,n):n,s)}applyMatchers(e,s){const n={},{props:r}=this;let a=e,o=0,l=null;return this.matchers.forEach(c=>{const u=c.asTag().toLowerCase(),d=this.getTagConfig(u);if(r[c.inverseName]||!this.isTagAllowed(u)||!this.canRenderChild(s,d))return;let h="";for(;a&&(l=c.match(a));){const{index:f,length:m,match:p,valid:E,void:y,...O}=l,R=c.propName+String(o);f>0&&(h+=a.slice(0,f)),E?(h+=y?`{{{${R}/}}}`:`{{{${R}}}}${p}{{{/${R}}}}`,this.keyIndex+=1,o+=1,n[R]={children:p,matcher:c,props:{...r,...O,key:this.keyIndex}}):h+=p,c.greedy?(a=h+a.slice(f+m),h=""):a=a.slice(f+(m||p.length))}c.greedy||(a=h+a)}),o===0?e:this.replaceTokens(a,n)}canRenderChild(e,s){return!e.tagName||!s.tagName||e.void?!1:e.children.length>0?e.children.includes(s.tagName):e.invalid.length>0&&e.invalid.includes(s.tagName)?!1:s.parent.length>0?s.parent.includes(e.tagName):!e.self&&e.tagName===s.tagName?!1:!!(e&&e.content&s.type)}convertLineBreaks(e){const{noHtml:s,disableLineBreaks:n}=this.props;if(s||n||e.match(/<((?:\/[ a-z]+)|(?:[ a-z]+\/))>/gi))return e;let r=e.replace(/\r\n/g,`
`);return r=r.replace(/\n{3,}/g,`


`),r=r.replace(/\n/g,"<br/>"),r}createContainer(e){var s;const r=(typeof global<"u"&&global.INTERWEAVE_SSR_POLYFILL||Fl)();if(!r)return;const a=(s=this.props.containerTagName)!==null&&s!==void 0?s:"body",o=a==="body"||a==="fragment"?r.body:r.createElement(a);return e.match(Nl)||(o.innerHTML=this.convertLineBreaks(this.props.escapeHtml?kl(e):e)),o}extractAttributes(e){const{allowAttributes:s}=this.props,n={};let r=0;return e.nodeType!==dn||!e.attributes||([...e.attributes].forEach(a=>{const{name:o,value:l}=a,c=o.toLowerCase(),u=cn[c]||cn[o];if(!this.isSafe(e)||!c.match(Cl)&&(!s&&(!u||u===vl)||c.startsWith("on")||l.replace(/(\s|\0|&#x0([9AD]);)/,"").match(/(javascript|vbscript|livescript|xss):/i)))return;let d=c==="style"?this.extractStyleAttribute(e):l;u===Ie?d=!0:u===He?d=Number.parseFloat(String(d)):u!==Vr&&(d=String(d)),n[wl[c]||c]=this.applyAttributeFilters(c,d),r+=1}),r===0)?null:n}extractStyleAttribute(e){const s={};return Array.from(e.style).forEach(n=>{const r=e.style[n];(typeof r=="string"||typeof r=="number")&&(s[n.replace(/-([a-z])/g,(a,o)=>String(o).toUpperCase())]=r)}),s}getTagConfig(e){const s={children:[],content:0,invalid:[],parent:[],self:!0,tagName:"",type:0,void:!1};return ls[e]?{...s,...ls[e],tagName:e}:s}isSafe(e){if(typeof HTMLAnchorElement<"u"&&e instanceof HTMLAnchorElement){const s=e.getAttribute("href");if(s!=null&&s.startsWith("#"))return!0;const n=e.protocol.toLowerCase();return n===":"||n==="http:"||n==="https:"||n==="mailto:"||n==="tel:"}return!0}isTagAllowed(e){return this.banned.has(e)||this.blocked.has(e)?!1:this.props.allowElements||this.allowed.has(e)}parse(){return this.container?this.parseNode(this.container,this.getTagConfig(this.container.nodeName.toLowerCase())):[]}parseNode(e,s){const{noHtml:n,noHtmlExceptMatchers:r,allowElements:a,transform:o,transformOnlyAllowList:l}=this.props;let c=[],u="";return[...e.childNodes].forEach(d=>{if(d.nodeType===dn){const f=d.nodeName.toLowerCase(),m=this.getTagConfig(f);u&&(c.push(u),u="");const p=this.applyNodeFilters(f,d);if(!p)return;let E;if(o&&!(l&&!this.isTagAllowed(f))){this.keyIndex+=1;const y=this.keyIndex;E=this.parseNode(p,m);const O=o(p,E,m);if(O===null)return;if(typeof O<"u"){c.push(we.cloneElement(O,{key:y}));return}this.keyIndex=y-1}if(this.banned.has(f))return;if(!(n||r&&f!=="br")&&this.isTagAllowed(f)&&(a||this.canRenderChild(s,m))){var h;this.keyIndex+=1;const y=this.extractAttributes(p),O={tagName:f};y&&(O.attributes=y),m.void&&(O.selfClose=m.void),c.push(we.createElement($r,{...O,key:this.keyIndex},(h=E)!==null&&h!==void 0?h:this.parseNode(p,m)))}else c=[...c,...this.parseNode(p,m.tagName?m:s)]}else if(d.nodeType===jl){const f=n&&!r?d.textContent:this.applyMatchers(d.textContent||"",s);Array.isArray(f)?c=[...c,...f]:u+=f}}),u&&c.push(u),c}replaceTokens(e,s){if(!e.includes("{{{"))return e;const n=[];let r=e,a=null;for(;a=r.match(Il);){const[o,l]=a,c=a.index,u=o.includes("/");c>0&&(n.push(r.slice(0,c)),r=r.slice(c));const{children:d,matcher:h,props:f}=s[l];let m;if(u)m=o.length,n.push(h.createElement(d,f));else{const p=r.match(new RegExp(`{{{/${l}}}}`));m=p.index+p[0].length,n.push(h.createElement(this.replaceTokens(r.slice(o.length,p.index),s),f))}r=r.slice(m)}return r.length>0&&n.push(r),n.length===0?"":n.length===1&&typeof n[0]=="string"?n[0]:n}}function Ml(t){var e;const{attributes:s,className:n,containerTagName:r,content:a,emptyContent:o,parsedContent:l,tagName:c,noWrap:u}=t,d=(e=r??c)!==null&&e!==void 0?e:"span",h=d==="fragment"?!0:u;let f;if(l)f=l;else{const m=new Dl(a??"",t).parse();m.length>0&&(f=m)}return f||(f=o),h?we.createElement(we.Fragment,null,f):we.createElement($r,{attributes:s,className:n,tagName:d},f)}const Ct=({description:t,subdued:e})=>i.jsx(Ml,{content:oi(t?.replace(/`([^`]+)`/g,"<code class='inline-code'>$1</code>")),tagName:"div",className:e?"text-theme-light":""}),Wr=({alert:t,className:e})=>i.jsxs(D,{gap:"3",className:e,children:[t?.generatorURL&&i.jsx("a",{className:"underline",href:t?.generatorURL,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"Prometheus"}),t?.labels?.playbook&&i.jsx("a",{className:"underline",href:`https://operations.global.cloud.sap/${t?.labels?.playbook}`,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"Playbook"}),t?.labels?.kibana&&i.jsx("a",{className:"underline",href:`https://logs.${t?.labels?.region}.cloud.sap/${t?.labels?.kibana}`,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"Logs"}),t?.labels?.dashboard&&i.jsx("a",{className:"underline",href:`https://plutono.${t?.labels?.region}.cloud.sap/d/${t?.labels?.dashboard}`,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"Plutono"}),t?.labels?.spc&&i.jsx("a",{className:"underline",href:`https://spc.ondemand.com/ticket_create/?${t?.labels?.spc}`,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"SPC Ticket"}),t?.labels?.sentry&&i.jsx("a",{className:"underline",href:`https://sentry.${t?.labels?.region}.cloud.sap/monsoon/${t?.labels?.sentry}`,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"Sentry"}),t?.labels?.cloudops&&i.jsx("a",{className:"underline",href:`https://dashboard.${t?.labels?.region}.cloud.sap/ccadmin/cloud_admin/cloudops#/universal-search/${t?.labels?.cloudops}`,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"CloudOps"}),t?.labels?.report&&i.jsx("a",{className:"underline",href:`https://dashboard.${t?.labels?.region}.cloud.sap/${t?.labels?.report}`,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"Report"}),t?.annotations?.mail_subject&&i.jsx("a",{className:"underline",href:`mailto:?subject=${encodeURIComponent(t?.annotations?.mail_subject)}&body=${encodeURIComponent(t?.annotations?.mail_body)}`,rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"Email Owner"})]}),_r=({alert:t,showAll:e})=>{const s=e?Object.keys(t?.labels):Sn(),n=St(),{addActiveFilter:r,removeActiveFilter:a}=Ge(),o=(c,u,d)=>{n?.[u]?.includes(d)?l(c,u,d):(c.stopPropagation(),r(u,d))},l=(c,u,d)=>{c.stopPropagation(),a(u,d)};return i.jsx(D,{gap:"2",alignment:"start",wrap:!0,children:s.map(c=>{const u=t?.labels?.[c],d=n?.[c]?.includes(u);return u&&i.jsx(be,{pillKey:c,pillValue:u,onClick:(h,f)=>o(h,c,u),closeable:d,onClose:(h,f)=>l(h,c,u)},c)})})},hn=({matchers:t,onClickCallback:e,closeable:s})=>{const n=w.useMemo(()=>!t||t?.length<=0?[]:t.sort((a,o)=>a.configurable-o.configurable),[t]),r=a=>{const o={onClick:()=>a.configurable&&e(a),onClose:()=>e(a)};return a.configurable?o:{}};return i.jsx(D,{gap:"2",alignment:"start",wrap:!0,children:n.length>0?t.map(a=>w.createElement(be,{className:a.configurable?"opacity-100":"opacity-70",closeable:a.configurable&&s,...r(a),key:a.name,pillKey:a.name,pillValue:a.value})):i.jsx("span",{className:"text-theme-light",children:"No excluded matchers found"})})},Ll=t=>`
      transition-all
      ease-out
      max-h-0
      overflow-y-auto
			${t?"duration-1000 max-h-[34rem]":"duration-300"}
		`.replace(/\n/g," ").replace(/\s+/g," "),Al=({matchers:t,onMatchersChanged:e})=>{const[s,n]=w.useState(!1),r=a=>{a.preventDefault(),n(!s)};return i.jsx(i.Fragment,{children:t&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"advance-link mt-4",children:i.jsx("a",{href:"#",rel:"noopener noreferrer",onClick:r,children:i.jsxs(D,{alignment:"center",children:["Advanced options",i.jsx(oe,{color:"jn-global-text",icon:s?"expandLess":"expandMore"})]})})}),i.jsx("div",{className:"advanced-area overflow-hidden",children:i.jsxs("div",{className:Ll(s),children:[i.jsx("p",{className:"mt-2",children:"Matchers attached to this silence"}),i.jsx("div",{className:"mt-2",children:i.jsx(hn,{matchers:t.filter(a=>!a.excluded),onClickCallback:e,closeable:!0})}),i.jsx("p",{className:"mt-4",children:"The default silence configuration excludes the following matchers because they typically make the silence too specific which can lead to alerts bypassing the silence unexpectedly. If you do want to include any of these matchers in the silence configuration, click on them to add them. If you change your mind, click again to remove."}),i.jsx("div",{className:"my-2",children:i.jsx(hn,{matchers:t.filter(a=>a.excluded),onClickCallback:e,closeable:!1})})]})})]})})},fn=[{label:"2 hours",value:2},{label:"12 hours",value:12},{label:"1 day",value:24},{label:"3 days",value:72},{label:"7 days",value:168}],Rl=t=>{if(t?.length>0)return t.sort((s,n)=>new Date(n.endsAt).getTime()-new Date(s.endsAt).getTime())[0].endsAt},Pr=t=>{if(!t)return{items:fn};const e=new Date,r=(new Date(t).getTime()-e.getTime())/(1e3*60*60),a=fn.map(l=>l.value<=r?{...l,label:l.label+" (covered with the existing silence)",covered:!0}:l),o=a.find(l=>!l?.covered);return{items:a,firstNotCovered:o}},Vl=(t,e=[],s=[])=>{if(!t||!e)return;const n=[];return Object.keys(t).forEach(r=>{const a=t?.[r];if(a){const o={name:r,value:a,isRegex:!1,excluded:!1,configurable:!1};s.includes(r)||(e.includes(r)?n.push({...o,excluded:!0,configurable:!0}):n.push(o))}}),n},Oe=t=>typeof t=="string"?t.includes("Failed to fetch")?"Could not reach endpoint. Possible causes could include network issues, incorrect URL, or server outages.":$l(t):typeof t=="object"&&t?.message?(t?.code?`API: ${t.code}, `:"")+t?.message:"An error occurred",$l=t=>{let e=t;try{e=JSON.parse(t),e?.message&&(e=(e?.code?`API: ${e.code}, `:"")+e?.message)}catch(s){return console.warn(s),t}return e},It=(t,e)=>{let s;return function(...n){const r=this;clearTimeout(s),s=setTimeout(()=>t.apply(r,n),e)}},K={SILENCE_ACTIVE:"active",SILENCE_PENDING:"pending",SILENCE_EXPIRED:"expired"},Wl={deleteSilences:la,createSilences:ca},Ft=(t,e={})=>{const s=bn(),n=Wl[t];if(!n)throw new Error(`No mutation function mapped for key: ${t}`);return ea({mutationFn:r=>n({...r,endpoint:s}),onError:e?.onError,...e})},_l=t=>{const n={};return t?.comment?.length<3&&(n.comment||(n.comment=[]),n.comment.push("Please enter at least 3 characters")),t?.createdBy?.length<1&&(n.createdBy||(n.createdBy=[]),n.createdBy.push("Please enter a name")),n},mn=t=>t.map((e,s)=>i.jsx("span",{className:"block text-theme-danger ",children:e},s)),pn={duration:2,comment:""},Ur=({alert:t,size:e,variant:s})=>{const n=Ae(),r=li(),{getMappingSilences:a,setSilences:o}=me(),l=ci(),c=cs(),[u,d]=w.useState(!1),[h,f]=w.useState(pn),[m,p]=w.useState(null),[E,y]=w.useState({}),{addMessage:O}=Te(),R=Qe();w.useLayoutEffect(()=>{f({...h,...pn,createdBy:c||"",matchers:Vl(t?.labels,r,l)}),p(Rl(a(t))),y({})},[u]);const T=w.useMemo(()=>{const v=Pr(m??0);return v.firstNotCovered&&f({...h,duration:v.firstNotCovered.value}),v.items},[m]),{mutate:U}=Ft("createSilences",{onMutate:v=>{n.cancelQueries({queryKey:["silences"]});const j={...v.silence,status:{state:K.SILENCE_ACTIVE}},V=[...R,j];o({items:V}),d(!1)},onSuccess:v=>{O({variant:"success",text:`A silence object with id ${v?.silenceID} was created successfully. Please note that it may
            take up to 5 minutes for the alert to show up as silenced.`})},onError:v=>{O({variant:"error",text:Oe(v)})},onSettled:()=>{n.invalidateQueries({queryKey:["silences"]})}}),X=It(()=>{const v=_l(h);if(y(v),Object.keys(v).length>0)return;const j={...h};j.matchers?.length>0&&(j.matchers=j.matchers.filter(Dt=>!Dt.excluded).map(({...Dt})=>Dt));const V=new Date,pe=new Date;pe.setHours(pe.getHours()+Number.parseInt(j.duration||4));const Yr={...j,status:{state:K.SILENCE_ACTIVE},startsAt:V.toISOString(),endsAt:pe.toISOString(),alertFingerprint:t.fingerprint};U({silence:Yr})},200),S=({key:v,value:j})=>{j&&f({...h,[v]:j})},k=v=>{const j=h.matchers.findIndex(pe=>pe.name==v.name),V=h.matchers.slice();j>=0&&(V[j]={...V[j],excluded:!v.excluded}),f({...h,matchers:V})};return i.jsxs(i.Fragment,{children:[i.jsx(Re,{size:e,variant:s,onClick:v=>{v.stopPropagation(),d(!u)},children:"Silence"}),u&&i.jsxs(Tt,{title:"New Silence for",size:"large",open:!0,confirmButtonLabel:"Save",onCancel:()=>d(!1),onConfirm:X,children:[m&&i.jsxs(ft,{className:"mb-6",variant:"info",children:["There is already a silence for this alert that expires at",i.jsx("b",{children:x.fromISO(m).toLocaleString(x.DATETIME_SHORT)})]}),i.jsx("span",{className:"text-lg font-bold",children:t?.labels?.alertname}),i.jsx(Tn,{className:"mt-2",children:i.jsx(Ct,{description:t.annotations?.description})}),i.jsxs(i.Fragment,{children:[i.jsx(Al,{matchers:h.matchers,onMatchersChanged:k}),i.jsxs(mt,{className:"mt-6",children:[i.jsx(z,{children:i.jsx(pt,{required:!0,label:"Silenced by",value:h.createdBy,onChange:v=>S({key:"createdBy",value:v.target.value}),errortext:E.createdBy&&mn(E.createdBy),disabled:!!c})}),i.jsx(z,{children:i.jsx(us,{className:"h-20",label:"Description",value:h.comment,onChange:v=>S({key:"comment",value:v.target.value}),errortext:E.comment&&mn(E.comment),required:!0})}),i.jsx(z,{children:i.jsx(Je,{required:!0,label:"Duration",value:h.duration,onChange:v=>S({key:"duration",value:v}),children:T?.map(v=>i.jsx(ve,{label:v.label,value:String(v.value)},v.value))})})]})]})]})]})},Pl=(t,e)=>{if(!t)return null;const s=t.map(r=>e.find(a=>a.fingerprint===r));return s[0]?s.sort((r,a)=>new Date(a.endsAt).getTime()-new Date(r.endsAt).getTime())[0]:null},Zr=({alert:t})=>{if(!t)return null;const e=kn(),{getMappingSilences:s}=me(),n=s(t).sort((o,l)=>new Date(l?.endsAt).getTime()-new Date(o?.endsAt).getTime()),r=n.length>0?n[0]:null,a=Pl(t?.status?.inhibitedBy,e);return i.jsxs("div",{className:"cursor-default",children:[t&&i.jsx("span",{children:t?.status?.state}),a&&i.jsx("div",{className:"text-xs mt-2",children:i.jsxs(D,{direction:"vertical",children:[i.jsx("span",{children:"Inhibited by:"}),i.jsx("span",{children:a?.annotations?.summary})]})}),r&&i.jsx("div",{className:"text-xs mt-2",children:i.jsxs(D,{direction:"vertical",children:[i.jsx("span",{children:"Silenced by:"}),i.jsx("span",{children:r?.createdBy||r.id},r.id)]})})]})},zr=({region:t,cluster:e})=>i.jsxs(i.Fragment,{children:[t,t!==e&&i.jsxs(i.Fragment,{children:[i.jsx("br",{}),i.jsx("span",{className:"text-theme-light",children:e})]})]}),Hr=t=>{const{addMessage:e}=Te(),s=t.silence,[n,r]=w.useState(!1),a=Ae(),o=Qe(),{setSilences:l}=me(),{mutate:c}=Ft("deleteSilences",{onSuccess:d=>{a.cancelQueries({queryKey:["silences"]});const h=o.filter(p=>p.id===d.id);let f=h.length>0?h[0]:null;f={...f,status:{state:K.SILENCE_EXPIRED}};const m=[...o.filter(p=>p?.id!==d?.id),f];l({items:m}),e({variant:"success",text:"Silence expired successfully. Please note that it may take up to 5 minutes for the silence to show up as expired."})},onError:d=>{e({variant:"error",text:Oe(d)})},onSettled:()=>{a.invalidateQueries({queryKey:["silences"]})}}),u=It(()=>{c({id:s.id}),r(!1)},200);return i.jsxs(i.Fragment,{children:[i.jsx(Re,{onClick:()=>r(!0),children:"Expire"}),n&&i.jsxs(Tt,{cancelButtonLabel:"Cancel",confirmButtonLabel:"Expire Silence",onCancel:()=>r(!1),onConfirm:u,open:!0,title:"Confirmation needed",children:[i.jsxs("p",{children:["Do you really want to expire the silence ",i.jsx("b",{children:s.id}),"?"]}),i.jsxs("p",{children:["Comment for the silence: ",i.jsx("b",{children:s?.comment})]})]})]})},Ul=t=>{const n={};return t?.comment?.length<3&&(n.comment||(n.comment=[]),n.comment.push("Please enter at least 3 characters")),t?.createdBy?.length<1&&(n.createdBy||(n.createdBy=[]),n.createdBy.push("Please enter a name")),n},yn=t=>t.map((e,s)=>i.jsx("span",{className:"block text-theme-danger ",children:e},s)),gn={duration:2,comment:""},qr=t=>{const e=t.silence,{addMessage:s}=Te(),n=cs(),r=Qe(),{setSilences:a}=me(),o=Ae(),[l,c]=w.useState(!1),[u,d]=w.useState(gn),[h,f]=w.useState({}),[m,p]=w.useState(null);w.useLayoutEffect(()=>{l&&(d({...u,...gn,createdBy:n||"",matchers:e.matchers,comment:e.comment}),p(null),f({}))},[l]);const E=w.useMemo(()=>{const T=Pr(0);return T.firstNotCovered&&d({...u,duration:T.firstNotCovered.value}),T.items},[]),{mutate:y}=Ft("createSilences",{onMutate:T=>{o.cancelQueries({queryKey:["silences"]});const U={...T.silence,status:{state:K.SILENCE_ACTIVE}},X=[...r,U];a({items:X}),c(!1)},onSuccess:T=>{s({variant:"success",text:`A silence object with id ${T?.silenceID} was created successfully. Please note that it may
            take up to 5 minutes for the alert to show up as silenced.`})},onError:T=>{s({variant:"error",text:Oe(T)})},onSettled:()=>{o.invalidateQueries({queryKey:["silences"]})}}),O=It(()=>{p(null);const T=Ul(u);if(f(T),Object.keys(T).length>0)return;const U={...u},X=new Date,S=new Date;S.setHours(S.getHours()+Number.parseInt(U.duration||4));const k={...U,startsAt:X.toISOString(),endsAt:S.toISOString()};y({silence:k})},200),R=({key:T,value:U})=>{U&&d({...u,[T]:U})};return i.jsxs(i.Fragment,{children:[i.jsx(Re,{onClick:T=>{T.stopPropagation(),c(!l)},children:"Recreate"}),l&&i.jsxs(Tt,{title:"New Silence for",size:"large",open:!0,confirmButtonLabel:"Save",onCancel:()=>c(!1),onConfirm:O,children:[m&&i.jsx(ft,{text:m,variant:"danger"}),i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"advanced-area overflow-hidden",children:[i.jsx("p",{className:"mt-2",children:"Matchers attached to this silence"}),i.jsx(D,{gap:"2",alignment:"start",wrap:!0,className:"mt-2",children:u?.matchers&&Object.keys(u?.matchers).map((T,U)=>i.jsx(be,{pillKey:e?.matchers[T]?.name,pillKeyLabel:e?.matchers[T]?.name,pillValue:e?.matchers[T]?.value,pillValueLabel:e?.matchers[T]?.value},U))})]}),i.jsxs(mt,{className:"mt-6",children:[i.jsx(z,{children:i.jsx(pt,{required:!0,label:"Silenced by",value:u.createdBy,disabled:!!n,onChange:T=>R({key:"createdBy",value:T.target.value}),errortext:h.createdBy&&yn(h.createdBy)})}),i.jsx(z,{children:i.jsx(us,{className:"h-20",label:"Description",value:u.comment,onChange:T=>R({key:"comment",value:T.target.value}),errortext:h.comment&&yn(h.comment),required:!0})}),i.jsx(z,{children:i.jsx(Je,{required:!0,label:"Duration",value:u.duration,onChange:T=>R({key:"duration",value:T}),children:E?.map(T=>i.jsx(ve,{label:T.label,value:String(T.value)},T.value))})})]})]})]})]})},Zl=t=>{switch(t){case K.SILENCE_ACTIVE:return"info";default:return"default"}},zl=({alert:t})=>{const e={...x.DATETIME_SHORT},{getSilencesForAlert:s}=me(),n=s(t),r=a=>x.fromISO(a).toLocaleString(e);return i.jsx(i.Fragment,{children:n.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("h2",{className:"text-xl font-bold mb-2 mt-8",children:"Silences"}),i.jsxs(Ke,{columns:6,minContentColumns:[5],children:[i.jsxs(_,{children:[i.jsx(A,{children:"Status"}),i.jsx(A,{children:"Silence start"}),i.jsx(A,{children:"Silence end"}),i.jsx(A,{children:"Created by"}),i.jsx(A,{children:"Comment"}),i.jsx(A,{children:"Action"})]}),n.map(a=>i.jsxs(_,{children:[i.jsx(C,{children:i.jsx("div",{children:i.jsx(ui,{variant:Zl(a?.status?.state),children:a.status?.state})})}),i.jsx(C,{children:r(a.startsAt)}),i.jsx(C,{children:r(a.endsAt)}),i.jsx(C,{children:a.createdBy}),i.jsx(C,{className:"break-all",children:a.comment}),i.jsx(C,{children:a?.status?.state===K.SILENCE_ACTIVE?i.jsx(Hr,{silence:a,fingerprint:t.fingerprint}):i.jsx(qr,{silence:a,fingerprint:t.fingerprint})})]},a.id))]})]})})},Hl=({alert:t})=>{const{getAlertByFingerprint:e}=ds(),{setShowDetailsFor:s}=hs(),{setSilences:n}=me(),{addMessage:r}=Te(),{error:a,data:o,isLoading:l}=Xe("silences");return w.useEffect(()=>{o&&n({items:o?.silences})},[o]),a&&r({variant:"error",text:Oe(a)}),i.jsxs(Be,{py:!0,px:!1,children:[l?i.jsxs(D,{gap:"2",children:[i.jsx("span",{children:"Loading"}),i.jsx(Se,{variant:"primary"})]}):i.jsx(zl,{alert:t}),t.status.inhibitedBy.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("h2",{className:"text-xl font-bold mb-2 mt-8",children:"Inhibited by"}),i.jsxs(Ke,{columns:2,children:[i.jsxs(_,{children:[i.jsx(A,{children:"Alert"}),i.jsx(A,{})]}),t.status.inhibitedBy.map(c=>i.jsxs(_,{children:[i.jsxs(C,{children:[i.jsx("div",{children:e(c)?.annotations?.summary}),i.jsx(Ct,{description:e(c)?.annotations?.description})]}),i.jsx(C,{children:i.jsx(Re,{size:"small",onClick:()=>s(c),icon:"exitToApp",children:"Go to details"})})]},c))]})]})]})},ql=()=>{const t=En(),{setShowDetailsFor:e}=hs(),{getAlertByFingerprint:s}=ds(),[n,r]=w.useState(void 0),a=kn(),o=()=>{e(null)},{isLoading:l}=Xe("alerts");return w.useEffect(()=>{a?.length>0&&r(s(t))},[a,t]),i.jsxs(di,{heading:i.jsxs(D,{gap:"2",children:[i.jsx(Fn,{severity:n?.labels?.severity}),i.jsx("span",{children:n?.annotations?.summary||"Not found"})]}),opened:!!t,onClose:o,size:"large",children:[i.jsxs(hi,{children:[i.jsx(On,{className:"pb-6 absolute"}),i.jsxs(fi,{children:[i.jsxs(mi,{children:[i.jsx(js,{children:"Details"}),i.jsx(js,{children:"Raw Data"})]}),i.jsx(Ns,{children:i.jsx(Be,{px:!1,py:!0,children:n?i.jsxs(i.Fragment,{children:[i.jsxs(Ke,{columns:2,children:[i.jsxs(_,{children:[i.jsx(A,{children:"Status"}),i.jsx(C,{children:i.jsx(Zr,{alert:n})})]}),i.jsxs(_,{children:[i.jsx(A,{children:"Firing Since"}),i.jsx(C,{children:i.jsx(Lr,{startTimestamp:n?.startsAt})})]}),i.jsxs(_,{children:[i.jsx(A,{children:"Service"}),i.jsx(C,{children:n?.labels?.service})]}),i.jsxs(_,{children:[i.jsx(A,{children:"Region"}),i.jsx(C,{children:i.jsx(zr,{region:n?.labels?.region,cluster:n?.labels?.cluster})})]}),i.jsxs(_,{children:[i.jsx(A,{children:"Description"}),i.jsx(C,{children:i.jsx(Ct,{description:n?.annotations?.description})})]}),i.jsxs(_,{children:[i.jsx(A,{children:"Links"}),i.jsx(C,{children:i.jsx(Wr,{alert:n})})]}),i.jsxs(_,{children:[i.jsx(A,{children:"Labels"}),i.jsx(C,{children:i.jsx(_r,{alert:n,showAll:!0})})]})]}),i.jsx(Hl,{alert:n})]}):l?i.jsxs(D,{gap:"2",children:[i.jsx("span",{children:"Loading"}),i.jsx(Se,{variant:"primary"})]}):"Not found - the alert is probably not firing at the moment"})}),i.jsx(Ns,{children:i.jsx(Be,{px:!1,py:!0,children:i.jsx(pi,{children:n&&i.jsx(yi,{data:n,expanded:!0})})})})]})]}),i.jsx(gi,{children:n&&i.jsx(Ur,{alert:n,variant:"primary"})})]})},xn=({timestamp:t})=>{let e;t.includes("T")?e=x.fromISO(t):e=x.fromSQL(t);const s=e.toFormat("yyyy-LL-dd HH:mm Z");return i.jsx("div",{children:s})},Bl=t=>t.length>40?t.substring(0,40)+"...":t,Yl=({silence:t},e)=>i.jsxs(_,{children:[i.jsxs(C,{className:"whitespace-nowrap",children:[i.jsx(xn,{timestamp:t?.startsAt}),i.jsx(xn,{timestamp:t?.endsAt})]}),i.jsxs(C,{className:"overflow-hidden",children:[i.jsx("div",{ref:e,children:t?.comment}),i.jsxs("div",{className:"text-theme-light",children:["Silence ",t.id," created by ",t?.createdBy]}),i.jsx(Be,{className:"py-2 px-0",children:i.jsx(D,{gap:"2",alignment:"start",wrap:!0,children:t?.matchers?.map((s,n)=>i.jsx(be,{pillKey:s.name,pillValue:Bl(s.value)},n))})})]}),i.jsx(C,{className:"overflow-hidden",children:i.jsx("p",{children:t?.status?.state})}),i.jsx(C,{className:"overflow-hidden",children:t?.status?.state===K.SILENCE_ACTIVE||t?.status?.state===K.SILENCE_PENDING?i.jsx(Hr,{silence:t}):i.jsx(qr,{silence:t})})]}),Gl=w.forwardRef(Yl),Br=()=>i.jsxs("p",{children:["Firefox detected. Please ensure that you have activated ",i.jsx("b",{children:"allow_client_cert"})," to enable the retrieval of alerts and silences from the API.",i.jsxs("ul",{children:[i.jsx("li",{children:"1. Go to about:config (via address bar)"}),i.jsxs("li",{children:["2. Change ",i.jsx("b",{children:"network.cors_preflight.allow_client_cert"})," to ",i.jsx("b",{children:"true"})]}),i.jsx("li",{children:"3. Reload Greenhouse"})]})]}),Ql=`
bg-theme-background-lvl-1
py-2
px-4
my-px
`,Jl=()=>{const t=Qe(),[e,s]=w.useState(t),n=xi(),r=vi(),{setSilences:a,setSilencesStatus:o,setSilencesRegEx:l}=me(),{addMessage:c,resetMessages:u}=Te(),{data:d,isLoading:h,error:f}=Xe("silences");f&&(u(),f instanceof ms&&c({variant:"warning",text:i.jsx(Br,{})}),c({variant:"error",text:Oe(f)})),w.useEffect(()=>{d&&a({items:d.silences})},[d]),w.useEffect(()=>{let y=t.filter(O=>O?.status?.state===n);try{r&&(y=y.filter(O=>JSON.stringify(O).match(new RegExp(r,"i"))))}catch(O){console.warn("search term is not a valid regex. "+O),y=y.filter(R=>JSON.stringify(R).toLowerCase().includes(r.toLowerCase))}s(y)},[n,r,t]);const m=y=>{const O=setTimeout(()=>{l(y.target.value)},500);return()=>clearTimeout(O)},{scrollListItems:p,iterator:E}=jn(e,{loadingObject:i.jsx(_,{children:i.jsx(C,{colSpan:3,children:i.jsxs(D,{gap:"3",alignment:"center",direction:"horizontal",children:["Loading...",i.jsx(Se,{})]})})}),refFunction:y=>i.jsx(_,{children:i.jsx(C,{colSpan:3,className:"border-b-0 py-0",children:i.jsx("span",{ref:y})})})});return i.jsx(i.Fragment,{children:h?i.jsxs(D,{gap:"2",children:[i.jsx("span",{children:"Loading"}),i.jsx(Se,{variant:"primary"})]}):i.jsxs(i.Fragment,{children:[i.jsxs(D,{direction:"horizontal",className:`${Ql}`,children:[i.jsxs(Je,{className:"w-3/12",label:"Status",value:n,onChange:y=>{o(y)},children:[i.jsx(ve,{value:K.SILENCE_ACTIVE}),i.jsx(ve,{value:K.SILENCE_PENDING}),i.jsx(ve,{value:K.SILENCE_EXPIRED})]}),i.jsx(Nn,{placeholder:"search term or regular expression",className:"ml-auto w-7/12",value:r||"",onChange:y=>{m(y)},onSearch:y=>{l(y)},onClear:()=>{l(null)}})]}),i.jsx(Ke,{columns:4,minContentColumns:[0,2,3],cellVerticalAlignment:"top",className:"silences ",children:i.jsxs(i.Fragment,{children:[i.jsxs(_,{children:[i.jsx(A,{children:"Time intervall"}),i.jsx(A,{children:"Details"}),i.jsx(A,{children:"State"}),i.jsx(A,{children:"Action"})]}),p?.length?E.map(y=>i.jsx(Gl,{silence:y},y.id)):i.jsx(_,{children:i.jsx(C,{colSpan:4,children:i.jsxs(D,{gap:"3",children:[i.jsx(oe,{icon:"info",color:"text-theme-info"}),i.jsx("div",{children:"We couldn't find any matching silences."})]})})})]})})]})})},Kl=t=>{let e="border-text-theme-default";switch(t){case"critical":e="border-theme-danger";break;case"warning":e="border-theme-warning";break;case"info":e="border-theme-info";break}return`
    border-l-2
    ${e}
    h-full
    pl-5
  `},Xl=({alert:t},e)=>{const{setShowDetailsFor:s}=hs(),n=w.useRef(null),r=a=>{a.target.parentNode!==n.current&&!a.target.classList.contains("interactive")&&!a.target.closest(".interactive")||(a.stopPropagation(),a.preventDefault(),s(t?.fingerprint))};return i.jsxs(_,{className:`cursor-pointer ${En()===t?.fingerprint?"active":""}`,ref:n,onClick:a=>r(a),children:[i.jsx(C,{className:"pl-0 interactive",children:i.jsx("div",{className:Kl(t.labels?.severity),children:i.jsx(Fn,{ref:e,severity:t.labels?.severity})})}),i.jsx(C,{className:"interactive",children:i.jsx(zr,{region:t.labels?.region,cluster:t.labels?.cluster})}),i.jsx(C,{children:t.labels?.service}),i.jsxs(C,{className:"cursor-default",children:[i.jsx("div",{className:"interactive text-theme-high cursor-pointer",children:t.annotations?.summary}),i.jsxs("div",{children:[i.jsx(Ct,{description:t.annotations?.description,subdued:!0}),i.jsx(Wr,{alert:t,className:"mb-4 mt-1"})]}),i.jsx(_r,{alert:t})]}),i.jsx(C,{className:"interactive",children:i.jsx(Lr,{startTimestamp:t.startsAt})}),i.jsx(C,{children:i.jsx(Zr,{alert:t})}),i.jsx(C,{children:i.jsx(Ur,{alert:t,size:"small"})})]})},ec=w.forwardRef(Xl),tc=()=>{const t=wi(),{scrollListItems:e,iterator:s}=jn(t,{loadingObject:i.jsx(_,{children:i.jsx(C,{colSpan:3,children:i.jsxs(D,{gap:"3",alignment:"center",direction:"horizontal",children:["Loading...",i.jsx(Se,{})]})})}),refFunction:n=>i.jsx(_,{children:i.jsx(C,{colSpan:3,className:"border-b-0 py-0",children:i.jsx("span",{ref:n})})})});return i.jsxs(Ke,{columns:7,minContentColumns:[0,2,5],cellVerticalAlignment:"top",className:"alerts",children:[i.jsxs(_,{children:[i.jsx(A,{children:i.jsx(oe,{icon:"monitorHeart"})}),i.jsx(A,{children:"Region"}),i.jsx(A,{children:"Service"}),i.jsx(A,{children:"Description"}),i.jsx(A,{children:"Firing Since"}),i.jsx(A,{children:"Status"}),i.jsx(A,{})]}),e?.length?s.map(n=>i.jsx(ec,{alert:n},n.fingerprint)):i.jsx(_,{className:"no-hover",children:i.jsx(C,{colSpan:7,children:i.jsxs(D,{gap:"3",children:[i.jsx(oe,{icon:"info",color:"text-theme-info"}),i.jsx("div",{children:"We couldn't find anything. It's possible that the matching alerts are not active at the moment, or the chosen filters could be overly limiting."})]})})})]})},sc=`
  bg-theme-background-lvl-1
  py-1.5
  px-4
  my-px
  text-theme-light
`,nc=({totalCounts:t,isUpdating:e,updatedAt:s})=>i.jsxs(D,{className:`status-bar ${sc}`,alignment:"center",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-theme-default pr-2",children:`${t.total} alerts`}),i.jsx("span",{children:`(${t.critical||0} critical, ${t.warning||0} warning, ${t.info||0} info)`})]}),i.jsxs(D,{alignment:"center",className:"ml-auto",children:[e&&i.jsx(Se,{size:"small",className:"mr-2"}),s&&`updated ${x.fromMillis(s).toLocaleString({...x.TIME_24_WITH_SHORT_OFFSET})}`]})]}),rc=()=>{const[t,e]=w.useState(""),[s,n]=w.useState(""),{addActiveFilter:r,loadFilterLabelValues:a,clearFilters:o,setSearchTerm:l}=Ge(),c=Sn(),u=bi(),d=St(),h=Si(),f=y=>{e(y),u[y]?.values||a(y)},m=y=>{n(y),t.trim()!==""&&y.trim()!==""&&r(t,y),setTimeout(()=>{n("")},0)},p=y=>{const O=setTimeout(()=>{l(y.target.value)},500);return()=>clearTimeout(O)};return i.jsxs(D,{alignment:"center",gap:"8",children:[i.jsxs(Ti,{children:[i.jsx(Je,{name:"filter",className:"filter-label-select w-64 mb-0",label:"Filter",value:t,onChange:y=>f(y),children:c?.map(y=>i.jsx(ve,{value:y,label:ki(y)},y))}),i.jsx(Ei,{value:s,name:"filterValue",onChange:y=>m(y),disabled:!u[t],loading:u[t]?.isLoading,className:"filter-value-select w-96 bg-theme-background-lvl-0",children:u[t]?.values?.filter(y=>!d[t]?.includes(y)).slice(0,100).map(y=>i.jsx(Oi,{value:y},y))})]}),E(),i.jsx(Nn,{placeholder:"search term or regular expression",className:"w-96 ml-auto",value:h||"",onSearch:y=>l(y),onClear:()=>l(""),onChange:y=>p(y)})]});function E(){return d&&Object.keys(d).length>0&&i.jsx(Re,{label:"Clear all",onClick:()=>o(),variant:"subdued"})}},ic=()=>{const t=St(),e=ji(),{removeActiveFilter:s,addActiveFilter:n,addPausedFilter:r,removePausedFilter:a}=Ge(),o=(u,d)=>{r(u,d)},l=(u,d)=>{s(u,d),a(u,d)},c=(u,d)=>{n(u,d),a(u,d)};return i.jsx(D,{gap:"2",wrap:!0,children:Object.entries(t).map(([u,d])=>d?.map(h=>e[u]?.includes(h)?i.jsx(be,{className:"bg-theme-background-lvl-4 opacity-70",pillKey:u,pillValue:h,closeable:!0,onClose:()=>l(u,h),onClick:()=>c(u,h)},`${u}:${h}`):i.jsx(be,{pillKey:u,pillValue:h,closeable:!0,onClose:()=>l(u,h),onClick:()=>o(u,h)},`${u}:${h}`)))})},ac=`
  bg-theme-background-lvl-1
  py-2
  px-4
  my-px
`,oc=()=>i.jsxs(D,{direction:"vertical",gap:"4",className:`filters ${ac}`,children:[i.jsx(rc,{}),i.jsx(ic,{})]}),lc=t=>{let n=t,r=!1;return n.comment.value.length<3&&(r=!0,n={...n,comment:{...n.comment,error:"Please enter at least 3 characters"}}),(!n?.createdBy?.value||n?.createdBy?.value.length<1)&&(r=!0,n={...n,createdBy:{...n.createdBy,error:"Created by cannot be empty"}}),new Date(n.date.start)>=new Date(n.date.end)&&(r=!0,n={...n,date:{...n.date,error:"The start date need to be before the end date"}}),Object.keys(n.editable_labels).map(a=>{cc(n.editable_labels[a].value)||(r=!0,n={...n,editable_labels:{...n.editable_labels,[a]:{...n.editable_labels[a],error:`Value for ${a} is not a valid regular expression`}}}),n.editable_labels[a]?.value||(r=!0,n={...n,editable_labels:{...n.editable_labels,[a]:{...n.editable_labels[a],error:`Value for ${a} is empty`}}})}),r?n:null},cc=t=>{try{return!!new RegExp(t)}catch(e){return console.error(e),!1}},vn={fixed_labels:{},editable_labels:{},comment:{value:"",error:null},createdBy:{value:"",error:null},date:{start:null,end:null,error:null}},uc=()=>{const t=cs(),{addMessage:e}=Te(),s=Ni(),[n,r]=w.useState(null),a=Ae(),o=Qe(),{setSilences:l}=me(),[c,u]=w.useState(null),d=w.useMemo(()=>{const S=new Date;return`${S.getFullYear()}-${S.getMonth()+1}-${S.getDate()}`},[]),[h,f]=w.useState(vn),[m,p]=w.useState(!0),{mutate:E}=Ft("createSilences",{onMutate:S=>{a.cancelQueries({queryKey:["silences"]});const k={...S.silence,status:{state:K.SILENCE_ACTIVE}},v=[...o,k];l({items:v})},onSuccess:S=>{p(!0),e({variant:"success",text:`A silence object with id ${S?.silenceID} was created successfully. Please note that it may take up
          to 5 minutes for the alert to show up as silenced.`})},onError:S=>{r(Oe(S))},onSettled:()=>{a.invalidateQueries({queryKey:["silences"]})}}),y=It(()=>{r(null);const S=lc(h);if(S){f(S),r("Please fix the errors in the form");return}const k={startsAt:h.date.start,endsAt:h.date.end,comment:h.comment.value,createdBy:h.createdBy.value,matchers:[]};for(const[v,j]of Object.entries(h.editable_labels)){const V={name:v,value:j.value,isRegex:!0};k.matchers.push(V)}for(const[v,j]of Object.entries(h.fixed_labels)){const V={name:v,value:j,isRegex:!0};k.matchers.push(V)}E({silence:k})},200),O=S=>{const k=s.find(j=>j.id===S),v={...vn,fixed_labels:k?.fixed_labels||{},createdBy:{value:t,error:null},editable_labels:k?.editable_labels?.reduce((j,V)=>({...j,[V]:{value:"",error:null}}),{})};f(v),u(k)},R=({key:S,value:k})=>{f({...h,[S]:{value:k,error:null}})},T=S=>{const k=S.target.id;f(Lt(v=>{v.editable_labels[k].value=S.target.value,v.editable_labels[k].error=null}))},U=(S,k)=>{f(Lt(v=>{v.date.start=k,v.date.error=null}))},X=(S,k)=>{f(Lt(v=>{v.date.end=k,v.date.error=null}))};return i.jsx(i.Fragment,{children:dc(s,p,m,c,y,n,O,h,R,t,d,U,X,T)})};function dc(t,e,s,n,r,a,o,l,c,u,d,h,f,m){return t&&t?.length>0&&i.jsxs(i.Fragment,{children:[i.jsx(Re,{onClick:p=>{p.stopPropagation(),e(!1)},children:"Schedule Silence"}),!s&&i.jsxs(Tt,{title:"Schedule new silence",size:"large",open:!0,confirmButtonLabel:!n||n?.invalid?void 0:"Save",onConfirm:!n||n?.invalid?void 0:r,onCancel:()=>e(!0),children:[a&&i.jsx(ft,{text:a,variant:"danger"}),i.jsxs(mt,{className:"mt-6",children:[n&&n?.invalid&&i.jsx(z,{children:i.jsx(ft,{text:`This silence template is invalid. ${n.invalid}`,variant:"error"})}),i.jsx(z,{children:i.jsx(Je,{required:!0,label:"Silence Template",value:n?.id||"Select",onValueChange:p=>{o(p)},children:t?.map(p=>i.jsx(ve,{id:p.id,label:p.title,value:p.id},p.id))})}),n&&!n?.invalid&&i.jsx(z,{children:i.jsx(Tn,{children:n?.description})})]}),n&&!n?.invalid&&i.jsxs(mt,{children:[i.jsxs(Mt,{children:[i.jsx(z,{children:i.jsx(pt,{required:!0,label:"Silenced by",value:l?.createdBy?.value,errortext:l?.createdBy?.error,onChange:p=>c({key:"createdBy",value:p.target.value}),disabled:!!u})}),i.jsx(z,{children:i.jsxs("div",{className:"grid gap-2 grid-cols-2",children:[i.jsx(Cs,{value:l?.date?.start||d,dateFormat:"Y-m-d H:i:S",label:"Select a start date",enableTime:!0,time_24hr:!0,required:!0,errortext:l?.date?.error,onChange:h,enableSeconds:!0}),i.jsx(Cs,{value:l?.date?.end||d,dateFormat:"Y-m-d H:i:S",label:"Select a end date",enableTime:!0,time_24hr:!0,required:!0,errortext:l?.date?.error,onChange:f,enableSeconds:!0})]})}),i.jsx(z,{children:i.jsx(us,{label:"Comment",value:l.comment.value,errortext:l.comment.error,onChange:p=>c({key:"comment",value:p.target.value}),required:!0})})]}),l?.editable_labels&&Object.keys(l?.editable_labels).length>0&&i.jsxs(Mt,{children:[i.jsx(z,{children:i.jsx("p",{children:"Editable Labels are labels that are editable. You can use regular expressions."})}),i.jsx(z,{children:i.jsx("div",{className:"grid gap-2 grid-cols-2",children:Object.keys(l.editable_labels).map((p,E)=>i.jsx(pt,{required:!0,label:p,id:p,value:l?.editable_labels[p].value,errortext:l?.editable_labels[p]?.error,onChange:m},E))})})]}),Object.keys(l?.fixed_labels).length>0&&i.jsxs(Mt,{children:[i.jsx(z,{children:i.jsx("p",{children:"Fixed Labels are labels that are not editable."})}),i.jsx(z,{children:i.jsx(D,{gap:"2",alignment:"start",wrap:!0,className:"mt-2",children:Object.keys(l.fixed_labels).map((p,E)=>i.jsx(be,{pillKey:p,pillKeyLabel:p,pillValue:l?.fixed_labels[p],pillValueLabel:l?.fixed_labels[p]},E))})})]})]})]})," "]})}const hc=()=>{const{setActivePredefinedFilter:t}=Ge(),e=Ci(),s=Ii(),[n,r]=w.useState(s),a=l=>{r(l),t(l)};return i.jsxs(D,{children:[o(),i.jsx("div",{className:"ml-auto",children:i.jsx(uc,{})})]});function o(){return e&&n&&i.jsx(Fi,{activeItem:n,onActiveItemChange:a,children:e?.map(l=>i.jsx(Di,{value:l.name,label:l.displayName},l.name))})}},fc=()=>{const t=Mi(),e=Li(),{setAlertsData:s}=ds(),{addMessage:n,resetMessages:r}=Te(),{data:a,isLoading:o,error:l}=Xe("alerts");return l&&(r(),l instanceof ms&&n({variant:"warning",text:i.jsx(Br,{})}),n({variant:"error",text:Oe(l)})),w.useEffect(()=>{a&&s({items:a.alerts,counts:a.counts})},[a]),i.jsx(i.Fragment,{children:o?i.jsxs(D,{gap:"2",children:[i.jsx("span",{children:"Loading"}),i.jsx(Se,{variant:"primary"})]}):i.jsxs(i.Fragment,{children:[i.jsx(hc,{}),i.jsx(oc,{}),i.jsx(nc,{totalCounts:t,isUpdating:o,updatedAt:e}),i.jsx(tc,{})]})})},mc=()=>{const t=Ai();return i.jsxs(Be,{px:!0,py:!0,className:"h-full",children:[i.jsx(On,{className:"pb-6"}),t==="alerts"&&i.jsxs(i.Fragment,{children:[i.jsx(Ri,{children:i.jsx(ql,{})}),i.jsx(fa,{}),i.jsx(fc,{})]}),t==="silences"&&i.jsx(Jl,{})]})},xc=function(){return i.jsx(i.Fragment,{children:i.jsx(mc,{})})};export{xc as component};
