import{j as $}from"./jsx-runtime-Cf8x2fCZ.js";import{r as c,e as N}from"./index-DN3cvKNT.js";import{u as ct,a as pt,b as ft,c as mt,f as ht,o as bt,e as vt,j as gt,s as xt}from"./floating-ui.react-8LoX_53u.js";import{L as yt}from"./Label.component-BnXfZbGU.js";import{F as Ie}from"./FormHint.component-DQa8ln7A.js";import{I as ve}from"./Icon.component-Ds0c6a0m.js";import{S as St}from"./Spinner.component-BgFgW-bc.js";import{u as Et}from"./PortalProvider.component-DwfadwbX.js";import{r as se}from"./index-FzTzjy2T.js";import{P as He,o as S,a0 as Ct,L as fe,Q as It,y as xe,n as le,S as Pe,T as Ot,D as me,a as wt,b as jt,d as Ue,p as Tt,I as je,U as Mt,$ as Ke,c as Ge,W as Te,w as $t,e as Rt,x as _t,R as Pt,k as Vt,f as Ft,g as At,i as ge,m as zt,h as Bt,j as Lt,l as Dt,q as Ve,r as kt,s as Nt,t as de,v as qt,K as Wt,M as Ht,z as Ut,A as Fe,E as L,C as W,B as Kt,O as Ae,_ as Gt,a1 as Qt}from"./portal-C4cIMEKJ.js";import{l as ze,f as Yt,a as Jt,T as Xt,u as Zt,j as en}from"./frozen-B6UQOwLY.js";import{F as tn}from"./use-tree-walker-CCpvFVFt.js";function ue(e,s,t){let n=t.initialDeps??[],o;function a(){var l,i,r,u;let d;t.key&&((l=t.debug)!=null&&l.call(t))&&(d=Date.now());const f=e();if(!(f.length!==n.length||f.some((C,y)=>n[y]!==C)))return o;n=f;let p;if(t.key&&((i=t.debug)!=null&&i.call(t))&&(p=Date.now()),o=s(...f),t.key&&((r=t.debug)!=null&&r.call(t))){const C=Math.round((Date.now()-d)*100)/100,y=Math.round((Date.now()-p)*100)/100,v=y/16,V=(R,w)=>{for(R=String(R);R.length<w;)R=" "+R;return R};console.info(`%c⏱ ${V(y,5)} /${V(C,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*v,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(u=t==null?void 0:t.onChange)==null||u.call(t,o),o}return a.updateDeps=l=>{n=l},a}function Oe(e,s){if(e===void 0)throw new Error("Unexpected undefined");return e}const nn=(e,s)=>Math.abs(e-s)<=1,on=(e,s,t)=>{let n;return function(...o){e.clearTimeout(n),n=e.setTimeout(()=>s.apply(this,o),t)}},Be=e=>{const{offsetWidth:s,offsetHeight:t}=e;return{width:s,height:t}},sn=e=>e,ln=e=>{const s=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let o=s;o<=t;o++)n.push(o);return n},an=(e,s)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;const o=l=>{const{width:i,height:r}=l;s({width:Math.round(i),height:Math.round(r)})};if(o(Be(t)),!n.ResizeObserver)return()=>{};const a=new n.ResizeObserver(l=>{const i=()=>{const r=l[0];if(r!=null&&r.borderBoxSize){const u=r.borderBoxSize[0];if(u){o({width:u.inlineSize,height:u.blockSize});return}}o(Be(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()});return a.observe(t,{box:"border-box"}),()=>{a.unobserve(t)}},Le={passive:!0},De=typeof window>"u"?!0:"onscrollend"in window,rn=(e,s)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;let o=0;const a=e.options.useScrollendEvent&&De?()=>{}:on(n,()=>{s(o,!1)},e.options.isScrollingResetDelay),l=d=>()=>{const{horizontal:f,isRtl:E}=e.options;o=f?t.scrollLeft*(E&&-1||1):t.scrollTop,a(),s(o,d)},i=l(!0),r=l(!1);r(),t.addEventListener("scroll",i,Le);const u=e.options.useScrollendEvent&&De;return u&&t.addEventListener("scrollend",r,Le),()=>{t.removeEventListener("scroll",i),u&&t.removeEventListener("scrollend",r)}},un=(e,s,t)=>{if(s!=null&&s.borderBoxSize){const n=s.borderBoxSize[0];if(n)return Math.round(n[t.options.horizontal?"inlineSize":"blockSize"])}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},dn=(e,{adjustments:s=0,behavior:t},n)=>{var o,a;const l=e+s;(a=(o=n.scrollElement)==null?void 0:o.scrollTo)==null||a.call(o,{[n.options.horizontal?"left":"top"]:l,behavior:t})};class cn{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const n=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(o=>{o.forEach(a=>{const l=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var o;(o=n())==null||o.disconnect(),t=null},observe:o=>{var a;return(a=n())==null?void 0:a.observe(o,{box:"border-box"})},unobserve:o=>{var a;return(a=n())==null?void 0:a.unobserve(o)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([n,o])=>{typeof o>"u"&&delete t[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:sn,rangeExtractor:ln,onChange:()=>{},measureElement:un,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var n,o;(o=(n=this.options).onChange)==null||o.call(n,this,t)},this.maybeNotify=ue(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(o=>{this.observer.observe(o)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(o,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<o?"forward":"backward":null,this.scrollOffset=o,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,n)=>{const o=new Map,a=new Map;for(let l=n-1;l>=0;l--){const i=t[l];if(o.has(i.lane))continue;const r=a.get(i.lane);if(r==null||i.end>r.end?a.set(i.lane,i):i.end<r.end&&o.set(i.lane,!0),o.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((l,i)=>l.end===i.end?l.index-i.index:l.end-i.end)[0]:void 0},this.getMeasurementOptions=ue(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,n,o,a,l)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:n,scrollMargin:o,getItemKey:a,enabled:l}),{key:!1}),this.getMeasurements=ue(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:n,scrollMargin:o,getItemKey:a,enabled:l},i)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const r=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,r);for(let d=r;d<t;d++){const f=a(d),E=this.options.lanes===1?u[d-1]:this.getFurthestMeasurement(u,d),p=E?E.end+this.options.gap:n+o,C=i.get(f),y=typeof C=="number"?C:this.options.estimateSize(d),v=p+y,V=E?E.lane:d%this.options.lanes;u[d]={index:d,start:p,size:y,end:v,key:f,lane:V}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=ue(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,n,o,a)=>this.range=t.length>0&&n>0?pn({measurements:t,outerSize:n,scrollOffset:o,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=ue(()=>{let t=null,n=null;const o=this.calculateRange();return o&&(t=o.startIndex,n=o.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,n]},(t,n,o,a,l)=>a===null||l===null?[]:t({startIndex:a,endIndex:l,overscan:n,count:o}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const n=this.options.indexAttribute,o=t.getAttribute(n);return o?parseInt(o,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(t,n)=>{const o=this.indexFromElement(t),a=this.measurementsCache[o];if(!a)return;const l=a.key,i=this.elementsCache.get(l);i!==t&&(i&&this.observer.unobserve(i),this.observer.observe(t),this.elementsCache.set(l,t)),t.isConnected&&this.resizeItem(o,this.options.measureElement(t,n,this))},this.resizeItem=(t,n)=>{const o=this.measurementsCache[t];if(!o)return;const a=this.itemSizeCache.get(o.key)??o.size,l=n-a;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(o,l,this):o.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(o.index),this.itemSizeCache=new Map(this.itemSizeCache.set(o.key,n)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((n,o)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(o))});return}this._measureElement(t,void 0)},this.getVirtualItems=ue(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,n)=>{const o=[];for(let a=0,l=t.length;a<l;a++){const i=t[a],r=n[i];o.push(r)}return o},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const n=this.getMeasurements();if(n.length!==0)return Oe(n[Qe(0,n.length-1,o=>Oe(n[o]).start,t)])},this.getOffsetForAlignment=(t,n,o=0)=>{const a=this.getSize(),l=this.getScrollOffset();n==="auto"&&(n=t>=l+a?"end":"start"),n==="center"?t+=(o-a)/2:n==="end"&&(t-=a);const i=this.getTotalSize()-a;return Math.max(Math.min(i,t),0)},this.getOffsetForIndex=(t,n="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const o=this.measurementsCache[t];if(!o)return;const a=this.getSize(),l=this.getScrollOffset();if(n==="auto")if(o.end>=l+a-this.options.scrollPaddingEnd)n="end";else if(o.start<=l+this.options.scrollPaddingStart)n="start";else return[l,n];const i=n==="end"?o.end+this.options.scrollPaddingEnd:o.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(i,n,o.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:n="start",behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,n),{adjustments:void 0,behavior:o})},this.scrollToIndex=(t,{align:n="auto",behavior:o}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const a=this.getOffsetForIndex(t,n);if(!a)return;const[l,i]=a;this._scrollToOffset(l,{adjustments:void 0,behavior:o}),o!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[u]=Oe(this.getOffsetForIndex(t,i)),d=this.getScrollOffset();nn(u,d)||this.scrollToIndex(t,{align:i,behavior:o})}else this.scrollToIndex(t,{align:i,behavior:o})}))},this.scrollBy=(t,{behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var t;const n=this.getMeasurements();let o;if(n.length===0)o=this.options.paddingStart;else if(this.options.lanes===1)o=((t=n[n.length-1])==null?void 0:t.end)??0;else{const a=Array(this.options.lanes).fill(null);let l=n.length-1;for(;l>=0&&a.some(i=>i===null);){const i=n[l];a[i.lane]===null&&(a[i.lane]=i.end),l--}o=Math.max(...a.filter(i=>i!==null))}return Math.max(o-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:n,behavior:o})=>{this.options.scrollToFn(t,{behavior:o,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(s)}}const Qe=(e,s,t,n)=>{for(;e<=s;){const o=(e+s)/2|0,a=t(o);if(a<n)e=o+1;else if(a>n)s=o-1;else return o}return e>0?e-1:0};function pn({measurements:e,outerSize:s,scrollOffset:t,lanes:n}){const o=e.length-1,a=r=>e[r].start;if(e.length<=n)return{startIndex:0,endIndex:o};let l=Qe(0,o,a,t),i=l;if(n===1)for(;i<o&&e[i].end<t+s;)i++;else if(n>1){const r=Array(n).fill(0);for(;i<o&&r.some(d=>d<t+s);){const d=e[i];r[d.lane]=d.end,i++}const u=Array(n).fill(t+s);for(;l>=0&&u.some(d=>d>=t);){const d=e[l];u[d.lane]=d.start,l--}l=Math.max(0,l-l%n),i=Math.min(o,i+(n-1-i%n))}return{startIndex:l,endIndex:i}}const ke=typeof document<"u"?c.useLayoutEffect:c.useEffect;function fn(e){const s=c.useReducer(()=>({}),{})[1],t={...e,onChange:(o,a)=>{var l;a?se.flushSync(s):s(),(l=e.onChange)==null||l.call(e,o,a)}},[n]=c.useState(()=>new cn(t));return n.setOptions(t),ke(()=>n._didMount(),[]),ke(()=>n._willUpdate()),n}function mn(e){return fn({observeElementRect:an,observeElementOffset:rn,scrollToFn:dn,...e})}function hn(e,s,t,n){let o=He(t);c.useEffect(()=>{e=e??window;function a(l){o.current(l)}return e.addEventListener(s,a,n),()=>e.removeEventListener(s,a,n)},[e,s,n])}function Ye(e){let s=c.useRef({value:"",selectionStart:null,selectionEnd:null});return hn(e,"blur",t=>{let n=t.target;n instanceof HTMLInputElement&&(s.current={value:n.value,selectionStart:n.selectionStart,selectionEnd:n.selectionEnd})}),S(()=>{if(document.activeElement!==e&&e instanceof HTMLInputElement&&e.isConnected){if(e.focus({preventScroll:!0}),e.value!==s.current.value)e.setSelectionRange(e.value.length,e.value.length);else{let{selectionStart:t,selectionEnd:n}=s.current;t!==null&&n!==null&&e.setSelectionRange(t,n)}s.current={value:"",selectionStart:null,selectionEnd:null}}})}function Ne(e,s){let t=c.useRef([]),n=S(e);c.useEffect(()=>{let o=[...t.current];for(let[a,l]of s.entries())if(t.current[a]!==l){let i=n(s,o);return t.current=s,i}},[n,...s])}function bn(e){function s(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",s))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",s),s())}let ae=[];bn(()=>{function e(s){if(!(s.target instanceof HTMLElement)||s.target===document.body||ae[0]===s.target)return;let t=s.target;t=t.closest(Ct),ae.unshift(t??s.target),ae=ae.filter(n=>n!=null&&n.isConnected),ae.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});var Me=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(Me||{}),vn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(vn||{}),gn=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(gn||{}),xn=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(xn||{}),yn=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.SetTyping=3]="SetTyping",e[e.RegisterOption=4]="RegisterOption",e[e.UnregisterOption=5]="UnregisterOption",e[e.SetActivationTrigger=6]="SetActivationTrigger",e[e.UpdateVirtualConfiguration=7]="UpdateVirtualConfiguration",e[e.SetInputElement=8]="SetInputElement",e[e.SetButtonElement=9]="SetButtonElement",e[e.SetOptionsElement=10]="SetOptionsElement",e))(yn||{});function we(e,s=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,n=s(e.options.slice()),o=n.length>0&&n[0].dataRef.current.order!==null?n.sort((l,i)=>l.dataRef.current.order-i.dataRef.current.order):Gt(n,l=>l.dataRef.current.domRef.current),a=t?o.indexOf(t):null;return a===-1&&(a=null),{options:o,activeOptionIndex:a}}let Sn={1(e){var s;return(s=e.dataRef.current)!=null&&s.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(e){var s,t;if((s=e.dataRef.current)!=null&&s.disabled||e.comboboxState===0)return e;if((t=e.dataRef.current)!=null&&t.value){let n=e.dataRef.current.calculateIndex(e.dataRef.current.value);if(n!==-1)return{...e,activeOptionIndex:n,comboboxState:0,__demoMode:!1}}return{...e,comboboxState:0,__demoMode:!1}},3(e,s){return e.isTyping===s.isTyping?e:{...e,isTyping:s.isTyping}},2(e,s){var t,n,o,a;if((t=e.dataRef.current)!=null&&t.disabled||e.optionsElement&&!((n=e.dataRef.current)!=null&&n.optionsPropsRef.current.static)&&e.comboboxState===1)return e;if(e.virtual){let{options:u,disabled:d}=e.virtual,f=s.focus===L.Specific?s.idx:Ae(s,{resolveItems:()=>u,resolveActiveIndex:()=>{var p,C;return(C=(p=e.activeOptionIndex)!=null?p:u.findIndex(y=>!d(y)))!=null?C:null},resolveDisabled:d,resolveId(){throw new Error("Function not implemented.")}}),E=(o=s.trigger)!=null?o:2;return e.activeOptionIndex===f&&e.activationTrigger===E?e:{...e,activeOptionIndex:f,activationTrigger:E,isTyping:!1,__demoMode:!1}}let l=we(e);if(l.activeOptionIndex===null){let u=l.options.findIndex(d=>!d.dataRef.current.disabled);u!==-1&&(l.activeOptionIndex=u)}let i=s.focus===L.Specific?s.idx:Ae(s,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled}),r=(a=s.trigger)!=null?a:2;return e.activeOptionIndex===i&&e.activationTrigger===r?e:{...e,...l,isTyping:!1,activeOptionIndex:i,activationTrigger:r,__demoMode:!1}},4:(e,s)=>{var t,n,o;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:[...e.options,s.payload]};let a=s.payload,l=we(e,r=>(r.push(a),r));e.activeOptionIndex===null&&(n=e.dataRef.current)!=null&&n.isSelected(s.payload.dataRef.current.value)&&(l.activeOptionIndex=l.options.indexOf(a));let i={...e,...l,activationTrigger:2};return(o=e.dataRef.current)!=null&&o.__demoMode&&e.dataRef.current.value===void 0&&(i.activeOptionIndex=0),i},5:(e,s)=>{var t;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:e.options.filter(o=>o.id!==s.id)};let n=we(e,o=>{let a=o.findIndex(l=>l.id===s.id);return a!==-1&&o.splice(a,1),o});return{...e,...n,activationTrigger:2}},6:(e,s)=>e.activationTrigger===s.trigger?e:{...e,activationTrigger:s.trigger},7:(e,s)=>{var t,n;if(e.virtual===null)return{...e,virtual:{options:s.options,disabled:(t=s.disabled)!=null?t:()=>!1}};if(e.virtual.options===s.options&&e.virtual.disabled===s.disabled)return e;let o=e.activeOptionIndex;if(e.activeOptionIndex!==null){let a=s.options.indexOf(e.virtual.options[e.activeOptionIndex]);a!==-1?o=a:o=null}return{...e,activeOptionIndex:o,virtual:{options:s.options,disabled:(n=s.disabled)!=null?n:()=>!1}}},8:(e,s)=>e.inputElement===s.element?e:{...e,inputElement:s.element},9:(e,s)=>e.buttonElement===s.element?e:{...e,buttonElement:s.element},10:(e,s)=>e.optionsElement===s.element?e:{...e,optionsElement:s.element}},$e=c.createContext(null);$e.displayName="ComboboxActionsContext";function he(e){let s=c.useContext($e);if(s===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,he),t}return s}let Je=c.createContext(null);function En(e){let s=ce("VirtualProvider"),{options:t}=s.virtual,[n,o]=c.useMemo(()=>{let u=s.optionsElement;if(!u)return[0,0];let d=window.getComputedStyle(u);return[parseFloat(d.paddingBlockStart||d.paddingTop),parseFloat(d.paddingBlockEnd||d.paddingBottom)]},[s.optionsElement]),a=mn({enabled:t.length!==0,scrollPaddingStart:n,scrollPaddingEnd:o,count:t.length,estimateSize(){return 40},getScrollElement(){return s.optionsElement},overscan:12}),[l,i]=c.useState(0);le(()=>{i(u=>u+1)},[t]);let r=a.getVirtualItems();return r.length===0?null:N.createElement(Je.Provider,{value:a},N.createElement("div",{style:{position:"relative",width:"100%",height:`${a.getTotalSize()}px`},ref:u=>{u&&s.activationTrigger!==0&&s.activeOptionIndex!==null&&t.length>s.activeOptionIndex&&a.scrollToIndex(s.activeOptionIndex)}},r.map(u=>{var d;return N.createElement(c.Fragment,{key:u.key},N.cloneElement((d=e.children)==null?void 0:d.call(e,{...e.slot,option:t[u.index]}),{key:`${l}-${u.key}`,"data-index":u.index,"aria-setsize":t.length,"aria-posinset":u.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${u.start}px)`,overflowAnchor:"none"}}))})))}let pe=c.createContext(null);pe.displayName="ComboboxDataContext";function ce(e){let s=c.useContext(pe);if(s===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ce),t}return s}function Cn(e,s){return de(s.type,Sn,e,s)}let In=c.Fragment;function On(e,s){var t,n;let o=Nt(),{value:a,defaultValue:l,onChange:i,form:r,name:u,by:d,disabled:f=o||!1,onClose:E,__demoMode:p=!1,multiple:C=!1,immediate:y=!1,virtual:v=null,nullable:V,...R}=e,w=Jt(l),[_=C?[]:void 0,F]=Xt(a,i,w),[j,x]=c.useReducer(Cn,{dataRef:c.createRef(),comboboxState:p?0:1,isTyping:!1,options:[],virtual:v?{options:v.options,disabled:(t=v.disabled)!=null?t:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:p}),A=c.useRef(!1),Y=c.useRef({static:!1,hold:!1}),q=Zt(d),z=S(h=>v?d===null?v.options.indexOf(h):v.options.findIndex(O=>q(O,h)):j.options.findIndex(O=>q(O.dataRef.current.value,h))),J=c.useCallback(h=>de(b.mode,{1:()=>_.some(O=>q(O,h)),0:()=>q(_,h)}),[_]),K=S(h=>j.activeOptionIndex===z(h)),b=c.useMemo(()=>({...j,immediate:y,optionsPropsRef:Y,value:_,defaultValue:w,disabled:f,mode:C?1:0,virtual:v?j.virtual:null,get activeOptionIndex(){if(A.current&&j.activeOptionIndex===null&&(v?v.options.length>0:j.options.length>0)){if(v){let O=v.options.findIndex(U=>{var re,be;return!((be=(re=v.disabled)==null?void 0:re.call(v,U))!=null&&be)});if(O!==-1)return O}let h=j.options.findIndex(O=>!O.dataRef.current.disabled);if(h!==-1)return h}return j.activeOptionIndex},calculateIndex:z,compare:q,isSelected:J,isActive:K}),[_,w,f,C,p,j,v]);le(()=>{var h;v&&x({type:7,options:v.options,disabled:(h=v.disabled)!=null?h:null})},[v,v==null?void 0:v.options,v==null?void 0:v.disabled]),le(()=>{j.dataRef.current=b},[b]);let I=b.comboboxState===0;qt(I,[b.buttonElement,b.inputElement,b.optionsElement],()=>P.closeCombobox());let G=c.useMemo(()=>{var h,O,U;return{open:b.comboboxState===0,disabled:f,activeIndex:b.activeOptionIndex,activeOption:b.activeOptionIndex===null?null:b.virtual?b.virtual.options[(h=b.activeOptionIndex)!=null?h:0]:(U=(O=b.options[b.activeOptionIndex])==null?void 0:O.dataRef.current.value)!=null?U:null,value:_}},[b,f,_]),X=S(()=>{if(b.activeOptionIndex!==null){if(P.setIsTyping(!1),b.virtual)m(b.virtual.options[b.activeOptionIndex]);else{let{dataRef:h}=b.options[b.activeOptionIndex];m(h.current.value)}P.goToOption(L.Specific,b.activeOptionIndex)}}),Q=S(()=>{x({type:0}),A.current=!0}),ne=S(()=>{x({type:1}),A.current=!1,E==null||E()}),Z=S(h=>{x({type:3,isTyping:h})}),oe=S((h,O,U)=>(A.current=!1,h===L.Specific?x({type:2,focus:L.Specific,idx:O,trigger:U}):x({type:2,focus:h,trigger:U}))),T=S((h,O)=>(x({type:4,payload:{id:h,dataRef:O}}),()=>{b.isActive(O.current.value)&&(A.current=!0),x({type:5,id:h})})),m=S(h=>de(b.mode,{0(){return F==null?void 0:F(h)},1(){let O=b.value.slice(),U=O.findIndex(re=>q(re,h));return U===-1?O.push(h):O.splice(U,1),F==null?void 0:F(O)}})),D=S(h=>{x({type:6,trigger:h})}),B=S(h=>{x({type:8,element:h})}),H=S(h=>{x({type:9,element:h})}),M=S(h=>{x({type:10,element:h})}),P=c.useMemo(()=>({onChange:m,registerOption:T,goToOption:oe,setIsTyping:Z,closeCombobox:ne,openCombobox:Q,setActivationTrigger:D,selectActiveOption:X,setInputElement:B,setButtonElement:H,setOptionsElement:M}),[]),[ee,te]=Wt(),ye=s===null?{}:{ref:s},Se=c.useCallback(()=>{if(w!==void 0)return F==null?void 0:F(w)},[F,w]),Ee=me();return N.createElement(te,{value:ee,props:{htmlFor:(n=b.inputElement)==null?void 0:n.id},slot:{open:b.comboboxState===0,disabled:f}},N.createElement(Ht,null,N.createElement($e.Provider,{value:P},N.createElement(pe.Provider,{value:b},N.createElement(Ut,{value:de(b.comboboxState,{0:ge.Open,1:ge.Closed})},u!=null&&N.createElement(en,{disabled:f,data:_!=null?{[u]:_}:{},form:r,onReset:Se}),Ee({ourProps:ye,theirProps:R,slot:G,defaultTag:In,name:"Combobox"}))))))}let wn="input";function jn(e,s){var t,n,o,a,l;let i=ce("Combobox.Input"),r=he("Combobox.Input"),u=c.useId(),d=wt(),{id:f=d||`headlessui-combobox-input-${u}`,onChange:E,displayValue:p,disabled:C=i.disabled||!1,autoFocus:y=!1,type:v="text",...V}=e,R=c.useRef(null),w=xe(R,s,jt(),r.setInputElement),_=Ue(i.inputElement),F=Tt(),j=S(()=>{r.onChange(null),i.optionsElement&&(i.optionsElement.scrollTop=0),r.goToOption(L.Nothing)}),x=c.useMemo(()=>{var m;return typeof p=="function"&&i.value!==void 0?(m=p(i.value))!=null?m:"":typeof i.value=="string"?i.value:""},[i.value,p]);Ne(([m,D],[B,H])=>{if(i.isTyping)return;let M=R.current;M&&((H===0&&D===1||m!==B)&&(M.value=m),requestAnimationFrame(()=>{if(i.isTyping||!M||(_==null?void 0:_.activeElement)!==M)return;let{selectionStart:P,selectionEnd:ee}=M;Math.abs((ee??0)-(P??0))===0&&P===0&&M.setSelectionRange(M.value.length,M.value.length)}))},[x,i.comboboxState,_,i.isTyping]),Ne(([m],[D])=>{if(m===0&&D===1){if(i.isTyping)return;let B=R.current;if(!B)return;let H=B.value,{selectionStart:M,selectionEnd:P,selectionDirection:ee}=B;B.value="",B.value=H,ee!==null?B.setSelectionRange(M,P,ee):B.setSelectionRange(M,P)}},[i.comboboxState]);let A=c.useRef(!1),Y=S(()=>{A.current=!0}),q=S(()=>{F.nextFrame(()=>{A.current=!1})}),z=S(m=>{switch(r.setIsTyping(!0),m.key){case W.Enter:if(i.comboboxState!==0||A.current)return;if(m.preventDefault(),m.stopPropagation(),i.activeOptionIndex===null){r.closeCombobox();return}r.selectActiveOption(),i.mode===0&&r.closeCombobox();break;case W.ArrowDown:return m.preventDefault(),m.stopPropagation(),de(i.comboboxState,{0:()=>r.goToOption(L.Next),1:()=>r.openCombobox()});case W.ArrowUp:return m.preventDefault(),m.stopPropagation(),de(i.comboboxState,{0:()=>r.goToOption(L.Previous),1:()=>{se.flushSync(()=>r.openCombobox()),i.value||r.goToOption(L.Last)}});case W.Home:if(m.shiftKey)break;return m.preventDefault(),m.stopPropagation(),r.goToOption(L.First);case W.PageUp:return m.preventDefault(),m.stopPropagation(),r.goToOption(L.First);case W.End:if(m.shiftKey)break;return m.preventDefault(),m.stopPropagation(),r.goToOption(L.Last);case W.PageDown:return m.preventDefault(),m.stopPropagation(),r.goToOption(L.Last);case W.Escape:return i.comboboxState!==0?void 0:(m.preventDefault(),i.optionsElement&&!i.optionsPropsRef.current.static&&m.stopPropagation(),i.mode===0&&i.value===null&&j(),r.closeCombobox());case W.Tab:if(i.comboboxState!==0)return;i.mode===0&&i.activationTrigger!==1&&r.selectActiveOption(),r.closeCombobox();break}}),J=S(m=>{E==null||E(m),i.mode===0&&m.target.value===""&&j(),r.openCombobox()}),K=S(m=>{var D,B,H;let M=(D=m.relatedTarget)!=null?D:ae.find(P=>P!==m.currentTarget);if(!((B=i.optionsElement)!=null&&B.contains(M))&&!((H=i.buttonElement)!=null&&H.contains(M))&&i.comboboxState===0)return m.preventDefault(),i.mode===0&&i.value===null&&j(),r.closeCombobox()}),b=S(m=>{var D,B,H;let M=(D=m.relatedTarget)!=null?D:ae.find(P=>P!==m.currentTarget);(B=i.buttonElement)!=null&&B.contains(M)||(H=i.optionsElement)!=null&&H.contains(M)||i.disabled||i.immediate&&i.comboboxState!==0&&F.microTask(()=>{se.flushSync(()=>r.openCombobox()),r.setActivationTrigger(1)})}),I=je(),G=Mt(),{isFocused:X,focusProps:Q}=Ke({autoFocus:y}),{isHovered:ne,hoverProps:Z}=Ge({isDisabled:C}),oe=c.useMemo(()=>({open:i.comboboxState===0,disabled:C,hover:ne,focus:X,autofocus:y}),[i,ne,X,y,C]),T=Te({ref:w,id:f,role:"combobox",type:v,"aria-controls":(t=i.optionsElement)==null?void 0:t.id,"aria-expanded":i.comboboxState===0,"aria-activedescendant":i.activeOptionIndex===null?void 0:i.virtual?(n=i.options.find(m=>!m.dataRef.current.disabled&&i.compare(m.dataRef.current.value,i.virtual.options[i.activeOptionIndex])))==null?void 0:n.id:(o=i.options[i.activeOptionIndex])==null?void 0:o.id,"aria-labelledby":I,"aria-describedby":G,"aria-autocomplete":"list",defaultValue:(l=(a=e.defaultValue)!=null?a:i.defaultValue!==void 0?p==null?void 0:p(i.defaultValue):null)!=null?l:i.defaultValue,disabled:C||void 0,autoFocus:y,onCompositionStart:Y,onCompositionEnd:q,onKeyDown:z,onChange:J,onFocus:b,onBlur:K},Q,Z);return me()({ourProps:T,theirProps:V,slot:oe,defaultTag:wn,name:"Combobox.Input"})}let Tn="button";function Mn(e,s){var t;let n=ce("Combobox.Button"),o=he("Combobox.Button"),a=xe(s,o.setButtonElement),l=c.useId(),{id:i=`headlessui-combobox-button-${l}`,disabled:r=n.disabled||!1,autoFocus:u=!1,...d}=e,f=Ye(n.inputElement),E=S(x=>{switch(x.key){case W.Space:case W.Enter:x.preventDefault(),x.stopPropagation(),n.comboboxState===1&&se.flushSync(()=>o.openCombobox()),f();return;case W.ArrowDown:x.preventDefault(),x.stopPropagation(),n.comboboxState===1&&(se.flushSync(()=>o.openCombobox()),n.value||o.goToOption(L.First)),f();return;case W.ArrowUp:x.preventDefault(),x.stopPropagation(),n.comboboxState===1&&(se.flushSync(()=>o.openCombobox()),n.value||o.goToOption(L.Last)),f();return;case W.Escape:if(n.comboboxState!==0)return;x.preventDefault(),n.optionsElement&&!n.optionsPropsRef.current.static&&x.stopPropagation(),se.flushSync(()=>o.closeCombobox()),f();return;default:return}}),p=S(x=>{x.preventDefault(),!Kt(x.currentTarget)&&(x.button===Me.Left&&(n.comboboxState===0?o.closeCombobox():o.openCombobox()),f())}),C=je([i]),{isFocusVisible:y,focusProps:v}=Ke({autoFocus:u}),{isHovered:V,hoverProps:R}=Ge({isDisabled:r}),{pressed:w,pressProps:_}=$t({disabled:r}),F=c.useMemo(()=>({open:n.comboboxState===0,active:w||n.comboboxState===0,disabled:r,value:n.value,hover:V,focus:y}),[n,V,y,w,r]),j=Te({ref:a,id:i,type:Rt(e,n.buttonElement),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":(t=n.optionsElement)==null?void 0:t.id,"aria-expanded":n.comboboxState===0,"aria-labelledby":C,disabled:r||void 0,autoFocus:u,onMouseDown:p,onKeyDown:E},v,R,_);return me()({ourProps:j,theirProps:d,slot:F,defaultTag:Tn,name:"Combobox.Button"})}let $n="div",Rn=Fe.RenderStrategy|Fe.Static;function _n(e,s){var t,n,o;let a=c.useId(),{id:l=`headlessui-combobox-options-${a}`,hold:i=!1,anchor:r,portal:u=!1,modal:d=!0,transition:f=!1,...E}=e,p=ce("Combobox.Options"),C=he("Combobox.Options"),y=_t(r);y&&(u=!0);let[v,V]=Pt(y),[R,w]=c.useState(null),_=Vt(),F=xe(s,y?v:null,C.setOptionsElement,w),j=Ue(p.optionsElement),x=Ft(),[A,Y]=At(f,R,x!==null?(x&ge.Open)===ge.Open:p.comboboxState===0);zt(A,p.inputElement,C.closeCombobox);let q=p.__demoMode?!1:d&&p.comboboxState===0;Bt(q,j);let z=p.__demoMode?!1:d&&p.comboboxState===0;Lt(z,{allowed:c.useCallback(()=>[p.inputElement,p.buttonElement,p.optionsElement],[p.inputElement,p.buttonElement,p.optionsElement])}),le(()=>{var T;p.optionsPropsRef.current.static=(T=e.static)!=null?T:!1},[p.optionsPropsRef,e.static]),le(()=>{p.optionsPropsRef.current.hold=i},[p.optionsPropsRef,i]),tn(p.comboboxState===0,{container:p.optionsElement,accept(T){return T.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:T.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(T){T.setAttribute("role","none")}});let J=je([(t=p.buttonElement)==null?void 0:t.id]),K=c.useMemo(()=>({open:p.comboboxState===0,option:void 0}),[p.comboboxState]),b=S(()=>{C.setActivationTrigger(0)}),I=S(T=>{T.preventDefault(),C.setActivationTrigger(0)}),G=Te(y?_():{},{"aria-labelledby":J,role:"listbox","aria-multiselectable":p.mode===1?!0:void 0,id:l,ref:F,style:{...E.style,...V,"--input-width":Ve(p.inputElement,!0).width,"--button-width":Ve(p.buttonElement,!0).width},onWheel:p.activationTrigger===0?void 0:b,onMouseDown:I,...Dt(Y)}),X=A&&p.comboboxState===1,Q=ze(X,(n=p.virtual)==null?void 0:n.options),ne=ze(X,p.value),Z=S(T=>p.compare(ne,T));if(p.virtual){if(Q===void 0)throw new Error("Missing `options` in virtual mode");Object.assign(E,{children:N.createElement(pe.Provider,{value:Q!==p.virtual.options?{...p,virtual:{...p.virtual,options:Q}}:p},N.createElement(En,{slot:K},E.children))})}let oe=me();return N.createElement(kt,{enabled:u?e.static||A:!1},N.createElement(pe.Provider,{value:p.mode===1?p:{...p,isSelected:Z}},oe({ourProps:G,theirProps:{...E,children:N.createElement(Yt,{freeze:X},typeof E.children=="function"?(o=E.children)==null?void 0:o.call(E,K):E.children)},slot:K,defaultTag:$n,features:Rn,visible:A,name:"Combobox.Options"})))}let Pn="div";function Vn(e,s){var t,n,o,a;let l=ce("Combobox.Option"),i=he("Combobox.Option"),r=c.useId(),{id:u=`headlessui-combobox-option-${r}`,value:d,disabled:f=(o=(n=(t=l.virtual)==null?void 0:t.disabled)==null?void 0:n.call(t,d))!=null?o:!1,order:E=null,...p}=e,C=Ye(l.inputElement),y=l.virtual?l.activeOptionIndex===l.calculateIndex(d):l.activeOptionIndex===null?!1:((a=l.options[l.activeOptionIndex])==null?void 0:a.id)===u,v=l.isSelected(d),V=c.useRef(null),R=He({disabled:f,value:d,domRef:V,order:E}),w=c.useContext(Je),_=xe(s,V,w?w.measureElement:null),F=S(()=>{i.setIsTyping(!1),i.onChange(d)});le(()=>i.registerOption(u,R),[R,u]);let j=c.useRef(!(l.virtual||l.__demoMode));le(()=>{if(!l.virtual&&!l.__demoMode)return Pe().requestAnimationFrame(()=>{j.current=!0})},[l.virtual,l.__demoMode]),le(()=>{if(j.current&&l.comboboxState===0&&y&&l.activationTrigger!==0)return Pe().requestAnimationFrame(()=>{var I,G;(G=(I=V.current)==null?void 0:I.scrollIntoView)==null||G.call(I,{block:"nearest"})})},[V,y,l.comboboxState,l.activationTrigger,l.activeOptionIndex]);let x=S(I=>{I.preventDefault(),I.button===Me.Left&&(f||(F(),Qt()||requestAnimationFrame(()=>C()),l.mode===0&&i.closeCombobox()))}),A=S(()=>{if(f)return i.goToOption(L.Nothing);let I=l.calculateIndex(d);i.goToOption(L.Specific,I)}),Y=Ot(),q=S(I=>Y.update(I)),z=S(I=>{if(!Y.wasMoved(I)||f||y)return;let G=l.calculateIndex(d);i.goToOption(L.Specific,G,0)}),J=S(I=>{Y.wasMoved(I)&&(f||y&&(l.optionsPropsRef.current.hold||i.goToOption(L.Nothing)))}),K=c.useMemo(()=>({active:y,focus:y,selected:v,disabled:f}),[y,v,f]),b={id:u,ref:_,role:"option",tabIndex:f===!0?void 0:-1,"aria-disabled":f===!0?!0:void 0,"aria-selected":v,disabled:void 0,onMouseDown:x,onFocus:A,onPointerEnter:q,onMouseEnter:q,onPointerMove:z,onMouseMove:z,onPointerLeave:J,onMouseLeave:J};return me()({ourProps:b,theirProps:p,slot:K,defaultTag:Pn,name:"Combobox.Option"})}let Fn=fe(On),Xe=fe(Mn),Ze=fe(jn),An=It,et=fe(_n),tt=fe(Vn),zn=Object.assign(Fn,{Input:Ze,Button:Xe,Label:An,Options:et,Option:tt});const Bn=`
  jn-relative
`,Ln=`
  jn-pointer-events-none
  jn-top-2
  jn-left-[0.9375rem]
`,Dn=`
  jn-rounded-3px
  jn-bg-theme-textinput
  jn-text-theme-textinput
  jn-border
  jn-text-base
  jn-leading-4
  jn-w-full
  jn-px-4
  jn-h-textinput
  jn-text-left
  jn-overflow-hidden
  jn-text-ellipsis
  jn-whitespace-nowrap
  focus:jn-outline-none
  focus:jn-ring-2
  focus:jn-ring-theme-focus
`,kn=`
  jn-pt-[1.125rem] 
  jn-pb-1
`,Nn=`
  jn-py-4
`,qn=`
  jn-cursor-not-allowed
  jn-pointer-events-none
  jn-opacity-50
`,Wn=`
  jn-border-theme-textinput-default
`,Hn=`
  jn-border-theme-success
`,Un=`
  jn-border-theme-error
`,Kn=`
  jn-absolute
  jn-top-0
  jn-right-0
  jn-h-textinput
  jn-w-6
  jn-h-4
  jn-border-l-0
  jn-border-y-[1px]
  jn-border-r-[1px]
  jn-rounded-tr
  jn-rounded-br
  jn-appearance-none
  jn-bg-theme-textinput
  jn-text-theme-textinput
`,Gn=`
  jn-border-theme-textinput-default
`,Qn=`
  jn-border-theme-error
`,Yn=`
  jn-border-theme-success
`,Jn=`
  jn-cursor-not-allowed
  jn-pointer-events-none
  jn-bg-transparent
  jn-opacity-50
`,Xn=`
  jn-rounded
  jn-bg-theme-background-lvl-1
  jn-w-full
  jn-overflow-y-auto
`,Zn=`
  jn-absolute
  jn-top-[.4rem]
  jn-right-6
`,eo=`
  jn-absolute
  jn-top-1/2
  jn-left-1/2
  jn-translate-y-[-50%]
  jn-translate-x-[-0.75rem]
`,nt=c.createContext(void 0),qe=({ariaLabel:e,children:s,className:t="",defaultValue:n="",disabled:o=!1,error:a=!1,errortext:l="",helptext:i="",id:r="",invalid:u=!1,loading:d=!1,label:f,name:E="",onBlur:p,onChange:C,onFocus:y,onInputChange:v,placeholder:V="Select…",required:R=!1,successtext:w="",truncateOptions:_=!1,valid:F=!1,value:j="",valueLabel:x,width:A="full",wrapperClassName:Y="",...q})=>{const z=g=>!(typeof g=="string"&&g.trim().length===0),J=r||"juno-combobox-"+c.useId(),K="juno-combobox-helptext-"+c.useId(),[b,I]=c.useState(!1),[G,X]=c.useState(new Map),[Q,ne]=c.useState(""),[Z,oe]=c.useState(j),[T,m]=c.useState(!1),[D,B]=c.useState(!1),[H,M]=c.useState(!1),[P,ee]=c.useState(!1),[te,ye]=c.useState(!1),{x:Se,y:Ee,strategy:h,refs:O,context:U}=ct({open:b,onOpenChange:I,placement:"bottom-start",middleware:[bt(4),vt(),gt(),xt({apply({availableWidth:g,availableHeight:k,elements:ie,rects:Ce}){Object.assign(ie.floating.style,{maxWidth:`${g}px`,maxHeight:`${k}px`,minWidth:`${Ce.reference.width}px`,overflowY:"auto"})}})],whileElementsMounted:ht}),{getReferenceProps:re,getFloatingProps:be}=pt([ft(U),mt(U)]),ot=(g,k,ie)=>{X(Ce=>new Map([...Array.from(Ce),[g??ie,{val:g,label:k,children:ie}]]))},Re=c.useMemo(()=>u||!!(l&&z(l)),[u,l]),_e=c.useMemo(()=>F||!!(w&&z(w)),[F,w]);c.useEffect(()=>{oe(j)},[j]),c.useEffect(()=>{B(a)},[a]),c.useEffect(()=>{m(d)},[d]),c.useEffect(()=>{ee(Re)},[Re]),c.useEffect(()=>{ye(_e)},[_e]);const it=g=>{oe(g),g&&I(!1),C&&C(g)},st=g=>{var k;ne((k=g==null?void 0:g.target)==null?void 0:k.value),v&&v(g)},lt=g=>{M(!0),I(!0),y&&y(g)},at=g=>{M(!1),I(!1),p&&p(g)},rt=Et(),ut=Q===""?N.Children.toArray(s):N.Children.toArray(s).filter(g=>{var k;if(N.isValidElement(g)){const ie=((k=g.props.children)==null?void 0:k.toString())||g.props.label||g.props.value;return ie==null?void 0:ie.toLowerCase().includes(Q.toLowerCase())}else return!1}),dt=g=>{const k=G.get(g);return typeof(k==null?void 0:k.children)=="string"?k.children:typeof(k==null?void 0:k.label)=="string"?k.label:typeof x=="string"?x:typeof g=="string"||typeof g=="number"?g.toString():""};return $.jsx(nt.Provider,{value:{selectedValue:Z,truncateOptions:_,addOptionValueAndLabel:ot},children:$.jsxs("div",{className:`
          juno-combobox-wrapper
          jn-relative
          ${A=="auto"?"jn-inline-block":"jn-block"}
          ${A=="auto"?"jn-w-auto":"jn-w-full"}
          ${Y}
        `,children:[$.jsxs(zn,{defaultValue:n,disabled:o||T||D,name:E,onChange:it,value:Z||n,...q,children:[$.jsxs("div",{ref:O.setReference,className:`juno-combobox-input-wrapper ${Bn} ${o?"jn-cursor-not-allowed":""}`,children:[f&&z(f)&&!T&&!D?$.jsx(yt,{text:f,disabled:o,required:R,htmlFor:J,className:`${Ln}`,floating:!0,minimized:!!(V||H||Q&&z(Q)||Z&&z(Z)),...re()}):"",$.jsx(Ze,{autoComplete:"off","aria-label":e||f,"aria-describedby":i?K:"",id:J,onBlur:at,onChange:st,onFocus:lt,placeholder:!T&&!D?V:"",displayValue:g=>dt(g),className:`
                juno-combobox-input 
                ${Dn} 
                ${f&&z(f)?kn:Nn}
                ${o?qn:""}
                ${P?"juno-combobox-invalid "+Un:""} 
                ${te?"juno-combobox-valid "+Hn:""}  
                ${te||P?"":Wn} 
                ${T?"juno-combobox-loading jn-cursor-not-allowed":""}
                ${D?"juno-combobox-error jn-cursor-not-allowed":""}
                ${t}
              `}),T||D?$.jsx("span",{className:`${eo}`,children:T?$.jsx(St,{className:"jn-cursor-not-allowed"}):$.jsx(ve,{icon:"errorOutline",color:"jn-text-theme-error",className:"jn-cursor-not-allowed"})}):te||P?$.jsx("span",{className:`
                  juno-combobox-icon-container 
                  ${Zn} 
                  ${o?"jn-opacity-50":""}
                `,children:$.jsx(ve,{icon:te?"checkCircle":"dangerous",color:te?"jn-text-theme-success":"jn-text-theme-error"})}):"",!D&&!T?$.jsx(Xe,{className:`
                  juno-combobox-toggle 
                  ${Kn}
                  ${o?Jn:""}
                  ${P?"juno-combobox-toggle-invalid "+Qn:""} 
                  ${te?"juno-combobox-toggle-valid "+Yn:""}  
                  ${te||P?"":Gn} 
                `,children:({open:g})=>(c.useEffect(()=>{g!==b&&I(g)},[g]),$.jsx(ve,{icon:g?"expandLess":"expandMore"}))}):null]}),b&&se.createPortal($.jsx("div",{ref:O.setFloating,className:`juno-combobox-options ${Xn}`,style:{position:h,top:Ee??0,left:Se??0},...be(),children:$.jsx(et,{static:!0,className:"jn-w-full",children:ut})}),rt??document.body)]}),l&&z(l)?$.jsx(Ie,{text:l,variant:"error"}):"",w&&z(w)?$.jsx(Ie,{text:w,variant:"success"}):"",i&&z(i)?$.jsx(Ie,{text:i,id:K}):""]})})};try{qe.displayName="ComboBox",qe.__docgenInfo={description:"",displayName:"ComboBox",props:{ariaLabel:{defaultValue:null,description:"The aria-label of the ComboBox. Defaults to the label if label was passed.",name:"ariaLabel",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"The children to Render. Use `ComboBox.Option` elements.",name:"children",required:!1,type:{name:"ReactNode"}},className:{defaultValue:{value:""},description:"A custom className. Will be passed to the internal text input element of the ComboBox",name:"className",required:!1,type:{name:"string"}},defaultValue:{defaultValue:{value:""},description:"Pass a defaultValue to use as an uncontrolled Component that will handle its state internally",name:"defaultValue",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Whether the ComboBox is disabled",name:"disabled",required:!1,type:{name:"boolean"}},error:{defaultValue:{value:"false"},description:"Whether the ComboBox has an error. Note this refers to an internal error like failing to load options etc., to indicate failed validation use `invalid` instead.",name:"error",required:!1,type:{name:"boolean"}},errortext:{defaultValue:{value:""},description:"An errortext to display when the ComboBox failed validation or an internal error occurred.",name:"errortext",required:!1,type:{name:"ReactNode"}},helptext:{defaultValue:{value:""},description:"A helptext to render to explain meaning and significance of the ComboBox",name:"helptext",required:!1,type:{name:"ReactNode"}},id:{defaultValue:{value:""},description:"The Id of the ComboBox. Will be assigned to the text input part of the ComboBox. If not passed, an id will be auto-generated.",name:"id",required:!1,type:{name:"string"}},invalid:{defaultValue:{value:"false"},description:"Whether the ComboBox failed validation",name:"invalid",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"The label of the ComboBox",name:"label",required:!1,type:{name:"string"}},loading:{defaultValue:{value:"false"},description:"Whether the ComboBox is busy loading options",name:"loading",required:!1,type:{name:"boolean"}},name:{defaultValue:{value:""},description:"The name attribute of the ComboBox when used as part of a form",name:"name",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"A handler to execute when the ComboBox looses focus",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onChange:{defaultValue:null,description:"A handler to execute when the ComboBox' selected value changes",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},onFocus:{defaultValue:null,description:"A handler to execute when the ComboBox input receives focus",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onInputChange:{defaultValue:null,description:"Handler to execute when the ComboBox text input value changes",name:"onInputChange",required:!1,type:{name:"ChangeEventHandler<HTMLInputElement>"}},placeholder:{defaultValue:{value:"Select…"},description:"A placeholder to render in the text input",name:"placeholder",required:!1,type:{name:"string"}},required:{defaultValue:{value:"false"},description:"Whether the ComboBox is required",name:"required",required:!1,type:{name:"boolean"}},successtext:{defaultValue:{value:""},description:"A text to display in case the ComboBox was successfully validated. Will set the ComboBox to `valid` when passed.",name:"successtext",required:!1,type:{name:"ReactNode"}},truncateOptions:{defaultValue:{value:"false"},description:"Whether the option labels should be truncated in case they are longer/wider than the available space in an option or not. Default is FALSE.",name:"truncateOptions",required:!1,type:{name:"boolean"}},valid:{defaultValue:{value:"false"},description:"Whether the ComboBox was successfully validated",name:"valid",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"The selected value of the ComboBox in Controlled Mode.",name:"value",required:!1,type:{name:"string"}},valueLabel:{defaultValue:null,description:"The label of the passed value or defaultValue. If you want to use controlled mode or pass as defaultValue in uncontrolled mode and additionally use labels for human-readable SelectOptions, you need to also pass the matching label for the passed value/defaultValue so that the Select component can render itself properly",name:"valueLabel",required:!1,type:{name:"string"}},width:{defaultValue:{value:"full"},description:"The width of the text input. Either 'full' (default) or 'auto'.",name:"width",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"full"'}]}},wrapperClassName:{defaultValue:{value:""},description:"Pass a custom classname to the wrapping <div> element. This can be useful if you must add styling to the outermost wrapping element of this component, e.g. for positioning.",name:"wrapperClassName",required:!1,type:{name:"string"}}}}}catch{}const to=`
  jn-flex
  jn-pt-[0.6875rem]
  jn-pb-[0.5rem]
  jn-pr-[0.875rem]
  jn-select-none
  data-[headlessui-state~=active]:jn-outline-none
  data-[headlessui-state~=active]:jn-ring-2
  data-[headlessui-state~=active]:jn-ring-inset
  data-[headlessui-state~=active]:jn-ring-theme-focus
  data-[headlessui-state~=active]:jn-bg-theme-background-lvl-3
`,no=`
  jn-text-theme-default
  jn-pl-[2.375rem]
`,oo=`
  jn-text-theme-accent
  jn-pl-3.5
`,io=`
  jn-inline-block
  jn-mr-1.5
`,so=`
  jn-opacity-50
  jn-cursor-not-allowed
`,lo=`
  jn-block
  jn-h-6
  jn-overflow-hidden
  jn-text-ellipsis
  jn-whitespace-nowrap
`,We=({children:e,disabled:s=!1,value:t="",label:n="",className:o="",...a})=>{const l=c.useContext(nt),{selectedValue:i,truncateOptions:r,addOptionValueAndLabel:u}=l||{};c.useEffect(()=>{u&&u(t,n,e)},[t,n,e]);const d=t||e;return $.jsx(tt,{value:d,disabled:s,as:c.Fragment,children:$.jsxs("li",{className:`
          juno-combobox-option 
          ${to}
          ${i===t?oo:no}
          ${s?"jn-cursor-not-allowed":""}
          ${o}
        `,...a,children:[i===d?$.jsx(ve,{icon:"check",size:"18",className:`${io}`}):"",$.jsx("span",{className:`
            ${s?so:""}
            ${r?lo:""}
          `,children:e||n||t})]})})};try{We.displayName="ComboBoxOption",We.__docgenInfo={description:"",displayName:"ComboBoxOption",props:{children:{defaultValue:null,description:"Content to render inside the ComboBoxOption. Is specified should be string.",name:"children",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"If option is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"Option value.",name:"value",required:!1,type:{name:"string"}},label:{defaultValue:{value:""},description:"Option label.",name:"label",required:!1,type:{name:"string"}},className:{defaultValue:{value:""},description:"CSS class for the option.",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{qe as C,We as a};
