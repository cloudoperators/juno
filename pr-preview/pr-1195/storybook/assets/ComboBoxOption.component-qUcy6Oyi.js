import{r as d,b as le,e as D,j as $}from"./iframe-BlXP6VeT.js";import{u as Ot,f as Et,a as wt,d as It,h as jt,o as $t,s as Mt,g as Tt,k as Rt}from"./floating-ui.react-ByCD3M_X.js";import{L as Pt}from"./Label.component-16d5x7UU.js";import{F as we}from"./FormHint.component-CSdlyVIS.js";import{I as Se}from"./Icon.component-_F_jHgmT.js";import{S as Vt}from"./Spinner.component-Bbrrj8bD.js";import{u as Ft}from"./PortalProvider.component-BamsnrK-.js";import{ac as Xe,o as F,ae as Fe,z as Ye,af as _t,ag as At,T as kt,d as N,u as pe,x as Je,b as zt,p as Dt,c as me,f as _e,e as Bt,G as Lt,g as Nt,Y as ve,a7 as qt,S as q,y as Ee,n as de,h as Wt,i as ge,K as xe,a8 as Ut,I as Ht,A as Kt,a9 as je,aa as Gt,$ as Qe,O as Ze,B as $e,L as Xt,J as he,a as Yt,M as Jt,P as Qt,Q as Zt,j as en,R as tn,m as nn,q as Ae,r as on,N as sn,t as an,v as ln,w as rn,C as un,D as ke,E as dn,ab as cn,W as pn,V as fn,X as hn,Z as mn,s as Ce,U as ze,a0 as G,a6 as bn,ah as vn,ai as gn}from"./element-movement-BUOf04XX.js";import{u as De,s as xn,l as yn,b as Sn,a as Cn,j as On}from"./frozen-D-gAofXt.js";import{F as En}from"./use-tree-walker-DPGz0JgS.js";function ce(t,s,e){let o=e.initialDeps??[],n;function i(){var a,l,c,r;let u;e.key&&((a=e.debug)!=null&&a.call(e))&&(u=Date.now());const b=t();if(!(b.length!==o.length||b.some((p,g)=>o[g]!==p)))return n;o=b;let h;if(e.key&&((l=e.debug)!=null&&l.call(e))&&(h=Date.now()),n=s(...b),e.key&&((c=e.debug)!=null&&c.call(e))){const p=Math.round((Date.now()-u)*100)/100,g=Math.round((Date.now()-h)*100)/100,O=g/16,M=(_,I)=>{for(_=String(_);_.length<I;)_=" "+_;return _};console.info(`%c⏱ ${M(g,5)} /${M(p,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*O,120))}deg 100% 31%);`,e?.key)}return(r=e?.onChange)==null||r.call(e,n),n}return i.updateDeps=a=>{o=a},i}function Be(t,s){if(t===void 0)throw new Error("Unexpected undefined");return t}const wn=(t,s)=>Math.abs(t-s)<1.01,In=(t,s,e)=>{let o;return function(...n){t.clearTimeout(o),o=t.setTimeout(()=>s.apply(this,n),e)}},Le=t=>{const{offsetWidth:s,offsetHeight:e}=t;return{width:s,height:e}},jn=t=>t,$n=t=>{const s=Math.max(t.startIndex-t.overscan,0),e=Math.min(t.endIndex+t.overscan,t.count-1),o=[];for(let n=s;n<=e;n++)o.push(n);return o},Mn=(t,s)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;const n=a=>{const{width:l,height:c}=a;s({width:Math.round(l),height:Math.round(c)})};if(n(Le(e)),!o.ResizeObserver)return()=>{};const i=new o.ResizeObserver(a=>{const l=()=>{const c=a[0];if(c?.borderBoxSize){const r=c.borderBoxSize[0];if(r){n({width:r.inlineSize,height:r.blockSize});return}}n(Le(e))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(e,{box:"border-box"}),()=>{i.unobserve(e)}},Ne={passive:!0},qe=typeof window>"u"?!0:"onscrollend"in window,Tn=(t,s)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;let n=0;const i=t.options.useScrollendEvent&&qe?()=>{}:In(o,()=>{s(n,!1)},t.options.isScrollingResetDelay),a=u=>()=>{const{horizontal:b,isRtl:m}=t.options;n=b?e.scrollLeft*(m&&-1||1):e.scrollTop,i(),s(n,u)},l=a(!0),c=a(!1);c(),e.addEventListener("scroll",l,Ne);const r=t.options.useScrollendEvent&&qe;return r&&e.addEventListener("scrollend",c,Ne),()=>{e.removeEventListener("scroll",l),r&&e.removeEventListener("scrollend",c)}},Rn=(t,s,e)=>{if(s?.borderBoxSize){const o=s.borderBoxSize[0];if(o)return Math.round(o[e.options.horizontal?"inlineSize":"blockSize"])}return t[e.options.horizontal?"offsetWidth":"offsetHeight"]},Pn=(t,{adjustments:s=0,behavior:e},o)=>{var n,i;const a=t+s;(i=(n=o.scrollElement)==null?void 0:n.scrollTo)==null||i.call(n,{[o.options.horizontal?"left":"top"]:a,behavior:e})};class Vn{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const o=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(n=>{n.forEach(i=>{const a=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var n;(n=o())==null||n.disconnect(),e=null},observe:n=>{var i;return(i=o())==null?void 0:i.observe(n,{box:"border-box"})},unobserve:n=>{var i;return(i=o())==null?void 0:i.unobserve(n)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([o,n])=>{typeof n>"u"&&delete e[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:jn,rangeExtractor:$n,onChange:()=>{},measureElement:Rn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var o,n;(n=(o=this.options).onChange)==null||n.call(o,this,e)},this.maybeNotify=ce(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const o=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==o){if(this.cleanup(),!o){this.maybeNotify();return}this.scrollElement=o,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(n=>{this.observer.observe(n)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(n,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,o)=>{const n=new Map,i=new Map;for(let a=o-1;a>=0;a--){const l=e[a];if(n.has(l.lane))continue;const c=i.get(l.lane);if(c==null||l.end>c.end?i.set(l.lane,l):l.end<c.end&&n.set(l.lane,!0),n.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((a,l)=>a.end===l.end?a.index-l.index:a.end-l.end)[0]:void 0},this.getMeasurementOptions=ce(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,o,n,i,a)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:o,scrollMargin:n,getItemKey:i,enabled:a}),{key:!1}),this.getMeasurements=ce(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:o,scrollMargin:n,getItemKey:i,enabled:a},l)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(u=>{this.itemSizeCache.set(u.key,u.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const r=this.measurementsCache.slice(0,c);for(let u=c;u<e;u++){const b=i(u),m=this.options.lanes===1?r[u-1]:this.getFurthestMeasurement(r,u),h=m?m.end+this.options.gap:o+n,p=l.get(b),g=typeof p=="number"?p:this.options.estimateSize(u),O=h+g,M=m?m.lane:u%this.options.lanes;r[u]={index:u,start:h,size:g,end:O,key:b,lane:M}}return this.measurementsCache=r,r},{key:!1,debug:()=>this.options.debug}),this.calculateRange=ce(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,o,n,i)=>this.range=e.length>0&&o>0?Fn({measurements:e,outerSize:o,scrollOffset:n,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=ce(()=>{let e=null,o=null;const n=this.calculateRange();return n&&(e=n.startIndex,o=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,o]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,o]},(e,o,n,i,a)=>i===null||a===null?[]:e({startIndex:i,endIndex:a,overscan:o,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const o=this.options.indexAttribute,n=e.getAttribute(o);return n?parseInt(n,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(e,o)=>{const n=this.indexFromElement(e),i=this.measurementsCache[n];if(!i)return;const a=i.key,l=this.elementsCache.get(a);l!==e&&(l&&this.observer.unobserve(l),this.observer.observe(e),this.elementsCache.set(a,e)),e.isConnected&&this.resizeItem(n,this.options.measureElement(e,o,this))},this.resizeItem=(e,o)=>{const n=this.measurementsCache[e];if(!n)return;const i=this.itemSizeCache.get(n.key)??n.size,a=o-i;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,a,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,o)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((o,n)=>{o.isConnected||(this.observer.unobserve(o),this.elementsCache.delete(n))});return}this._measureElement(e,void 0)},this.getVirtualItems=ce(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,o)=>{const n=[];for(let i=0,a=e.length;i<a;i++){const l=e[i],c=o[l];n.push(c)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const o=this.getMeasurements();if(o.length!==0)return Be(o[et(0,o.length-1,n=>Be(o[n]).start,e)])},this.getOffsetForAlignment=(e,o,n=0)=>{const i=this.getSize(),a=this.getScrollOffset();o==="auto"&&(o=e>=a+i?"end":"start"),o==="center"?e+=(n-i)/2:o==="end"&&(e-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,e),0)},this.getOffsetForIndex=(e,o="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const n=this.measurementsCache[e];if(!n)return;const i=this.getSize(),a=this.getScrollOffset();if(o==="auto")if(n.end>=a+i-this.options.scrollPaddingEnd)o="end";else if(n.start<=a+this.options.scrollPaddingStart)o="start";else return[a,o];const l=o==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,o,n.size),o]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:o="start",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,o),{adjustments:void 0,behavior:n})},this.scrollToIndex=(e,{align:o="auto",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e=Math.max(0,Math.min(e,this.options.count-1));let i=0;const a=10,l=r=>{if(!this.targetWindow)return;const u=this.getOffsetForIndex(e,r);if(!u){console.warn("Failed to get offset for index:",e);return}const[b,m]=u;this._scrollToOffset(b,{adjustments:void 0,behavior:n}),this.targetWindow.requestAnimationFrame(()=>{const h=this.getScrollOffset(),p=this.getOffsetForIndex(e,m);if(!p){console.warn("Failed to get offset for index:",e);return}wn(p[0],h)||c(m)})},c=r=>{this.targetWindow&&(i++,i<a?this.targetWindow.requestAnimationFrame(()=>l(r)):console.warn(`Failed to scroll to index ${e} after ${a} attempts.`))};l(o)},this.scrollBy=(e,{behavior:o}={})=>{o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var e;const o=this.getMeasurements();let n;if(o.length===0)n=this.options.paddingStart;else if(this.options.lanes===1)n=((e=o[o.length-1])==null?void 0:e.end)??0;else{const i=Array(this.options.lanes).fill(null);let a=o.length-1;for(;a>=0&&i.some(l=>l===null);){const l=o[a];i[l.lane]===null&&(i[l.lane]=l.end),a--}n=Math.max(...i.filter(l=>l!==null))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:o,behavior:n})=>{this.options.scrollToFn(e,{behavior:n,adjustments:o},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(s)}}const et=(t,s,e,o)=>{for(;t<=s;){const n=(t+s)/2|0,i=e(n);if(i<o)t=n+1;else if(i>o)s=n-1;else return n}return t>0?t-1:0};function Fn({measurements:t,outerSize:s,scrollOffset:e,lanes:o}){const n=t.length-1,i=c=>t[c].start;if(t.length<=o)return{startIndex:0,endIndex:n};let a=et(0,n,i,e),l=a;if(o===1)for(;l<n&&t[l].end<e+s;)l++;else if(o>1){const c=Array(o).fill(0);for(;l<n&&c.some(u=>u<e+s);){const u=t[l];c[u.lane]=u.end,l++}const r=Array(o).fill(e+s);for(;a>=0&&r.some(u=>u>=e);){const u=t[a];r[u.lane]=u.start,a--}a=Math.max(0,a-a%o),l=Math.min(n,l+(o-1-l%o))}return{startIndex:a,endIndex:l}}const We=typeof document<"u"?d.useLayoutEffect:d.useEffect;function _n(t){const s=d.useReducer(()=>({}),{})[1],e={...t,onChange:(n,i)=>{var a;i?le.flushSync(s):s(),(a=t.onChange)==null||a.call(t,n,i)}},[o]=d.useState(()=>new Vn(e));return o.setOptions(e),We(()=>o._didMount(),[]),We(()=>o._willUpdate()),o}function An(t){return _n({observeElementRect:Mn,observeElementOffset:Tn,scrollToFn:Pn,...t})}function kn(t,s,e,o){let n=Xe(e);d.useEffect(()=>{t=t??window;function i(a){n.current(a)}return t.addEventListener(s,i,o),()=>t.removeEventListener(s,i,o)},[t,s,o])}function tt(t){let s=d.useRef({value:"",selectionStart:null,selectionEnd:null});return kn(t,"blur",e=>{let o=e.target;Fe(o)&&(s.current={value:o.value,selectionStart:o.selectionStart,selectionEnd:o.selectionEnd})}),F(()=>{if(!Ye(t)&&Fe(t)&&t.isConnected){if(t.focus({preventScroll:!0}),t.value!==s.current.value)t.setSelectionRange(t.value.length,t.value.length);else{let{selectionStart:e,selectionEnd:o}=s.current;e!==null&&o!==null&&t.setSelectionRange(e,o)}s.current={value:"",selectionStart:null,selectionEnd:null}}})}function Ue(t,s){let e=d.useRef([]),o=F(t);d.useEffect(()=>{let n=[...e.current];for(let[i,a]of s.entries())if(e.current[i]!==a){let l=o(s,n);return e.current=s,l}},[o,...s])}function zn(t){function s(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",s))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",s),s())}let ue=[];zn(()=>{function t(s){if(!_t(s.target)||s.target===document.body||ue[0]===s.target)return;let e=s.target;e=e.closest(At),ue.unshift(e??s.target),ue=ue.filter(o=>o!=null&&o.isConnected),ue.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});var Dn=Object.defineProperty,Bn=(t,s,e)=>s in t?Dn(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,He=(t,s,e)=>(Bn(t,typeof s!="symbol"?s+"":s,e),e),v=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(v||{}),Y=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(Y||{}),ee=(t=>(t[t.Pointer=0]="Pointer",t[t.Focus=1]="Focus",t[t.Other=2]="Other",t))(ee||{}),nt=(t=>(t[t.OpenCombobox=0]="OpenCombobox",t[t.CloseCombobox=1]="CloseCombobox",t[t.GoToOption=2]="GoToOption",t[t.SetTyping=3]="SetTyping",t[t.RegisterOption=4]="RegisterOption",t[t.UnregisterOption=5]="UnregisterOption",t[t.DefaultToFirstOption=6]="DefaultToFirstOption",t[t.SetActivationTrigger=7]="SetActivationTrigger",t[t.UpdateVirtualConfiguration=8]="UpdateVirtualConfiguration",t[t.SetInputElement=9]="SetInputElement",t[t.SetButtonElement=10]="SetButtonElement",t[t.SetOptionsElement=11]="SetOptionsElement",t[t.MarkInputAsMoved=12]="MarkInputAsMoved",t))(nt||{});function Ie(t,s=e=>e){let e=t.activeOptionIndex!==null?t.options[t.activeOptionIndex]:null,o=s(t.options.slice()),n=o.length>0&&o[0].dataRef.current.order!==null?o.sort((a,l)=>a.dataRef.current.order-l.dataRef.current.order):Lt(o,a=>a.dataRef.current.domRef.current),i=e?n.indexOf(e):null;return i===-1&&(i=null),{options:n,activeOptionIndex:i}}let Ln={1(t){var s;if((s=t.dataRef.current)!=null&&s.disabled||t.comboboxState===1)return t;let e=t.inputElement?me.Tracked(Bt(t.inputElement)):t.inputPositionState;return{...t,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,inputPositionState:e,__demoMode:!1}},0(t){var s,e;if((s=t.dataRef.current)!=null&&s.disabled||t.comboboxState===0)return t;if((e=t.dataRef.current)!=null&&e.value){let o=t.dataRef.current.calculateIndex(t.dataRef.current.value);if(o!==-1)return{...t,activeOptionIndex:o,comboboxState:0,__demoMode:!1,inputPositionState:me.Idle}}return{...t,comboboxState:0,inputPositionState:me.Idle,__demoMode:!1}},3(t,s){return t.isTyping===s.isTyping?t:{...t,isTyping:s.isTyping}},2(t,s){var e,o,n,i;if((e=t.dataRef.current)!=null&&e.disabled||t.optionsElement&&!((o=t.dataRef.current)!=null&&o.optionsPropsRef.current.static)&&t.comboboxState===1)return t;if(t.virtual){let{options:r,disabled:u}=t.virtual,b=s.focus===N.Specific?s.idx:_e(s,{resolveItems:()=>r,resolveActiveIndex:()=>{var h,p;return(p=(h=t.activeOptionIndex)!=null?h:r.findIndex(g=>!u(g)))!=null?p:null},resolveDisabled:u,resolveId(){throw new Error("Function not implemented.")}}),m=(n=s.trigger)!=null?n:2;return t.activeOptionIndex===b&&t.activationTrigger===m?t:{...t,activeOptionIndex:b,activationTrigger:m,isTyping:!1,__demoMode:!1}}let a=Ie(t);if(a.activeOptionIndex===null){let r=a.options.findIndex(u=>!u.dataRef.current.disabled);r!==-1&&(a.activeOptionIndex=r)}let l=s.focus===N.Specific?s.idx:_e(s,{resolveItems:()=>a.options,resolveActiveIndex:()=>a.activeOptionIndex,resolveId:r=>r.id,resolveDisabled:r=>r.dataRef.current.disabled}),c=(i=s.trigger)!=null?i:2;return t.activeOptionIndex===l&&t.activationTrigger===c?t:{...t,...a,isTyping:!1,activeOptionIndex:l,activationTrigger:c,__demoMode:!1}},4:(t,s)=>{var e,o,n,i;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:[...t.options,s.payload]};let a=s.payload,l=Ie(t,r=>(r.push(a),r));t.activeOptionIndex===null&&(n=(o=t.dataRef.current).isSelected)!=null&&n.call(o,s.payload.dataRef.current.value)&&(l.activeOptionIndex=l.options.indexOf(a));let c={...t,...l,activationTrigger:2};return(i=t.dataRef.current)!=null&&i.__demoMode&&t.dataRef.current.value===void 0&&(c.activeOptionIndex=0),c},5:(t,s)=>{var e;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:t.options.filter(n=>n.id!==s.id)};let o=Ie(t,n=>{let i=n.findIndex(a=>a.id===s.id);return i!==-1&&n.splice(i,1),n});return{...t,...o,activationTrigger:2}},6:(t,s)=>t.defaultToFirstOption===s.value?t:{...t,defaultToFirstOption:s.value},7:(t,s)=>t.activationTrigger===s.trigger?t:{...t,activationTrigger:s.trigger},8:(t,s)=>{var e,o;if(t.virtual===null)return{...t,virtual:{options:s.options,disabled:(e=s.disabled)!=null?e:()=>!1}};if(t.virtual.options===s.options&&t.virtual.disabled===s.disabled)return t;let n=t.activeOptionIndex;if(t.activeOptionIndex!==null){let i=s.options.indexOf(t.virtual.options[t.activeOptionIndex]);i!==-1?n=i:n=null}return{...t,activeOptionIndex:n,virtual:{options:s.options,disabled:(o=s.disabled)!=null?o:()=>!1}}},9:(t,s)=>t.inputElement===s.element?t:{...t,inputElement:s.element},10:(t,s)=>t.buttonElement===s.element?t:{...t,buttonElement:s.element},11:(t,s)=>t.optionsElement===s.element?t:{...t,optionsElement:s.element},12(t){return t.inputPositionState.kind!=="Tracked"?t:{...t,inputPositionState:me.Moved}}};class Me extends kt{constructor(s){super(s),He(this,"actions",{onChange:e=>{let{onChange:o,compare:n,mode:i,value:a}=this.state.dataRef.current;return pe(i,{0:()=>o?.(e),1:()=>{let l=a.slice(),c=l.findIndex(r=>n(r,e));return c===-1?l.push(e):l.splice(c,1),o?.(l)}})},registerOption:(e,o)=>(this.send({type:4,payload:{id:e,dataRef:o}}),()=>{this.state.activeOptionIndex===this.state.dataRef.current.calculateIndex(o.current.value)&&this.send({type:6,value:!0}),this.send({type:5,id:e})}),goToOption:(e,o)=>(this.send({type:6,value:!1}),this.send({type:2,...e,trigger:o})),setIsTyping:e=>{this.send({type:3,isTyping:e})},closeCombobox:()=>{var e,o;this.send({type:1}),this.send({type:6,value:!1}),(o=(e=this.state.dataRef.current).onClose)==null||o.call(e)},openCombobox:()=>{this.send({type:0}),this.send({type:6,value:!0})},setActivationTrigger:e=>{this.send({type:7,trigger:e})},selectActiveOption:()=>{let e=this.selectors.activeOptionIndex(this.state);if(e!==null){if(this.actions.setIsTyping(!1),this.state.virtual)this.actions.onChange(this.state.virtual.options[e]);else{let{dataRef:o}=this.state.options[e];this.actions.onChange(o.current.value)}this.actions.goToOption({focus:N.Specific,idx:e})}},setInputElement:e=>{this.send({type:9,element:e})},setButtonElement:e=>{this.send({type:10,element:e})},setOptionsElement:e=>{this.send({type:11,element:e})}}),He(this,"selectors",{activeDescendantId:e=>{var o,n;let i=this.selectors.activeOptionIndex(e);if(i!==null)return e.virtual?(n=e.options.find(a=>!a.dataRef.current.disabled&&e.dataRef.current.compare(a.dataRef.current.value,e.virtual.options[i])))==null?void 0:n.id:(o=e.options[i])==null?void 0:o.id},activeOptionIndex:e=>{if(e.defaultToFirstOption&&e.activeOptionIndex===null&&(e.virtual?e.virtual.options.length>0:e.options.length>0)){if(e.virtual){let{options:n,disabled:i}=e.virtual,a=n.findIndex(l=>{var c;return!((c=i?.(l))!=null&&c)});if(a!==-1)return a}let o=e.options.findIndex(n=>!n.dataRef.current.disabled);if(o!==-1)return o}return e.activeOptionIndex},activeOption:e=>{var o,n;let i=this.selectors.activeOptionIndex(e);return i===null?null:e.virtual?e.virtual.options[i??0]:(n=(o=e.options[i])==null?void 0:o.dataRef.current.value)!=null?n:null},isActive:(e,o,n)=>{var i;let a=this.selectors.activeOptionIndex(e);return a===null?!1:e.virtual?a===e.dataRef.current.calculateIndex(o):((i=e.options[a])==null?void 0:i.id)===n},shouldScrollIntoView:(e,o,n)=>!(e.virtual||e.__demoMode||e.comboboxState!==0||e.activationTrigger===0||!this.selectors.isActive(e,o,n)),didInputMove(e){return e.inputPositionState.kind==="Moved"}});{let e=this.state.id,o=Je.get(null);this.disposables.add(o.on(zt.Push,n=>{!o.selectors.isTop(n,e)&&this.state.comboboxState===0&&this.actions.closeCombobox()})),this.on(0,()=>o.actions.push(e)),this.on(1,()=>o.actions.pop(e))}this.disposables.group(e=>{this.on(1,o=>{o.inputElement&&(e.dispose(),e.add(Dt(o.inputElement,o.inputPositionState,()=>{this.send({type:12})})))})})}static new({id:s,virtual:e=null,__demoMode:o=!1}){var n;return new Me({id:s,dataRef:{current:{}},comboboxState:o?0:1,isTyping:!1,options:[],virtual:e?{options:e.options,disabled:(n=e.disabled)!=null?n:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:o,inputPositionState:me.Idle})}reduce(s,e){return pe(e.type,Ln,s,e)}}const ot=d.createContext(null);function ye(t){let s=d.useContext(ot);if(s===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,st),e}return s}function st({id:t,virtual:s=null,__demoMode:e=!1}){let o=d.useMemo(()=>Me.new({id:t,virtual:s,__demoMode:e}),[]);return Nt(()=>o.dispose()),o}let be=d.createContext(null);be.displayName="ComboboxDataContext";function fe(t){let s=d.useContext(be);if(s===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,fe),e}return s}let it=d.createContext(null);function Nn(t){let s=ye("VirtualProvider"),e=fe("VirtualProvider"),{options:o}=e.virtual,n=q(s,h=>h.optionsElement),[i,a]=d.useMemo(()=>{let h=n;if(!h)return[0,0];let p=window.getComputedStyle(h);return[parseFloat(p.paddingBlockStart||p.paddingTop),parseFloat(p.paddingBlockEnd||p.paddingBottom)]},[n]),l=An({enabled:o.length!==0,scrollPaddingStart:i,scrollPaddingEnd:a,count:o.length,estimateSize(){return 40},getScrollElement(){return s.state.optionsElement},overscan:12}),[c,r]=d.useState(0);de(()=>{r(h=>h+1)},[o]);let u=l.getVirtualItems(),b=q(s,h=>h.activationTrigger===ee.Pointer),m=q(s,s.selectors.activeOptionIndex);return u.length===0?null:D.createElement(it.Provider,{value:l},D.createElement("div",{style:{position:"relative",width:"100%",height:`${l.getTotalSize()}px`},ref:h=>{h&&(b||m!==null&&o.length>m&&l.scrollToIndex(m))}},u.map(h=>{var p;return D.createElement(d.Fragment,{key:h.key},D.cloneElement((p=t.children)==null?void 0:p.call(t,{...t.slot,option:o[h.index]}),{key:`${c}-${h.key}`,"data-index":h.index,"aria-setsize":o.length,"aria-posinset":h.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${h.start}px)`,overflowAnchor:"none"}}))})))}let qn=d.Fragment;function Wn(t,s){let e=d.useId(),o=cn(),{value:n,defaultValue:i,onChange:a,form:l,name:c,by:r,invalid:u=!1,disabled:b=o||!1,onClose:m,__demoMode:h=!1,multiple:p=!1,immediate:g=!1,virtual:O=null,nullable:M,..._}=t,I=yn(i),[P=p?[]:void 0,W]=Sn(n,a,I),S=st({id:e,virtual:O,__demoMode:h}),U=d.useRef({static:!1,hold:!1}),T=Cn(r),B=F(y=>O?r===null?O.options.indexOf(y):O.options.findIndex(te=>T(te,y)):S.state.options.findIndex(te=>T(te.dataRef.current.value,y))),X=d.useCallback(y=>pe(L.mode,{[Y.Multi]:()=>P.some(te=>T(te,y)),[Y.Single]:()=>T(P,y)}),[P]),R=q(S,y=>y.virtual),C=F(()=>m?.()),L=d.useMemo(()=>({__demoMode:h,immediate:g,optionsPropsRef:U,value:P,defaultValue:I,disabled:b,invalid:u,mode:p?Y.Multi:Y.Single,virtual:O?R:null,onChange:W,isSelected:X,calculateIndex:B,compare:T,onClose:C}),[h,g,U,P,I,b,u,p,O,R,W,X,B,T,C]);de(()=>{var y;O&&S.send({type:nt.UpdateVirtualConfiguration,options:O.options,disabled:(y=O.disabled)!=null?y:null})},[O,O?.options,O?.disabled]),de(()=>{S.state.dataRef.current=L},[L]);let[V,x,K,re]=q(S,y=>[y.comboboxState,y.buttonElement,y.inputElement,y.optionsElement]),J=Je.get(null),se=q(J,d.useCallback(y=>J.selectors.isTop(y,e),[J,e]));pn(se,[x,K,re],()=>S.actions.closeCombobox());let Q=q(S,S.selectors.activeOptionIndex),ie=q(S,S.selectors.activeOption),f=ge({open:V===v.Open,disabled:b,invalid:u,activeIndex:Q,activeOption:ie,value:P}),[H,w]=fn(),k=s===null?{}:{ref:s},j=d.useCallback(()=>{if(I!==void 0)return W?.(I)},[W,I]),z=xe();return D.createElement(w,{value:H,props:{htmlFor:K?.id},slot:{open:V===v.Open,disabled:b}},D.createElement(hn,null,D.createElement(be.Provider,{value:L},D.createElement(ot.Provider,{value:S},D.createElement(mn,{value:pe(V,{[v.Open]:Ce.Open,[v.Closed]:Ce.Closed})},c!=null&&D.createElement(On,{disabled:b,data:P!=null?{[c]:P}:{},form:l,onReset:j}),z({ourProps:k,theirProps:_,slot:f,defaultTag:qn,name:"Combobox"}))))))}let Un="input";function Hn(t,s){var e,o;let n=ye("Combobox.Input"),i=fe("Combobox.Input"),a=d.useId(),l=Ut(),{id:c=l||`headlessui-combobox-input-${a}`,onChange:r,displayValue:u,disabled:b=i.disabled||!1,autoFocus:m=!1,type:h="text",...p}=t,g=d.useRef(null),O=Ee(g,s,Ht(),n.actions.setInputElement),[M,_]=q(n,f=>[f.comboboxState,f.isTyping]),I=Kt(),P=F(()=>{n.actions.onChange(null),n.state.optionsElement&&(n.state.optionsElement.scrollTop=0),n.actions.goToOption({focus:N.Nothing})}),W=d.useMemo(()=>{var f;return typeof u=="function"&&i.value!==void 0?(f=u(i.value))!=null?f:"":typeof i.value=="string"?i.value:""},[i.value,u]);Ue(([f,H],[w,k])=>{if(n.state.isTyping)return;let j=g.current;j&&((k===v.Open&&H===v.Closed||f!==w)&&(j.value=f),requestAnimationFrame(()=>{if(n.state.isTyping||!j||Ye(j))return;let{selectionStart:z,selectionEnd:y}=j;Math.abs((y??0)-(z??0))===0&&z===0&&j.setSelectionRange(j.value.length,j.value.length)}))},[W,M,_]),Ue(([f],[H])=>{if(f===v.Open&&H===v.Closed){if(n.state.isTyping)return;let w=g.current;if(!w)return;let k=w.value,{selectionStart:j,selectionEnd:z,selectionDirection:y}=w;w.value="",w.value=k,y!==null?w.setSelectionRange(j,z,y):w.setSelectionRange(j,z)}},[M]);let S=d.useRef(!1),U=F(()=>{S.current=!0}),T=F(()=>{I.nextFrame(()=>{S.current=!1})}),B=F(f=>{switch(n.actions.setIsTyping(!0),f.key){case G.Enter:if(n.state.comboboxState!==v.Open||S.current)return;if(f.preventDefault(),f.stopPropagation(),n.selectors.activeOptionIndex(n.state)===null){n.actions.closeCombobox();return}n.actions.selectActiveOption(),i.mode===Y.Single&&n.actions.closeCombobox();break;case G.ArrowDown:return f.preventDefault(),f.stopPropagation(),pe(n.state.comboboxState,{[v.Open]:()=>n.actions.goToOption({focus:N.Next}),[v.Closed]:()=>n.actions.openCombobox()});case G.ArrowUp:return f.preventDefault(),f.stopPropagation(),pe(n.state.comboboxState,{[v.Open]:()=>n.actions.goToOption({focus:N.Previous}),[v.Closed]:()=>{le.flushSync(()=>n.actions.openCombobox()),i.value||n.actions.goToOption({focus:N.Last})}});case G.Home:if(n.state.comboboxState===v.Closed||f.shiftKey)break;return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:N.First});case G.PageUp:return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:N.First});case G.End:if(n.state.comboboxState===v.Closed||f.shiftKey)break;return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:N.Last});case G.PageDown:return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:N.Last});case G.Escape:return n.state.comboboxState!==v.Open?void 0:(f.preventDefault(),n.state.optionsElement&&!i.optionsPropsRef.current.static&&f.stopPropagation(),i.mode===Y.Single&&i.value===null&&P(),n.actions.closeCombobox());case G.Tab:if(n.actions.setIsTyping(!1),n.state.comboboxState!==v.Open)return;i.mode===Y.Single&&n.state.activationTrigger!==ee.Focus&&n.actions.selectActiveOption(),n.actions.closeCombobox();break}}),X=F(f=>{r?.(f),i.mode===Y.Single&&f.target.value===""&&P(),n.actions.openCombobox()}),R=F(f=>{var H,w,k;let j=(H=f.relatedTarget)!=null?H:ue.find(z=>z!==f.currentTarget);if(!((w=n.state.optionsElement)!=null&&w.contains(j))&&!((k=n.state.buttonElement)!=null&&k.contains(j))&&n.state.comboboxState===v.Open)return f.preventDefault(),i.mode===Y.Single&&i.value===null&&P(),n.actions.closeCombobox()}),C=F(f=>{var H,w,k;let j=(H=f.relatedTarget)!=null?H:ue.find(z=>z!==f.currentTarget);(w=n.state.buttonElement)!=null&&w.contains(j)||(k=n.state.optionsElement)!=null&&k.contains(j)||i.disabled||i.immediate&&n.state.comboboxState!==v.Open&&I.microTask(()=>{le.flushSync(()=>n.actions.openCombobox()),n.actions.setActivationTrigger(ee.Focus)})}),L=je(),V=Gt(),{isFocused:x,focusProps:K}=Qe({autoFocus:m}),{isHovered:re,hoverProps:J}=Ze({isDisabled:b}),se=q(n,f=>f.optionsElement),Q=ge({open:M===v.Open,disabled:b,invalid:i.invalid,hover:re,focus:x,autofocus:m}),ie=$e({ref:O,id:c,role:"combobox",type:h,"aria-controls":se?.id,"aria-expanded":M===v.Open,"aria-activedescendant":q(n,n.selectors.activeDescendantId),"aria-labelledby":L,"aria-describedby":V,"aria-autocomplete":"list",defaultValue:(o=(e=t.defaultValue)!=null?e:i.defaultValue!==void 0?u?.(i.defaultValue):null)!=null?o:i.defaultValue,disabled:b||void 0,autoFocus:m,onCompositionStart:U,onCompositionEnd:T,onKeyDown:B,onChange:X,onFocus:C,onBlur:R},K,J);return xe()({ourProps:ie,theirProps:p,slot:Q,defaultTag:Un,name:"Combobox.Input"})}let Kn="button";function Gn(t,s){let e=ye("Combobox.Button"),o=fe("Combobox.Button"),[n,i]=d.useState(null),a=Ee(s,i,e.actions.setButtonElement),l=d.useId(),{id:c=`headlessui-combobox-button-${l}`,disabled:r=o.disabled||!1,autoFocus:u=!1,...b}=t,[m,h,p]=q(e,C=>[C.comboboxState,C.inputElement,C.optionsElement]),g=tt(h),O=m===v.Open;Xt(O,{trigger:n,action:d.useCallback(C=>{if(n!=null&&n.contains(C.target))return he.Ignore;if(h!=null&&h.contains(C.target))return he.Ignore;let L=C.target.closest('[role="option"]:not([data-disabled])');return Yt(L)?he.Select(L):p!=null&&p.contains(C.target)?he.Ignore:he.Close},[n,h,p]),close:e.actions.closeCombobox,select:e.actions.selectActiveOption});let M=F(C=>{switch(C.key){case G.Space:case G.Enter:C.preventDefault(),C.stopPropagation(),e.state.comboboxState===v.Closed&&le.flushSync(()=>e.actions.openCombobox()),g();return;case G.ArrowDown:C.preventDefault(),C.stopPropagation(),e.state.comboboxState===v.Closed&&(le.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:N.First})),g();return;case G.ArrowUp:C.preventDefault(),C.stopPropagation(),e.state.comboboxState===v.Closed&&(le.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:N.Last})),g();return;case G.Escape:if(e.state.comboboxState!==v.Open)return;C.preventDefault(),e.state.optionsElement&&!o.optionsPropsRef.current.static&&C.stopPropagation(),le.flushSync(()=>e.actions.closeCombobox()),g();return;default:return}}),_=Jt(()=>{e.state.comboboxState===v.Open?e.actions.closeCombobox():e.actions.openCombobox(),g()}),I=je([c]),{isFocusVisible:P,focusProps:W}=Qe({autoFocus:u}),{isHovered:S,hoverProps:U}=Ze({isDisabled:r}),{pressed:T,pressProps:B}=Qt({disabled:r}),X=ge({open:m===v.Open,active:T||m===v.Open,disabled:r,invalid:o.invalid,value:o.value,hover:S,focus:P}),R=$e({ref:a,id:c,type:Zt(t,n),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":p?.id,"aria-expanded":m===v.Open,"aria-labelledby":I,disabled:r||void 0,autoFocus:u,onKeyDown:M},_,W,U,B);return xe()({ourProps:R,theirProps:b,slot:X,defaultTag:Kn,name:"Combobox.Button"})}let Xn="div",Yn=ze.RenderStrategy|ze.Static;function Jn(t,s){var e,o,n;let i=d.useId(),{id:a=`headlessui-combobox-options-${i}`,hold:l=!1,anchor:c,portal:r=!1,modal:u=!0,transition:b=!1,...m}=t,h=ye("Combobox.Options"),p=fe("Combobox.Options"),g=en(c);g&&(r=!0);let[O,M]=tn(g),[_,I]=d.useState(null),P=nn(),W=Ee(s,g?O:null,h.actions.setOptionsElement,I),[S,U,T,B,X]=q(h,A=>[A.comboboxState,A.inputElement,A.buttonElement,A.optionsElement,A.activationTrigger]),R=Ae(U||T),C=Ae(B),L=on(),[V,x]=sn(b,_,L!==null?(L&Ce.Open)===Ce.Open:S===v.Open);an(V,U,h.actions.closeCombobox);let K=p.__demoMode?!1:u&&S===v.Open;ln(K,C);let re=p.__demoMode?!1:u&&S===v.Open;rn(re,{allowed:d.useCallback(()=>[U,T,B],[U,T,B])});let J=q(h,h.selectors.didInputMove)?!1:V;de(()=>{var A;p.optionsPropsRef.current.static=(A=t.static)!=null?A:!1},[p.optionsPropsRef,t.static]),de(()=>{p.optionsPropsRef.current.hold=l},[p.optionsPropsRef,l]),En(S===v.Open,{container:B,accept(A){return A.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:A.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(A){A.setAttribute("role","none")}});let se=je([T?.id]),Q=ge({open:S===v.Open,option:void 0}),ie=F(()=>{h.actions.setActivationTrigger(ee.Pointer)}),f=F(A=>{A.preventDefault(),h.actions.setActivationTrigger(ee.Pointer)}),H=$e(g?P():{},{"aria-labelledby":se,role:"listbox","aria-multiselectable":p.mode===Y.Multi?!0:void 0,id:a,ref:W,style:{...m.style,...M,"--input-width":ke(V,U,!0).width,"--button-width":ke(V,T,!0).width},onWheel:X===ee.Pointer?void 0:ie,onMouseDown:f,...un(x)}),w=V&&S===v.Closed&&!t.static,k=De(w,(e=p.virtual)==null?void 0:e.options),j=De(w,p.value),z=d.useCallback(A=>p.compare(j,A),[p.compare,j]),y=d.useMemo(()=>{if(!p.virtual)return p;if(k===void 0)throw new Error("Missing `options` in virtual mode");return k!==p.virtual.options?{...p,virtual:{...p.virtual,options:k}}:p},[p,k,(o=p.virtual)==null?void 0:o.options]);p.virtual&&Object.assign(m,{children:D.createElement(be.Provider,{value:y},D.createElement(Nn,{slot:Q},m.children))});let te=xe(),ne=d.useMemo(()=>p.mode===Y.Multi?p:{...p,isSelected:z},[p,z]);return D.createElement(dn,{enabled:r?t.static||V:!1,ownerDocument:R},D.createElement(be.Provider,{value:ne},te({ourProps:H,theirProps:{...m,children:D.createElement(xn,{freeze:w},typeof m.children=="function"?(n=m.children)==null?void 0:n.call(m,Q):m.children)},slot:Q,defaultTag:Xn,features:Yn,visible:J,name:"Combobox.Options"})))}let Qn="div";function Zn(t,s){var e,o,n;let i=fe("Combobox.Option"),a=ye("Combobox.Option"),l=d.useId(),{id:c=`headlessui-combobox-option-${l}`,value:r,disabled:u=(n=(o=(e=i.virtual)==null?void 0:e.disabled)==null?void 0:o.call(e,r))!=null?n:!1,order:b=null,...m}=t,[h]=q(a,x=>[x.inputElement]),p=tt(h),g=q(a,d.useCallback(x=>a.selectors.isActive(x,r,c),[r,c])),O=i.isSelected(r),M=d.useRef(null),_=Xe({disabled:u,value:r,domRef:M,order:b}),I=d.useContext(it),P=Ee(s,M,I?I.measureElement:null),W=F(()=>{a.actions.setIsTyping(!1),a.actions.onChange(r)});de(()=>a.actions.registerOption(c,_),[_,c]);let S=q(a,d.useCallback(x=>a.selectors.shouldScrollIntoView(x,r,c),[r,c]));de(()=>{if(S)return bn().requestAnimationFrame(()=>{var x,K;(K=(x=M.current)==null?void 0:x.scrollIntoView)==null||K.call(x,{block:"nearest"})})},[S,M]);let U=F(x=>{x.preventDefault(),x.button===vn.Left&&(u||(W(),gn()||requestAnimationFrame(()=>p()),i.mode===Y.Single&&a.actions.closeCombobox()))}),T=F(()=>{if(u)return a.actions.goToOption({focus:N.Nothing});let x=i.calculateIndex(r);a.actions.goToOption({focus:N.Specific,idx:x})}),B=Wt(),X=F(x=>B.update(x)),R=F(x=>{if(!B.wasMoved(x)||u||g&&a.state.activationTrigger===ee.Pointer)return;let K=i.calculateIndex(r);a.actions.goToOption({focus:N.Specific,idx:K},ee.Pointer)}),C=F(x=>{B.wasMoved(x)&&(u||g&&(i.optionsPropsRef.current.hold||a.state.activationTrigger===ee.Pointer&&a.actions.goToOption({focus:N.Nothing})))}),L=ge({active:g,focus:g,selected:O,disabled:u}),V={id:c,ref:P,role:"option",tabIndex:u===!0?void 0:-1,"aria-disabled":u===!0?!0:void 0,"aria-selected":O,disabled:void 0,onMouseDown:U,onFocus:T,onPointerEnter:X,onMouseEnter:X,onPointerMove:R,onMouseMove:R,onPointerLeave:C,onMouseLeave:C};return xe()({ourProps:V,theirProps:m,slot:L,defaultTag:Qn,name:"Combobox.Option"})}let eo=ve(Wn),at=ve(Gn),lt=ve(Hn),to=qt,rt=ve(Jn),ut=ve(Zn),no=Object.assign(eo,{Input:lt,Button:at,Label:to,Options:rt,Option:ut});const oo=`
  jn:relative
`,so=`
  jn:pointer-events-none
  jn:top-2
  jn:left-[0.9375rem]
`,io=`
  jn:rounded-3px
  jn:bg-theme-textinput
  jn:text-theme-textinput
  jn:border
  jn:text-base
  jn:leading-4
  jn:w-full
  jn:px-4
  jn:h-textinput
  jn:text-left
  jn:overflow-hidden
  jn:text-ellipsis
  jn:whitespace-nowrap
  jn:focus:outline-hidden
  jn:focus:ring-2
  jn:focus:ring-theme-focus
`,ao=`
  jn:pt-[1.125rem] 
  jn:pb-1
`,lo=`
  jn:py-4
`,ro=`
  jn:cursor-not-allowed
  jn:pointer-events-none
  jn:opacity-50
`,uo=`
  jn:border-theme-textinput-default
`,co=`
  jn:border-theme-success
`,po=`
  jn:border-theme-error
`,fo=`
  jn:absolute
  jn:top-0
  jn:right-0
  jn:h-textinput
  jn:w-6
  jn:h-4
  jn:border-l-0
  jn:border-y-[1px]
  jn:border-r-[1px]
  jn:rounded-tr
  jn:rounded-br
  jn:appearance-none
  jn:bg-theme-textinput
  jn:text-theme-textinput
`,ho=`
  jn:border-theme-textinput-default
`,mo=`
  jn:border-theme-error
`,bo=`
  jn:border-theme-success
`,vo=`
  jn:cursor-not-allowed
  jn:pointer-events-none
  jn:bg-transparent
  jn:opacity-50
`,go=`
  jn:rounded
  jn:bg-theme-background-lvl-1
  jn:w-full
  jn:overflow-y-auto
`,xo=`
  jn:absolute
  jn:top-[.4rem]
  jn:right-6
`,yo=`
  jn:absolute
  jn:top-1/2
  jn:left-1/2
  jn:translate-y-[-50%]
  jn:translate-x-[-0.75rem]
`,Oe=d.createContext(void 0),Ke=({ariaLabel:t,children:s,className:e="",defaultValue:o="",disabled:n=!1,error:i=!1,errortext:a="",helptext:l="",id:c="",invalid:r=!1,loading:u=!1,label:b,name:m="",onBlur:h,onChange:p,onFocus:g,onInputChange:O,placeholder:M="Select…",required:_=!1,successtext:I="",truncateOptions:P=!1,valid:W=!1,value:S="",valueLabel:U,width:T="full",wrapperClassName:B="",...X})=>{const R=E=>!(typeof E=="string"&&E.trim().length===0),C=c||"juno-combobox-"+d.useId(),L="juno-combobox-helptext-"+d.useId(),[V,x]=d.useState(!1),[K,re]=d.useState(new Map),[J,se]=d.useState(""),[Q,ie]=d.useState(S),[f,H]=d.useState(!1),[w,k]=d.useState(!1),[j,z]=d.useState(!1),[y,te]=d.useState(!1),[ne,A]=d.useState(!1),{x:dt,y:ct,strategy:pt,refs:Te,context:Re}=Ot({open:V,onOpenChange:x,placement:"bottom-start",middleware:[$t(4),Mt(),Tt(),Rt({apply({availableWidth:E,availableHeight:oe,elements:ae,rects:Z}){Object.assign(ae.floating.style,{maxWidth:`${E}px`,maxHeight:`${oe}px`,minWidth:`${Z.reference.width}px`,overflowY:"auto"})}})],whileElementsMounted:jt}),{getReferenceProps:ft,getFloatingProps:ht}=Et([wt(Re),It(Re)]),mt=(E,oe,ae)=>{re(Z=>new Map([...Array.from(Z),[E??ae,{val:E,label:oe,children:ae}]]))},Pe=d.useMemo(()=>r||!!(a&&R(a)),[r,a]),Ve=d.useMemo(()=>W||!!(I&&R(I)),[W,I]);d.useEffect(()=>{ie(S)},[S]),d.useEffect(()=>{k(i)},[i]),d.useEffect(()=>{H(u)},[u]),d.useEffect(()=>{te(Pe)},[Pe]),d.useEffect(()=>{A(Ve)},[Ve]);const bt=E=>{ie(E),E&&x(!1),p&&p(E)},vt=E=>{se(E?.target?.value),O&&O(E)},gt=E=>{z(!0),V||x(!0),g&&g(E)},xt=E=>{z(!1),x(!1),h&&h(E)},yt=Ft(),St=J===""?D.Children.toArray(s):D.Children.toArray(s).filter(E=>D.isValidElement(E)?(E.props.children?.toString()||E.props.label||E.props.value)?.toLowerCase().includes(J.toLowerCase()):!1),Ct=E=>{const oe=Z=>Z==null?"":typeof Z=="object"?String(Z)!=="[object Object]"?String(Z):"":String(Z),ae=K.get(E);return ae?.children&&oe(ae.children)||ae?.label||U||oe(E)||""};return $.jsx(Oe.Provider,{value:{selectedValue:Q,truncateOptions:P,addOptionValueAndLabel:mt},children:$.jsxs("div",{className:`
          juno-combobox-wrapper
          jn:relative
          ${T=="auto"?"jn:inline-block":"jn:block"}
          ${T=="auto"?"jn:w-auto":"jn:w-full"}
          ${B}
        `,children:[$.jsx(no,{defaultValue:o,disabled:n||f||w,name:m,onChange:bt,value:Q||o,as:"div",...X,children:({open:E})=>(d.useEffect(()=>{E!==V&&x(E)},[E]),$.jsxs($.Fragment,{children:[$.jsxs("div",{ref:Te.setReference,className:`
                juno-combobox-input-wrapper
                ${oo}
                ${n?"jn:cursor-not-allowed":""}
              `,children:[b&&R(b)&&!f&&!w?$.jsx(Pt,{text:b,disabled:n,required:_,htmlFor:C,className:`${so}`,floating:!0,minimized:!!(M||j||J&&R(J)||Q&&R(Q)),...ft()}):"",$.jsx(lt,{autoComplete:"off","aria-label":t||b,"aria-describedby":l?L:"",id:C,onBlur:xt,onChange:vt,onFocus:gt,placeholder:!f&&!w?M:"",displayValue:oe=>Ct(oe),className:`
                  juno-combobox-input 
                  ${io} 
                  ${b&&R(b)?ao:lo}
                  ${n?ro:""}
                  ${y?"juno-combobox-invalid "+po:""} 
                  ${ne?"juno-combobox-valid "+co:""}  
                  ${ne||y?"":uo} 
                  ${f?"juno-combobox-loading jn:cursor-not-allowed":""}
                  ${w?"juno-combobox-error jn:cursor-not-allowed":""}
                  ${e}
                `}),f||w?$.jsx("span",{className:`${yo}`,children:f?$.jsx(Vt,{className:"jn:cursor-not-allowed"}):$.jsx(Se,{icon:"errorOutline",color:"jn:text-theme-error",className:"jn:cursor-not-allowed"})}):ne||y?$.jsx("span",{className:`
                        juno-combobox-icon-container 
                        ${xo} 
                        ${n?"jn:opacity-50":""}
                      `,children:$.jsx(Se,{icon:ne?"checkCircle":"dangerous",color:ne?"jn:text-theme-success":"jn:text-theme-error"})}):"",!w&&!f?$.jsx(at,{className:`
                        juno-combobox-toggle 
                        ${fo}
                        ${n?vo:""}
                        ${y?"juno-combobox-toggle-invalid "+mo:""} 
                        ${ne?"juno-combobox-toggle-valid "+bo:""}  
                        ${ne||y?"":ho} 
                      `,children:$.jsx(Se,{icon:V?"expandLess":"expandMore"})}):null]}),V&&le.createPortal($.jsx("div",{ref:Te.setFloating,className:`juno-combobox-options ${go}`,style:{position:pt,top:ct??0,left:dt??0},...ht(),children:$.jsx(rt,{static:!0,className:"jn:w-full",children:St})}),yt??document.body)]}))}),a&&R(a)?$.jsx(we,{text:a,variant:"error"}):"",I&&R(I)?$.jsx(we,{text:I,variant:"success"}):"",l&&R(l)?$.jsx(we,{text:l,id:L}):""]})})};try{Oe.displayName="ComboBoxContext",Oe.__docgenInfo={description:"",displayName:"ComboBoxContext",props:{}}}catch{}try{Ke.displayName="ComboBox",Ke.__docgenInfo={description:"",displayName:"ComboBox",props:{ariaLabel:{defaultValue:null,description:"The aria-label of the ComboBox. Defaults to the label if label was passed.",name:"ariaLabel",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"The children to Render. Use `ComboBox.Option` elements.",name:"children",required:!1,type:{name:"ReactNode"}},className:{defaultValue:{value:""},description:"A custom className. Will be passed to the internal text input element of the ComboBox",name:"className",required:!1,type:{name:"string"}},defaultValue:{defaultValue:{value:""},description:"Pass a defaultValue to use as an uncontrolled Component that will handle its state internally",name:"defaultValue",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Whether the ComboBox is disabled",name:"disabled",required:!1,type:{name:"boolean"}},error:{defaultValue:{value:"false"},description:"Whether the ComboBox has an error. Note this refers to an internal error like failing to load options etc., to indicate failed validation use `invalid` instead.",name:"error",required:!1,type:{name:"boolean"}},errortext:{defaultValue:{value:""},description:"An errortext to display when the ComboBox failed validation or an internal error occurred.",name:"errortext",required:!1,type:{name:"ReactNode"}},helptext:{defaultValue:{value:""},description:"A helptext to render to explain meaning and significance of the ComboBox",name:"helptext",required:!1,type:{name:"ReactNode"}},id:{defaultValue:{value:""},description:"The Id of the ComboBox. Will be assigned to the text input part of the ComboBox. If not passed, an id will be auto-generated.",name:"id",required:!1,type:{name:"string"}},invalid:{defaultValue:{value:"false"},description:"Whether the ComboBox failed validation",name:"invalid",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"The label of the ComboBox",name:"label",required:!1,type:{name:"string"}},loading:{defaultValue:{value:"false"},description:"Whether the ComboBox is busy loading options",name:"loading",required:!1,type:{name:"boolean"}},name:{defaultValue:{value:""},description:"The name attribute of the ComboBox when used as part of a form",name:"name",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"A handler to execute when the ComboBox looses focus",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onChange:{defaultValue:null,description:"A handler to execute when the ComboBox' selected value changes",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},onFocus:{defaultValue:null,description:"A handler to execute when the ComboBox input receives focus",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onInputChange:{defaultValue:null,description:"Handler to execute when the ComboBox text input value changes",name:"onInputChange",required:!1,type:{name:"ChangeEventHandler<HTMLInputElement>"}},placeholder:{defaultValue:{value:"Select…"},description:"A placeholder to render in the text input",name:"placeholder",required:!1,type:{name:"string"}},required:{defaultValue:{value:"false"},description:"Whether the ComboBox is required",name:"required",required:!1,type:{name:"boolean"}},successtext:{defaultValue:{value:""},description:"A text to display in case the ComboBox was successfully validated. Will set the ComboBox to `valid` when passed.",name:"successtext",required:!1,type:{name:"ReactNode"}},truncateOptions:{defaultValue:{value:"false"},description:"Whether the option labels should be truncated in case they are longer/wider than the available space in an option or not. Default is FALSE.",name:"truncateOptions",required:!1,type:{name:"boolean"}},valid:{defaultValue:{value:"false"},description:"Whether the ComboBox was successfully validated",name:"valid",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"The selected value of the ComboBox in Controlled Mode.",name:"value",required:!1,type:{name:"string"}},valueLabel:{defaultValue:null,description:"The label of the passed value or defaultValue. If you want to use controlled mode or pass as defaultValue in uncontrolled mode and additionally use labels for human-readable SelectOptions, you need to also pass the matching label for the passed value/defaultValue so that the Select component can render itself properly",name:"valueLabel",required:!1,type:{name:"string"}},width:{defaultValue:{value:"full"},description:"The width of the text input. Either 'full' (default) or 'auto'.",name:"width",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"full"'}]}},wrapperClassName:{defaultValue:{value:""},description:"Pass a custom classname to the wrapping <div> element. This can be useful if you must add styling to the outermost wrapping element of this component, e.g. for positioning.",name:"wrapperClassName",required:!1,type:{name:"string"}}}}}catch{}const So=`
  jn:flex
  jn:pt-[0.6875rem]
  jn:pb-[0.5rem]
  jn:pr-[0.875rem]
  jn:select-none
  jn:hover:outline-hidden
  jn:hover:ring-2
  jn:hover:ring-inset
  jn:hover:ring-theme-focus
  jn:hover:bg-theme-background-lvl-3
`,Co=`
  jn:text-theme-default
  jn:pl-[2.375rem]
`,Oo=`
  jn:text-theme-accent
  jn:pl-3.5
`,Eo=`
  jn:inline-block
  jn:mr-1.5
`,wo=`
  jn:opacity-50
  jn:cursor-not-allowed
`,Io=`
  jn:block
  jn:h-6
  jn:overflow-hidden
  jn:text-ellipsis
  jn:whitespace-nowrap
`,Ge=({children:t,disabled:s=!1,value:e="",label:o="",className:n="",...i})=>{const a=d.useContext(Oe),{selectedValue:l,truncateOptions:c,addOptionValueAndLabel:r}=a||{};d.useEffect(()=>{r&&r(e,o,t)},[e,o,t]);const u=e||t;return $.jsx(ut,{value:u,disabled:s,as:d.Fragment,children:$.jsxs("li",{className:`
          juno-combobox-option 
          ${So}
          ${l===e?Oo:Co}
          ${s?"jn:cursor-not-allowed":""}
          ${n}
        `,...i,children:[l===u?$.jsx(Se,{icon:"check",size:"18",className:`${Eo}`}):"",$.jsx("span",{className:`
            ${s?wo:""}
            ${c?Io:""}
          `,children:t||o||e})]})})};try{Ge.displayName="ComboBoxOption",Ge.__docgenInfo={description:"",displayName:"ComboBoxOption",props:{children:{defaultValue:null,description:"Content to render inside the ComboBoxOption. Is specified should be string.",name:"children",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"If option is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"Option value.",name:"value",required:!1,type:{name:"string"}},label:{defaultValue:{value:""},description:"Option label.",name:"label",required:!1,type:{name:"string"}},className:{defaultValue:{value:""},description:"CSS class for the option.",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{Ke as C,Ge as a};
