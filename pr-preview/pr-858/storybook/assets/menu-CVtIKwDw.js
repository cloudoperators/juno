import{r as p,e as L}from"./index-DysCNOs_.js";import{U as $,y as D,h as V,b as v,k as j,g as K,C as k,I as _,l as C,a as A,u as G,q as H,p as q,c as J,d as T,T as W,i as z,j as X,e as d,f as g,r as Y,O as Q,_ as Z,M as N,D as B,m as ee,n as te}from"./keyboard-RYHMaleb.js";import{s as re}from"./use-text-value-BSk7WQuc.js";import{F as ae}from"./use-tree-walker-C6BvWJRT.js";var ne=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ne||{}),oe=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(oe||{}),ue=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(ue||{});function F(e,i=o=>o){let o=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,a=te(i(e.items.slice()),s=>s.dataRef.current.domRef.current),n=o?a.indexOf(o):null;return n===-1&&(n=null),{items:a,activeItemIndex:n}}let ie={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,i)=>{var o;let a=F(e),n=ee(i,{resolveItems:()=>a.items,resolveActiveIndex:()=>a.activeItemIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled});return{...e,...a,searchQuery:"",activeItemIndex:n,activationTrigger:(o=i.trigger)!=null?o:1}},3:(e,i)=>{let o=e.searchQuery!==""?0:1,a=e.searchQuery+i.value.toLowerCase(),n=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+o).concat(e.items.slice(0,e.activeItemIndex+o)):e.items).find(u=>{var t;return((t=u.dataRef.current.textValue)==null?void 0:t.startsWith(a))&&!u.dataRef.current.disabled}),s=n?e.items.indexOf(n):-1;return s===-1||s===e.activeItemIndex?{...e,searchQuery:a}:{...e,searchQuery:a,activeItemIndex:s,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,i)=>{let o=F(e,a=>[...a,{id:i.id,dataRef:i.dataRef}]);return{...e,...o}},6:(e,i)=>{let o=F(e,a=>{let n=a.findIndex(s=>s.id===i.id);return n!==-1&&a.splice(n,1),a});return{...e,...o,activationTrigger:1}}},O=p.createContext(null);O.displayName="MenuContext";function E(e){let i=p.useContext(O);if(i===null){let o=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,E),o}return i}function se(e,i){return K(i.type,ie,e,i)}let le=p.Fragment;function ce(e,i){let{__demoMode:o=!1,...a}=e,n=p.useReducer(se,{__demoMode:o,menuState:o?0:1,buttonRef:p.createRef(),itemsRef:p.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:s,itemsRef:u,buttonRef:t},l]=n,f=D(i);V([t,u],(R,h)=>{var c;l({type:1}),z(h,X.Loose)||(R.preventDefault(),(c=t.current)==null||c.focus())},s===0);let y=v(()=>{l({type:1})}),b=p.useMemo(()=>({open:s===0,close:y}),[s,y]),I={ref:f};return L.createElement(O.Provider,{value:n},L.createElement(j,{value:K(s,{0:T.Open,1:T.Closed})},k({ourProps:I,theirProps:a,slot:b,defaultTag:le,name:"Menu"})))}let de="button";function me(e,i){var o;let a=_(),{id:n=`headlessui-menu-button-${a}`,...s}=e,[u,t]=E("Menu.Button"),l=D(u.buttonRef,i),f=q(),y=v(c=>{switch(c.key){case d.Space:case d.Enter:case d.ArrowDown:c.preventDefault(),c.stopPropagation(),t({type:0}),f.nextFrame(()=>t({type:2,focus:g.First}));break;case d.ArrowUp:c.preventDefault(),c.stopPropagation(),t({type:0}),f.nextFrame(()=>t({type:2,focus:g.Last}));break}}),b=v(c=>{switch(c.key){case d.Space:c.preventDefault();break}}),I=v(c=>{if(Y(c.currentTarget))return c.preventDefault();e.disabled||(u.menuState===0?(t({type:1}),f.nextFrame(()=>{var x;return(x=u.buttonRef.current)==null?void 0:x.focus({preventScroll:!0})})):(c.preventDefault(),t({type:0})))}),R=p.useMemo(()=>({open:u.menuState===0}),[u]),h={ref:l,id:n,type:W(e,u.buttonRef),"aria-haspopup":"menu","aria-controls":(o=u.itemsRef.current)==null?void 0:o.id,"aria-expanded":u.menuState===0,onKeyDown:y,onKeyUp:b,onClick:I};return k({ourProps:h,theirProps:s,slot:R,defaultTag:de,name:"Menu.Button"})}let pe="div",fe=Q.RenderStrategy|Q.Static;function ve(e,i){var o,a;let n=_(),{id:s=`headlessui-menu-items-${n}`,...u}=e,[t,l]=E("Menu.Items"),f=D(t.itemsRef,i),y=H(t.itemsRef),b=q(),I=J(),R=I!==null?(I&T.Open)===T.Open:t.menuState===0;p.useEffect(()=>{let r=t.itemsRef.current;r&&t.menuState===0&&r!==(y==null?void 0:y.activeElement)&&r.focus({preventScroll:!0})},[t.menuState,t.itemsRef,y]),ae({container:t.itemsRef.current,enabled:t.menuState===0,accept(r){return r.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:r.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(r){r.setAttribute("role","none")}});let h=v(r=>{var S,P;switch(b.dispose(),r.key){case d.Space:if(t.searchQuery!=="")return r.preventDefault(),r.stopPropagation(),l({type:3,value:r.key});case d.Enter:if(r.preventDefault(),r.stopPropagation(),l({type:1}),t.activeItemIndex!==null){let{dataRef:m}=t.items[t.activeItemIndex];(P=(S=m.current)==null?void 0:S.domRef.current)==null||P.click()}B(t.buttonRef.current);break;case d.ArrowDown:return r.preventDefault(),r.stopPropagation(),l({type:2,focus:g.Next});case d.ArrowUp:return r.preventDefault(),r.stopPropagation(),l({type:2,focus:g.Previous});case d.Home:case d.PageUp:return r.preventDefault(),r.stopPropagation(),l({type:2,focus:g.First});case d.End:case d.PageDown:return r.preventDefault(),r.stopPropagation(),l({type:2,focus:g.Last});case d.Escape:r.preventDefault(),r.stopPropagation(),l({type:1}),A().nextFrame(()=>{var m;return(m=t.buttonRef.current)==null?void 0:m.focus({preventScroll:!0})});break;case d.Tab:r.preventDefault(),r.stopPropagation(),l({type:1}),A().nextFrame(()=>{Z(t.buttonRef.current,r.shiftKey?N.Previous:N.Next)});break;default:r.key.length===1&&(l({type:3,value:r.key}),b.setTimeout(()=>l({type:4}),350));break}}),c=v(r=>{switch(r.key){case d.Space:r.preventDefault();break}}),x=p.useMemo(()=>({open:t.menuState===0}),[t]),M={"aria-activedescendant":t.activeItemIndex===null||(o=t.items[t.activeItemIndex])==null?void 0:o.id,"aria-labelledby":(a=t.buttonRef.current)==null?void 0:a.id,id:s,onKeyDown:h,onKeyUp:c,role:"menu",tabIndex:0,ref:f};return k({ourProps:M,theirProps:u,slot:x,defaultTag:pe,features:fe,visible:R,name:"Menu.Items"})}let Ie=p.Fragment;function ye(e,i){let o=_(),{id:a=`headlessui-menu-item-${o}`,disabled:n=!1,...s}=e,[u,t]=E("Menu.Item"),l=u.activeItemIndex!==null?u.items[u.activeItemIndex].id===a:!1,f=p.useRef(null),y=D(i,f);C(()=>{if(u.__demoMode||u.menuState!==0||!l||u.activationTrigger===0)return;let m=A();return m.requestAnimationFrame(()=>{var w,U;(U=(w=f.current)==null?void 0:w.scrollIntoView)==null||U.call(w,{block:"nearest"})}),m.dispose},[u.__demoMode,f,l,u.menuState,u.activationTrigger,u.activeItemIndex]);let b=re(f),I=p.useRef({disabled:n,domRef:f,get textValue(){return b()}});C(()=>{I.current.disabled=n},[I,n]),C(()=>(t({type:5,id:a,dataRef:I}),()=>t({type:6,id:a})),[I,a]);let R=v(()=>{t({type:1})}),h=v(m=>{if(n)return m.preventDefault();t({type:1}),B(u.buttonRef.current)}),c=v(()=>{if(n)return t({type:2,focus:g.Nothing});t({type:2,focus:g.Specific,id:a})}),x=G(),M=v(m=>x.update(m)),r=v(m=>{x.wasMoved(m)&&(n||l||t({type:2,focus:g.Specific,id:a,trigger:0}))}),S=v(m=>{x.wasMoved(m)&&(n||l&&t({type:2,focus:g.Nothing}))}),P=p.useMemo(()=>({active:l,disabled:n,close:R}),[l,n,R]);return k({ourProps:{id:a,ref:y,role:"menuitem",tabIndex:n===!0?void 0:-1,"aria-disabled":n===!0?!0:void 0,disabled:void 0,onClick:h,onFocus:c,onPointerEnter:M,onMouseEnter:M,onPointerMove:r,onMouseMove:r,onPointerLeave:S,onMouseLeave:S},theirProps:s,slot:P,defaultTag:Ie,name:"Menu.Item"})}let ge=$(ce),be=$(me),Re=$(ve),xe=$(ye),Te=Object.assign(ge,{Button:be,Items:Re,Item:xe});export{Te as q};
