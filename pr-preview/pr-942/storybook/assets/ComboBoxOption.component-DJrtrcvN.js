import{j as M}from"./jsx-runtime-D_zvdyIk.js";import{r as d,e as z}from"./index-DI7CEG0L.js";import{u as wt,f as jt,a as Tt,d as Mt,h as $t,o as Rt,s as _t,g as Ft,k as Pt}from"./floating-ui.react-DcyZQMAW.js";import{L as Vt}from"./Label.component-DZ9JGTj_.js";import{F as Se}from"./FormHint.component-CxYdfrh1.js";import{I as ve}from"./Icon.component-DdNENVKs.js";import{S as At}from"./Spinner.component-NCyRlNFL.js";import{u as zt}from"./PortalProvider.component-B-e6Z3Hp.js";import{r as ie}from"./index-drFBv2uu.js";import{W as ot,a as F,a3 as Bt,m as Dt,c as D,u as ce,f as Be,_ as kt,K as me,Q as Lt,S as k,y as ye,n as re,Y as Nt,L as he,b as qt,d as Wt,j as Ee,v as Ht,I as we,U as Ut,$ as st,e as it,h as je,w as Kt,i as Yt,x as Jt,R as Gt,t as Qt,k as Xt,l as Zt,q as en,r as tn,s as nn,z as on,A as De,B as sn,C as ln,D as an,E as rn,M as un,G as dn,p as ge,O as ke,J as Y,H as cn,X as pn,a4 as fn}from"./portal-B7Wt-INv.js";import{l as Le,f as mn,a as hn,T as bn,u as vn,j as gn}from"./frozen-HENxtdPx.js";import{F as xn}from"./use-tree-walker-Br3o4ePJ.js";function de(e,o,t){let s=t.initialDeps??[],n;function i(){var l,a,p,u;let r;t.key&&((l=t.debug)!=null&&l.call(t))&&(r=Date.now());const v=e();if(!(v.length!==s.length||v.some((f,h)=>s[h]!==f)))return n;s=v;let m;if(t.key&&((a=t.debug)!=null&&a.call(t))&&(m=Date.now()),n=o(...v),t.key&&((p=t.debug)!=null&&p.call(t))){const f=Math.round((Date.now()-r)*100)/100,h=Math.round((Date.now()-m)*100)/100,A=h/16,R=(w,O)=>{for(w=String(w);w.length<O;)w=" "+w;return w};console.info(`%c⏱ ${R(h,5)} /${R(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*A,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(u=t==null?void 0:t.onChange)==null||u.call(t,n),n}return i.updateDeps=l=>{s=l},i}function Ce(e,o){if(e===void 0)throw new Error("Unexpected undefined");return e}const yn=(e,o)=>Math.abs(e-o)<=1,Sn=(e,o,t)=>{let s;return function(...n){e.clearTimeout(s),s=e.setTimeout(()=>o.apply(this,n),t)}},Ne=e=>{const{offsetWidth:o,offsetHeight:t}=e;return{width:o,height:t}},Cn=e=>e,On=e=>{const o=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),s=[];for(let n=o;n<=t;n++)s.push(n);return s},En=(e,o)=>{const t=e.scrollElement;if(!t)return;const s=e.targetWindow;if(!s)return;const n=l=>{const{width:a,height:p}=l;o({width:Math.round(a),height:Math.round(p)})};if(n(Ne(t)),!s.ResizeObserver)return()=>{};const i=new s.ResizeObserver(l=>{const a=()=>{const p=l[0];if(p!=null&&p.borderBoxSize){const u=p.borderBoxSize[0];if(u){n({width:u.inlineSize,height:u.blockSize});return}}n(Ne(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()});return i.observe(t,{box:"border-box"}),()=>{i.unobserve(t)}},qe={passive:!0},We=typeof window>"u"?!0:"onscrollend"in window,In=(e,o)=>{const t=e.scrollElement;if(!t)return;const s=e.targetWindow;if(!s)return;let n=0;const i=e.options.useScrollendEvent&&We?()=>{}:Sn(s,()=>{o(n,!1)},e.options.isScrollingResetDelay),l=r=>()=>{const{horizontal:v,isRtl:g}=e.options;n=v?t.scrollLeft*(g&&-1||1):t.scrollTop,i(),o(n,r)},a=l(!0),p=l(!1);p(),t.addEventListener("scroll",a,qe);const u=e.options.useScrollendEvent&&We;return u&&t.addEventListener("scrollend",p,qe),()=>{t.removeEventListener("scroll",a),u&&t.removeEventListener("scrollend",p)}},wn=(e,o,t)=>{if(o!=null&&o.borderBoxSize){const s=o.borderBoxSize[0];if(s)return Math.round(s[t.options.horizontal?"inlineSize":"blockSize"])}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},jn=(e,{adjustments:o=0,behavior:t},s)=>{var n,i;const l=e+o;(i=(n=s.scrollElement)==null?void 0:n.scrollTo)==null||i.call(n,{[s.options.horizontal?"left":"top"]:l,behavior:t})};class Tn{constructor(o){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const s=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(n=>{n.forEach(i=>{const l=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var n;(n=s())==null||n.disconnect(),t=null},observe:n=>{var i;return(i=s())==null?void 0:i.observe(n,{box:"border-box"})},unobserve:n=>{var i;return(i=s())==null?void 0:i.unobserve(n)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([s,n])=>{typeof n>"u"&&delete t[s]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Cn,rangeExtractor:On,onChange:()=>{},measureElement:wn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var s,n;(n=(s=this.options).onChange)==null||n.call(s,this,t)},this.maybeNotify=de(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const s=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==s){if(this.cleanup(),!s){this.maybeNotify();return}this.scrollElement=s,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(n=>{this.observer.observe(n)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(n,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,s)=>{const n=new Map,i=new Map;for(let l=s-1;l>=0;l--){const a=t[l];if(n.has(a.lane))continue;const p=i.get(a.lane);if(p==null||a.end>p.end?i.set(a.lane,a):a.end<p.end&&n.set(a.lane,!0),n.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((l,a)=>l.end===a.end?l.index-a.index:l.end-a.end)[0]:void 0},this.getMeasurementOptions=de(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,s,n,i,l)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:s,scrollMargin:n,getItemKey:i,enabled:l}),{key:!1}),this.getMeasurements=de(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:s,scrollMargin:n,getItemKey:i,enabled:l},a)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(r=>{this.itemSizeCache.set(r.key,r.size)}));const p=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,p);for(let r=p;r<t;r++){const v=i(r),g=this.options.lanes===1?u[r-1]:this.getFurthestMeasurement(u,r),m=g?g.end+this.options.gap:s+n,f=a.get(v),h=typeof f=="number"?f:this.options.estimateSize(r),A=m+h,R=g?g.lane:r%this.options.lanes;u[r]={index:r,start:m,size:h,end:A,key:v,lane:R}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=de(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,s,n,i)=>this.range=t.length>0&&s>0?Mn({measurements:t,outerSize:s,scrollOffset:n,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=de(()=>{let t=null,s=null;const n=this.calculateRange();return n&&(t=n.startIndex,s=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,s]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,s]},(t,s,n,i,l)=>i===null||l===null?[]:t({startIndex:i,endIndex:l,overscan:s,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const s=this.options.indexAttribute,n=t.getAttribute(s);return n?parseInt(n,10):(console.warn(`Missing attribute name '${s}={index}' on measured element.`),-1)},this._measureElement=(t,s)=>{const n=this.indexFromElement(t),i=this.measurementsCache[n];if(!i)return;const l=i.key,a=this.elementsCache.get(l);a!==t&&(a&&this.observer.unobserve(a),this.observer.observe(t),this.elementsCache.set(l,t)),t.isConnected&&this.resizeItem(n,this.options.measureElement(t,s,this))},this.resizeItem=(t,s)=>{const n=this.measurementsCache[t];if(!n)return;const i=this.itemSizeCache.get(n.key)??n.size,l=s-i;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,l,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,s)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((s,n)=>{s.isConnected||(this.observer.unobserve(s),this.elementsCache.delete(n))});return}this._measureElement(t,void 0)},this.getVirtualItems=de(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,s)=>{const n=[];for(let i=0,l=t.length;i<l;i++){const a=t[i],p=s[a];n.push(p)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const s=this.getMeasurements();if(s.length!==0)return Ce(s[lt(0,s.length-1,n=>Ce(s[n]).start,t)])},this.getOffsetForAlignment=(t,s,n=0)=>{const i=this.getSize(),l=this.getScrollOffset();s==="auto"&&(s=t>=l+i?"end":"start"),s==="center"?t+=(n-i)/2:s==="end"&&(t-=i);const a=this.getTotalSize()-i;return Math.max(Math.min(a,t),0)},this.getOffsetForIndex=(t,s="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const n=this.measurementsCache[t];if(!n)return;const i=this.getSize(),l=this.getScrollOffset();if(s==="auto")if(n.end>=l+i-this.options.scrollPaddingEnd)s="end";else if(n.start<=l+this.options.scrollPaddingStart)s="start";else return[l,s];const a=s==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(a,s,n.size),s]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:s="start",behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,s),{adjustments:void 0,behavior:n})},this.scrollToIndex=(t,{align:s="auto",behavior:n}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const i=this.getOffsetForIndex(t,s);if(!i)return;const[l,a]=i;this._scrollToOffset(l,{adjustments:void 0,behavior:n}),n!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[u]=Ce(this.getOffsetForIndex(t,a)),r=this.getScrollOffset();yn(u,r)||this.scrollToIndex(t,{align:a,behavior:n})}else this.scrollToIndex(t,{align:a,behavior:n})}))},this.scrollBy=(t,{behavior:s}={})=>{this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:s})},this.getTotalSize=()=>{var t;const s=this.getMeasurements();let n;if(s.length===0)n=this.options.paddingStart;else if(this.options.lanes===1)n=((t=s[s.length-1])==null?void 0:t.end)??0;else{const i=Array(this.options.lanes).fill(null);let l=s.length-1;for(;l>=0&&i.some(a=>a===null);){const a=s[l];i[a.lane]===null&&(i[a.lane]=a.end),l--}n=Math.max(...i.filter(a=>a!==null))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:s,behavior:n})=>{this.options.scrollToFn(t,{behavior:n,adjustments:s},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(o)}}const lt=(e,o,t,s)=>{for(;e<=o;){const n=(e+o)/2|0,i=t(n);if(i<s)e=n+1;else if(i>s)o=n-1;else return n}return e>0?e-1:0};function Mn({measurements:e,outerSize:o,scrollOffset:t,lanes:s}){const n=e.length-1,i=p=>e[p].start;if(e.length<=s)return{startIndex:0,endIndex:n};let l=lt(0,n,i,t),a=l;if(s===1)for(;a<n&&e[a].end<t+o;)a++;else if(s>1){const p=Array(s).fill(0);for(;a<n&&p.some(r=>r<t+o);){const r=e[a];p[r.lane]=r.end,a++}const u=Array(s).fill(t+o);for(;l>=0&&u.some(r=>r>=t);){const r=e[l];u[r.lane]=r.start,l--}l=Math.max(0,l-l%s),a=Math.min(n,a+(s-1-a%s))}return{startIndex:l,endIndex:a}}const He=typeof document<"u"?d.useLayoutEffect:d.useEffect;function $n(e){const o=d.useReducer(()=>({}),{})[1],t={...e,onChange:(n,i)=>{var l;i?ie.flushSync(o):o(),(l=e.onChange)==null||l.call(e,n,i)}},[s]=d.useState(()=>new Tn(t));return s.setOptions(t),He(()=>s._didMount(),[]),He(()=>s._willUpdate()),s}function Rn(e){return $n({observeElementRect:En,observeElementOffset:In,scrollToFn:jn,...e})}function _n(e,o,t,s){let n=ot(t);d.useEffect(()=>{e=e??window;function i(l){n.current(l)}return e.addEventListener(o,i,s),()=>e.removeEventListener(o,i,s)},[e,o,s])}function at(e){let o=d.useRef({value:"",selectionStart:null,selectionEnd:null});return _n(e,"blur",t=>{let s=t.target;s instanceof HTMLInputElement&&(o.current={value:s.value,selectionStart:s.selectionStart,selectionEnd:s.selectionEnd})}),F(()=>{if(document.activeElement!==e&&e instanceof HTMLInputElement&&e.isConnected){if(e.focus({preventScroll:!0}),e.value!==o.current.value)e.setSelectionRange(e.value.length,e.value.length);else{let{selectionStart:t,selectionEnd:s}=o.current;t!==null&&s!==null&&e.setSelectionRange(t,s)}o.current={value:"",selectionStart:null,selectionEnd:null}}})}function Ue(e,o){let t=d.useRef([]),s=F(e);d.useEffect(()=>{let n=[...t.current];for(let[i,l]of o.entries())if(t.current[i]!==l){let a=s(o,n);return t.current=o,a}},[s,...o])}function Fn(e){function o(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",o))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",o),o())}let ae=[];Fn(()=>{function e(o){if(!(o.target instanceof HTMLElement)||o.target===document.body||ae[0]===o.target)return;let t=o.target;t=t.closest(Bt),ae.unshift(t??o.target),ae=ae.filter(s=>s!=null&&s.isConnected),ae.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});var Te=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(Te||{}),Pn=Object.defineProperty,Vn=(e,o,t)=>o in e?Pn(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,Ke=(e,o,t)=>(Vn(e,typeof o!="symbol"?o+"":o,t),t),S=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(S||{}),Q=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Q||{}),le=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(le||{}),rt=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.SetTyping=3]="SetTyping",e[e.RegisterOption=4]="RegisterOption",e[e.UnregisterOption=5]="UnregisterOption",e[e.DefaultToFirstOption=6]="DefaultToFirstOption",e[e.SetActivationTrigger=7]="SetActivationTrigger",e[e.UpdateVirtualConfiguration=8]="UpdateVirtualConfiguration",e[e.SetInputElement=9]="SetInputElement",e[e.SetButtonElement=10]="SetButtonElement",e[e.SetOptionsElement=11]="SetOptionsElement",e))(rt||{});function Oe(e,o=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,s=o(e.options.slice()),n=s.length>0&&s[0].dataRef.current.order!==null?s.sort((l,a)=>l.dataRef.current.order-a.dataRef.current.order):kt(s,l=>l.dataRef.current.domRef.current),i=t?n.indexOf(t):null;return i===-1&&(i=null),{options:n,activeOptionIndex:i}}let An={1(e){var o;return(o=e.dataRef.current)!=null&&o.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(e){var o,t;if((o=e.dataRef.current)!=null&&o.disabled||e.comboboxState===0)return e;if((t=e.dataRef.current)!=null&&t.value){let s=e.dataRef.current.calculateIndex(e.dataRef.current.value);if(s!==-1)return{...e,activeOptionIndex:s,comboboxState:0,__demoMode:!1}}return{...e,comboboxState:0,__demoMode:!1}},3(e,o){return e.isTyping===o.isTyping?e:{...e,isTyping:o.isTyping}},2(e,o){var t,s,n,i;if((t=e.dataRef.current)!=null&&t.disabled||e.optionsElement&&!((s=e.dataRef.current)!=null&&s.optionsPropsRef.current.static)&&e.comboboxState===1)return e;if(e.virtual){let{options:u,disabled:r}=e.virtual,v=o.focus===D.Specific?o.idx:Be(o,{resolveItems:()=>u,resolveActiveIndex:()=>{var m,f;return(f=(m=e.activeOptionIndex)!=null?m:u.findIndex(h=>!r(h)))!=null?f:null},resolveDisabled:r,resolveId(){throw new Error("Function not implemented.")}}),g=(n=o.trigger)!=null?n:2;return e.activeOptionIndex===v&&e.activationTrigger===g?e:{...e,activeOptionIndex:v,activationTrigger:g,isTyping:!1,__demoMode:!1}}let l=Oe(e);if(l.activeOptionIndex===null){let u=l.options.findIndex(r=>!r.dataRef.current.disabled);u!==-1&&(l.activeOptionIndex=u)}let a=o.focus===D.Specific?o.idx:Be(o,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled}),p=(i=o.trigger)!=null?i:2;return e.activeOptionIndex===a&&e.activationTrigger===p?e:{...e,...l,isTyping:!1,activeOptionIndex:a,activationTrigger:p,__demoMode:!1}},4:(e,o)=>{var t,s,n,i;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:[...e.options,o.payload]};let l=o.payload,a=Oe(e,u=>(u.push(l),u));e.activeOptionIndex===null&&(n=(s=e.dataRef.current).isSelected)!=null&&n.call(s,o.payload.dataRef.current.value)&&(a.activeOptionIndex=a.options.indexOf(l));let p={...e,...a,activationTrigger:2};return(i=e.dataRef.current)!=null&&i.__demoMode&&e.dataRef.current.value===void 0&&(p.activeOptionIndex=0),p},5:(e,o)=>{var t;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:e.options.filter(n=>n.id!==o.id)};let s=Oe(e,n=>{let i=n.findIndex(l=>l.id===o.id);return i!==-1&&n.splice(i,1),n});return{...e,...s,activationTrigger:2}},6:(e,o)=>e.defaultToFirstOption===o.value?e:{...e,defaultToFirstOption:o.value},7:(e,o)=>e.activationTrigger===o.trigger?e:{...e,activationTrigger:o.trigger},8:(e,o)=>{var t,s;if(e.virtual===null)return{...e,virtual:{options:o.options,disabled:(t=o.disabled)!=null?t:()=>!1}};if(e.virtual.options===o.options&&e.virtual.disabled===o.disabled)return e;let n=e.activeOptionIndex;if(e.activeOptionIndex!==null){let i=o.options.indexOf(e.virtual.options[e.activeOptionIndex]);i!==-1?n=i:n=null}return{...e,activeOptionIndex:n,virtual:{options:o.options,disabled:(s=o.disabled)!=null?s:()=>!1}}},9:(e,o)=>e.inputElement===o.element?e:{...e,inputElement:o.element},10:(e,o)=>e.buttonElement===o.element?e:{...e,buttonElement:o.element},11:(e,o)=>e.optionsElement===o.element?e:{...e,optionsElement:o.element}};class Me extends Dt{constructor(){super(...arguments),Ke(this,"actions",{onChange:o=>{let{onChange:t,compare:s,mode:n,value:i}=this.state.dataRef.current;return ce(n,{0:()=>t==null?void 0:t(o),1:()=>{let l=i.slice(),a=l.findIndex(p=>s(p,o));return a===-1?l.push(o):l.splice(a,1),t==null?void 0:t(l)}})},registerOption:(o,t)=>(this.send({type:4,payload:{id:o,dataRef:t}}),()=>{this.state.activeOptionIndex===this.state.dataRef.current.calculateIndex(t.current.value)&&this.send({type:6,value:!0}),this.send({type:5,id:o})}),goToOption:(o,t)=>(this.send({type:6,value:!1}),this.send({type:2,...o,trigger:t})),setIsTyping:o=>{this.send({type:3,isTyping:o})},closeCombobox:()=>{var o,t;this.send({type:1}),this.send({type:6,value:!1}),(t=(o=this.state.dataRef.current).onClose)==null||t.call(o)},openCombobox:()=>{this.send({type:0}),this.send({type:6,value:!0})},setActivationTrigger:o=>{this.send({type:7,trigger:o})},selectActiveOption:()=>{let o=this.selectors.activeOptionIndex(this.state);if(o!==null){if(this.actions.setIsTyping(!1),this.state.virtual)this.actions.onChange(this.state.virtual.options[o]);else{let{dataRef:t}=this.state.options[o];this.actions.onChange(t.current.value)}this.actions.goToOption({focus:D.Specific,idx:o})}},setInputElement:o=>{this.send({type:9,element:o})},setButtonElement:o=>{this.send({type:10,element:o})},setOptionsElement:o=>{this.send({type:11,element:o})}}),Ke(this,"selectors",{activeDescendantId:o=>{var t,s;let n=this.selectors.activeOptionIndex(o);if(n!==null)return o.virtual?(s=o.options.find(i=>!i.dataRef.current.disabled&&o.dataRef.current.compare(i.dataRef.current.value,o.virtual.options[n])))==null?void 0:s.id:(t=o.options[n])==null?void 0:t.id},activeOptionIndex:o=>{if(o.defaultToFirstOption&&o.activeOptionIndex===null&&(o.virtual?o.virtual.options.length>0:o.options.length>0)){if(o.virtual){let{options:s,disabled:n}=o.virtual,i=s.findIndex(l=>{var a;return!((a=n==null?void 0:n(l))!=null&&a)});if(i!==-1)return i}let t=o.options.findIndex(s=>!s.dataRef.current.disabled);if(t!==-1)return t}return o.activeOptionIndex},activeOption:o=>{var t,s;let n=this.selectors.activeOptionIndex(o);return n===null?null:o.virtual?o.virtual.options[n??0]:(s=(t=o.options[n])==null?void 0:t.dataRef.current.value)!=null?s:null},isActive:(o,t,s)=>{var n;let i=this.selectors.activeOptionIndex(o);return i===null?!1:o.virtual?i===o.dataRef.current.calculateIndex(t):((n=o.options[i])==null?void 0:n.id)===s},shouldScrollIntoView:(o,t,s)=>!(o.virtual||o.__demoMode||o.comboboxState!==0||o.activationTrigger===0||!this.selectors.isActive(o,t,s))})}static new({virtual:o=null,__demoMode:t=!1}={}){var s;return new Me({dataRef:{current:{}},comboboxState:t?0:1,isTyping:!1,options:[],virtual:o?{options:o.options,disabled:(s=o.disabled)!=null?s:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:t})}reduce(o,t){return ce(t.type,An,o,t)}}const ut=d.createContext(null);function be(e){let o=d.useContext(ut);if(o===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,dt),t}return o}function dt({virtual:e=null,__demoMode:o=!1}={}){return d.useMemo(()=>Me.new({virtual:e,__demoMode:o}),[])}let fe=d.createContext(null);fe.displayName="ComboboxDataContext";function pe(e){let o=d.useContext(fe);if(o===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,pe),t}return o}let ct=d.createContext(null);function zn(e){let o=be("VirtualProvider"),t=pe("VirtualProvider"),{options:s}=t.virtual,n=k(o,m=>m.optionsElement),[i,l]=d.useMemo(()=>{let m=n;if(!m)return[0,0];let f=window.getComputedStyle(m);return[parseFloat(f.paddingBlockStart||f.paddingTop),parseFloat(f.paddingBlockEnd||f.paddingBottom)]},[n]),a=Rn({enabled:s.length!==0,scrollPaddingStart:i,scrollPaddingEnd:l,count:s.length,estimateSize(){return 40},getScrollElement(){return o.state.optionsElement},overscan:12}),[p,u]=d.useState(0);re(()=>{u(m=>m+1)},[s]);let r=a.getVirtualItems(),v=k(o,m=>m.activationTrigger===le.Pointer),g=k(o,o.selectors.activeOptionIndex);return r.length===0?null:z.createElement(ct.Provider,{value:a},z.createElement("div",{style:{position:"relative",width:"100%",height:`${a.getTotalSize()}px`},ref:m=>{m&&(v||g!==null&&s.length>g&&a.scrollToIndex(g))}},r.map(m=>{var f;return z.createElement(d.Fragment,{key:m.key},z.cloneElement((f=e.children)==null?void 0:f.call(e,{...e.slot,option:s[m.index]}),{key:`${p}-${m.key}`,"data-index":m.index,"aria-setsize":s.length,"aria-posinset":m.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${m.start}px)`,overflowAnchor:"none"}}))})))}let Bn=d.Fragment;function Dn(e,o){let t=ln(),{value:s,defaultValue:n,onChange:i,form:l,name:a,by:p,invalid:u=!1,disabled:r=t||!1,onClose:v,__demoMode:g=!1,multiple:m=!1,immediate:f=!1,virtual:h=null,nullable:A,...R}=e,w=hn(n),[O=m?[]:void 0,q]=bn(s,i,w),T=dt({virtual:h,__demoMode:g}),_=d.useRef({static:!1,hold:!1}),$=vn(p),P=F(x=>h?p===null?h.options.indexOf(x):h.options.findIndex(V=>$(V,x)):T.state.options.findIndex(V=>$(V.dataRef.current.value,x))),B=d.useCallback(x=>ce(L.mode,{[Q.Multi]:()=>O.some(V=>$(V,x)),[Q.Single]:()=>$(O,x)}),[O]),J=k(T,x=>x.virtual),b=F(()=>v==null?void 0:v()),L=d.useMemo(()=>({__demoMode:g,immediate:f,optionsPropsRef:_,value:O,defaultValue:w,disabled:r,invalid:u,mode:m?Q.Multi:Q.Single,virtual:h?J:null,onChange:q,isSelected:B,calculateIndex:P,compare:$,onClose:b}),[O,w,r,u,m,q,B,g,T,h,J,b]);re(()=>{var x;h&&T.send({type:rt.UpdateVirtualConfiguration,options:h.options,disabled:(x=h.disabled)!=null?x:null})},[h,h==null?void 0:h.options,h==null?void 0:h.disabled]),re(()=>{T.state.dataRef.current=L},[L]);let[N,G,E,U]=k(T,x=>[x.comboboxState,x.buttonElement,x.inputElement,x.optionsElement]),se=N===S.Open;an(se,[G,E,U],()=>T.actions.closeCombobox());let ee=k(T,T.selectors.activeOptionIndex),X=k(T,T.selectors.activeOption),te=d.useMemo(()=>({open:N===S.Open,disabled:r,invalid:u,activeIndex:ee,activeOption:X,value:O}),[L,r,O,u,X,N]),[ne,W]=rn(),oe=o===null?{}:{ref:o},c=d.useCallback(()=>{if(w!==void 0)return q==null?void 0:q(w)},[q,w]),H=he();return z.createElement(W,{value:ne,props:{htmlFor:E==null?void 0:E.id},slot:{open:N===S.Open,disabled:r}},z.createElement(un,null,z.createElement(fe.Provider,{value:L},z.createElement(ut.Provider,{value:T},z.createElement(dn,{value:ce(N,{[S.Open]:ge.Open,[S.Closed]:ge.Closed})},a!=null&&z.createElement(gn,{disabled:r,data:O!=null?{[a]:O}:{},form:l,onReset:c}),H({ourProps:oe,theirProps:R,slot:te,defaultTag:Bn,name:"Combobox"}))))))}let kn="input";function Ln(e,o){var t,s;let n=be("Combobox.Input"),i=pe("Combobox.Input"),l=d.useId(),a=qt(),{id:p=a||`headlessui-combobox-input-${l}`,onChange:u,displayValue:r,disabled:v=i.disabled||!1,autoFocus:g=!1,type:m="text",...f}=e,[h]=k(n,c=>[c.inputElement]),A=d.useRef(null),R=ye(A,o,Wt(),n.actions.setInputElement),w=Ee(h),[O,q]=k(n,c=>[c.comboboxState,c.isTyping]),T=Ht(),_=F(()=>{n.actions.onChange(null),n.state.optionsElement&&(n.state.optionsElement.scrollTop=0),n.actions.goToOption({focus:D.Nothing})}),$=d.useMemo(()=>{var c;return typeof r=="function"&&i.value!==void 0?(c=r(i.value))!=null?c:"":typeof i.value=="string"?i.value:""},[i.value,r]);Ue(([c,H],[x,V])=>{if(n.state.isTyping)return;let I=A.current;I&&((V===S.Open&&H===S.Closed||c!==x)&&(I.value=c),requestAnimationFrame(()=>{if(n.state.isTyping||!I||(w==null?void 0:w.activeElement)!==I)return;let{selectionStart:K,selectionEnd:C}=I;Math.abs((C??0)-(K??0))===0&&K===0&&I.setSelectionRange(I.value.length,I.value.length)}))},[$,O,w,q]),Ue(([c],[H])=>{if(c===S.Open&&H===S.Closed){if(n.state.isTyping)return;let x=A.current;if(!x)return;let V=x.value,{selectionStart:I,selectionEnd:K,selectionDirection:C}=x;x.value="",x.value=V,C!==null?x.setSelectionRange(I,K,C):x.setSelectionRange(I,K)}},[O]);let P=d.useRef(!1),B=F(()=>{P.current=!0}),J=F(()=>{T.nextFrame(()=>{P.current=!1})}),b=F(c=>{switch(n.actions.setIsTyping(!0),c.key){case Y.Enter:if(n.state.comboboxState!==S.Open||P.current)return;if(c.preventDefault(),c.stopPropagation(),n.selectors.activeOptionIndex(n.state)===null){n.actions.closeCombobox();return}n.actions.selectActiveOption(),i.mode===Q.Single&&n.actions.closeCombobox();break;case Y.ArrowDown:return c.preventDefault(),c.stopPropagation(),ce(n.state.comboboxState,{[S.Open]:()=>n.actions.goToOption({focus:D.Next}),[S.Closed]:()=>n.actions.openCombobox()});case Y.ArrowUp:return c.preventDefault(),c.stopPropagation(),ce(n.state.comboboxState,{[S.Open]:()=>n.actions.goToOption({focus:D.Previous}),[S.Closed]:()=>{ie.flushSync(()=>n.actions.openCombobox()),i.value||n.actions.goToOption({focus:D.Last})}});case Y.Home:if(c.shiftKey)break;return c.preventDefault(),c.stopPropagation(),n.actions.goToOption({focus:D.First});case Y.PageUp:return c.preventDefault(),c.stopPropagation(),n.actions.goToOption({focus:D.First});case Y.End:if(c.shiftKey)break;return c.preventDefault(),c.stopPropagation(),n.actions.goToOption({focus:D.Last});case Y.PageDown:return c.preventDefault(),c.stopPropagation(),n.actions.goToOption({focus:D.Last});case Y.Escape:return n.state.comboboxState!==S.Open?void 0:(c.preventDefault(),n.state.optionsElement&&!i.optionsPropsRef.current.static&&c.stopPropagation(),i.mode===Q.Single&&i.value===null&&_(),n.actions.closeCombobox());case Y.Tab:if(n.state.comboboxState!==S.Open)return;i.mode===Q.Single&&n.state.activationTrigger!==le.Focus&&n.actions.selectActiveOption(),n.actions.closeCombobox();break}}),L=F(c=>{u==null||u(c),i.mode===Q.Single&&c.target.value===""&&_(),n.actions.openCombobox()}),N=F(c=>{var H,x,V;let I=(H=c.relatedTarget)!=null?H:ae.find(K=>K!==c.currentTarget);if(!((x=n.state.optionsElement)!=null&&x.contains(I))&&!((V=n.state.buttonElement)!=null&&V.contains(I))&&n.state.comboboxState===S.Open)return c.preventDefault(),i.mode===Q.Single&&i.value===null&&_(),n.actions.closeCombobox()}),G=F(c=>{var H,x,V;let I=(H=c.relatedTarget)!=null?H:ae.find(K=>K!==c.currentTarget);(x=n.state.buttonElement)!=null&&x.contains(I)||(V=n.state.optionsElement)!=null&&V.contains(I)||i.disabled||i.immediate&&n.state.comboboxState!==S.Open&&T.microTask(()=>{ie.flushSync(()=>n.actions.openCombobox()),n.actions.setActivationTrigger(le.Focus)})}),E=we(),U=Ut(),{isFocused:se,focusProps:ee}=st({autoFocus:g}),{isHovered:X,hoverProps:te}=it({isDisabled:v}),ne=k(n,c=>c.optionsElement),W=d.useMemo(()=>({open:O===S.Open,disabled:v,invalid:i.invalid,hover:X,focus:se,autofocus:g}),[i,X,se,g,v,i.invalid]),oe=je({ref:R,id:p,role:"combobox",type:m,"aria-controls":ne==null?void 0:ne.id,"aria-expanded":O===S.Open,"aria-activedescendant":k(n,n.selectors.activeDescendantId),"aria-labelledby":E,"aria-describedby":U,"aria-autocomplete":"list",defaultValue:(s=(t=e.defaultValue)!=null?t:i.defaultValue!==void 0?r==null?void 0:r(i.defaultValue):null)!=null?s:i.defaultValue,disabled:v||void 0,autoFocus:g,onCompositionStart:B,onCompositionEnd:J,onKeyDown:b,onChange:L,onFocus:G,onBlur:N},ee,te);return he()({ourProps:oe,theirProps:f,slot:W,defaultTag:kn,name:"Combobox.Input"})}let Nn="button";function qn(e,o){let t=be("Combobox.Button"),s=pe("Combobox.Button"),[n,i]=d.useState(null),l=ye(o,i,t.actions.setButtonElement),a=d.useId(),{id:p=`headlessui-combobox-button-${a}`,disabled:u=s.disabled||!1,autoFocus:r=!1,...v}=e,g=k(t,b=>b.inputElement),m=at(g),f=F(b=>{switch(b.key){case Y.Space:case Y.Enter:b.preventDefault(),b.stopPropagation(),t.state.comboboxState===S.Closed&&ie.flushSync(()=>t.actions.openCombobox()),m();return;case Y.ArrowDown:b.preventDefault(),b.stopPropagation(),t.state.comboboxState===S.Closed&&(ie.flushSync(()=>t.actions.openCombobox()),t.state.dataRef.current.value||t.actions.goToOption({focus:D.First})),m();return;case Y.ArrowUp:b.preventDefault(),b.stopPropagation(),t.state.comboboxState===S.Closed&&(ie.flushSync(()=>t.actions.openCombobox()),t.state.dataRef.current.value||t.actions.goToOption({focus:D.Last})),m();return;case Y.Escape:if(t.state.comboboxState!==S.Open)return;b.preventDefault(),t.state.optionsElement&&!s.optionsPropsRef.current.static&&b.stopPropagation(),ie.flushSync(()=>t.actions.closeCombobox()),m();return;default:return}}),h=F(b=>{b.preventDefault(),!cn(b.currentTarget)&&(b.button===Te.Left&&(t.state.comboboxState===S.Open?t.actions.closeCombobox():t.actions.openCombobox()),m())}),A=we([p]),{isFocusVisible:R,focusProps:w}=st({autoFocus:r}),{isHovered:O,hoverProps:q}=it({isDisabled:u}),{pressed:T,pressProps:_}=Kt({disabled:u}),[$,P]=k(t,b=>[b.comboboxState,b.optionsElement]),B=d.useMemo(()=>({open:$===S.Open,active:T||$===S.Open,disabled:u,invalid:s.invalid,value:s.value,hover:O,focus:R}),[s,O,R,T,u,$]),J=je({ref:l,id:p,type:Yt(e,n),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":P==null?void 0:P.id,"aria-expanded":$===S.Open,"aria-labelledby":A,disabled:u||void 0,autoFocus:r,onMouseDown:h,onKeyDown:f},w,q,_);return he()({ourProps:J,theirProps:v,slot:B,defaultTag:Nn,name:"Combobox.Button"})}let Wn="div",Hn=ke.RenderStrategy|ke.Static;function Un(e,o){var t,s,n;let i=d.useId(),{id:l=`headlessui-combobox-options-${i}`,hold:a=!1,anchor:p,portal:u=!1,modal:r=!0,transition:v=!1,...g}=e,m=be("Combobox.Options"),f=pe("Combobox.Options"),h=Jt(p);h&&(u=!0);let[A,R]=Gt(h),[w,O]=d.useState(null),q=Qt(),T=ye(o,h?A:null,m.actions.setOptionsElement,O),[_,$,P,B,J]=k(m,C=>[C.comboboxState,C.inputElement,C.buttonElement,C.optionsElement,C.activationTrigger]),b=Ee($||P),L=Ee(B),N=Xt(),[G,E]=Zt(v,w,N!==null?(N&ge.Open)===ge.Open:_===S.Open);en(G,$,m.actions.closeCombobox);let U=f.__demoMode?!1:r&&_===S.Open;tn(U,L);let se=f.__demoMode?!1:r&&_===S.Open;nn(se,{allowed:d.useCallback(()=>[$,P,B],[$,P,B])}),re(()=>{var C;f.optionsPropsRef.current.static=(C=e.static)!=null?C:!1},[f.optionsPropsRef,e.static]),re(()=>{f.optionsPropsRef.current.hold=a},[f.optionsPropsRef,a]),xn(_===S.Open,{container:B,accept(C){return C.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:C.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(C){C.setAttribute("role","none")}});let ee=we([P==null?void 0:P.id]),X=d.useMemo(()=>({open:_===S.Open,option:void 0}),[_]),te=F(()=>{m.actions.setActivationTrigger(le.Pointer)}),ne=F(C=>{C.preventDefault(),m.actions.setActivationTrigger(le.Pointer)}),W=je(h?q():{},{"aria-labelledby":ee,role:"listbox","aria-multiselectable":f.mode===Q.Multi?!0:void 0,id:l,ref:T,style:{...g.style,...R,"--input-width":De($,!0).width,"--button-width":De(P,!0).width},onWheel:J===le.Pointer?void 0:te,onMouseDown:ne,...on(E)}),oe=G&&_===S.Closed,c=Le(oe,(t=f.virtual)==null?void 0:t.options),H=Le(oe,f.value),x=F(C=>f.compare(H,C)),V=d.useMemo(()=>{if(!f.virtual)return f;if(c===void 0)throw new Error("Missing `options` in virtual mode");return c!==f.virtual.options?{...f,virtual:{...f.virtual,options:c}}:f},[f,c,(s=f.virtual)==null?void 0:s.options]);f.virtual&&Object.assign(g,{children:z.createElement(fe.Provider,{value:V},z.createElement(zn,{slot:X},g.children))});let I=he(),K=d.useMemo(()=>f.mode===Q.Multi?f:{...f,isSelected:x},[f,x]);return z.createElement(sn,{enabled:u?e.static||G:!1,ownerDocument:b},z.createElement(fe.Provider,{value:K},I({ourProps:W,theirProps:{...g,children:z.createElement(mn,{freeze:oe},typeof g.children=="function"?(n=g.children)==null?void 0:n.call(g,X):g.children)},slot:X,defaultTag:Wn,features:Hn,visible:G,name:"Combobox.Options"})))}let Kn="div";function Yn(e,o){var t,s,n;let i=pe("Combobox.Option"),l=be("Combobox.Option"),a=d.useId(),{id:p=`headlessui-combobox-option-${a}`,value:u,disabled:r=(n=(s=(t=i.virtual)==null?void 0:t.disabled)==null?void 0:s.call(t,u))!=null?n:!1,order:v=null,...g}=e,[m]=k(l,E=>[E.inputElement]),f=at(m),h=k(l,d.useCallback(E=>l.selectors.isActive(E,u,p),[u,p])),A=i.isSelected(u),R=d.useRef(null),w=ot({disabled:r,value:u,domRef:R,order:v}),O=d.useContext(ct),q=ye(o,R,O?O.measureElement:null),T=F(()=>{l.actions.setIsTyping(!1),l.actions.onChange(u)});re(()=>l.actions.registerOption(p,w),[w,p]);let _=k(l,d.useCallback(E=>l.selectors.shouldScrollIntoView(E,u,p),[u,p]));re(()=>{if(_)return pn().requestAnimationFrame(()=>{var E,U;(U=(E=R.current)==null?void 0:E.scrollIntoView)==null||U.call(E,{block:"nearest"})})},[_,R]);let $=F(E=>{E.preventDefault(),E.button===Te.Left&&(r||(T(),fn()||requestAnimationFrame(()=>f()),i.mode===Q.Single&&l.actions.closeCombobox()))}),P=F(()=>{if(r)return l.actions.goToOption({focus:D.Nothing});let E=i.calculateIndex(u);l.actions.goToOption({focus:D.Specific,idx:E})}),B=Nt(),J=F(E=>B.update(E)),b=F(E=>{if(!B.wasMoved(E)||r||h)return;let U=i.calculateIndex(u);l.actions.goToOption({focus:D.Specific,idx:U},le.Pointer)}),L=F(E=>{B.wasMoved(E)&&(r||h&&(i.optionsPropsRef.current.hold||l.actions.goToOption({focus:D.Nothing})))}),N=d.useMemo(()=>({active:h,focus:h,selected:A,disabled:r}),[h,A,r]),G={id:p,ref:q,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":A,disabled:void 0,onMouseDown:$,onFocus:P,onPointerEnter:J,onMouseEnter:J,onPointerMove:b,onMouseMove:b,onPointerLeave:L,onMouseLeave:L};return he()({ourProps:G,theirProps:g,slot:N,defaultTag:Kn,name:"Combobox.Option"})}let Jn=me(Dn),pt=me(qn),Ie=me(Ln),Gn=Lt,ft=me(Un),mt=me(Yn),Qn=Object.assign(Jn,{Input:Ie,Button:pt,Label:Gn,Options:ft,Option:mt});const Xn=`
  jn-relative
`,Zn=`
  jn-pointer-events-none
  jn-top-2
  jn-left-[0.9375rem]
`,Ye=`
  jn-rounded-3px
  jn-bg-theme-textinput
  jn-text-theme-textinput
  jn-border
  jn-text-base
  jn-leading-4
  jn-w-full
  jn-px-4
  jn-h-textinput
  jn-text-left
  jn-overflow-hidden
  jn-text-ellipsis
  jn-whitespace-nowrap
  focus:jn-outline-none
  focus:jn-ring-2
  focus:jn-ring-theme-focus
`,Je=`
  jn-pt-[1.125rem] 
  jn-pb-1
`,Ge=`
  jn-py-4
`,Qe=`
  jn-cursor-not-allowed
  jn-pointer-events-none
  jn-opacity-50
`,Xe=`
  jn-border-theme-textinput-default
`,Ze=`
  jn-border-theme-success
`,et=`
  jn-border-theme-error
`,eo=`
  jn-absolute
  jn-top-0
  jn-right-0
  jn-h-textinput
  jn-w-6
  jn-h-4
  jn-border-l-0
  jn-border-y-[1px]
  jn-border-r-[1px]
  jn-rounded-tr
  jn-rounded-br
  jn-appearance-none
  jn-bg-theme-textinput
  jn-text-theme-textinput
`,to=`
  jn-border-theme-textinput-default
`,no=`
  jn-border-theme-error
`,oo=`
  jn-border-theme-success
`,so=`
  jn-cursor-not-allowed
  jn-pointer-events-none
  jn-bg-transparent
  jn-opacity-50
`,io=`
  jn-rounded
  jn-bg-theme-background-lvl-1
  jn-w-full
  jn-overflow-y-auto
`,lo=`
  jn-absolute
  jn-top-[.4rem]
  jn-right-6
`,ao=`
  jn-absolute
  jn-top-1/2
  jn-left-1/2
  jn-translate-y-[-50%]
  jn-translate-x-[-0.75rem]
`,xe=d.createContext(void 0),tt=({ariaLabel:e,children:o,className:t="",defaultValue:s="",disabled:n=!1,error:i=!1,errortext:l="",helptext:a="",id:p="",invalid:u=!1,loading:r=!1,label:v,name:g="",onBlur:m,onChange:f,onFocus:h,onInputChange:A,placeholder:R="Select…",required:w=!1,successtext:O="",truncateOptions:q=!1,valid:T=!1,value:_="",valueLabel:$,width:P="full",wrapperClassName:B="",...J})=>{const b=y=>!(typeof y=="string"&&y.trim().length===0),L=p||"juno-combobox-"+d.useId(),N="juno-combobox-helptext-"+d.useId(),[G,E]=d.useState(!1),[U,se]=d.useState(new Map),[ee,X]=d.useState(""),[te,ne]=d.useState(_),[W,oe]=d.useState(!1),[c,H]=d.useState(!1),[x,V]=d.useState(!1),[I,K]=d.useState(!1),[C,ht]=d.useState(!1),{x:bt,y:vt,strategy:gt,refs:$e,context:Re}=wt({open:G,onOpenChange:E,placement:"bottom-start",middleware:[Rt(4),_t(),Ft(),Pt({apply({availableWidth:y,availableHeight:j,elements:Z,rects:ue}){Object.assign(Z.floating.style,{maxWidth:`${y}px`,maxHeight:`${j}px`,minWidth:`${ue.reference.width}px`,overflowY:"auto"})}})],whileElementsMounted:$t}),{getReferenceProps:xt,getFloatingProps:yt}=jt([Tt(Re),Mt(Re)]),St=(y,j,Z)=>{se(ue=>new Map([...Array.from(ue),[y??Z,{val:y,label:j,children:Z}]]))},_e=d.useMemo(()=>u||!!(l&&b(l)),[u,l]),Fe=d.useMemo(()=>T||!!(O&&b(O)),[T,O]);d.useEffect(()=>{ne(_)},[_]),d.useEffect(()=>{H(i)},[i]),d.useEffect(()=>{oe(r)},[r]),d.useEffect(()=>{K(_e)},[_e]),d.useEffect(()=>{ht(Fe)},[Fe]);const Ct=y=>{ne(y),f&&f(y)},Pe=y=>{var j;X((j=y==null?void 0:y.target)==null?void 0:j.value),A&&A(y)},Ve=y=>{V(!0),h&&h(y)},Ae=y=>{V(!1),m&&m(y)},Ot=zt(),Et=ee===""?z.Children.toArray(o):z.Children.toArray(o).filter(y=>{var j;if(z.isValidElement(y)){const Z=((j=y.props.children)==null?void 0:j.toString())||y.props.label||y.props.value;return Z==null?void 0:Z.toLowerCase().includes(ee.toLowerCase())}else return!1}),It=y=>{const j=U.get(y);return typeof(j==null?void 0:j.children)=="string"?j.children:typeof(j==null?void 0:j.label)=="string"?j.label:typeof $=="string"?$:typeof y=="string"||typeof y=="number"?y.toString():""};return M.jsx(xe.Provider,{value:{selectedValue:te,truncateOptions:q,addOptionValueAndLabel:St},children:M.jsxs("div",{className:`
          juno-combobox-wrapper
          jn-relative
          ${P=="auto"?"jn-inline-block":"jn-block"}
          ${P=="auto"?"jn-w-auto":"jn-w-full"}
          ${B}
        `,children:[M.jsx(Qn,{defaultValue:s,disabled:n||W||c,name:g,onChange:Ct,value:te||s,as:"div",...J,children:({open:y})=>(d.useEffect(()=>{y!==G&&E(y)},[y]),M.jsxs(M.Fragment,{children:[M.jsxs("div",{ref:$e.setReference,className:`juno-combobox-input-wrapper ${Xn} ${n?"jn-cursor-not-allowed":""}`,children:[v&&b(v)&&!W&&!c?M.jsx(Vt,{text:v,disabled:n,required:w,htmlFor:L,className:`${Zn}`,floating:!0,minimized:!!(R||x||ee&&b(ee)||te&&b(te)),...xt()}):"",M.jsx(Ie,{autoComplete:"off","aria-label":e||v,"aria-describedby":a?N:"",id:L,onBlur:Ae,onChange:Pe,onFocus:Ve,placeholder:!W&&!c?R:"",displayValue:j=>It(j),className:`
                juno-combobox-input 
                ${Ye} 
                ${v&&b(v)?Je:Ge}
                ${n?Qe:""}
                ${I?"juno-combobox-invalid "+et:""} 
                ${C?"juno-combobox-valid "+Ze:""}  
                ${C||I?"":Xe} 
                ${W?"juno-combobox-loading jn-cursor-not-allowed":""}
                ${c?"juno-combobox-error jn-cursor-not-allowed":""}
                ${t}
              `}),M.jsx(Ie,{autoComplete:"off","aria-label":e||v,"aria-describedby":a?N:"",id:L,onBlur:Ae,onChange:Pe,onFocus:Ve,placeholder:!W&&!c?R:"",displayValue:j=>{var Z,ue,ze;return((ue=(Z=U.get(j))==null?void 0:Z.children)==null?void 0:ue.toString())||((ze=U.get(j))==null?void 0:ze.label)||$||(j==null?void 0:j.toString())||""},className:`
                      juno-combobox-input 
                      ${Ye} 
                      ${v&&b(v)?Je:Ge}
                      ${n?Qe:""}
                      ${I?"juno-combobox-invalid "+et:""} 
                      ${C?"juno-combobox-valid "+Ze:""}  
                      ${C||I?"":Xe} 
                      ${W?"juno-combobox-loading jn-cursor-not-allowed":""}
                      ${c?"juno-combobox-error jn-cursor-not-allowed":""}
                      ${t}
                    `}),W||c?M.jsx("span",{className:`${ao}`,children:W?M.jsx(At,{className:"jn-cursor-not-allowed"}):M.jsx(ve,{icon:"errorOutline",color:"jn-text-theme-error",className:"jn-cursor-not-allowed"})}):C||I?M.jsx("span",{className:`
                        juno-combobox-icon-container 
                        ${lo} 
                        ${n?"jn-opacity-50":""}
                      `,children:M.jsx(ve,{icon:C?"checkCircle":"dangerous",color:C?"jn-text-theme-success":"jn-text-theme-error"})}):"",!c&&!W?M.jsx(pt,{className:`
                        juno-combobox-toggle 
                        ${eo}
                        ${n?so:""}
                        ${I?"juno-combobox-toggle-invalid "+no:""} 
                        ${C?"juno-combobox-toggle-valid "+oo:""}  
                        ${C||I?"":to} 
                      `,children:M.jsx(ve,{icon:y?"expandLess":"expandMore"})}):null]}),y&&ie.createPortal(M.jsx("div",{ref:$e.setFloating,className:`juno-combobox-options ${io}`,style:{position:gt,top:vt??0,left:bt??0},...yt(),children:M.jsx(ft,{static:!0,className:"jn-w-full",children:Et})}),Ot??document.body)]}))}),l&&b(l)?M.jsx(Se,{text:l,variant:"error"}):"",O&&b(O)?M.jsx(Se,{text:O,variant:"success"}):"",a&&b(a)?M.jsx(Se,{text:a,id:N}):""]})})};try{xe.displayName="ComboBoxContext",xe.__docgenInfo={description:"",displayName:"ComboBoxContext",props:{}}}catch{}try{tt.displayName="ComboBox",tt.__docgenInfo={description:"",displayName:"ComboBox",props:{ariaLabel:{defaultValue:null,description:"The aria-label of the ComboBox. Defaults to the label if label was passed.",name:"ariaLabel",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"The children to Render. Use `ComboBox.Option` elements.",name:"children",required:!1,type:{name:"ReactNode"}},className:{defaultValue:{value:""},description:"A custom className. Will be passed to the internal text input element of the ComboBox",name:"className",required:!1,type:{name:"string"}},defaultValue:{defaultValue:{value:""},description:"Pass a defaultValue to use as an uncontrolled Component that will handle its state internally",name:"defaultValue",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Whether the ComboBox is disabled",name:"disabled",required:!1,type:{name:"boolean"}},error:{defaultValue:{value:"false"},description:"Whether the ComboBox has an error. Note this refers to an internal error like failing to load options etc., to indicate failed validation use `invalid` instead.",name:"error",required:!1,type:{name:"boolean"}},errortext:{defaultValue:{value:""},description:"An errortext to display when the ComboBox failed validation or an internal error occurred.",name:"errortext",required:!1,type:{name:"ReactNode"}},helptext:{defaultValue:{value:""},description:"A helptext to render to explain meaning and significance of the ComboBox",name:"helptext",required:!1,type:{name:"ReactNode"}},id:{defaultValue:{value:""},description:"The Id of the ComboBox. Will be assigned to the text input part of the ComboBox. If not passed, an id will be auto-generated.",name:"id",required:!1,type:{name:"string"}},invalid:{defaultValue:{value:"false"},description:"Whether the ComboBox failed validation",name:"invalid",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"The label of the ComboBox",name:"label",required:!1,type:{name:"string"}},loading:{defaultValue:{value:"false"},description:"Whether the ComboBox is busy loading options",name:"loading",required:!1,type:{name:"boolean"}},name:{defaultValue:{value:""},description:"The name attribute of the ComboBox when used as part of a form",name:"name",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"A handler to execute when the ComboBox looses focus",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onChange:{defaultValue:null,description:"A handler to execute when the ComboBox' selected value changes",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},onFocus:{defaultValue:null,description:"A handler to execute when the ComboBox input receives focus",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onInputChange:{defaultValue:null,description:"Handler to execute when the ComboBox text input value changes",name:"onInputChange",required:!1,type:{name:"ChangeEventHandler<HTMLInputElement>"}},placeholder:{defaultValue:{value:"Select…"},description:"A placeholder to render in the text input",name:"placeholder",required:!1,type:{name:"string"}},required:{defaultValue:{value:"false"},description:"Whether the ComboBox is required",name:"required",required:!1,type:{name:"boolean"}},successtext:{defaultValue:{value:""},description:"A text to display in case the ComboBox was successfully validated. Will set the ComboBox to `valid` when passed.",name:"successtext",required:!1,type:{name:"ReactNode"}},truncateOptions:{defaultValue:{value:"false"},description:"Whether the option labels should be truncated in case they are longer/wider than the available space in an option or not. Default is FALSE.",name:"truncateOptions",required:!1,type:{name:"boolean"}},valid:{defaultValue:{value:"false"},description:"Whether the ComboBox was successfully validated",name:"valid",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"The selected value of the ComboBox in Controlled Mode.",name:"value",required:!1,type:{name:"string"}},valueLabel:{defaultValue:null,description:"The label of the passed value or defaultValue. If you want to use controlled mode or pass as defaultValue in uncontrolled mode and additionally use labels for human-readable SelectOptions, you need to also pass the matching label for the passed value/defaultValue so that the Select component can render itself properly",name:"valueLabel",required:!1,type:{name:"string"}},width:{defaultValue:{value:"full"},description:"The width of the text input. Either 'full' (default) or 'auto'.",name:"width",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"full"'}]}},wrapperClassName:{defaultValue:{value:""},description:"Pass a custom classname to the wrapping <div> element. This can be useful if you must add styling to the outermost wrapping element of this component, e.g. for positioning.",name:"wrapperClassName",required:!1,type:{name:"string"}}}}}catch{}const ro=`
  jn-flex
  jn-pt-[0.6875rem]
  jn-pb-[0.5rem]
  jn-pr-[0.875rem]
  jn-select-none
  data-[headlessui-state~=active]:jn-outline-none
  data-[headlessui-state~=active]:jn-ring-2
  data-[headlessui-state~=active]:jn-ring-inset
  data-[headlessui-state~=active]:jn-ring-theme-focus
  data-[headlessui-state~=active]:jn-bg-theme-background-lvl-3
`,uo=`
  jn-text-theme-default
  jn-pl-[2.375rem]
`,co=`
  jn-text-theme-accent
  jn-pl-3.5
`,po=`
  jn-inline-block
  jn-mr-1.5
`,fo=`
  jn-opacity-50
  jn-cursor-not-allowed
`,mo=`
  jn-block
  jn-h-6
  jn-overflow-hidden
  jn-text-ellipsis
  jn-whitespace-nowrap
`,nt=({children:e,disabled:o=!1,value:t="",label:s="",className:n="",...i})=>{const l=d.useContext(xe),{selectedValue:a,truncateOptions:p,addOptionValueAndLabel:u}=l||{};d.useEffect(()=>{u&&u(t,s,e)},[t,s,e]);const r=t||e;return M.jsx(mt,{value:r,disabled:o,as:d.Fragment,children:M.jsxs("li",{className:`
          juno-combobox-option 
          ${ro}
          ${a===t?co:uo}
          ${o?"jn-cursor-not-allowed":""}
          ${n}
        `,...i,children:[a===r?M.jsx(ve,{icon:"check",size:"18",className:`${po}`}):"",M.jsx("span",{className:`
            ${o?fo:""}
            ${p?mo:""}
          `,children:e||s||t})]})})};try{nt.displayName="ComboBoxOption",nt.__docgenInfo={description:"",displayName:"ComboBoxOption",props:{children:{defaultValue:null,description:"Content to render inside the ComboBoxOption. Is specified should be string.",name:"children",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"If option is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"Option value.",name:"value",required:!1,type:{name:"string"}},label:{defaultValue:{value:""},description:"Option label.",name:"label",required:!1,type:{name:"string"}},className:{defaultValue:{value:""},description:"CSS class for the option.",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{tt as C,nt as a};
