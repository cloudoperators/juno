import{j as T}from"./jsx-runtime-D_zvdyIk.js";import{r as d,e as z}from"./index-DI7CEG0L.js";import{u as gt,f as xt,a as yt,d as St,h as Ct,o as Ot,s as Et,g as It,k as wt}from"./floating-ui.react-D61D_8ca.js";import{L as jt}from"./Label.component-DZ9JGTj_.js";import{F as Se}from"./FormHint.component-CxYdfrh1.js";import{I as be}from"./Icon.component-DUGiGyC3.js";import{S as Tt}from"./Spinner.component-NCyRlNFL.js";import{u as Mt}from"./PortalProvider.component--bS0Im1B.js";import{r as ie}from"./index-DnsdnBHL.js";import{W as He,a as R,a3 as $t,m as Rt,c as D,u as de,f as Fe,_ as _t,K as fe,Q as Ft,S as k,y as xe,n as re,Y as Pt,L as me,b as Vt,d as At,j as Ee,v as zt,I as Ie,U as Bt,$ as Ue,e as Ke,h as we,w as Dt,i as kt,x as Lt,R as Nt,t as qt,k as Wt,l as Ht,q as Ut,r as Kt,s as Yt,z as Jt,A as Pe,B as Gt,C as Qt,D as Xt,E as Zt,M as en,G as tn,p as ve,O as Ve,J as U,H as nn,X as on,a4 as sn}from"./portal-C-1npNRF.js";import{l as Ae,f as ln,a as an,T as rn,u as un,j as dn}from"./frozen-Co1jXQ-W.js";import{F as cn}from"./use-tree-walker-Dgr4X7e_.js";function ue(e,o,t){let s=t.initialDeps??[],n;function i(){var l,a,c,u;let r;t.key&&((l=t.debug)!=null&&l.call(t))&&(r=Date.now());const x=e();if(!(x.length!==s.length||x.some((f,h)=>s[h]!==f)))return n;s=x;let m;if(t.key&&((a=t.debug)!=null&&a.call(t))&&(m=Date.now()),n=o(...x),t.key&&((c=t.debug)!=null&&c.call(t))){const f=Math.round((Date.now()-r)*100)/100,h=Math.round((Date.now()-m)*100)/100,A=h/16,_=(I,C)=>{for(I=String(I);I.length<C;)I=" "+I;return I};console.info(`%c⏱ ${_(h,5)} /${_(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*A,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(u=t==null?void 0:t.onChange)==null||u.call(t,n),n}return i.updateDeps=l=>{s=l},i}function Ce(e,o){if(e===void 0)throw new Error("Unexpected undefined");return e}const pn=(e,o)=>Math.abs(e-o)<=1,fn=(e,o,t)=>{let s;return function(...n){e.clearTimeout(s),s=e.setTimeout(()=>o.apply(this,n),t)}},ze=e=>{const{offsetWidth:o,offsetHeight:t}=e;return{width:o,height:t}},mn=e=>e,hn=e=>{const o=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),s=[];for(let n=o;n<=t;n++)s.push(n);return s},bn=(e,o)=>{const t=e.scrollElement;if(!t)return;const s=e.targetWindow;if(!s)return;const n=l=>{const{width:a,height:c}=l;o({width:Math.round(a),height:Math.round(c)})};if(n(ze(t)),!s.ResizeObserver)return()=>{};const i=new s.ResizeObserver(l=>{const a=()=>{const c=l[0];if(c!=null&&c.borderBoxSize){const u=c.borderBoxSize[0];if(u){n({width:u.inlineSize,height:u.blockSize});return}}n(ze(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()});return i.observe(t,{box:"border-box"}),()=>{i.unobserve(t)}},Be={passive:!0},De=typeof window>"u"?!0:"onscrollend"in window,vn=(e,o)=>{const t=e.scrollElement;if(!t)return;const s=e.targetWindow;if(!s)return;let n=0;const i=e.options.useScrollendEvent&&De?()=>{}:fn(s,()=>{o(n,!1)},e.options.isScrollingResetDelay),l=r=>()=>{const{horizontal:x,isRtl:b}=e.options;n=x?t.scrollLeft*(b&&-1||1):t.scrollTop,i(),o(n,r)},a=l(!0),c=l(!1);c(),t.addEventListener("scroll",a,Be);const u=e.options.useScrollendEvent&&De;return u&&t.addEventListener("scrollend",c,Be),()=>{t.removeEventListener("scroll",a),u&&t.removeEventListener("scrollend",c)}},gn=(e,o,t)=>{if(o!=null&&o.borderBoxSize){const s=o.borderBoxSize[0];if(s)return Math.round(s[t.options.horizontal?"inlineSize":"blockSize"])}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},xn=(e,{adjustments:o=0,behavior:t},s)=>{var n,i;const l=e+o;(i=(n=s.scrollElement)==null?void 0:n.scrollTo)==null||i.call(n,{[s.options.horizontal?"left":"top"]:l,behavior:t})};class yn{constructor(o){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const s=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(n=>{n.forEach(i=>{const l=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var n;(n=s())==null||n.disconnect(),t=null},observe:n=>{var i;return(i=s())==null?void 0:i.observe(n,{box:"border-box"})},unobserve:n=>{var i;return(i=s())==null?void 0:i.unobserve(n)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([s,n])=>{typeof n>"u"&&delete t[s]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:mn,rangeExtractor:hn,onChange:()=>{},measureElement:gn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var s,n;(n=(s=this.options).onChange)==null||n.call(s,this,t)},this.maybeNotify=ue(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const s=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==s){if(this.cleanup(),!s){this.maybeNotify();return}this.scrollElement=s,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(n=>{this.observer.observe(n)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(n,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,s)=>{const n=new Map,i=new Map;for(let l=s-1;l>=0;l--){const a=t[l];if(n.has(a.lane))continue;const c=i.get(a.lane);if(c==null||a.end>c.end?i.set(a.lane,a):a.end<c.end&&n.set(a.lane,!0),n.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((l,a)=>l.end===a.end?l.index-a.index:l.end-a.end)[0]:void 0},this.getMeasurementOptions=ue(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,s,n,i,l)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:s,scrollMargin:n,getItemKey:i,enabled:l}),{key:!1}),this.getMeasurements=ue(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:s,scrollMargin:n,getItemKey:i,enabled:l},a)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(r=>{this.itemSizeCache.set(r.key,r.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,c);for(let r=c;r<t;r++){const x=i(r),b=this.options.lanes===1?u[r-1]:this.getFurthestMeasurement(u,r),m=b?b.end+this.options.gap:s+n,f=a.get(x),h=typeof f=="number"?f:this.options.estimateSize(r),A=m+h,_=b?b.lane:r%this.options.lanes;u[r]={index:r,start:m,size:h,end:A,key:x,lane:_}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=ue(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,s,n,i)=>this.range=t.length>0&&s>0?Sn({measurements:t,outerSize:s,scrollOffset:n,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=ue(()=>{let t=null,s=null;const n=this.calculateRange();return n&&(t=n.startIndex,s=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,s]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,s]},(t,s,n,i,l)=>i===null||l===null?[]:t({startIndex:i,endIndex:l,overscan:s,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const s=this.options.indexAttribute,n=t.getAttribute(s);return n?parseInt(n,10):(console.warn(`Missing attribute name '${s}={index}' on measured element.`),-1)},this._measureElement=(t,s)=>{const n=this.indexFromElement(t),i=this.measurementsCache[n];if(!i)return;const l=i.key,a=this.elementsCache.get(l);a!==t&&(a&&this.observer.unobserve(a),this.observer.observe(t),this.elementsCache.set(l,t)),t.isConnected&&this.resizeItem(n,this.options.measureElement(t,s,this))},this.resizeItem=(t,s)=>{const n=this.measurementsCache[t];if(!n)return;const i=this.itemSizeCache.get(n.key)??n.size,l=s-i;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,l,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,s)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((s,n)=>{s.isConnected||(this.observer.unobserve(s),this.elementsCache.delete(n))});return}this._measureElement(t,void 0)},this.getVirtualItems=ue(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,s)=>{const n=[];for(let i=0,l=t.length;i<l;i++){const a=t[i],c=s[a];n.push(c)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const s=this.getMeasurements();if(s.length!==0)return Ce(s[Ye(0,s.length-1,n=>Ce(s[n]).start,t)])},this.getOffsetForAlignment=(t,s,n=0)=>{const i=this.getSize(),l=this.getScrollOffset();s==="auto"&&(s=t>=l+i?"end":"start"),s==="center"?t+=(n-i)/2:s==="end"&&(t-=i);const a=this.getTotalSize()-i;return Math.max(Math.min(a,t),0)},this.getOffsetForIndex=(t,s="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const n=this.measurementsCache[t];if(!n)return;const i=this.getSize(),l=this.getScrollOffset();if(s==="auto")if(n.end>=l+i-this.options.scrollPaddingEnd)s="end";else if(n.start<=l+this.options.scrollPaddingStart)s="start";else return[l,s];const a=s==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(a,s,n.size),s]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:s="start",behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,s),{adjustments:void 0,behavior:n})},this.scrollToIndex=(t,{align:s="auto",behavior:n}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const i=this.getOffsetForIndex(t,s);if(!i)return;const[l,a]=i;this._scrollToOffset(l,{adjustments:void 0,behavior:n}),n!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[u]=Ce(this.getOffsetForIndex(t,a)),r=this.getScrollOffset();pn(u,r)||this.scrollToIndex(t,{align:a,behavior:n})}else this.scrollToIndex(t,{align:a,behavior:n})}))},this.scrollBy=(t,{behavior:s}={})=>{this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:s})},this.getTotalSize=()=>{var t;const s=this.getMeasurements();let n;if(s.length===0)n=this.options.paddingStart;else if(this.options.lanes===1)n=((t=s[s.length-1])==null?void 0:t.end)??0;else{const i=Array(this.options.lanes).fill(null);let l=s.length-1;for(;l>=0&&i.some(a=>a===null);){const a=s[l];i[a.lane]===null&&(i[a.lane]=a.end),l--}n=Math.max(...i.filter(a=>a!==null))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:s,behavior:n})=>{this.options.scrollToFn(t,{behavior:n,adjustments:s},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(o)}}const Ye=(e,o,t,s)=>{for(;e<=o;){const n=(e+o)/2|0,i=t(n);if(i<s)e=n+1;else if(i>s)o=n-1;else return n}return e>0?e-1:0};function Sn({measurements:e,outerSize:o,scrollOffset:t,lanes:s}){const n=e.length-1,i=c=>e[c].start;if(e.length<=s)return{startIndex:0,endIndex:n};let l=Ye(0,n,i,t),a=l;if(s===1)for(;a<n&&e[a].end<t+o;)a++;else if(s>1){const c=Array(s).fill(0);for(;a<n&&c.some(r=>r<t+o);){const r=e[a];c[r.lane]=r.end,a++}const u=Array(s).fill(t+o);for(;l>=0&&u.some(r=>r>=t);){const r=e[l];u[r.lane]=r.start,l--}l=Math.max(0,l-l%s),a=Math.min(n,a+(s-1-a%s))}return{startIndex:l,endIndex:a}}const ke=typeof document<"u"?d.useLayoutEffect:d.useEffect;function Cn(e){const o=d.useReducer(()=>({}),{})[1],t={...e,onChange:(n,i)=>{var l;i?ie.flushSync(o):o(),(l=e.onChange)==null||l.call(e,n,i)}},[s]=d.useState(()=>new yn(t));return s.setOptions(t),ke(()=>s._didMount(),[]),ke(()=>s._willUpdate()),s}function On(e){return Cn({observeElementRect:bn,observeElementOffset:vn,scrollToFn:xn,...e})}function En(e,o,t,s){let n=He(t);d.useEffect(()=>{e=e??window;function i(l){n.current(l)}return e.addEventListener(o,i,s),()=>e.removeEventListener(o,i,s)},[e,o,s])}function Je(e){let o=d.useRef({value:"",selectionStart:null,selectionEnd:null});return En(e,"blur",t=>{let s=t.target;s instanceof HTMLInputElement&&(o.current={value:s.value,selectionStart:s.selectionStart,selectionEnd:s.selectionEnd})}),R(()=>{if(document.activeElement!==e&&e instanceof HTMLInputElement&&e.isConnected){if(e.focus({preventScroll:!0}),e.value!==o.current.value)e.setSelectionRange(e.value.length,e.value.length);else{let{selectionStart:t,selectionEnd:s}=o.current;t!==null&&s!==null&&e.setSelectionRange(t,s)}o.current={value:"",selectionStart:null,selectionEnd:null}}})}function Le(e,o){let t=d.useRef([]),s=R(e);d.useEffect(()=>{let n=[...t.current];for(let[i,l]of o.entries())if(t.current[i]!==l){let a=s(o,n);return t.current=o,a}},[s,...o])}function In(e){function o(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",o))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",o),o())}let ae=[];In(()=>{function e(o){if(!(o.target instanceof HTMLElement)||o.target===document.body||ae[0]===o.target)return;let t=o.target;t=t.closest($t),ae.unshift(t??o.target),ae=ae.filter(s=>s!=null&&s.isConnected),ae.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});var je=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(je||{}),wn=Object.defineProperty,jn=(e,o,t)=>o in e?wn(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,Ne=(e,o,t)=>(jn(e,typeof o!="symbol"?o+"":o,t),t),S=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(S||{}),G=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(G||{}),le=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(le||{}),Ge=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.SetTyping=3]="SetTyping",e[e.RegisterOption=4]="RegisterOption",e[e.UnregisterOption=5]="UnregisterOption",e[e.DefaultToFirstOption=6]="DefaultToFirstOption",e[e.SetActivationTrigger=7]="SetActivationTrigger",e[e.UpdateVirtualConfiguration=8]="UpdateVirtualConfiguration",e[e.SetInputElement=9]="SetInputElement",e[e.SetButtonElement=10]="SetButtonElement",e[e.SetOptionsElement=11]="SetOptionsElement",e))(Ge||{});function Oe(e,o=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,s=o(e.options.slice()),n=s.length>0&&s[0].dataRef.current.order!==null?s.sort((l,a)=>l.dataRef.current.order-a.dataRef.current.order):_t(s,l=>l.dataRef.current.domRef.current),i=t?n.indexOf(t):null;return i===-1&&(i=null),{options:n,activeOptionIndex:i}}let Tn={1(e){var o;return(o=e.dataRef.current)!=null&&o.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(e){var o,t;if((o=e.dataRef.current)!=null&&o.disabled||e.comboboxState===0)return e;if((t=e.dataRef.current)!=null&&t.value){let s=e.dataRef.current.calculateIndex(e.dataRef.current.value);if(s!==-1)return{...e,activeOptionIndex:s,comboboxState:0,__demoMode:!1}}return{...e,comboboxState:0,__demoMode:!1}},3(e,o){return e.isTyping===o.isTyping?e:{...e,isTyping:o.isTyping}},2(e,o){var t,s,n,i;if((t=e.dataRef.current)!=null&&t.disabled||e.optionsElement&&!((s=e.dataRef.current)!=null&&s.optionsPropsRef.current.static)&&e.comboboxState===1)return e;if(e.virtual){let{options:u,disabled:r}=e.virtual,x=o.focus===D.Specific?o.idx:Fe(o,{resolveItems:()=>u,resolveActiveIndex:()=>{var m,f;return(f=(m=e.activeOptionIndex)!=null?m:u.findIndex(h=>!r(h)))!=null?f:null},resolveDisabled:r,resolveId(){throw new Error("Function not implemented.")}}),b=(n=o.trigger)!=null?n:2;return e.activeOptionIndex===x&&e.activationTrigger===b?e:{...e,activeOptionIndex:x,activationTrigger:b,isTyping:!1,__demoMode:!1}}let l=Oe(e);if(l.activeOptionIndex===null){let u=l.options.findIndex(r=>!r.dataRef.current.disabled);u!==-1&&(l.activeOptionIndex=u)}let a=o.focus===D.Specific?o.idx:Fe(o,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled}),c=(i=o.trigger)!=null?i:2;return e.activeOptionIndex===a&&e.activationTrigger===c?e:{...e,...l,isTyping:!1,activeOptionIndex:a,activationTrigger:c,__demoMode:!1}},4:(e,o)=>{var t,s,n,i;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:[...e.options,o.payload]};let l=o.payload,a=Oe(e,u=>(u.push(l),u));e.activeOptionIndex===null&&(n=(s=e.dataRef.current).isSelected)!=null&&n.call(s,o.payload.dataRef.current.value)&&(a.activeOptionIndex=a.options.indexOf(l));let c={...e,...a,activationTrigger:2};return(i=e.dataRef.current)!=null&&i.__demoMode&&e.dataRef.current.value===void 0&&(c.activeOptionIndex=0),c},5:(e,o)=>{var t;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:e.options.filter(n=>n.id!==o.id)};let s=Oe(e,n=>{let i=n.findIndex(l=>l.id===o.id);return i!==-1&&n.splice(i,1),n});return{...e,...s,activationTrigger:2}},6:(e,o)=>e.defaultToFirstOption===o.value?e:{...e,defaultToFirstOption:o.value},7:(e,o)=>e.activationTrigger===o.trigger?e:{...e,activationTrigger:o.trigger},8:(e,o)=>{var t,s;if(e.virtual===null)return{...e,virtual:{options:o.options,disabled:(t=o.disabled)!=null?t:()=>!1}};if(e.virtual.options===o.options&&e.virtual.disabled===o.disabled)return e;let n=e.activeOptionIndex;if(e.activeOptionIndex!==null){let i=o.options.indexOf(e.virtual.options[e.activeOptionIndex]);i!==-1?n=i:n=null}return{...e,activeOptionIndex:n,virtual:{options:o.options,disabled:(s=o.disabled)!=null?s:()=>!1}}},9:(e,o)=>e.inputElement===o.element?e:{...e,inputElement:o.element},10:(e,o)=>e.buttonElement===o.element?e:{...e,buttonElement:o.element},11:(e,o)=>e.optionsElement===o.element?e:{...e,optionsElement:o.element}};class Te extends Rt{constructor(){super(...arguments),Ne(this,"actions",{onChange:o=>{let{onChange:t,compare:s,mode:n,value:i}=this.state.dataRef.current;return de(n,{0:()=>t==null?void 0:t(o),1:()=>{let l=i.slice(),a=l.findIndex(c=>s(c,o));return a===-1?l.push(o):l.splice(a,1),t==null?void 0:t(l)}})},registerOption:(o,t)=>(this.send({type:4,payload:{id:o,dataRef:t}}),()=>{this.state.activeOptionIndex===this.state.dataRef.current.calculateIndex(t.current.value)&&this.send({type:6,value:!0}),this.send({type:5,id:o})}),goToOption:(o,t)=>(this.send({type:6,value:!1}),this.send({type:2,...o,trigger:t})),setIsTyping:o=>{this.send({type:3,isTyping:o})},closeCombobox:()=>{var o,t;this.send({type:1}),this.send({type:6,value:!1}),(t=(o=this.state.dataRef.current).onClose)==null||t.call(o)},openCombobox:()=>{this.send({type:0}),this.send({type:6,value:!0})},setActivationTrigger:o=>{this.send({type:7,trigger:o})},selectActiveOption:()=>{let o=this.selectors.activeOptionIndex(this.state);if(o!==null){if(this.actions.setIsTyping(!1),this.state.virtual)this.actions.onChange(this.state.virtual.options[o]);else{let{dataRef:t}=this.state.options[o];this.actions.onChange(t.current.value)}this.actions.goToOption({focus:D.Specific,idx:o})}},setInputElement:o=>{this.send({type:9,element:o})},setButtonElement:o=>{this.send({type:10,element:o})},setOptionsElement:o=>{this.send({type:11,element:o})}}),Ne(this,"selectors",{activeDescendantId:o=>{var t,s;let n=this.selectors.activeOptionIndex(o);if(n!==null)return o.virtual?(s=o.options.find(i=>!i.dataRef.current.disabled&&o.dataRef.current.compare(i.dataRef.current.value,o.virtual.options[n])))==null?void 0:s.id:(t=o.options[n])==null?void 0:t.id},activeOptionIndex:o=>{if(o.defaultToFirstOption&&o.activeOptionIndex===null&&(o.virtual?o.virtual.options.length>0:o.options.length>0)){if(o.virtual){let{options:s,disabled:n}=o.virtual,i=s.findIndex(l=>{var a;return!((a=n==null?void 0:n(l))!=null&&a)});if(i!==-1)return i}let t=o.options.findIndex(s=>!s.dataRef.current.disabled);if(t!==-1)return t}return o.activeOptionIndex},activeOption:o=>{var t,s;let n=this.selectors.activeOptionIndex(o);return n===null?null:o.virtual?o.virtual.options[n??0]:(s=(t=o.options[n])==null?void 0:t.dataRef.current.value)!=null?s:null},isActive:(o,t,s)=>{var n;let i=this.selectors.activeOptionIndex(o);return i===null?!1:o.virtual?i===o.dataRef.current.calculateIndex(t):((n=o.options[i])==null?void 0:n.id)===s},shouldScrollIntoView:(o,t,s)=>!(o.virtual||o.__demoMode||o.comboboxState!==0||o.activationTrigger===0||!this.selectors.isActive(o,t,s))})}static new({virtual:o=null,__demoMode:t=!1}={}){var s;return new Te({dataRef:{current:{}},comboboxState:t?0:1,isTyping:!1,options:[],virtual:o?{options:o.options,disabled:(s=o.disabled)!=null?s:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:t})}reduce(o,t){return de(t.type,Tn,o,t)}}const Qe=d.createContext(null);function he(e){let o=d.useContext(Qe);if(o===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Xe),t}return o}function Xe({virtual:e=null,__demoMode:o=!1}={}){return d.useMemo(()=>Te.new({virtual:e,__demoMode:o}),[])}let pe=d.createContext(null);pe.displayName="ComboboxDataContext";function ce(e){let o=d.useContext(pe);if(o===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ce),t}return o}let Ze=d.createContext(null);function Mn(e){let o=he("VirtualProvider"),t=ce("VirtualProvider"),{options:s}=t.virtual,n=k(o,m=>m.optionsElement),[i,l]=d.useMemo(()=>{let m=n;if(!m)return[0,0];let f=window.getComputedStyle(m);return[parseFloat(f.paddingBlockStart||f.paddingTop),parseFloat(f.paddingBlockEnd||f.paddingBottom)]},[n]),a=On({enabled:s.length!==0,scrollPaddingStart:i,scrollPaddingEnd:l,count:s.length,estimateSize(){return 40},getScrollElement(){return o.state.optionsElement},overscan:12}),[c,u]=d.useState(0);re(()=>{u(m=>m+1)},[s]);let r=a.getVirtualItems(),x=k(o,m=>m.activationTrigger===le.Pointer),b=k(o,o.selectors.activeOptionIndex);return r.length===0?null:z.createElement(Ze.Provider,{value:a},z.createElement("div",{style:{position:"relative",width:"100%",height:`${a.getTotalSize()}px`},ref:m=>{m&&(x||b!==null&&s.length>b&&a.scrollToIndex(b))}},r.map(m=>{var f;return z.createElement(d.Fragment,{key:m.key},z.cloneElement((f=e.children)==null?void 0:f.call(e,{...e.slot,option:s[m.index]}),{key:`${c}-${m.key}`,"data-index":m.index,"aria-setsize":s.length,"aria-posinset":m.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${m.start}px)`,overflowAnchor:"none"}}))})))}let $n=d.Fragment;function Rn(e,o){let t=Qt(),{value:s,defaultValue:n,onChange:i,form:l,name:a,by:c,invalid:u=!1,disabled:r=t||!1,onClose:x,__demoMode:b=!1,multiple:m=!1,immediate:f=!1,virtual:h=null,nullable:A,..._}=e,I=an(n),[C=m?[]:void 0,L]=rn(s,i,I),w=Xe({virtual:h,__demoMode:b}),$=d.useRef({static:!1,hold:!1}),M=un(c),F=R(g=>h?c===null?h.options.indexOf(g):h.options.findIndex(P=>M(P,g)):w.state.options.findIndex(P=>M(P.dataRef.current.value,g))),B=d.useCallback(g=>de(N.mode,{[G.Multi]:()=>C.some(P=>M(P,g)),[G.Single]:()=>M(C,g)}),[C]),K=k(w,g=>g.virtual),v=R(()=>x==null?void 0:x()),N=d.useMemo(()=>({__demoMode:b,immediate:f,optionsPropsRef:$,value:C,defaultValue:I,disabled:r,invalid:u,mode:m?G.Multi:G.Single,virtual:h?K:null,onChange:L,isSelected:B,calculateIndex:F,compare:M,onClose:v}),[C,I,r,u,m,L,B,b,w,h,K,v]);re(()=>{var g;h&&w.send({type:Ge.UpdateVirtualConfiguration,options:h.options,disabled:(g=h.disabled)!=null?g:null})},[h,h==null?void 0:h.options,h==null?void 0:h.disabled]),re(()=>{w.state.dataRef.current=N},[N]);let[q,Y,O,Q]=k(w,g=>[g.comboboxState,g.buttonElement,g.inputElement,g.optionsElement]),oe=q===S.Open;Xt(oe,[Y,O,Q],()=>w.actions.closeCombobox());let Z=k(w,w.selectors.activeOptionIndex),X=k(w,w.selectors.activeOption),ee=d.useMemo(()=>({open:q===S.Open,disabled:r,invalid:u,activeIndex:Z,activeOption:X,value:C}),[N,r,C,u,X,q]),[te,J]=Zt(),ne=o===null?{}:{ref:o},p=d.useCallback(()=>{if(I!==void 0)return L==null?void 0:L(I)},[L,I]),W=me();return z.createElement(J,{value:te,props:{htmlFor:O==null?void 0:O.id},slot:{open:q===S.Open,disabled:r}},z.createElement(en,null,z.createElement(pe.Provider,{value:N},z.createElement(Qe.Provider,{value:w},z.createElement(tn,{value:de(q,{[S.Open]:ve.Open,[S.Closed]:ve.Closed})},a!=null&&z.createElement(dn,{disabled:r,data:C!=null?{[a]:C}:{},form:l,onReset:p}),W({ourProps:ne,theirProps:_,slot:ee,defaultTag:$n,name:"Combobox"}))))))}let _n="input";function Fn(e,o){var t,s;let n=he("Combobox.Input"),i=ce("Combobox.Input"),l=d.useId(),a=Vt(),{id:c=a||`headlessui-combobox-input-${l}`,onChange:u,displayValue:r,disabled:x=i.disabled||!1,autoFocus:b=!1,type:m="text",...f}=e,[h]=k(n,p=>[p.inputElement]),A=d.useRef(null),_=xe(A,o,At(),n.actions.setInputElement),I=Ee(h),[C,L]=k(n,p=>[p.comboboxState,p.isTyping]),w=zt(),$=R(()=>{n.actions.onChange(null),n.state.optionsElement&&(n.state.optionsElement.scrollTop=0),n.actions.goToOption({focus:D.Nothing})}),M=d.useMemo(()=>{var p;return typeof r=="function"&&i.value!==void 0?(p=r(i.value))!=null?p:"":typeof i.value=="string"?i.value:""},[i.value,r]);Le(([p,W],[g,P])=>{if(n.state.isTyping)return;let j=A.current;j&&((P===S.Open&&W===S.Closed||p!==g)&&(j.value=p),requestAnimationFrame(()=>{if(n.state.isTyping||!j||(I==null?void 0:I.activeElement)!==j)return;let{selectionStart:H,selectionEnd:E}=j;Math.abs((E??0)-(H??0))===0&&H===0&&j.setSelectionRange(j.value.length,j.value.length)}))},[M,C,I,L]),Le(([p],[W])=>{if(p===S.Open&&W===S.Closed){if(n.state.isTyping)return;let g=A.current;if(!g)return;let P=g.value,{selectionStart:j,selectionEnd:H,selectionDirection:E}=g;g.value="",g.value=P,E!==null?g.setSelectionRange(j,H,E):g.setSelectionRange(j,H)}},[C]);let F=d.useRef(!1),B=R(()=>{F.current=!0}),K=R(()=>{w.nextFrame(()=>{F.current=!1})}),v=R(p=>{switch(n.actions.setIsTyping(!0),p.key){case U.Enter:if(n.state.comboboxState!==S.Open||F.current)return;if(p.preventDefault(),p.stopPropagation(),n.selectors.activeOptionIndex(n.state)===null){n.actions.closeCombobox();return}n.actions.selectActiveOption(),i.mode===G.Single&&n.actions.closeCombobox();break;case U.ArrowDown:return p.preventDefault(),p.stopPropagation(),de(n.state.comboboxState,{[S.Open]:()=>n.actions.goToOption({focus:D.Next}),[S.Closed]:()=>n.actions.openCombobox()});case U.ArrowUp:return p.preventDefault(),p.stopPropagation(),de(n.state.comboboxState,{[S.Open]:()=>n.actions.goToOption({focus:D.Previous}),[S.Closed]:()=>{ie.flushSync(()=>n.actions.openCombobox()),i.value||n.actions.goToOption({focus:D.Last})}});case U.Home:if(p.shiftKey)break;return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:D.First});case U.PageUp:return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:D.First});case U.End:if(p.shiftKey)break;return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:D.Last});case U.PageDown:return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:D.Last});case U.Escape:return n.state.comboboxState!==S.Open?void 0:(p.preventDefault(),n.state.optionsElement&&!i.optionsPropsRef.current.static&&p.stopPropagation(),i.mode===G.Single&&i.value===null&&$(),n.actions.closeCombobox());case U.Tab:if(n.state.comboboxState!==S.Open)return;i.mode===G.Single&&n.state.activationTrigger!==le.Focus&&n.actions.selectActiveOption(),n.actions.closeCombobox();break}}),N=R(p=>{u==null||u(p),i.mode===G.Single&&p.target.value===""&&$(),n.actions.openCombobox()}),q=R(p=>{var W,g,P;let j=(W=p.relatedTarget)!=null?W:ae.find(H=>H!==p.currentTarget);if(!((g=n.state.optionsElement)!=null&&g.contains(j))&&!((P=n.state.buttonElement)!=null&&P.contains(j))&&n.state.comboboxState===S.Open)return p.preventDefault(),i.mode===G.Single&&i.value===null&&$(),n.actions.closeCombobox()}),Y=R(p=>{var W,g,P;let j=(W=p.relatedTarget)!=null?W:ae.find(H=>H!==p.currentTarget);(g=n.state.buttonElement)!=null&&g.contains(j)||(P=n.state.optionsElement)!=null&&P.contains(j)||i.disabled||i.immediate&&n.state.comboboxState!==S.Open&&w.microTask(()=>{ie.flushSync(()=>n.actions.openCombobox()),n.actions.setActivationTrigger(le.Focus)})}),O=Ie(),Q=Bt(),{isFocused:oe,focusProps:Z}=Ue({autoFocus:b}),{isHovered:X,hoverProps:ee}=Ke({isDisabled:x}),te=k(n,p=>p.optionsElement),J=d.useMemo(()=>({open:C===S.Open,disabled:x,invalid:i.invalid,hover:X,focus:oe,autofocus:b}),[i,X,oe,b,x,i.invalid]),ne=we({ref:_,id:c,role:"combobox",type:m,"aria-controls":te==null?void 0:te.id,"aria-expanded":C===S.Open,"aria-activedescendant":k(n,n.selectors.activeDescendantId),"aria-labelledby":O,"aria-describedby":Q,"aria-autocomplete":"list",defaultValue:(s=(t=e.defaultValue)!=null?t:i.defaultValue!==void 0?r==null?void 0:r(i.defaultValue):null)!=null?s:i.defaultValue,disabled:x||void 0,autoFocus:b,onCompositionStart:B,onCompositionEnd:K,onKeyDown:v,onChange:N,onFocus:Y,onBlur:q},Z,ee);return me()({ourProps:ne,theirProps:f,slot:J,defaultTag:_n,name:"Combobox.Input"})}let Pn="button";function Vn(e,o){let t=he("Combobox.Button"),s=ce("Combobox.Button"),[n,i]=d.useState(null),l=xe(o,i,t.actions.setButtonElement),a=d.useId(),{id:c=`headlessui-combobox-button-${a}`,disabled:u=s.disabled||!1,autoFocus:r=!1,...x}=e,b=k(t,v=>v.inputElement),m=Je(b),f=R(v=>{switch(v.key){case U.Space:case U.Enter:v.preventDefault(),v.stopPropagation(),t.state.comboboxState===S.Closed&&ie.flushSync(()=>t.actions.openCombobox()),m();return;case U.ArrowDown:v.preventDefault(),v.stopPropagation(),t.state.comboboxState===S.Closed&&(ie.flushSync(()=>t.actions.openCombobox()),t.state.dataRef.current.value||t.actions.goToOption({focus:D.First})),m();return;case U.ArrowUp:v.preventDefault(),v.stopPropagation(),t.state.comboboxState===S.Closed&&(ie.flushSync(()=>t.actions.openCombobox()),t.state.dataRef.current.value||t.actions.goToOption({focus:D.Last})),m();return;case U.Escape:if(t.state.comboboxState!==S.Open)return;v.preventDefault(),t.state.optionsElement&&!s.optionsPropsRef.current.static&&v.stopPropagation(),ie.flushSync(()=>t.actions.closeCombobox()),m();return;default:return}}),h=R(v=>{v.preventDefault(),!nn(v.currentTarget)&&(v.button===je.Left&&(t.state.comboboxState===S.Open?t.actions.closeCombobox():t.actions.openCombobox()),m())}),A=Ie([c]),{isFocusVisible:_,focusProps:I}=Ue({autoFocus:r}),{isHovered:C,hoverProps:L}=Ke({isDisabled:u}),{pressed:w,pressProps:$}=Dt({disabled:u}),[M,F]=k(t,v=>[v.comboboxState,v.optionsElement]),B=d.useMemo(()=>({open:M===S.Open,active:w||M===S.Open,disabled:u,invalid:s.invalid,value:s.value,hover:C,focus:_}),[s,C,_,w,u,M]),K=we({ref:l,id:c,type:kt(e,n),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":F==null?void 0:F.id,"aria-expanded":M===S.Open,"aria-labelledby":A,disabled:u||void 0,autoFocus:r,onMouseDown:h,onKeyDown:f},I,L,$);return me()({ourProps:K,theirProps:x,slot:B,defaultTag:Pn,name:"Combobox.Button"})}let An="div",zn=Ve.RenderStrategy|Ve.Static;function Bn(e,o){var t,s,n;let i=d.useId(),{id:l=`headlessui-combobox-options-${i}`,hold:a=!1,anchor:c,portal:u=!1,modal:r=!0,transition:x=!1,...b}=e,m=he("Combobox.Options"),f=ce("Combobox.Options"),h=Lt(c);h&&(u=!0);let[A,_]=Nt(h),[I,C]=d.useState(null),L=qt(),w=xe(o,h?A:null,m.actions.setOptionsElement,C),[$,M,F,B,K]=k(m,E=>[E.comboboxState,E.inputElement,E.buttonElement,E.optionsElement,E.activationTrigger]),v=Ee(M||F),N=Ee(B),q=Wt(),[Y,O]=Ht(x,I,q!==null?(q&ve.Open)===ve.Open:$===S.Open);Ut(Y,M,m.actions.closeCombobox);let Q=f.__demoMode?!1:r&&$===S.Open;Kt(Q,N);let oe=f.__demoMode?!1:r&&$===S.Open;Yt(oe,{allowed:d.useCallback(()=>[M,F,B],[M,F,B])}),re(()=>{var E;f.optionsPropsRef.current.static=(E=e.static)!=null?E:!1},[f.optionsPropsRef,e.static]),re(()=>{f.optionsPropsRef.current.hold=a},[f.optionsPropsRef,a]),cn($===S.Open,{container:B,accept(E){return E.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:E.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(E){E.setAttribute("role","none")}});let Z=Ie([F==null?void 0:F.id]),X=d.useMemo(()=>({open:$===S.Open,option:void 0}),[$]),ee=R(()=>{m.actions.setActivationTrigger(le.Pointer)}),te=R(E=>{E.preventDefault(),m.actions.setActivationTrigger(le.Pointer)}),J=we(h?L():{},{"aria-labelledby":Z,role:"listbox","aria-multiselectable":f.mode===G.Multi?!0:void 0,id:l,ref:w,style:{...b.style,..._,"--input-width":Pe(M,!0).width,"--button-width":Pe(F,!0).width},onWheel:K===le.Pointer?void 0:ee,onMouseDown:te,...Jt(O)}),ne=Y&&$===S.Closed,p=Ae(ne,(t=f.virtual)==null?void 0:t.options),W=Ae(ne,f.value),g=R(E=>f.compare(W,E)),P=d.useMemo(()=>{if(!f.virtual)return f;if(p===void 0)throw new Error("Missing `options` in virtual mode");return p!==f.virtual.options?{...f,virtual:{...f.virtual,options:p}}:f},[f,p,(s=f.virtual)==null?void 0:s.options]);f.virtual&&Object.assign(b,{children:z.createElement(pe.Provider,{value:P},z.createElement(Mn,{slot:X},b.children))});let j=me(),H=d.useMemo(()=>f.mode===G.Multi?f:{...f,isSelected:g},[f,g]);return z.createElement(Gt,{enabled:u?e.static||Y:!1,ownerDocument:v},z.createElement(pe.Provider,{value:H},j({ourProps:J,theirProps:{...b,children:z.createElement(ln,{freeze:ne},typeof b.children=="function"?(n=b.children)==null?void 0:n.call(b,X):b.children)},slot:X,defaultTag:An,features:zn,visible:Y,name:"Combobox.Options"})))}let Dn="div";function kn(e,o){var t,s,n;let i=ce("Combobox.Option"),l=he("Combobox.Option"),a=d.useId(),{id:c=`headlessui-combobox-option-${a}`,value:u,disabled:r=(n=(s=(t=i.virtual)==null?void 0:t.disabled)==null?void 0:s.call(t,u))!=null?n:!1,order:x=null,...b}=e,[m]=k(l,O=>[O.inputElement]),f=Je(m),h=k(l,d.useCallback(O=>l.selectors.isActive(O,u,c),[u,c])),A=i.isSelected(u),_=d.useRef(null),I=He({disabled:r,value:u,domRef:_,order:x}),C=d.useContext(Ze),L=xe(o,_,C?C.measureElement:null),w=R(()=>{l.actions.setIsTyping(!1),l.actions.onChange(u)});re(()=>l.actions.registerOption(c,I),[I,c]);let $=k(l,d.useCallback(O=>l.selectors.shouldScrollIntoView(O,u,c),[u,c]));re(()=>{if($)return on().requestAnimationFrame(()=>{var O,Q;(Q=(O=_.current)==null?void 0:O.scrollIntoView)==null||Q.call(O,{block:"nearest"})})},[$,_]);let M=R(O=>{O.preventDefault(),O.button===je.Left&&(r||(w(),sn()||requestAnimationFrame(()=>f()),i.mode===G.Single&&l.actions.closeCombobox()))}),F=R(()=>{if(r)return l.actions.goToOption({focus:D.Nothing});let O=i.calculateIndex(u);l.actions.goToOption({focus:D.Specific,idx:O})}),B=Pt(),K=R(O=>B.update(O)),v=R(O=>{if(!B.wasMoved(O)||r||h)return;let Q=i.calculateIndex(u);l.actions.goToOption({focus:D.Specific,idx:Q},le.Pointer)}),N=R(O=>{B.wasMoved(O)&&(r||h&&(i.optionsPropsRef.current.hold||l.actions.goToOption({focus:D.Nothing})))}),q=d.useMemo(()=>({active:h,focus:h,selected:A,disabled:r}),[h,A,r]),Y={id:c,ref:L,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":A,disabled:void 0,onMouseDown:M,onFocus:F,onPointerEnter:K,onMouseEnter:K,onPointerMove:v,onMouseMove:v,onPointerLeave:N,onMouseLeave:N};return me()({ourProps:Y,theirProps:b,slot:q,defaultTag:Dn,name:"Combobox.Option"})}let Ln=fe(Rn),et=fe(Vn),tt=fe(Fn),Nn=Ft,nt=fe(Bn),ot=fe(kn),qn=Object.assign(Ln,{Input:tt,Button:et,Label:Nn,Options:nt,Option:ot});const Wn=`
  jn-relative
`,Hn=`
  jn-pointer-events-none
  jn-top-2
  jn-left-[0.9375rem]
`,Un=`
  jn-rounded-3px
  jn-bg-theme-textinput
  jn-text-theme-textinput
  jn-border
  jn-text-base
  jn-leading-4
  jn-w-full
  jn-px-4
  jn-h-textinput
  jn-text-left
  jn-overflow-hidden
  jn-text-ellipsis
  jn-whitespace-nowrap
  focus:jn-outline-none
  focus:jn-ring-2
  focus:jn-ring-theme-focus
`,Kn=`
  jn-pt-[1.125rem] 
  jn-pb-1
`,Yn=`
  jn-py-4
`,Jn=`
  jn-cursor-not-allowed
  jn-pointer-events-none
  jn-opacity-50
`,Gn=`
  jn-border-theme-textinput-default
`,Qn=`
  jn-border-theme-success
`,Xn=`
  jn-border-theme-error
`,Zn=`
  jn-absolute
  jn-top-0
  jn-right-0
  jn-h-textinput
  jn-w-6
  jn-h-4
  jn-border-l-0
  jn-border-y-[1px]
  jn-border-r-[1px]
  jn-rounded-tr
  jn-rounded-br
  jn-appearance-none
  jn-bg-theme-textinput
  jn-text-theme-textinput
`,eo=`
  jn-border-theme-textinput-default
`,to=`
  jn-border-theme-error
`,no=`
  jn-border-theme-success
`,oo=`
  jn-cursor-not-allowed
  jn-pointer-events-none
  jn-bg-transparent
  jn-opacity-50
`,so=`
  jn-rounded
  jn-bg-theme-background-lvl-1
  jn-w-full
  jn-overflow-y-auto
`,io=`
  jn-absolute
  jn-top-[.4rem]
  jn-right-6
`,lo=`
  jn-absolute
  jn-top-1/2
  jn-left-1/2
  jn-translate-y-[-50%]
  jn-translate-x-[-0.75rem]
`,ge=d.createContext(void 0),qe=({ariaLabel:e,children:o,className:t="",defaultValue:s="",disabled:n=!1,error:i=!1,errortext:l="",helptext:a="",id:c="",invalid:u=!1,loading:r=!1,label:x,name:b="",onBlur:m,onChange:f,onFocus:h,onInputChange:A,placeholder:_="Select…",required:I=!1,successtext:C="",truncateOptions:L=!1,valid:w=!1,value:$="",valueLabel:M,width:F="full",wrapperClassName:B="",...K})=>{const v=y=>!(typeof y=="string"&&y.trim().length===0),N=c||"juno-combobox-"+d.useId(),q="juno-combobox-helptext-"+d.useId(),[Y,O]=d.useState(!1),[Q,oe]=d.useState(new Map),[Z,X]=d.useState(""),[ee,te]=d.useState($),[J,ne]=d.useState(!1),[p,W]=d.useState(!1),[g,P]=d.useState(!1),[j,H]=d.useState(!1),[E,st]=d.useState(!1),{x:it,y:lt,strategy:at,refs:Me,context:$e}=gt({open:Y,onOpenChange:O,placement:"bottom-start",middleware:[Ot(4),Et(),It(),wt({apply({availableWidth:y,availableHeight:V,elements:se,rects:ye}){Object.assign(se.floating.style,{maxWidth:`${y}px`,maxHeight:`${V}px`,minWidth:`${ye.reference.width}px`,overflowY:"auto"})}})],whileElementsMounted:Ct}),{getReferenceProps:rt,getFloatingProps:ut}=xt([yt($e),St($e)]),dt=(y,V,se)=>{oe(ye=>new Map([...Array.from(ye),[y??se,{val:y,label:V,children:se}]]))},Re=d.useMemo(()=>u||!!(l&&v(l)),[u,l]),_e=d.useMemo(()=>w||!!(C&&v(C)),[w,C]);d.useEffect(()=>{te($)},[$]),d.useEffect(()=>{W(i)},[i]),d.useEffect(()=>{ne(r)},[r]),d.useEffect(()=>{H(Re)},[Re]),d.useEffect(()=>{st(_e)},[_e]);const ct=y=>{te(y),f&&f(y)},pt=y=>{var V;X((V=y==null?void 0:y.target)==null?void 0:V.value),A&&A(y)},ft=y=>{P(!0),h&&h(y)},mt=y=>{P(!1),m&&m(y)},ht=Mt(),bt=Z===""?z.Children.toArray(o):z.Children.toArray(o).filter(y=>{var V;if(z.isValidElement(y)){const se=((V=y.props.children)==null?void 0:V.toString())||y.props.label||y.props.value;return se==null?void 0:se.toLowerCase().includes(Z.toLowerCase())}else return!1}),vt=y=>{const V=Q.get(y);return typeof(V==null?void 0:V.children)=="string"?V.children:typeof(V==null?void 0:V.label)=="string"?V.label:typeof M=="string"?M:typeof y=="string"||typeof y=="number"?y.toString():""};return T.jsx(ge.Provider,{value:{selectedValue:ee,truncateOptions:L,addOptionValueAndLabel:dt},children:T.jsxs("div",{className:`
          juno-combobox-wrapper
          jn-relative
          ${F=="auto"?"jn-inline-block":"jn-block"}
          ${F=="auto"?"jn-w-auto":"jn-w-full"}
          ${B}
        `,children:[T.jsx(qn,{defaultValue:s,disabled:n||J||p,name:b,onChange:ct,value:ee||s,as:"div",...K,children:({open:y})=>(d.useEffect(()=>{y!==Y&&O(y)},[y]),T.jsxs(T.Fragment,{children:[T.jsxs("div",{ref:Me.setReference,className:`juno-combobox-input-wrapper ${Wn} ${n?"jn-cursor-not-allowed":""}`,children:[x&&v(x)&&!J&&!p?T.jsx(jt,{text:x,disabled:n,required:I,htmlFor:N,className:`${Hn}`,floating:!0,minimized:!!(_||g||Z&&v(Z)||ee&&v(ee)),...rt()}):"",T.jsx(tt,{autoComplete:"off","aria-label":e||x,"aria-describedby":a?q:"",id:N,onBlur:mt,onChange:pt,onFocus:ft,placeholder:!J&&!p?_:"",displayValue:V=>vt(V),className:`
                      juno-combobox-input 
                      ${Un} 
                      ${x&&v(x)?Kn:Yn}
                      ${n?Jn:""}
                      ${j?"juno-combobox-invalid "+Xn:""} 
                      ${E?"juno-combobox-valid "+Qn:""}  
                      ${E||j?"":Gn} 
                      ${J?"juno-combobox-loading jn-cursor-not-allowed":""}
                      ${p?"juno-combobox-error jn-cursor-not-allowed":""}
                      ${t}
                    `}),J||p?T.jsx("span",{className:`${lo}`,children:J?T.jsx(Tt,{className:"jn-cursor-not-allowed"}):T.jsx(be,{icon:"errorOutline",color:"jn-text-theme-error",className:"jn-cursor-not-allowed"})}):E||j?T.jsx("span",{className:`
                        juno-combobox-icon-container 
                        ${io} 
                        ${n?"jn-opacity-50":""}
                      `,children:T.jsx(be,{icon:E?"checkCircle":"dangerous",color:E?"jn-text-theme-success":"jn-text-theme-error"})}):"",!p&&!J?T.jsx(et,{className:`
                        juno-combobox-toggle 
                        ${Zn}
                        ${n?oo:""}
                        ${j?"juno-combobox-toggle-invalid "+to:""} 
                        ${E?"juno-combobox-toggle-valid "+no:""}  
                        ${E||j?"":eo} 
                      `,children:T.jsx(be,{icon:y?"expandLess":"expandMore"})}):null]}),y&&ie.createPortal(T.jsx("div",{ref:Me.setFloating,className:`juno-combobox-options ${so}`,style:{position:at,top:lt??0,left:it??0},...ut(),children:T.jsx(nt,{static:!0,className:"jn-w-full",children:bt})}),ht??document.body)]}))}),l&&v(l)?T.jsx(Se,{text:l,variant:"error"}):"",C&&v(C)?T.jsx(Se,{text:C,variant:"success"}):"",a&&v(a)?T.jsx(Se,{text:a,id:q}):""]})})};try{ge.displayName="ComboBoxContext",ge.__docgenInfo={description:"",displayName:"ComboBoxContext",props:{}}}catch{}try{qe.displayName="ComboBox",qe.__docgenInfo={description:"",displayName:"ComboBox",props:{ariaLabel:{defaultValue:null,description:"The aria-label of the ComboBox. Defaults to the label if label was passed.",name:"ariaLabel",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"The children to Render. Use `ComboBox.Option` elements.",name:"children",required:!1,type:{name:"ReactNode"}},className:{defaultValue:{value:""},description:"A custom className. Will be passed to the internal text input element of the ComboBox",name:"className",required:!1,type:{name:"string"}},defaultValue:{defaultValue:{value:""},description:"Pass a defaultValue to use as an uncontrolled Component that will handle its state internally",name:"defaultValue",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Whether the ComboBox is disabled",name:"disabled",required:!1,type:{name:"boolean"}},error:{defaultValue:{value:"false"},description:"Whether the ComboBox has an error. Note this refers to an internal error like failing to load options etc., to indicate failed validation use `invalid` instead.",name:"error",required:!1,type:{name:"boolean"}},errortext:{defaultValue:{value:""},description:"An errortext to display when the ComboBox failed validation or an internal error occurred.",name:"errortext",required:!1,type:{name:"ReactNode"}},helptext:{defaultValue:{value:""},description:"A helptext to render to explain meaning and significance of the ComboBox",name:"helptext",required:!1,type:{name:"ReactNode"}},id:{defaultValue:{value:""},description:"The Id of the ComboBox. Will be assigned to the text input part of the ComboBox. If not passed, an id will be auto-generated.",name:"id",required:!1,type:{name:"string"}},invalid:{defaultValue:{value:"false"},description:"Whether the ComboBox failed validation",name:"invalid",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"The label of the ComboBox",name:"label",required:!1,type:{name:"string"}},loading:{defaultValue:{value:"false"},description:"Whether the ComboBox is busy loading options",name:"loading",required:!1,type:{name:"boolean"}},name:{defaultValue:{value:""},description:"The name attribute of the ComboBox when used as part of a form",name:"name",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"A handler to execute when the ComboBox looses focus",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onChange:{defaultValue:null,description:"A handler to execute when the ComboBox' selected value changes",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},onFocus:{defaultValue:null,description:"A handler to execute when the ComboBox input receives focus",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onInputChange:{defaultValue:null,description:"Handler to execute when the ComboBox text input value changes",name:"onInputChange",required:!1,type:{name:"ChangeEventHandler<HTMLInputElement>"}},placeholder:{defaultValue:{value:"Select…"},description:"A placeholder to render in the text input",name:"placeholder",required:!1,type:{name:"string"}},required:{defaultValue:{value:"false"},description:"Whether the ComboBox is required",name:"required",required:!1,type:{name:"boolean"}},successtext:{defaultValue:{value:""},description:"A text to display in case the ComboBox was successfully validated. Will set the ComboBox to `valid` when passed.",name:"successtext",required:!1,type:{name:"ReactNode"}},truncateOptions:{defaultValue:{value:"false"},description:"Whether the option labels should be truncated in case they are longer/wider than the available space in an option or not. Default is FALSE.",name:"truncateOptions",required:!1,type:{name:"boolean"}},valid:{defaultValue:{value:"false"},description:"Whether the ComboBox was successfully validated",name:"valid",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"The selected value of the ComboBox in Controlled Mode.",name:"value",required:!1,type:{name:"string"}},valueLabel:{defaultValue:null,description:"The label of the passed value or defaultValue. If you want to use controlled mode or pass as defaultValue in uncontrolled mode and additionally use labels for human-readable SelectOptions, you need to also pass the matching label for the passed value/defaultValue so that the Select component can render itself properly",name:"valueLabel",required:!1,type:{name:"string"}},width:{defaultValue:{value:"full"},description:"The width of the text input. Either 'full' (default) or 'auto'.",name:"width",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"full"'}]}},wrapperClassName:{defaultValue:{value:""},description:"Pass a custom classname to the wrapping <div> element. This can be useful if you must add styling to the outermost wrapping element of this component, e.g. for positioning.",name:"wrapperClassName",required:!1,type:{name:"string"}}}}}catch{}const ao=`
  jn-flex
  jn-pt-[0.6875rem]
  jn-pb-[0.5rem]
  jn-pr-[0.875rem]
  jn-select-none
  data-[headlessui-state~=active]:jn-outline-none
  data-[headlessui-state~=active]:jn-ring-2
  data-[headlessui-state~=active]:jn-ring-inset
  data-[headlessui-state~=active]:jn-ring-theme-focus
  data-[headlessui-state~=active]:jn-bg-theme-background-lvl-3
`,ro=`
  jn-text-theme-default
  jn-pl-[2.375rem]
`,uo=`
  jn-text-theme-accent
  jn-pl-3.5
`,co=`
  jn-inline-block
  jn-mr-1.5
`,po=`
  jn-opacity-50
  jn-cursor-not-allowed
`,fo=`
  jn-block
  jn-h-6
  jn-overflow-hidden
  jn-text-ellipsis
  jn-whitespace-nowrap
`,We=({children:e,disabled:o=!1,value:t="",label:s="",className:n="",...i})=>{const l=d.useContext(ge),{selectedValue:a,truncateOptions:c,addOptionValueAndLabel:u}=l||{};d.useEffect(()=>{u&&u(t,s,e)},[t,s,e]);const r=t||e;return T.jsx(ot,{value:r,disabled:o,as:d.Fragment,children:T.jsxs("li",{className:`
          juno-combobox-option 
          ${ao}
          ${a===t?uo:ro}
          ${o?"jn-cursor-not-allowed":""}
          ${n}
        `,...i,children:[a===r?T.jsx(be,{icon:"check",size:"18",className:`${co}`}):"",T.jsx("span",{className:`
            ${o?po:""}
            ${c?fo:""}
          `,children:e||s||t})]})})};try{We.displayName="ComboBoxOption",We.__docgenInfo={description:"",displayName:"ComboBoxOption",props:{children:{defaultValue:null,description:"Content to render inside the ComboBoxOption. Is specified should be string.",name:"children",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"If option is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"Option value.",name:"value",required:!1,type:{name:"string"}},label:{defaultValue:{value:""},description:"Option label.",name:"label",required:!1,type:{name:"string"}},className:{defaultValue:{value:""},description:"CSS class for the option.",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{qe as C,We as a};
