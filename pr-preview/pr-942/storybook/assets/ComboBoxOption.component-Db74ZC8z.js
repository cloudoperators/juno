import{j as $}from"./jsx-runtime-BjG_zV1W.js";import{r as d,e as A}from"./index-BdGwgT04.js";import{u as vt,f as gt,a as xt,d as yt,h as St,o as Ct,s as Ot,g as Et,k as It}from"./floating-ui.react-ubu_7ndR.js";import{L as wt}from"./Label.component-D4gjYofZ.js";import{F as Se}from"./FormHint.component-Bn51_8r6.js";import{I as ve}from"./Icon.component-BcWhy_zI.js";import{S as jt}from"./Spinner.component-C7ss7i9x.js";import{u as Tt}from"./PortalProvider.component-SN9LOs4c.js";import{r as ie}from"./index-C7VnYWJ0.js";import{W as He,a as R,a3 as Mt,m as $t,c as B,u as ce,f as Pe,_ as Rt,K as me,Q as _t,S as D,y as ye,n as re,Y as Pt,L as he,b as Ft,d as Vt,j as Ee,v as At,I as Ie,U as zt,$ as Ue,e as Ke,h as we,w as Bt,i as Dt,x as kt,R as Lt,t as Nt,k as qt,l as Wt,q as Ht,r as Ut,s as Kt,z as Yt,A as Fe,B as Jt,C as Gt,D as Qt,E as Xt,M as Zt,G as en,p as ge,O as Ve,J as U,H as tn,X as nn,a4 as on}from"./portal-SlZPv7cO.js";import{l as Ae,f as sn,a as ln,T as an,u as rn,j as un}from"./frozen-DZprLUpS.js";import{F as dn}from"./use-tree-walker-V2vuNdFj.js";function de(e,o,t){let s=t.initialDeps??[],n;function i(){var l,a,c,u;let r;t.key&&((l=t.debug)!=null&&l.call(t))&&(r=Date.now());const y=e();if(!(y.length!==s.length||y.some((f,h)=>s[h]!==f)))return n;s=y;let m;if(t.key&&((a=t.debug)!=null&&a.call(t))&&(m=Date.now()),n=o(...y),t.key&&((c=t.debug)!=null&&c.call(t))){const f=Math.round((Date.now()-r)*100)/100,h=Math.round((Date.now()-m)*100)/100,V=h/16,_=(I,O)=>{for(I=String(I);I.length<O;)I=" "+I;return I};console.info(`%c⏱ ${_(h,5)} /${_(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*V,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(u=t==null?void 0:t.onChange)==null||u.call(t,n),n}return i.updateDeps=l=>{s=l},i}function Ce(e,o){if(e===void 0)throw new Error("Unexpected undefined");return e}const cn=(e,o)=>Math.abs(e-o)<=1,pn=(e,o,t)=>{let s;return function(...n){e.clearTimeout(s),s=e.setTimeout(()=>o.apply(this,n),t)}},ze=e=>{const{offsetWidth:o,offsetHeight:t}=e;return{width:o,height:t}},fn=e=>e,mn=e=>{const o=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),s=[];for(let n=o;n<=t;n++)s.push(n);return s},hn=(e,o)=>{const t=e.scrollElement;if(!t)return;const s=e.targetWindow;if(!s)return;const n=l=>{const{width:a,height:c}=l;o({width:Math.round(a),height:Math.round(c)})};if(n(ze(t)),!s.ResizeObserver)return()=>{};const i=new s.ResizeObserver(l=>{const a=()=>{const c=l[0];if(c!=null&&c.borderBoxSize){const u=c.borderBoxSize[0];if(u){n({width:u.inlineSize,height:u.blockSize});return}}n(ze(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()});return i.observe(t,{box:"border-box"}),()=>{i.unobserve(t)}},Be={passive:!0},De=typeof window>"u"?!0:"onscrollend"in window,bn=(e,o)=>{const t=e.scrollElement;if(!t)return;const s=e.targetWindow;if(!s)return;let n=0;const i=e.options.useScrollendEvent&&De?()=>{}:pn(s,()=>{o(n,!1)},e.options.isScrollingResetDelay),l=r=>()=>{const{horizontal:y,isRtl:b}=e.options;n=y?t.scrollLeft*(b&&-1||1):t.scrollTop,i(),o(n,r)},a=l(!0),c=l(!1);c(),t.addEventListener("scroll",a,Be);const u=e.options.useScrollendEvent&&De;return u&&t.addEventListener("scrollend",c,Be),()=>{t.removeEventListener("scroll",a),u&&t.removeEventListener("scrollend",c)}},vn=(e,o,t)=>{if(o!=null&&o.borderBoxSize){const s=o.borderBoxSize[0];if(s)return Math.round(s[t.options.horizontal?"inlineSize":"blockSize"])}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},gn=(e,{adjustments:o=0,behavior:t},s)=>{var n,i;const l=e+o;(i=(n=s.scrollElement)==null?void 0:n.scrollTo)==null||i.call(n,{[s.options.horizontal?"left":"top"]:l,behavior:t})};class xn{constructor(o){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const s=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(n=>{n.forEach(i=>{const l=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var n;(n=s())==null||n.disconnect(),t=null},observe:n=>{var i;return(i=s())==null?void 0:i.observe(n,{box:"border-box"})},unobserve:n=>{var i;return(i=s())==null?void 0:i.unobserve(n)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([s,n])=>{typeof n>"u"&&delete t[s]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:fn,rangeExtractor:mn,onChange:()=>{},measureElement:vn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var s,n;(n=(s=this.options).onChange)==null||n.call(s,this,t)},this.maybeNotify=de(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const s=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==s){if(this.cleanup(),!s){this.maybeNotify();return}this.scrollElement=s,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(n=>{this.observer.observe(n)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(n,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,s)=>{const n=new Map,i=new Map;for(let l=s-1;l>=0;l--){const a=t[l];if(n.has(a.lane))continue;const c=i.get(a.lane);if(c==null||a.end>c.end?i.set(a.lane,a):a.end<c.end&&n.set(a.lane,!0),n.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((l,a)=>l.end===a.end?l.index-a.index:l.end-a.end)[0]:void 0},this.getMeasurementOptions=de(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,s,n,i,l)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:s,scrollMargin:n,getItemKey:i,enabled:l}),{key:!1}),this.getMeasurements=de(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:s,scrollMargin:n,getItemKey:i,enabled:l},a)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(r=>{this.itemSizeCache.set(r.key,r.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,c);for(let r=c;r<t;r++){const y=i(r),b=this.options.lanes===1?u[r-1]:this.getFurthestMeasurement(u,r),m=b?b.end+this.options.gap:s+n,f=a.get(y),h=typeof f=="number"?f:this.options.estimateSize(r),V=m+h,_=b?b.lane:r%this.options.lanes;u[r]={index:r,start:m,size:h,end:V,key:y,lane:_}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=de(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,s,n,i)=>this.range=t.length>0&&s>0?yn({measurements:t,outerSize:s,scrollOffset:n,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=de(()=>{let t=null,s=null;const n=this.calculateRange();return n&&(t=n.startIndex,s=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,s]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,s]},(t,s,n,i,l)=>i===null||l===null?[]:t({startIndex:i,endIndex:l,overscan:s,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const s=this.options.indexAttribute,n=t.getAttribute(s);return n?parseInt(n,10):(console.warn(`Missing attribute name '${s}={index}' on measured element.`),-1)},this._measureElement=(t,s)=>{const n=this.indexFromElement(t),i=this.measurementsCache[n];if(!i)return;const l=i.key,a=this.elementsCache.get(l);a!==t&&(a&&this.observer.unobserve(a),this.observer.observe(t),this.elementsCache.set(l,t)),t.isConnected&&this.resizeItem(n,this.options.measureElement(t,s,this))},this.resizeItem=(t,s)=>{const n=this.measurementsCache[t];if(!n)return;const i=this.itemSizeCache.get(n.key)??n.size,l=s-i;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,l,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,s)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((s,n)=>{s.isConnected||(this.observer.unobserve(s),this.elementsCache.delete(n))});return}this._measureElement(t,void 0)},this.getVirtualItems=de(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,s)=>{const n=[];for(let i=0,l=t.length;i<l;i++){const a=t[i],c=s[a];n.push(c)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const s=this.getMeasurements();if(s.length!==0)return Ce(s[Ye(0,s.length-1,n=>Ce(s[n]).start,t)])},this.getOffsetForAlignment=(t,s,n=0)=>{const i=this.getSize(),l=this.getScrollOffset();s==="auto"&&(s=t>=l+i?"end":"start"),s==="center"?t+=(n-i)/2:s==="end"&&(t-=i);const a=this.getTotalSize()-i;return Math.max(Math.min(a,t),0)},this.getOffsetForIndex=(t,s="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const n=this.measurementsCache[t];if(!n)return;const i=this.getSize(),l=this.getScrollOffset();if(s==="auto")if(n.end>=l+i-this.options.scrollPaddingEnd)s="end";else if(n.start<=l+this.options.scrollPaddingStart)s="start";else return[l,s];const a=s==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(a,s,n.size),s]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:s="start",behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,s),{adjustments:void 0,behavior:n})},this.scrollToIndex=(t,{align:s="auto",behavior:n}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const i=this.getOffsetForIndex(t,s);if(!i)return;const[l,a]=i;this._scrollToOffset(l,{adjustments:void 0,behavior:n}),n!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[u]=Ce(this.getOffsetForIndex(t,a)),r=this.getScrollOffset();cn(u,r)||this.scrollToIndex(t,{align:a,behavior:n})}else this.scrollToIndex(t,{align:a,behavior:n})}))},this.scrollBy=(t,{behavior:s}={})=>{this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:s})},this.getTotalSize=()=>{var t;const s=this.getMeasurements();let n;if(s.length===0)n=this.options.paddingStart;else if(this.options.lanes===1)n=((t=s[s.length-1])==null?void 0:t.end)??0;else{const i=Array(this.options.lanes).fill(null);let l=s.length-1;for(;l>=0&&i.some(a=>a===null);){const a=s[l];i[a.lane]===null&&(i[a.lane]=a.end),l--}n=Math.max(...i.filter(a=>a!==null))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:s,behavior:n})=>{this.options.scrollToFn(t,{behavior:n,adjustments:s},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(o)}}const Ye=(e,o,t,s)=>{for(;e<=o;){const n=(e+o)/2|0,i=t(n);if(i<s)e=n+1;else if(i>s)o=n-1;else return n}return e>0?e-1:0};function yn({measurements:e,outerSize:o,scrollOffset:t,lanes:s}){const n=e.length-1,i=c=>e[c].start;if(e.length<=s)return{startIndex:0,endIndex:n};let l=Ye(0,n,i,t),a=l;if(s===1)for(;a<n&&e[a].end<t+o;)a++;else if(s>1){const c=Array(s).fill(0);for(;a<n&&c.some(r=>r<t+o);){const r=e[a];c[r.lane]=r.end,a++}const u=Array(s).fill(t+o);for(;l>=0&&u.some(r=>r>=t);){const r=e[l];u[r.lane]=r.start,l--}l=Math.max(0,l-l%s),a=Math.min(n,a+(s-1-a%s))}return{startIndex:l,endIndex:a}}const ke=typeof document<"u"?d.useLayoutEffect:d.useEffect;function Sn(e){const o=d.useReducer(()=>({}),{})[1],t={...e,onChange:(n,i)=>{var l;i?ie.flushSync(o):o(),(l=e.onChange)==null||l.call(e,n,i)}},[s]=d.useState(()=>new xn(t));return s.setOptions(t),ke(()=>s._didMount(),[]),ke(()=>s._willUpdate()),s}function Cn(e){return Sn({observeElementRect:hn,observeElementOffset:bn,scrollToFn:gn,...e})}function On(e,o,t,s){let n=He(t);d.useEffect(()=>{e=e??window;function i(l){n.current(l)}return e.addEventListener(o,i,s),()=>e.removeEventListener(o,i,s)},[e,o,s])}function Je(e){let o=d.useRef({value:"",selectionStart:null,selectionEnd:null});return On(e,"blur",t=>{let s=t.target;s instanceof HTMLInputElement&&(o.current={value:s.value,selectionStart:s.selectionStart,selectionEnd:s.selectionEnd})}),R(()=>{if(document.activeElement!==e&&e instanceof HTMLInputElement&&e.isConnected){if(e.focus({preventScroll:!0}),e.value!==o.current.value)e.setSelectionRange(e.value.length,e.value.length);else{let{selectionStart:t,selectionEnd:s}=o.current;t!==null&&s!==null&&e.setSelectionRange(t,s)}o.current={value:"",selectionStart:null,selectionEnd:null}}})}function Le(e,o){let t=d.useRef([]),s=R(e);d.useEffect(()=>{let n=[...t.current];for(let[i,l]of o.entries())if(t.current[i]!==l){let a=s(o,n);return t.current=o,a}},[s,...o])}function En(e){function o(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",o))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",o),o())}let ae=[];En(()=>{function e(o){if(!(o.target instanceof HTMLElement)||o.target===document.body||ae[0]===o.target)return;let t=o.target;t=t.closest(Mt),ae.unshift(t??o.target),ae=ae.filter(s=>s!=null&&s.isConnected),ae.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});var je=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(je||{}),In=Object.defineProperty,wn=(e,o,t)=>o in e?In(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,Ne=(e,o,t)=>(wn(e,typeof o!="symbol"?o+"":o,t),t),S=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(S||{}),G=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(G||{}),le=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(le||{}),Ge=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.SetTyping=3]="SetTyping",e[e.RegisterOption=4]="RegisterOption",e[e.UnregisterOption=5]="UnregisterOption",e[e.DefaultToFirstOption=6]="DefaultToFirstOption",e[e.SetActivationTrigger=7]="SetActivationTrigger",e[e.UpdateVirtualConfiguration=8]="UpdateVirtualConfiguration",e[e.SetInputElement=9]="SetInputElement",e[e.SetButtonElement=10]="SetButtonElement",e[e.SetOptionsElement=11]="SetOptionsElement",e))(Ge||{});function Oe(e,o=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,s=o(e.options.slice()),n=s.length>0&&s[0].dataRef.current.order!==null?s.sort((l,a)=>l.dataRef.current.order-a.dataRef.current.order):Rt(s,l=>l.dataRef.current.domRef.current),i=t?n.indexOf(t):null;return i===-1&&(i=null),{options:n,activeOptionIndex:i}}let jn={1(e){var o;return(o=e.dataRef.current)!=null&&o.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(e){var o,t;if((o=e.dataRef.current)!=null&&o.disabled||e.comboboxState===0)return e;if((t=e.dataRef.current)!=null&&t.value){let s=e.dataRef.current.calculateIndex(e.dataRef.current.value);if(s!==-1)return{...e,activeOptionIndex:s,comboboxState:0,__demoMode:!1}}return{...e,comboboxState:0,__demoMode:!1}},3(e,o){return e.isTyping===o.isTyping?e:{...e,isTyping:o.isTyping}},2(e,o){var t,s,n,i;if((t=e.dataRef.current)!=null&&t.disabled||e.optionsElement&&!((s=e.dataRef.current)!=null&&s.optionsPropsRef.current.static)&&e.comboboxState===1)return e;if(e.virtual){let{options:u,disabled:r}=e.virtual,y=o.focus===B.Specific?o.idx:Pe(o,{resolveItems:()=>u,resolveActiveIndex:()=>{var m,f;return(f=(m=e.activeOptionIndex)!=null?m:u.findIndex(h=>!r(h)))!=null?f:null},resolveDisabled:r,resolveId(){throw new Error("Function not implemented.")}}),b=(n=o.trigger)!=null?n:2;return e.activeOptionIndex===y&&e.activationTrigger===b?e:{...e,activeOptionIndex:y,activationTrigger:b,isTyping:!1,__demoMode:!1}}let l=Oe(e);if(l.activeOptionIndex===null){let u=l.options.findIndex(r=>!r.dataRef.current.disabled);u!==-1&&(l.activeOptionIndex=u)}let a=o.focus===B.Specific?o.idx:Pe(o,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled}),c=(i=o.trigger)!=null?i:2;return e.activeOptionIndex===a&&e.activationTrigger===c?e:{...e,...l,isTyping:!1,activeOptionIndex:a,activationTrigger:c,__demoMode:!1}},4:(e,o)=>{var t,s,n,i;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:[...e.options,o.payload]};let l=o.payload,a=Oe(e,u=>(u.push(l),u));e.activeOptionIndex===null&&(n=(s=e.dataRef.current).isSelected)!=null&&n.call(s,o.payload.dataRef.current.value)&&(a.activeOptionIndex=a.options.indexOf(l));let c={...e,...a,activationTrigger:2};return(i=e.dataRef.current)!=null&&i.__demoMode&&e.dataRef.current.value===void 0&&(c.activeOptionIndex=0),c},5:(e,o)=>{var t;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:e.options.filter(n=>n.id!==o.id)};let s=Oe(e,n=>{let i=n.findIndex(l=>l.id===o.id);return i!==-1&&n.splice(i,1),n});return{...e,...s,activationTrigger:2}},6:(e,o)=>e.defaultToFirstOption===o.value?e:{...e,defaultToFirstOption:o.value},7:(e,o)=>e.activationTrigger===o.trigger?e:{...e,activationTrigger:o.trigger},8:(e,o)=>{var t,s;if(e.virtual===null)return{...e,virtual:{options:o.options,disabled:(t=o.disabled)!=null?t:()=>!1}};if(e.virtual.options===o.options&&e.virtual.disabled===o.disabled)return e;let n=e.activeOptionIndex;if(e.activeOptionIndex!==null){let i=o.options.indexOf(e.virtual.options[e.activeOptionIndex]);i!==-1?n=i:n=null}return{...e,activeOptionIndex:n,virtual:{options:o.options,disabled:(s=o.disabled)!=null?s:()=>!1}}},9:(e,o)=>e.inputElement===o.element?e:{...e,inputElement:o.element},10:(e,o)=>e.buttonElement===o.element?e:{...e,buttonElement:o.element},11:(e,o)=>e.optionsElement===o.element?e:{...e,optionsElement:o.element}};class Te extends $t{constructor(){super(...arguments),Ne(this,"actions",{onChange:o=>{let{onChange:t,compare:s,mode:n,value:i}=this.state.dataRef.current;return ce(n,{0:()=>t==null?void 0:t(o),1:()=>{let l=i.slice(),a=l.findIndex(c=>s(c,o));return a===-1?l.push(o):l.splice(a,1),t==null?void 0:t(l)}})},registerOption:(o,t)=>(this.send({type:4,payload:{id:o,dataRef:t}}),()=>{this.state.activeOptionIndex===this.state.dataRef.current.calculateIndex(t.current.value)&&this.send({type:6,value:!0}),this.send({type:5,id:o})}),goToOption:(o,t)=>(this.send({type:6,value:!1}),this.send({type:2,...o,trigger:t})),setIsTyping:o=>{this.send({type:3,isTyping:o})},closeCombobox:()=>{var o,t;this.send({type:1}),this.send({type:6,value:!1}),(t=(o=this.state.dataRef.current).onClose)==null||t.call(o)},openCombobox:()=>{this.send({type:0}),this.send({type:6,value:!0})},setActivationTrigger:o=>{this.send({type:7,trigger:o})},selectActiveOption:()=>{let o=this.selectors.activeOptionIndex(this.state);if(o!==null){if(this.actions.setIsTyping(!1),this.state.virtual)this.actions.onChange(this.state.virtual.options[o]);else{let{dataRef:t}=this.state.options[o];this.actions.onChange(t.current.value)}this.actions.goToOption({focus:B.Specific,idx:o})}},setInputElement:o=>{this.send({type:9,element:o})},setButtonElement:o=>{this.send({type:10,element:o})},setOptionsElement:o=>{this.send({type:11,element:o})}}),Ne(this,"selectors",{activeDescendantId:o=>{var t,s;let n=this.selectors.activeOptionIndex(o);if(n!==null)return o.virtual?(s=o.options.find(i=>!i.dataRef.current.disabled&&o.dataRef.current.compare(i.dataRef.current.value,o.virtual.options[n])))==null?void 0:s.id:(t=o.options[n])==null?void 0:t.id},activeOptionIndex:o=>{if(o.defaultToFirstOption&&o.activeOptionIndex===null&&(o.virtual?o.virtual.options.length>0:o.options.length>0)){if(o.virtual){let{options:s,disabled:n}=o.virtual,i=s.findIndex(l=>{var a;return!((a=n==null?void 0:n(l))!=null&&a)});if(i!==-1)return i}let t=o.options.findIndex(s=>!s.dataRef.current.disabled);if(t!==-1)return t}return o.activeOptionIndex},activeOption:o=>{var t,s;let n=this.selectors.activeOptionIndex(o);return n===null?null:o.virtual?o.virtual.options[n??0]:(s=(t=o.options[n])==null?void 0:t.dataRef.current.value)!=null?s:null},isActive:(o,t,s)=>{var n;let i=this.selectors.activeOptionIndex(o);return i===null?!1:o.virtual?i===o.dataRef.current.calculateIndex(t):((n=o.options[i])==null?void 0:n.id)===s},shouldScrollIntoView:(o,t,s)=>!(o.virtual||o.__demoMode||o.comboboxState!==0||o.activationTrigger===0||!this.selectors.isActive(o,t,s))})}static new({virtual:o=null,__demoMode:t=!1}={}){var s;return new Te({dataRef:{current:{}},comboboxState:t?0:1,isTyping:!1,options:[],virtual:o?{options:o.options,disabled:(s=o.disabled)!=null?s:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:t})}reduce(o,t){return ce(t.type,jn,o,t)}}const Qe=d.createContext(null);function be(e){let o=d.useContext(Qe);if(o===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Xe),t}return o}function Xe({virtual:e=null,__demoMode:o=!1}={}){return d.useMemo(()=>Te.new({virtual:e,__demoMode:o}),[])}let fe=d.createContext(null);fe.displayName="ComboboxDataContext";function pe(e){let o=d.useContext(fe);if(o===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,pe),t}return o}let Ze=d.createContext(null);function Tn(e){let o=be("VirtualProvider"),t=pe("VirtualProvider"),{options:s}=t.virtual,n=D(o,m=>m.optionsElement),[i,l]=d.useMemo(()=>{let m=n;if(!m)return[0,0];let f=window.getComputedStyle(m);return[parseFloat(f.paddingBlockStart||f.paddingTop),parseFloat(f.paddingBlockEnd||f.paddingBottom)]},[n]),a=Cn({enabled:s.length!==0,scrollPaddingStart:i,scrollPaddingEnd:l,count:s.length,estimateSize(){return 40},getScrollElement(){return o.state.optionsElement},overscan:12}),[c,u]=d.useState(0);re(()=>{u(m=>m+1)},[s]);let r=a.getVirtualItems(),y=D(o,m=>m.activationTrigger===le.Pointer),b=D(o,o.selectors.activeOptionIndex);return r.length===0?null:A.createElement(Ze.Provider,{value:a},A.createElement("div",{style:{position:"relative",width:"100%",height:`${a.getTotalSize()}px`},ref:m=>{m&&(y||b!==null&&s.length>b&&a.scrollToIndex(b))}},r.map(m=>{var f;return A.createElement(d.Fragment,{key:m.key},A.cloneElement((f=e.children)==null?void 0:f.call(e,{...e.slot,option:s[m.index]}),{key:`${c}-${m.key}`,"data-index":m.index,"aria-setsize":s.length,"aria-posinset":m.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${m.start}px)`,overflowAnchor:"none"}}))})))}let Mn=d.Fragment;function $n(e,o){let t=Gt(),{value:s,defaultValue:n,onChange:i,form:l,name:a,by:c,invalid:u=!1,disabled:r=t||!1,onClose:y,__demoMode:b=!1,multiple:m=!1,immediate:f=!1,virtual:h=null,nullable:V,..._}=e,I=ln(n),[O=m?[]:void 0,k]=an(s,i,I),w=Xe({virtual:h,__demoMode:b}),T=d.useRef({static:!1,hold:!1}),M=rn(c),P=R(g=>h?c===null?h.options.indexOf(g):h.options.findIndex(F=>M(F,g)):w.state.options.findIndex(F=>M(F.dataRef.current.value,g))),z=d.useCallback(g=>ce(L.mode,{[G.Multi]:()=>O.some(F=>M(F,g)),[G.Single]:()=>M(O,g)}),[O]),K=D(w,g=>g.virtual),v=R(()=>y==null?void 0:y()),L=d.useMemo(()=>({__demoMode:b,immediate:f,optionsPropsRef:T,value:O,defaultValue:I,disabled:r,invalid:u,mode:m?G.Multi:G.Single,virtual:h?K:null,onChange:k,isSelected:z,calculateIndex:P,compare:M,onClose:v}),[O,I,r,u,m,k,z,b,w,h,K,v]);re(()=>{var g;h&&w.send({type:Ge.UpdateVirtualConfiguration,options:h.options,disabled:(g=h.disabled)!=null?g:null})},[h,h==null?void 0:h.options,h==null?void 0:h.disabled]),re(()=>{w.state.dataRef.current=L},[L]);let[N,W,C,Y]=D(w,g=>[g.comboboxState,g.buttonElement,g.inputElement,g.optionsElement]),se=N===S.Open;Qt(se,[W,C,Y],()=>w.actions.closeCombobox());let ee=D(w,w.selectors.activeOptionIndex),X=D(w,w.selectors.activeOption),te=d.useMemo(()=>({open:N===S.Open,disabled:r,invalid:u,activeIndex:ee,activeOption:X,value:O}),[L,r,O,u,X,N]),[ne,J]=Xt(),oe=o===null?{}:{ref:o},p=d.useCallback(()=>{if(I!==void 0)return k==null?void 0:k(I)},[k,I]),q=he();return A.createElement(J,{value:ne,props:{htmlFor:C==null?void 0:C.id},slot:{open:N===S.Open,disabled:r}},A.createElement(Zt,null,A.createElement(fe.Provider,{value:L},A.createElement(Qe.Provider,{value:w},A.createElement(en,{value:ce(N,{[S.Open]:ge.Open,[S.Closed]:ge.Closed})},a!=null&&A.createElement(un,{disabled:r,data:O!=null?{[a]:O}:{},form:l,onReset:p}),q({ourProps:oe,theirProps:_,slot:te,defaultTag:Mn,name:"Combobox"}))))))}let Rn="input";function _n(e,o){var t,s;let n=be("Combobox.Input"),i=pe("Combobox.Input"),l=d.useId(),a=Ft(),{id:c=a||`headlessui-combobox-input-${l}`,onChange:u,displayValue:r,disabled:y=i.disabled||!1,autoFocus:b=!1,type:m="text",...f}=e,[h]=D(n,p=>[p.inputElement]),V=d.useRef(null),_=ye(V,o,Vt(),n.actions.setInputElement),I=Ee(h),[O,k]=D(n,p=>[p.comboboxState,p.isTyping]),w=At(),T=R(()=>{n.actions.onChange(null),n.state.optionsElement&&(n.state.optionsElement.scrollTop=0),n.actions.goToOption({focus:B.Nothing})}),M=d.useMemo(()=>{var p;return typeof r=="function"&&i.value!==void 0?(p=r(i.value))!=null?p:"":typeof i.value=="string"?i.value:""},[i.value,r]);Le(([p,q],[g,F])=>{if(n.state.isTyping)return;let j=V.current;j&&((F===S.Open&&q===S.Closed||p!==g)&&(j.value=p),requestAnimationFrame(()=>{if(n.state.isTyping||!j||(I==null?void 0:I.activeElement)!==j)return;let{selectionStart:H,selectionEnd:E}=j;Math.abs((E??0)-(H??0))===0&&H===0&&j.setSelectionRange(j.value.length,j.value.length)}))},[M,O,I,k]),Le(([p],[q])=>{if(p===S.Open&&q===S.Closed){if(n.state.isTyping)return;let g=V.current;if(!g)return;let F=g.value,{selectionStart:j,selectionEnd:H,selectionDirection:E}=g;g.value="",g.value=F,E!==null?g.setSelectionRange(j,H,E):g.setSelectionRange(j,H)}},[O]);let P=d.useRef(!1),z=R(()=>{P.current=!0}),K=R(()=>{w.nextFrame(()=>{P.current=!1})}),v=R(p=>{switch(n.actions.setIsTyping(!0),p.key){case U.Enter:if(n.state.comboboxState!==S.Open||P.current)return;if(p.preventDefault(),p.stopPropagation(),n.selectors.activeOptionIndex(n.state)===null){n.actions.closeCombobox();return}n.actions.selectActiveOption(),i.mode===G.Single&&n.actions.closeCombobox();break;case U.ArrowDown:return p.preventDefault(),p.stopPropagation(),ce(n.state.comboboxState,{[S.Open]:()=>n.actions.goToOption({focus:B.Next}),[S.Closed]:()=>n.actions.openCombobox()});case U.ArrowUp:return p.preventDefault(),p.stopPropagation(),ce(n.state.comboboxState,{[S.Open]:()=>n.actions.goToOption({focus:B.Previous}),[S.Closed]:()=>{ie.flushSync(()=>n.actions.openCombobox()),i.value||n.actions.goToOption({focus:B.Last})}});case U.Home:if(p.shiftKey)break;return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:B.First});case U.PageUp:return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:B.First});case U.End:if(p.shiftKey)break;return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:B.Last});case U.PageDown:return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:B.Last});case U.Escape:return n.state.comboboxState!==S.Open?void 0:(p.preventDefault(),n.state.optionsElement&&!i.optionsPropsRef.current.static&&p.stopPropagation(),i.mode===G.Single&&i.value===null&&T(),n.actions.closeCombobox());case U.Tab:if(n.state.comboboxState!==S.Open)return;i.mode===G.Single&&n.state.activationTrigger!==le.Focus&&n.actions.selectActiveOption(),n.actions.closeCombobox();break}}),L=R(p=>{u==null||u(p),i.mode===G.Single&&p.target.value===""&&T(),n.actions.openCombobox()}),N=R(p=>{var q,g,F;let j=(q=p.relatedTarget)!=null?q:ae.find(H=>H!==p.currentTarget);if(!((g=n.state.optionsElement)!=null&&g.contains(j))&&!((F=n.state.buttonElement)!=null&&F.contains(j))&&n.state.comboboxState===S.Open)return p.preventDefault(),i.mode===G.Single&&i.value===null&&T(),n.actions.closeCombobox()}),W=R(p=>{var q,g,F;let j=(q=p.relatedTarget)!=null?q:ae.find(H=>H!==p.currentTarget);(g=n.state.buttonElement)!=null&&g.contains(j)||(F=n.state.optionsElement)!=null&&F.contains(j)||i.disabled||i.immediate&&n.state.comboboxState!==S.Open&&w.microTask(()=>{ie.flushSync(()=>n.actions.openCombobox()),n.actions.setActivationTrigger(le.Focus)})}),C=Ie(),Y=zt(),{isFocused:se,focusProps:ee}=Ue({autoFocus:b}),{isHovered:X,hoverProps:te}=Ke({isDisabled:y}),ne=D(n,p=>p.optionsElement),J=d.useMemo(()=>({open:O===S.Open,disabled:y,invalid:i.invalid,hover:X,focus:se,autofocus:b}),[i,X,se,b,y,i.invalid]),oe=we({ref:_,id:c,role:"combobox",type:m,"aria-controls":ne==null?void 0:ne.id,"aria-expanded":O===S.Open,"aria-activedescendant":D(n,n.selectors.activeDescendantId),"aria-labelledby":C,"aria-describedby":Y,"aria-autocomplete":"list",defaultValue:(s=(t=e.defaultValue)!=null?t:i.defaultValue!==void 0?r==null?void 0:r(i.defaultValue):null)!=null?s:i.defaultValue,disabled:y||void 0,autoFocus:b,onCompositionStart:z,onCompositionEnd:K,onKeyDown:v,onChange:L,onFocus:W,onBlur:N},ee,te);return he()({ourProps:oe,theirProps:f,slot:J,defaultTag:Rn,name:"Combobox.Input"})}let Pn="button";function Fn(e,o){let t=be("Combobox.Button"),s=pe("Combobox.Button"),[n,i]=d.useState(null),l=ye(o,i,t.actions.setButtonElement),a=d.useId(),{id:c=`headlessui-combobox-button-${a}`,disabled:u=s.disabled||!1,autoFocus:r=!1,...y}=e,b=D(t,v=>v.inputElement),m=Je(b),f=R(v=>{switch(v.key){case U.Space:case U.Enter:v.preventDefault(),v.stopPropagation(),t.state.comboboxState===S.Closed&&ie.flushSync(()=>t.actions.openCombobox()),m();return;case U.ArrowDown:v.preventDefault(),v.stopPropagation(),t.state.comboboxState===S.Closed&&(ie.flushSync(()=>t.actions.openCombobox()),t.state.dataRef.current.value||t.actions.goToOption({focus:B.First})),m();return;case U.ArrowUp:v.preventDefault(),v.stopPropagation(),t.state.comboboxState===S.Closed&&(ie.flushSync(()=>t.actions.openCombobox()),t.state.dataRef.current.value||t.actions.goToOption({focus:B.Last})),m();return;case U.Escape:if(t.state.comboboxState!==S.Open)return;v.preventDefault(),t.state.optionsElement&&!s.optionsPropsRef.current.static&&v.stopPropagation(),ie.flushSync(()=>t.actions.closeCombobox()),m();return;default:return}}),h=R(v=>{v.preventDefault(),!tn(v.currentTarget)&&(v.button===je.Left&&(t.state.comboboxState===S.Open?t.actions.closeCombobox():t.actions.openCombobox()),m())}),V=Ie([c]),{isFocusVisible:_,focusProps:I}=Ue({autoFocus:r}),{isHovered:O,hoverProps:k}=Ke({isDisabled:u}),{pressed:w,pressProps:T}=Bt({disabled:u}),[M,P]=D(t,v=>[v.comboboxState,v.optionsElement]),z=d.useMemo(()=>({open:M===S.Open,active:w||M===S.Open,disabled:u,invalid:s.invalid,value:s.value,hover:O,focus:_}),[s,O,_,w,u,M]),K=we({ref:l,id:c,type:Dt(e,n),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":P==null?void 0:P.id,"aria-expanded":M===S.Open,"aria-labelledby":V,disabled:u||void 0,autoFocus:r,onMouseDown:h,onKeyDown:f},I,k,T);return he()({ourProps:K,theirProps:y,slot:z,defaultTag:Pn,name:"Combobox.Button"})}let Vn="div",An=Ve.RenderStrategy|Ve.Static;function zn(e,o){var t,s,n;let i=d.useId(),{id:l=`headlessui-combobox-options-${i}`,hold:a=!1,anchor:c,portal:u=!1,modal:r=!0,transition:y=!1,...b}=e,m=be("Combobox.Options"),f=pe("Combobox.Options"),h=kt(c);h&&(u=!0);let[V,_]=Lt(h),[I,O]=d.useState(null),k=Nt(),w=ye(o,h?V:null,m.actions.setOptionsElement,O),[T,M,P,z,K]=D(m,E=>[E.comboboxState,E.inputElement,E.buttonElement,E.optionsElement,E.activationTrigger]),v=Ee(M||P),L=Ee(z),N=qt(),[W,C]=Wt(y,I,N!==null?(N&ge.Open)===ge.Open:T===S.Open);Ht(W,M,m.actions.closeCombobox);let Y=f.__demoMode?!1:r&&T===S.Open;Ut(Y,L);let se=f.__demoMode?!1:r&&T===S.Open;Kt(se,{allowed:d.useCallback(()=>[M,P,z],[M,P,z])}),re(()=>{var E;f.optionsPropsRef.current.static=(E=e.static)!=null?E:!1},[f.optionsPropsRef,e.static]),re(()=>{f.optionsPropsRef.current.hold=a},[f.optionsPropsRef,a]),dn(T===S.Open,{container:z,accept(E){return E.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:E.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(E){E.setAttribute("role","none")}});let ee=Ie([P==null?void 0:P.id]),X=d.useMemo(()=>({open:T===S.Open,option:void 0}),[T]),te=R(()=>{m.actions.setActivationTrigger(le.Pointer)}),ne=R(E=>{E.preventDefault(),m.actions.setActivationTrigger(le.Pointer)}),J=we(h?k():{},{"aria-labelledby":ee,role:"listbox","aria-multiselectable":f.mode===G.Multi?!0:void 0,id:l,ref:w,style:{...b.style,..._,"--input-width":Fe(M,!0).width,"--button-width":Fe(P,!0).width},onWheel:K===le.Pointer?void 0:te,onMouseDown:ne,...Yt(C)}),oe=W&&T===S.Closed,p=Ae(oe,(t=f.virtual)==null?void 0:t.options),q=Ae(oe,f.value),g=R(E=>f.compare(q,E)),F=d.useMemo(()=>{if(!f.virtual)return f;if(p===void 0)throw new Error("Missing `options` in virtual mode");return p!==f.virtual.options?{...f,virtual:{...f.virtual,options:p}}:f},[f,p,(s=f.virtual)==null?void 0:s.options]);f.virtual&&Object.assign(b,{children:A.createElement(fe.Provider,{value:F},A.createElement(Tn,{slot:X},b.children))});let j=he(),H=d.useMemo(()=>f.mode===G.Multi?f:{...f,isSelected:g},[f,g]);return A.createElement(Jt,{enabled:u?e.static||W:!1,ownerDocument:v},A.createElement(fe.Provider,{value:H},j({ourProps:J,theirProps:{...b,children:A.createElement(sn,{freeze:oe},typeof b.children=="function"?(n=b.children)==null?void 0:n.call(b,X):b.children)},slot:X,defaultTag:Vn,features:An,visible:W,name:"Combobox.Options"})))}let Bn="div";function Dn(e,o){var t,s,n;let i=pe("Combobox.Option"),l=be("Combobox.Option"),a=d.useId(),{id:c=`headlessui-combobox-option-${a}`,value:u,disabled:r=(n=(s=(t=i.virtual)==null?void 0:t.disabled)==null?void 0:s.call(t,u))!=null?n:!1,order:y=null,...b}=e,[m]=D(l,C=>[C.inputElement]),f=Je(m),h=D(l,d.useCallback(C=>l.selectors.isActive(C,u,c),[u,c])),V=i.isSelected(u),_=d.useRef(null),I=He({disabled:r,value:u,domRef:_,order:y}),O=d.useContext(Ze),k=ye(o,_,O?O.measureElement:null),w=R(()=>{l.actions.setIsTyping(!1),l.actions.onChange(u)});re(()=>l.actions.registerOption(c,I),[I,c]);let T=D(l,d.useCallback(C=>l.selectors.shouldScrollIntoView(C,u,c),[u,c]));re(()=>{if(T)return nn().requestAnimationFrame(()=>{var C,Y;(Y=(C=_.current)==null?void 0:C.scrollIntoView)==null||Y.call(C,{block:"nearest"})})},[T,_]);let M=R(C=>{C.preventDefault(),C.button===je.Left&&(r||(w(),on()||requestAnimationFrame(()=>f()),i.mode===G.Single&&l.actions.closeCombobox()))}),P=R(()=>{if(r)return l.actions.goToOption({focus:B.Nothing});let C=i.calculateIndex(u);l.actions.goToOption({focus:B.Specific,idx:C})}),z=Pt(),K=R(C=>z.update(C)),v=R(C=>{if(!z.wasMoved(C)||r||h)return;let Y=i.calculateIndex(u);l.actions.goToOption({focus:B.Specific,idx:Y},le.Pointer)}),L=R(C=>{z.wasMoved(C)&&(r||h&&(i.optionsPropsRef.current.hold||l.actions.goToOption({focus:B.Nothing})))}),N=d.useMemo(()=>({active:h,focus:h,selected:V,disabled:r}),[h,V,r]),W={id:c,ref:k,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":V,disabled:void 0,onMouseDown:M,onFocus:P,onPointerEnter:K,onMouseEnter:K,onPointerMove:v,onMouseMove:v,onPointerLeave:L,onMouseLeave:L};return he()({ourProps:W,theirProps:b,slot:N,defaultTag:Bn,name:"Combobox.Option"})}let kn=me($n),et=me(Fn),tt=me(_n),Ln=_t,nt=me(zn),ot=me(Dn),Nn=Object.assign(kn,{Input:tt,Button:et,Label:Ln,Options:nt,Option:ot});const qn=`
  jn-relative
`,Wn=`
  jn-pointer-events-none
  jn-top-2
  jn-left-[0.9375rem]
`,Hn=`
  jn-rounded-3px
  jn-bg-theme-textinput
  jn-text-theme-textinput
  jn-border
  jn-text-base
  jn-leading-4
  jn-w-full
  jn-px-4
  jn-h-textinput
  jn-text-left
  jn-overflow-hidden
  jn-text-ellipsis
  jn-whitespace-nowrap
  focus:jn-outline-none
  focus:jn-ring-2
  focus:jn-ring-theme-focus
`,Un=`
  jn-pt-[1.125rem] 
  jn-pb-1
`,Kn=`
  jn-py-4
`,Yn=`
  jn-cursor-not-allowed
  jn-pointer-events-none
  jn-opacity-50
`,Jn=`
  jn-border-theme-textinput-default
`,Gn=`
  jn-border-theme-success
`,Qn=`
  jn-border-theme-error
`,Xn=`
  jn-absolute
  jn-top-0
  jn-right-0
  jn-h-textinput
  jn-w-6
  jn-h-4
  jn-border-l-0
  jn-border-y-[1px]
  jn-border-r-[1px]
  jn-rounded-tr
  jn-rounded-br
  jn-appearance-none
  jn-bg-theme-textinput
  jn-text-theme-textinput
`,Zn=`
  jn-border-theme-textinput-default
`,eo=`
  jn-border-theme-error
`,to=`
  jn-border-theme-success
`,no=`
  jn-cursor-not-allowed
  jn-pointer-events-none
  jn-bg-transparent
  jn-opacity-50
`,oo=`
  jn-rounded
  jn-bg-theme-background-lvl-1
  jn-w-full
  jn-overflow-y-auto
`,so=`
  jn-absolute
  jn-top-[.4rem]
  jn-right-6
`,io=`
  jn-absolute
  jn-top-1/2
  jn-left-1/2
  jn-translate-y-[-50%]
  jn-translate-x-[-0.75rem]
`,xe=d.createContext(void 0),qe=({ariaLabel:e,children:o,className:t="",defaultValue:s="",disabled:n=!1,error:i=!1,errortext:l="",helptext:a="",id:c="",invalid:u=!1,loading:r=!1,label:y,name:b="",onBlur:m,onChange:f,onFocus:h,onInputChange:V,placeholder:_="Select…",required:I=!1,successtext:O="",truncateOptions:k=!1,valid:w=!1,value:T="",valueLabel:M,width:P="full",wrapperClassName:z="",...K})=>{const v=x=>!(typeof x=="string"&&x.trim().length===0),L=c||"juno-combobox-"+d.useId(),N="juno-combobox-helptext-"+d.useId(),[W,C]=d.useState(!1),[Y,se]=d.useState(new Map),[ee,X]=d.useState(""),[te,ne]=d.useState(T),[J,oe]=d.useState(!1),[p,q]=d.useState(!1),[g,F]=d.useState(!1),[j,H]=d.useState(!1),[E,st]=d.useState(!1),{x:it,y:lt,strategy:at,refs:Me,context:$e}=vt({open:W,onOpenChange:C,placement:"bottom-start",middleware:[Ct(4),Ot(),Et(),It({apply({availableWidth:x,availableHeight:Q,elements:Z,rects:ue}){Object.assign(Z.floating.style,{maxWidth:`${x}px`,maxHeight:`${Q}px`,minWidth:`${ue.reference.width}px`,overflowY:"auto"})}})],whileElementsMounted:St}),{getReferenceProps:rt,getFloatingProps:ut}=gt([xt($e),yt($e)]),dt=(x,Q,Z)=>{se(ue=>new Map([...Array.from(ue),[x??Z,{val:x,label:Q,children:Z}]]))},Re=d.useMemo(()=>u||!!(l&&v(l)),[u,l]),_e=d.useMemo(()=>w||!!(O&&v(O)),[w,O]);d.useEffect(()=>{ne(T)},[T]),d.useEffect(()=>{q(i)},[i]),d.useEffect(()=>{oe(r)},[r]),d.useEffect(()=>{H(Re)},[Re]),d.useEffect(()=>{st(_e)},[_e]);const ct=x=>{ne(x),x&&C(!1),f&&f(x)},pt=x=>{var Q;X((Q=x==null?void 0:x.target)==null?void 0:Q.value),V&&V(x)},ft=x=>{F(!0),C(!0),h&&h(x)},mt=x=>{F(!1),C(!1),m&&m(x)},ht=Tt(),bt=ee===""?A.Children.toArray(o):A.Children.toArray(o).filter(x=>{var Q;if(A.isValidElement(x)){const Z=((Q=x.props.children)==null?void 0:Q.toString())||x.props.label||x.props.value;return Z==null?void 0:Z.toLowerCase().includes(ee.toLowerCase())}else return!1});return $.jsx(xe.Provider,{value:{selectedValue:te,truncateOptions:k,addOptionValueAndLabel:dt},children:$.jsxs("div",{className:`
          juno-combobox-wrapper
          jn-relative
          ${P=="auto"?"jn-inline-block":"jn-block"}
          ${P=="auto"?"jn-w-auto":"jn-w-full"}
          ${z}
        `,children:[$.jsxs(Nn,{defaultValue:s,disabled:n||J||p,name:b,onChange:ct,value:te||s,...K,children:[$.jsxs("div",{ref:Me.setReference,className:`juno-combobox-input-wrapper ${qn} ${n?"jn-cursor-not-allowed":""}`,children:[y&&v(y)&&!J&&!p?$.jsx(wt,{text:y,disabled:n,required:I,htmlFor:L,className:`${Wn}`,floating:!0,minimized:!!(_||g||ee&&v(ee)||te&&v(te)),...rt()}):"",$.jsx(tt,{autoComplete:"off","aria-label":e||y,"aria-describedby":a?N:"",id:L,onBlur:mt,onChange:pt,onFocus:ft,placeholder:!J&&!p?_:"",displayValue:x=>{var Q,Z,ue;return((Z=(Q=Y.get(x))==null?void 0:Q.children)==null?void 0:Z.toString())||((ue=Y.get(x))==null?void 0:ue.label)||M||(x==null?void 0:x.toString())||""},className:`
                juno-combobox-input 
                ${Hn} 
                ${y&&v(y)?Un:Kn}
                ${n?Yn:""}
                ${j?"juno-combobox-invalid "+Qn:""} 
                ${E?"juno-combobox-valid "+Gn:""}  
                ${E||j?"":Jn} 
                ${J?"juno-combobox-loading jn-cursor-not-allowed":""}
                ${p?"juno-combobox-error jn-cursor-not-allowed":""}
                ${t}
              `}),J||p?$.jsx("span",{className:`${io}`,children:J?$.jsx(jt,{className:"jn-cursor-not-allowed"}):$.jsx(ve,{icon:"errorOutline",color:"jn-text-theme-error",className:"jn-cursor-not-allowed"})}):E||j?$.jsx("span",{className:`
                  juno-combobox-icon-container 
                  ${so} 
                  ${n?"jn-opacity-50":""}
                `,children:$.jsx(ve,{icon:E?"checkCircle":"dangerous",color:E?"jn-text-theme-success":"jn-text-theme-error"})}):"",!p&&!J?$.jsx(et,{className:`
                  juno-combobox-toggle 
                  ${Xn}
                  ${n?no:""}
                  ${j?"juno-combobox-toggle-invalid "+eo:""} 
                  ${E?"juno-combobox-toggle-valid "+to:""}  
                  ${E||j?"":Zn} 
                `,children:({open:x})=>(d.useEffect(()=>{x!==W&&C(x)},[x]),$.jsx(ve,{icon:x?"expandLess":"expandMore"}))}):null]}),W&&ie.createPortal($.jsx("div",{ref:Me.setFloating,className:`juno-combobox-options ${oo}`,style:{position:at,top:lt??0,left:it??0},...ut(),children:$.jsx(nt,{static:!0,className:"jn-w-full",children:bt})}),ht??document.body)]}),l&&v(l)?$.jsx(Se,{text:l,variant:"error"}):"",O&&v(O)?$.jsx(Se,{text:O,variant:"success"}):"",a&&v(a)?$.jsx(Se,{text:a,id:N}):""]})})};try{xe.displayName="ComboBoxContext",xe.__docgenInfo={description:"",displayName:"ComboBoxContext",props:{}}}catch{}try{qe.displayName="ComboBox",qe.__docgenInfo={description:"",displayName:"ComboBox",props:{ariaLabel:{defaultValue:null,description:"The aria-label of the ComboBox. Defaults to the label if label was passed.",name:"ariaLabel",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"The children to Render. Use `ComboBox.Option` elements.",name:"children",required:!1,type:{name:"any"}},className:{defaultValue:{value:""},description:"A custom className. Will be passed to the internal text input element of the ComboBox",name:"className",required:!1,type:{name:"string"}},defaultValue:{defaultValue:{value:""},description:"Pass a defaultValue to use as an uncontrolled Component that will handle its state internally",name:"defaultValue",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Whether the ComboBox is disabled",name:"disabled",required:!1,type:{name:"boolean"}},error:{defaultValue:{value:"false"},description:"Whether the ComboBox has an error. Note this refers to an internal error like failing to load options etc., to indicate failed validation use `invalid` instead.",name:"error",required:!1,type:{name:"boolean"}},errortext:{defaultValue:{value:""},description:"An errortext to display when the ComboBox failed validation or an internal error occurred.",name:"errortext",required:!1,type:{name:"any"}},helptext:{defaultValue:{value:""},description:"A helptext to render to explain meaning and significance of the ComboBox",name:"helptext",required:!1,type:{name:"any"}},id:{defaultValue:{value:""},description:"The Id of the ComboBox. Will be assigned to the text input part of the ComboBox. If not passed, an id will be auto-generated.",name:"id",required:!1,type:{name:"string"}},invalid:{defaultValue:{value:"false"},description:"Whether the ComboBox failed validation",name:"invalid",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"The label of the ComboBox",name:"label",required:!1,type:{name:"string"}},loading:{defaultValue:{value:"false"},description:"Whether the ComboBox is busy loading options",name:"loading",required:!1,type:{name:"boolean"}},name:{defaultValue:{value:""},description:"The name attribute of the ComboBox when used as part of a form",name:"name",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"A handler to execute when the ComboBox looses focus",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onChange:{defaultValue:null,description:"A handler to execute when the ComboBox' selected value changes",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},onFocus:{defaultValue:null,description:"A handler to execute when the ComboBox input receives focus",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onInputChange:{defaultValue:null,description:"Handler to execute when the ComboBox text input value changes",name:"onInputChange",required:!1,type:{name:"ChangeEventHandler<HTMLInputElement>"}},placeholder:{defaultValue:{value:"Select…"},description:"A placeholder to render in the text input",name:"placeholder",required:!1,type:{name:"string"}},required:{defaultValue:{value:"false"},description:"Whether the ComboBox is required",name:"required",required:!1,type:{name:"boolean"}},successtext:{defaultValue:{value:""},description:"A text to display in case the ComboBox was successfully validated. Will set the ComboBox to `valid` when passed.",name:"successtext",required:!1,type:{name:"any"}},truncateOptions:{defaultValue:{value:"false"},description:"Whether the option labels should be truncated in case they are longer/wider than the available space in an option or not. Default is FALSE.",name:"truncateOptions",required:!1,type:{name:"boolean"}},valid:{defaultValue:{value:"false"},description:"Whether the ComboBox was successfully validated",name:"valid",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"The selected value of the ComboBox in Controlled Mode.",name:"value",required:!1,type:{name:"string"}},valueLabel:{defaultValue:null,description:"The label of the passed value or defaultValue. If you want to use controlled mode or pass as defaultValue in uncontrolled mode and additionally use labels for human-readable SelectOptions, you need to also pass the matching label for the passed value/defaultValue so that the Select component can render itself properly",name:"valueLabel",required:!1,type:{name:"string"}},width:{defaultValue:{value:"full"},description:"The width of the text input. Either 'full' (default) or 'auto'.",name:"width",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"full"'}]}},wrapperClassName:{defaultValue:{value:""},description:"Pass a custom classname to the wrapping <div> element. This can be useful if you must add styling to the outermost wrapping element of this component, e.g. for positioning.",name:"wrapperClassName",required:!1,type:{name:"string"}}}}}catch{}const lo=`
  jn-flex
  jn-pt-[0.6875rem]
  jn-pb-[0.5rem]
  jn-pr-[0.875rem]
  jn-select-none
  data-[headlessui-state~=active]:jn-outline-none
  data-[headlessui-state~=active]:jn-ring-2
  data-[headlessui-state~=active]:jn-ring-inset
  data-[headlessui-state~=active]:jn-ring-theme-focus
  data-[headlessui-state~=active]:jn-bg-theme-background-lvl-3
`,ao=`
  jn-text-theme-default
  jn-pl-[2.375rem]
`,ro=`
  jn-text-theme-accent
  jn-pl-3.5
`,uo=`
  jn-inline-block
  jn-mr-1.5
`,co=`
  jn-opacity-50
  jn-cursor-not-allowed
`,po=`
  jn-block
  jn-h-6
  jn-overflow-hidden
  jn-text-ellipsis
  jn-whitespace-nowrap
`,We=({children:e,disabled:o=!1,value:t="",label:s="",className:n="",...i})=>{const l=d.useContext(xe),{selectedValue:a,truncateOptions:c,addOptionValueAndLabel:u}=l||{};d.useEffect(()=>{u&&u(t,s,e)},[t,s,e]);const r=t||e;return $.jsx(ot,{value:r,disabled:o,as:d.Fragment,children:$.jsxs("li",{className:`
          juno-combobox-option 
          ${lo}
          ${a===t?ro:ao}
          ${o?"jn-cursor-not-allowed":""}
          ${n}
        `,...i,children:[a===r?$.jsx(ve,{icon:"check",size:"18",className:`${uo}`}):"",$.jsx("span",{className:`
            ${o?co:""}
            ${c?po:""}
          `,children:e||s||t})]})})};try{We.displayName="ComboBoxOption",We.__docgenInfo={description:"",displayName:"ComboBoxOption",props:{children:{defaultValue:null,description:"Content to render inside the ComboBoxOption. Is specified should be string.",name:"children",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"If option is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"Option value.",name:"value",required:!1,type:{name:"string"}},label:{defaultValue:{value:""},description:"Option label.",name:"label",required:!1,type:{name:"string"}},className:{defaultValue:{value:""},description:"CSS class for the option.",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{qe as C,We as a};
