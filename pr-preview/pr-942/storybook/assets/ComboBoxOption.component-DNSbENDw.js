import{j as T}from"./jsx-runtime-BjG_zV1W.js";import{r as d,e as A}from"./index-BdGwgT04.js";import{u as gt,f as xt,a as yt,d as St,h as Ct,o as Ot,s as Et,g as It,k as wt}from"./floating-ui.react-ubu_7ndR.js";import{L as jt}from"./Label.component-D4gjYofZ.js";import{F as Se}from"./FormHint.component-Bn51_8r6.js";import{I as ve}from"./Icon.component-Ctcp0kJb.js";import{S as Tt}from"./Spinner.component-C7ss7i9x.js";import{u as Mt}from"./PortalProvider.component-SN9LOs4c.js";import{r as ie}from"./index-C7VnYWJ0.js";import{W as Ue,a as R,a3 as $t,m as Rt,c as B,u as ce,f as Pe,_ as _t,K as me,Q as Ft,S as D,y as ye,n as re,Y as Pt,L as he,b as Vt,d as At,j as Ee,v as zt,I as Ie,U as Bt,$ as Ke,e as Ye,h as we,w as Dt,i as kt,x as Lt,R as Nt,t as qt,k as Wt,l as Ht,q as Ut,r as Kt,s as Yt,z as Jt,A as Ve,B as Gt,C as Qt,D as Xt,E as Zt,M as en,G as tn,p as ge,O as Ae,J as U,H as nn,X as on,a4 as sn}from"./portal-SlZPv7cO.js";import{l as ze,f as an,a as ln,T as rn,u as un,j as dn}from"./frozen-DZprLUpS.js";import{F as cn}from"./use-tree-walker-V2vuNdFj.js";function de(e,o,t){let s=t.initialDeps??[],n;function i(){var a,l,c,u;let r;t.key&&((a=t.debug)!=null&&a.call(t))&&(r=Date.now());const x=e();if(!(x.length!==s.length||x.some((f,h)=>s[h]!==f)))return n;s=x;let m;if(t.key&&((l=t.debug)!=null&&l.call(t))&&(m=Date.now()),n=o(...x),t.key&&((c=t.debug)!=null&&c.call(t))){const f=Math.round((Date.now()-r)*100)/100,h=Math.round((Date.now()-m)*100)/100,V=h/16,_=(I,S)=>{for(I=String(I);I.length<S;)I=" "+I;return I};console.info(`%c⏱ ${_(h,5)} /${_(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*V,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(u=t==null?void 0:t.onChange)==null||u.call(t,n),n}return i.updateDeps=a=>{s=a},i}function Ce(e,o){if(e===void 0)throw new Error("Unexpected undefined");return e}const pn=(e,o)=>Math.abs(e-o)<=1,fn=(e,o,t)=>{let s;return function(...n){e.clearTimeout(s),s=e.setTimeout(()=>o.apply(this,n),t)}},Be=e=>{const{offsetWidth:o,offsetHeight:t}=e;return{width:o,height:t}},mn=e=>e,hn=e=>{const o=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),s=[];for(let n=o;n<=t;n++)s.push(n);return s},bn=(e,o)=>{const t=e.scrollElement;if(!t)return;const s=e.targetWindow;if(!s)return;const n=a=>{const{width:l,height:c}=a;o({width:Math.round(l),height:Math.round(c)})};if(n(Be(t)),!s.ResizeObserver)return()=>{};const i=new s.ResizeObserver(a=>{const l=()=>{const c=a[0];if(c!=null&&c.borderBoxSize){const u=c.borderBoxSize[0];if(u){n({width:u.inlineSize,height:u.blockSize});return}}n(Be(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(t,{box:"border-box"}),()=>{i.unobserve(t)}},De={passive:!0},ke=typeof window>"u"?!0:"onscrollend"in window,vn=(e,o)=>{const t=e.scrollElement;if(!t)return;const s=e.targetWindow;if(!s)return;let n=0;const i=e.options.useScrollendEvent&&ke?()=>{}:fn(s,()=>{o(n,!1)},e.options.isScrollingResetDelay),a=r=>()=>{const{horizontal:x,isRtl:b}=e.options;n=x?t.scrollLeft*(b&&-1||1):t.scrollTop,i(),o(n,r)},l=a(!0),c=a(!1);c(),t.addEventListener("scroll",l,De);const u=e.options.useScrollendEvent&&ke;return u&&t.addEventListener("scrollend",c,De),()=>{t.removeEventListener("scroll",l),u&&t.removeEventListener("scrollend",c)}},gn=(e,o,t)=>{if(o!=null&&o.borderBoxSize){const s=o.borderBoxSize[0];if(s)return Math.round(s[t.options.horizontal?"inlineSize":"blockSize"])}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},xn=(e,{adjustments:o=0,behavior:t},s)=>{var n,i;const a=e+o;(i=(n=s.scrollElement)==null?void 0:n.scrollTo)==null||i.call(n,{[s.options.horizontal?"left":"top"]:a,behavior:t})};class yn{constructor(o){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const s=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(n=>{n.forEach(i=>{const a=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var n;(n=s())==null||n.disconnect(),t=null},observe:n=>{var i;return(i=s())==null?void 0:i.observe(n,{box:"border-box"})},unobserve:n=>{var i;return(i=s())==null?void 0:i.unobserve(n)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([s,n])=>{typeof n>"u"&&delete t[s]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:mn,rangeExtractor:hn,onChange:()=>{},measureElement:gn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var s,n;(n=(s=this.options).onChange)==null||n.call(s,this,t)},this.maybeNotify=de(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const s=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==s){if(this.cleanup(),!s){this.maybeNotify();return}this.scrollElement=s,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(n=>{this.observer.observe(n)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(n,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,s)=>{const n=new Map,i=new Map;for(let a=s-1;a>=0;a--){const l=t[a];if(n.has(l.lane))continue;const c=i.get(l.lane);if(c==null||l.end>c.end?i.set(l.lane,l):l.end<c.end&&n.set(l.lane,!0),n.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((a,l)=>a.end===l.end?a.index-l.index:a.end-l.end)[0]:void 0},this.getMeasurementOptions=de(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,s,n,i,a)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:s,scrollMargin:n,getItemKey:i,enabled:a}),{key:!1}),this.getMeasurements=de(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:s,scrollMargin:n,getItemKey:i,enabled:a},l)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(r=>{this.itemSizeCache.set(r.key,r.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,c);for(let r=c;r<t;r++){const x=i(r),b=this.options.lanes===1?u[r-1]:this.getFurthestMeasurement(u,r),m=b?b.end+this.options.gap:s+n,f=l.get(x),h=typeof f=="number"?f:this.options.estimateSize(r),V=m+h,_=b?b.lane:r%this.options.lanes;u[r]={index:r,start:m,size:h,end:V,key:x,lane:_}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=de(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,s,n,i)=>this.range=t.length>0&&s>0?Sn({measurements:t,outerSize:s,scrollOffset:n,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=de(()=>{let t=null,s=null;const n=this.calculateRange();return n&&(t=n.startIndex,s=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,s]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,s]},(t,s,n,i,a)=>i===null||a===null?[]:t({startIndex:i,endIndex:a,overscan:s,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const s=this.options.indexAttribute,n=t.getAttribute(s);return n?parseInt(n,10):(console.warn(`Missing attribute name '${s}={index}' on measured element.`),-1)},this._measureElement=(t,s)=>{const n=this.indexFromElement(t),i=this.measurementsCache[n];if(!i)return;const a=i.key,l=this.elementsCache.get(a);l!==t&&(l&&this.observer.unobserve(l),this.observer.observe(t),this.elementsCache.set(a,t)),t.isConnected&&this.resizeItem(n,this.options.measureElement(t,s,this))},this.resizeItem=(t,s)=>{const n=this.measurementsCache[t];if(!n)return;const i=this.itemSizeCache.get(n.key)??n.size,a=s-i;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,a,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,s)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((s,n)=>{s.isConnected||(this.observer.unobserve(s),this.elementsCache.delete(n))});return}this._measureElement(t,void 0)},this.getVirtualItems=de(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,s)=>{const n=[];for(let i=0,a=t.length;i<a;i++){const l=t[i],c=s[l];n.push(c)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const s=this.getMeasurements();if(s.length!==0)return Ce(s[Je(0,s.length-1,n=>Ce(s[n]).start,t)])},this.getOffsetForAlignment=(t,s,n=0)=>{const i=this.getSize(),a=this.getScrollOffset();s==="auto"&&(s=t>=a+i?"end":"start"),s==="center"?t+=(n-i)/2:s==="end"&&(t-=i);const l=this.getTotalSize()-i;return Math.max(Math.min(l,t),0)},this.getOffsetForIndex=(t,s="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const n=this.measurementsCache[t];if(!n)return;const i=this.getSize(),a=this.getScrollOffset();if(s==="auto")if(n.end>=a+i-this.options.scrollPaddingEnd)s="end";else if(n.start<=a+this.options.scrollPaddingStart)s="start";else return[a,s];const l=s==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,s,n.size),s]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:s="start",behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,s),{adjustments:void 0,behavior:n})},this.scrollToIndex=(t,{align:s="auto",behavior:n}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const i=this.getOffsetForIndex(t,s);if(!i)return;const[a,l]=i;this._scrollToOffset(a,{adjustments:void 0,behavior:n}),n!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[u]=Ce(this.getOffsetForIndex(t,l)),r=this.getScrollOffset();pn(u,r)||this.scrollToIndex(t,{align:l,behavior:n})}else this.scrollToIndex(t,{align:l,behavior:n})}))},this.scrollBy=(t,{behavior:s}={})=>{this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:s})},this.getTotalSize=()=>{var t;const s=this.getMeasurements();let n;if(s.length===0)n=this.options.paddingStart;else if(this.options.lanes===1)n=((t=s[s.length-1])==null?void 0:t.end)??0;else{const i=Array(this.options.lanes).fill(null);let a=s.length-1;for(;a>=0&&i.some(l=>l===null);){const l=s[a];i[l.lane]===null&&(i[l.lane]=l.end),a--}n=Math.max(...i.filter(l=>l!==null))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:s,behavior:n})=>{this.options.scrollToFn(t,{behavior:n,adjustments:s},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(o)}}const Je=(e,o,t,s)=>{for(;e<=o;){const n=(e+o)/2|0,i=t(n);if(i<s)e=n+1;else if(i>s)o=n-1;else return n}return e>0?e-1:0};function Sn({measurements:e,outerSize:o,scrollOffset:t,lanes:s}){const n=e.length-1,i=c=>e[c].start;if(e.length<=s)return{startIndex:0,endIndex:n};let a=Je(0,n,i,t),l=a;if(s===1)for(;l<n&&e[l].end<t+o;)l++;else if(s>1){const c=Array(s).fill(0);for(;l<n&&c.some(r=>r<t+o);){const r=e[l];c[r.lane]=r.end,l++}const u=Array(s).fill(t+o);for(;a>=0&&u.some(r=>r>=t);){const r=e[a];u[r.lane]=r.start,a--}a=Math.max(0,a-a%s),l=Math.min(n,l+(s-1-l%s))}return{startIndex:a,endIndex:l}}const Le=typeof document<"u"?d.useLayoutEffect:d.useEffect;function Cn(e){const o=d.useReducer(()=>({}),{})[1],t={...e,onChange:(n,i)=>{var a;i?ie.flushSync(o):o(),(a=e.onChange)==null||a.call(e,n,i)}},[s]=d.useState(()=>new yn(t));return s.setOptions(t),Le(()=>s._didMount(),[]),Le(()=>s._willUpdate()),s}function On(e){return Cn({observeElementRect:bn,observeElementOffset:vn,scrollToFn:xn,...e})}function En(e,o,t,s){let n=Ue(t);d.useEffect(()=>{e=e??window;function i(a){n.current(a)}return e.addEventListener(o,i,s),()=>e.removeEventListener(o,i,s)},[e,o,s])}function Ge(e){let o=d.useRef({value:"",selectionStart:null,selectionEnd:null});return En(e,"blur",t=>{let s=t.target;s instanceof HTMLInputElement&&(o.current={value:s.value,selectionStart:s.selectionStart,selectionEnd:s.selectionEnd})}),R(()=>{if(document.activeElement!==e&&e instanceof HTMLInputElement&&e.isConnected){if(e.focus({preventScroll:!0}),e.value!==o.current.value)e.setSelectionRange(e.value.length,e.value.length);else{let{selectionStart:t,selectionEnd:s}=o.current;t!==null&&s!==null&&e.setSelectionRange(t,s)}o.current={value:"",selectionStart:null,selectionEnd:null}}})}function Ne(e,o){let t=d.useRef([]),s=R(e);d.useEffect(()=>{let n=[...t.current];for(let[i,a]of o.entries())if(t.current[i]!==a){let l=s(o,n);return t.current=o,l}},[s,...o])}function In(e){function o(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",o))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",o),o())}let le=[];In(()=>{function e(o){if(!(o.target instanceof HTMLElement)||o.target===document.body||le[0]===o.target)return;let t=o.target;t=t.closest($t),le.unshift(t??o.target),le=le.filter(s=>s!=null&&s.isConnected),le.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});var je=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(je||{}),wn=Object.defineProperty,jn=(e,o,t)=>o in e?wn(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,qe=(e,o,t)=>(jn(e,typeof o!="symbol"?o+"":o,t),t),y=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(y||{}),Q=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Q||{}),ae=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(ae||{}),Qe=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.SetTyping=3]="SetTyping",e[e.RegisterOption=4]="RegisterOption",e[e.UnregisterOption=5]="UnregisterOption",e[e.DefaultToFirstOption=6]="DefaultToFirstOption",e[e.SetActivationTrigger=7]="SetActivationTrigger",e[e.UpdateVirtualConfiguration=8]="UpdateVirtualConfiguration",e[e.SetInputElement=9]="SetInputElement",e[e.SetButtonElement=10]="SetButtonElement",e[e.SetOptionsElement=11]="SetOptionsElement",e))(Qe||{});function Oe(e,o=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,s=o(e.options.slice()),n=s.length>0&&s[0].dataRef.current.order!==null?s.sort((a,l)=>a.dataRef.current.order-l.dataRef.current.order):_t(s,a=>a.dataRef.current.domRef.current),i=t?n.indexOf(t):null;return i===-1&&(i=null),{options:n,activeOptionIndex:i}}let Tn={1(e){var o;return(o=e.dataRef.current)!=null&&o.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(e){var o,t;if((o=e.dataRef.current)!=null&&o.disabled||e.comboboxState===0)return e;if((t=e.dataRef.current)!=null&&t.value){let s=e.dataRef.current.calculateIndex(e.dataRef.current.value);if(s!==-1)return{...e,activeOptionIndex:s,comboboxState:0,__demoMode:!1}}return{...e,comboboxState:0,__demoMode:!1}},3(e,o){return e.isTyping===o.isTyping?e:{...e,isTyping:o.isTyping}},2(e,o){var t,s,n,i;if((t=e.dataRef.current)!=null&&t.disabled||e.optionsElement&&!((s=e.dataRef.current)!=null&&s.optionsPropsRef.current.static)&&e.comboboxState===1)return e;if(e.virtual){let{options:u,disabled:r}=e.virtual,x=o.focus===B.Specific?o.idx:Pe(o,{resolveItems:()=>u,resolveActiveIndex:()=>{var m,f;return(f=(m=e.activeOptionIndex)!=null?m:u.findIndex(h=>!r(h)))!=null?f:null},resolveDisabled:r,resolveId(){throw new Error("Function not implemented.")}}),b=(n=o.trigger)!=null?n:2;return e.activeOptionIndex===x&&e.activationTrigger===b?e:{...e,activeOptionIndex:x,activationTrigger:b,isTyping:!1,__demoMode:!1}}let a=Oe(e);if(a.activeOptionIndex===null){let u=a.options.findIndex(r=>!r.dataRef.current.disabled);u!==-1&&(a.activeOptionIndex=u)}let l=o.focus===B.Specific?o.idx:Pe(o,{resolveItems:()=>a.options,resolveActiveIndex:()=>a.activeOptionIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled}),c=(i=o.trigger)!=null?i:2;return e.activeOptionIndex===l&&e.activationTrigger===c?e:{...e,...a,isTyping:!1,activeOptionIndex:l,activationTrigger:c,__demoMode:!1}},4:(e,o)=>{var t,s,n,i;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:[...e.options,o.payload]};let a=o.payload,l=Oe(e,u=>(u.push(a),u));e.activeOptionIndex===null&&(n=(s=e.dataRef.current).isSelected)!=null&&n.call(s,o.payload.dataRef.current.value)&&(l.activeOptionIndex=l.options.indexOf(a));let c={...e,...l,activationTrigger:2};return(i=e.dataRef.current)!=null&&i.__demoMode&&e.dataRef.current.value===void 0&&(c.activeOptionIndex=0),c},5:(e,o)=>{var t;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:e.options.filter(n=>n.id!==o.id)};let s=Oe(e,n=>{let i=n.findIndex(a=>a.id===o.id);return i!==-1&&n.splice(i,1),n});return{...e,...s,activationTrigger:2}},6:(e,o)=>e.defaultToFirstOption===o.value?e:{...e,defaultToFirstOption:o.value},7:(e,o)=>e.activationTrigger===o.trigger?e:{...e,activationTrigger:o.trigger},8:(e,o)=>{var t,s;if(e.virtual===null)return{...e,virtual:{options:o.options,disabled:(t=o.disabled)!=null?t:()=>!1}};if(e.virtual.options===o.options&&e.virtual.disabled===o.disabled)return e;let n=e.activeOptionIndex;if(e.activeOptionIndex!==null){let i=o.options.indexOf(e.virtual.options[e.activeOptionIndex]);i!==-1?n=i:n=null}return{...e,activeOptionIndex:n,virtual:{options:o.options,disabled:(s=o.disabled)!=null?s:()=>!1}}},9:(e,o)=>e.inputElement===o.element?e:{...e,inputElement:o.element},10:(e,o)=>e.buttonElement===o.element?e:{...e,buttonElement:o.element},11:(e,o)=>e.optionsElement===o.element?e:{...e,optionsElement:o.element}};class Te extends Rt{constructor(){super(...arguments),qe(this,"actions",{onChange:o=>{let{onChange:t,compare:s,mode:n,value:i}=this.state.dataRef.current;return ce(n,{0:()=>t==null?void 0:t(o),1:()=>{let a=i.slice(),l=a.findIndex(c=>s(c,o));return l===-1?a.push(o):a.splice(l,1),t==null?void 0:t(a)}})},registerOption:(o,t)=>(this.send({type:4,payload:{id:o,dataRef:t}}),()=>{this.state.activeOptionIndex===this.state.dataRef.current.calculateIndex(t.current.value)&&this.send({type:6,value:!0}),this.send({type:5,id:o})}),goToOption:(o,t)=>(this.send({type:6,value:!1}),this.send({type:2,...o,trigger:t})),setIsTyping:o=>{this.send({type:3,isTyping:o})},closeCombobox:()=>{var o,t;this.send({type:1}),this.send({type:6,value:!1}),(t=(o=this.state.dataRef.current).onClose)==null||t.call(o)},openCombobox:()=>{this.send({type:0}),this.send({type:6,value:!0})},setActivationTrigger:o=>{this.send({type:7,trigger:o})},selectActiveOption:()=>{let o=this.selectors.activeOptionIndex(this.state);if(o!==null){if(this.actions.setIsTyping(!1),this.state.virtual)this.actions.onChange(this.state.virtual.options[o]);else{let{dataRef:t}=this.state.options[o];this.actions.onChange(t.current.value)}this.actions.goToOption({focus:B.Specific,idx:o})}},setInputElement:o=>{this.send({type:9,element:o})},setButtonElement:o=>{this.send({type:10,element:o})},setOptionsElement:o=>{this.send({type:11,element:o})}}),qe(this,"selectors",{activeDescendantId:o=>{var t,s;let n=this.selectors.activeOptionIndex(o);if(n!==null)return o.virtual?(s=o.options.find(i=>!i.dataRef.current.disabled&&o.dataRef.current.compare(i.dataRef.current.value,o.virtual.options[n])))==null?void 0:s.id:(t=o.options[n])==null?void 0:t.id},activeOptionIndex:o=>{if(o.defaultToFirstOption&&o.activeOptionIndex===null&&(o.virtual?o.virtual.options.length>0:o.options.length>0)){if(o.virtual){let{options:s,disabled:n}=o.virtual,i=s.findIndex(a=>{var l;return!((l=n==null?void 0:n(a))!=null&&l)});if(i!==-1)return i}let t=o.options.findIndex(s=>!s.dataRef.current.disabled);if(t!==-1)return t}return o.activeOptionIndex},activeOption:o=>{var t,s;let n=this.selectors.activeOptionIndex(o);return n===null?null:o.virtual?o.virtual.options[n??0]:(s=(t=o.options[n])==null?void 0:t.dataRef.current.value)!=null?s:null},isActive:(o,t,s)=>{var n;let i=this.selectors.activeOptionIndex(o);return i===null?!1:o.virtual?i===o.dataRef.current.calculateIndex(t):((n=o.options[i])==null?void 0:n.id)===s},shouldScrollIntoView:(o,t,s)=>!(o.virtual||o.__demoMode||o.comboboxState!==0||o.activationTrigger===0||!this.selectors.isActive(o,t,s))})}static new({virtual:o=null,__demoMode:t=!1}={}){var s;return new Te({dataRef:{current:{}},comboboxState:t?0:1,isTyping:!1,options:[],virtual:o?{options:o.options,disabled:(s=o.disabled)!=null?s:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:t})}reduce(o,t){return ce(t.type,Tn,o,t)}}const Xe=d.createContext(null);function be(e){let o=d.useContext(Xe);if(o===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Ze),t}return o}function Ze({virtual:e=null,__demoMode:o=!1}={}){return d.useMemo(()=>Te.new({virtual:e,__demoMode:o}),[])}let fe=d.createContext(null);fe.displayName="ComboboxDataContext";function pe(e){let o=d.useContext(fe);if(o===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,pe),t}return o}let et=d.createContext(null);function Mn(e){let o=be("VirtualProvider"),t=pe("VirtualProvider"),{options:s}=t.virtual,n=D(o,m=>m.optionsElement),[i,a]=d.useMemo(()=>{let m=n;if(!m)return[0,0];let f=window.getComputedStyle(m);return[parseFloat(f.paddingBlockStart||f.paddingTop),parseFloat(f.paddingBlockEnd||f.paddingBottom)]},[n]),l=On({enabled:s.length!==0,scrollPaddingStart:i,scrollPaddingEnd:a,count:s.length,estimateSize(){return 40},getScrollElement(){return o.state.optionsElement},overscan:12}),[c,u]=d.useState(0);re(()=>{u(m=>m+1)},[s]);let r=l.getVirtualItems(),x=D(o,m=>m.activationTrigger===ae.Pointer),b=D(o,o.selectors.activeOptionIndex);return r.length===0?null:A.createElement(et.Provider,{value:l},A.createElement("div",{style:{position:"relative",width:"100%",height:`${l.getTotalSize()}px`},ref:m=>{m&&(x||b!==null&&s.length>b&&l.scrollToIndex(b))}},r.map(m=>{var f;return A.createElement(d.Fragment,{key:m.key},A.cloneElement((f=e.children)==null?void 0:f.call(e,{...e.slot,option:s[m.index]}),{key:`${c}-${m.key}`,"data-index":m.index,"aria-setsize":s.length,"aria-posinset":m.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${m.start}px)`,overflowAnchor:"none"}}))})))}let $n=d.Fragment;function Rn(e,o){let t=Qt(),{value:s,defaultValue:n,onChange:i,form:a,name:l,by:c,invalid:u=!1,disabled:r=t||!1,onClose:x,__demoMode:b=!1,multiple:m=!1,immediate:f=!1,virtual:h=null,nullable:V,..._}=e,I=ln(n),[S=m?[]:void 0,k]=rn(s,i,I),w=Ze({virtual:h,__demoMode:b}),M=d.useRef({static:!1,hold:!1}),$=un(c),F=R(g=>h?c===null?h.options.indexOf(g):h.options.findIndex(P=>$(P,g)):w.state.options.findIndex(P=>$(P.dataRef.current.value,g))),z=d.useCallback(g=>ce(L.mode,{[Q.Multi]:()=>S.some(P=>$(P,g)),[Q.Single]:()=>$(S,g)}),[S]),K=D(w,g=>g.virtual),v=R(()=>x==null?void 0:x()),L=d.useMemo(()=>({__demoMode:b,immediate:f,optionsPropsRef:M,value:S,defaultValue:I,disabled:r,invalid:u,mode:m?Q.Multi:Q.Single,virtual:h?K:null,onChange:k,isSelected:z,calculateIndex:F,compare:$,onClose:v}),[S,I,r,u,m,k,z,b,w,h,K,v]);re(()=>{var g;h&&w.send({type:Qe.UpdateVirtualConfiguration,options:h.options,disabled:(g=h.disabled)!=null?g:null})},[h,h==null?void 0:h.options,h==null?void 0:h.disabled]),re(()=>{w.state.dataRef.current=L},[L]);let[N,Y,C,J]=D(w,g=>[g.comboboxState,g.buttonElement,g.inputElement,g.optionsElement]),se=N===y.Open;Xt(se,[Y,C,J],()=>w.actions.closeCombobox());let ee=D(w,w.selectors.activeOptionIndex),X=D(w,w.selectors.activeOption),te=d.useMemo(()=>({open:N===y.Open,disabled:r,invalid:u,activeIndex:ee,activeOption:X,value:S}),[L,r,S,u,X,N]),[ne,G]=Zt(),oe=o===null?{}:{ref:o},p=d.useCallback(()=>{if(I!==void 0)return k==null?void 0:k(I)},[k,I]),q=he();return A.createElement(G,{value:ne,props:{htmlFor:C==null?void 0:C.id},slot:{open:N===y.Open,disabled:r}},A.createElement(en,null,A.createElement(fe.Provider,{value:L},A.createElement(Xe.Provider,{value:w},A.createElement(tn,{value:ce(N,{[y.Open]:ge.Open,[y.Closed]:ge.Closed})},l!=null&&A.createElement(dn,{disabled:r,data:S!=null?{[l]:S}:{},form:a,onReset:p}),q({ourProps:oe,theirProps:_,slot:te,defaultTag:$n,name:"Combobox"}))))))}let _n="input";function Fn(e,o){var t,s;let n=be("Combobox.Input"),i=pe("Combobox.Input"),a=d.useId(),l=Vt(),{id:c=l||`headlessui-combobox-input-${a}`,onChange:u,displayValue:r,disabled:x=i.disabled||!1,autoFocus:b=!1,type:m="text",...f}=e,[h]=D(n,p=>[p.inputElement]),V=d.useRef(null),_=ye(V,o,At(),n.actions.setInputElement),I=Ee(h),[S,k]=D(n,p=>[p.comboboxState,p.isTyping]),w=zt(),M=R(()=>{n.actions.onChange(null),n.state.optionsElement&&(n.state.optionsElement.scrollTop=0),n.actions.goToOption({focus:B.Nothing})}),$=d.useMemo(()=>{var p;return typeof r=="function"&&i.value!==void 0?(p=r(i.value))!=null?p:"":typeof i.value=="string"?i.value:""},[i.value,r]);Ne(([p,q],[g,P])=>{if(n.state.isTyping)return;let j=V.current;j&&((P===y.Open&&q===y.Closed||p!==g)&&(j.value=p),requestAnimationFrame(()=>{if(n.state.isTyping||!j||(I==null?void 0:I.activeElement)!==j)return;let{selectionStart:H,selectionEnd:O}=j;Math.abs((O??0)-(H??0))===0&&H===0&&j.setSelectionRange(j.value.length,j.value.length)}))},[$,S,I,k]),Ne(([p],[q])=>{if(p===y.Open&&q===y.Closed){if(n.state.isTyping)return;let g=V.current;if(!g)return;let P=g.value,{selectionStart:j,selectionEnd:H,selectionDirection:O}=g;g.value="",g.value=P,O!==null?g.setSelectionRange(j,H,O):g.setSelectionRange(j,H)}},[S]);let F=d.useRef(!1),z=R(()=>{F.current=!0}),K=R(()=>{w.nextFrame(()=>{F.current=!1})}),v=R(p=>{switch(n.actions.setIsTyping(!0),p.key){case U.Enter:if(n.state.comboboxState!==y.Open||F.current)return;if(p.preventDefault(),p.stopPropagation(),n.selectors.activeOptionIndex(n.state)===null){n.actions.closeCombobox();return}n.actions.selectActiveOption(),i.mode===Q.Single&&n.actions.closeCombobox();break;case U.ArrowDown:return p.preventDefault(),p.stopPropagation(),ce(n.state.comboboxState,{[y.Open]:()=>n.actions.goToOption({focus:B.Next}),[y.Closed]:()=>n.actions.openCombobox()});case U.ArrowUp:return p.preventDefault(),p.stopPropagation(),ce(n.state.comboboxState,{[y.Open]:()=>n.actions.goToOption({focus:B.Previous}),[y.Closed]:()=>{ie.flushSync(()=>n.actions.openCombobox()),i.value||n.actions.goToOption({focus:B.Last})}});case U.Home:if(p.shiftKey)break;return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:B.First});case U.PageUp:return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:B.First});case U.End:if(p.shiftKey)break;return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:B.Last});case U.PageDown:return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:B.Last});case U.Escape:return n.state.comboboxState!==y.Open?void 0:(p.preventDefault(),n.state.optionsElement&&!i.optionsPropsRef.current.static&&p.stopPropagation(),i.mode===Q.Single&&i.value===null&&M(),n.actions.closeCombobox());case U.Tab:if(n.state.comboboxState!==y.Open)return;i.mode===Q.Single&&n.state.activationTrigger!==ae.Focus&&n.actions.selectActiveOption(),n.actions.closeCombobox();break}}),L=R(p=>{u==null||u(p),i.mode===Q.Single&&p.target.value===""&&M(),n.actions.openCombobox()}),N=R(p=>{var q,g,P;let j=(q=p.relatedTarget)!=null?q:le.find(H=>H!==p.currentTarget);if(!((g=n.state.optionsElement)!=null&&g.contains(j))&&!((P=n.state.buttonElement)!=null&&P.contains(j))&&n.state.comboboxState===y.Open)return p.preventDefault(),i.mode===Q.Single&&i.value===null&&M(),n.actions.closeCombobox()}),Y=R(p=>{var q,g,P;let j=(q=p.relatedTarget)!=null?q:le.find(H=>H!==p.currentTarget);(g=n.state.buttonElement)!=null&&g.contains(j)||(P=n.state.optionsElement)!=null&&P.contains(j)||i.disabled||i.immediate&&n.state.comboboxState!==y.Open&&w.microTask(()=>{ie.flushSync(()=>n.actions.openCombobox()),n.actions.setActivationTrigger(ae.Focus)})}),C=Ie(),J=Bt(),{isFocused:se,focusProps:ee}=Ke({autoFocus:b}),{isHovered:X,hoverProps:te}=Ye({isDisabled:x}),ne=D(n,p=>p.optionsElement),G=d.useMemo(()=>({open:S===y.Open,disabled:x,invalid:i.invalid,hover:X,focus:se,autofocus:b}),[i,X,se,b,x,i.invalid]),oe=we({ref:_,id:c,role:"combobox",type:m,"aria-controls":ne==null?void 0:ne.id,"aria-expanded":S===y.Open,"aria-activedescendant":D(n,n.selectors.activeDescendantId),"aria-labelledby":C,"aria-describedby":J,"aria-autocomplete":"list",defaultValue:(s=(t=e.defaultValue)!=null?t:i.defaultValue!==void 0?r==null?void 0:r(i.defaultValue):null)!=null?s:i.defaultValue,disabled:x||void 0,autoFocus:b,onCompositionStart:z,onCompositionEnd:K,onKeyDown:v,onChange:L,onFocus:Y,onBlur:N},ee,te);return he()({ourProps:oe,theirProps:f,slot:G,defaultTag:_n,name:"Combobox.Input"})}let Pn="button";function Vn(e,o){let t=be("Combobox.Button"),s=pe("Combobox.Button"),[n,i]=d.useState(null),a=ye(o,i,t.actions.setButtonElement),l=d.useId(),{id:c=`headlessui-combobox-button-${l}`,disabled:u=s.disabled||!1,autoFocus:r=!1,...x}=e,b=D(t,v=>v.inputElement),m=Ge(b),f=R(v=>{switch(v.key){case U.Space:case U.Enter:v.preventDefault(),v.stopPropagation(),t.state.comboboxState===y.Closed&&ie.flushSync(()=>t.actions.openCombobox()),m();return;case U.ArrowDown:v.preventDefault(),v.stopPropagation(),t.state.comboboxState===y.Closed&&(ie.flushSync(()=>t.actions.openCombobox()),t.state.dataRef.current.value||t.actions.goToOption({focus:B.First})),m();return;case U.ArrowUp:v.preventDefault(),v.stopPropagation(),t.state.comboboxState===y.Closed&&(ie.flushSync(()=>t.actions.openCombobox()),t.state.dataRef.current.value||t.actions.goToOption({focus:B.Last})),m();return;case U.Escape:if(t.state.comboboxState!==y.Open)return;v.preventDefault(),t.state.optionsElement&&!s.optionsPropsRef.current.static&&v.stopPropagation(),ie.flushSync(()=>t.actions.closeCombobox()),m();return;default:return}}),h=R(v=>{v.preventDefault(),!nn(v.currentTarget)&&(v.button===je.Left&&(t.state.comboboxState===y.Open?t.actions.closeCombobox():t.actions.openCombobox()),m())}),V=Ie([c]),{isFocusVisible:_,focusProps:I}=Ke({autoFocus:r}),{isHovered:S,hoverProps:k}=Ye({isDisabled:u}),{pressed:w,pressProps:M}=Dt({disabled:u}),[$,F]=D(t,v=>[v.comboboxState,v.optionsElement]),z=d.useMemo(()=>({open:$===y.Open,active:w||$===y.Open,disabled:u,invalid:s.invalid,value:s.value,hover:S,focus:_}),[s,S,_,w,u,$]),K=we({ref:a,id:c,type:kt(e,n),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":F==null?void 0:F.id,"aria-expanded":$===y.Open,"aria-labelledby":V,disabled:u||void 0,autoFocus:r,onMouseDown:h,onKeyDown:f},I,k,M);return he()({ourProps:K,theirProps:x,slot:z,defaultTag:Pn,name:"Combobox.Button"})}let An="div",zn=Ae.RenderStrategy|Ae.Static;function Bn(e,o){var t,s,n;let i=d.useId(),{id:a=`headlessui-combobox-options-${i}`,hold:l=!1,anchor:c,portal:u=!1,modal:r=!0,transition:x=!1,...b}=e,m=be("Combobox.Options"),f=pe("Combobox.Options"),h=Lt(c);h&&(u=!0);let[V,_]=Nt(h),[I,S]=d.useState(null),k=qt(),w=ye(o,h?V:null,m.actions.setOptionsElement,S),[M,$,F,z,K]=D(m,O=>[O.comboboxState,O.inputElement,O.buttonElement,O.optionsElement,O.activationTrigger]),v=Ee($||F),L=Ee(z),N=Wt(),[Y,C]=Ht(x,I,N!==null?(N&ge.Open)===ge.Open:M===y.Open);Ut(Y,$,m.actions.closeCombobox);let J=f.__demoMode?!1:r&&M===y.Open;Kt(J,L);let se=f.__demoMode?!1:r&&M===y.Open;Yt(se,{allowed:d.useCallback(()=>[$,F,z],[$,F,z])}),re(()=>{var O;f.optionsPropsRef.current.static=(O=e.static)!=null?O:!1},[f.optionsPropsRef,e.static]),re(()=>{f.optionsPropsRef.current.hold=l},[f.optionsPropsRef,l]),cn(M===y.Open,{container:z,accept(O){return O.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:O.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(O){O.setAttribute("role","none")}});let ee=Ie([F==null?void 0:F.id]),X=d.useMemo(()=>({open:M===y.Open,option:void 0}),[M]),te=R(()=>{m.actions.setActivationTrigger(ae.Pointer)}),ne=R(O=>{O.preventDefault(),m.actions.setActivationTrigger(ae.Pointer)}),G=we(h?k():{},{"aria-labelledby":ee,role:"listbox","aria-multiselectable":f.mode===Q.Multi?!0:void 0,id:a,ref:w,style:{...b.style,..._,"--input-width":Ve($,!0).width,"--button-width":Ve(F,!0).width},onWheel:K===ae.Pointer?void 0:te,onMouseDown:ne,...Jt(C)}),oe=Y&&M===y.Closed,p=ze(oe,(t=f.virtual)==null?void 0:t.options),q=ze(oe,f.value),g=R(O=>f.compare(q,O)),P=d.useMemo(()=>{if(!f.virtual)return f;if(p===void 0)throw new Error("Missing `options` in virtual mode");return p!==f.virtual.options?{...f,virtual:{...f.virtual,options:p}}:f},[f,p,(s=f.virtual)==null?void 0:s.options]);f.virtual&&Object.assign(b,{children:A.createElement(fe.Provider,{value:P},A.createElement(Mn,{slot:X},b.children))});let j=he(),H=d.useMemo(()=>f.mode===Q.Multi?f:{...f,isSelected:g},[f,g]);return A.createElement(Gt,{enabled:u?e.static||Y:!1,ownerDocument:v},A.createElement(fe.Provider,{value:H},j({ourProps:G,theirProps:{...b,children:A.createElement(an,{freeze:oe},typeof b.children=="function"?(n=b.children)==null?void 0:n.call(b,X):b.children)},slot:X,defaultTag:An,features:zn,visible:Y,name:"Combobox.Options"})))}let Dn="div";function kn(e,o){var t,s,n;let i=pe("Combobox.Option"),a=be("Combobox.Option"),l=d.useId(),{id:c=`headlessui-combobox-option-${l}`,value:u,disabled:r=(n=(s=(t=i.virtual)==null?void 0:t.disabled)==null?void 0:s.call(t,u))!=null?n:!1,order:x=null,...b}=e,[m]=D(a,C=>[C.inputElement]),f=Ge(m),h=D(a,d.useCallback(C=>a.selectors.isActive(C,u,c),[u,c])),V=i.isSelected(u),_=d.useRef(null),I=Ue({disabled:r,value:u,domRef:_,order:x}),S=d.useContext(et),k=ye(o,_,S?S.measureElement:null),w=R(()=>{a.actions.setIsTyping(!1),a.actions.onChange(u)});re(()=>a.actions.registerOption(c,I),[I,c]);let M=D(a,d.useCallback(C=>a.selectors.shouldScrollIntoView(C,u,c),[u,c]));re(()=>{if(M)return on().requestAnimationFrame(()=>{var C,J;(J=(C=_.current)==null?void 0:C.scrollIntoView)==null||J.call(C,{block:"nearest"})})},[M,_]);let $=R(C=>{C.preventDefault(),C.button===je.Left&&(r||(w(),sn()||requestAnimationFrame(()=>f()),i.mode===Q.Single&&a.actions.closeCombobox()))}),F=R(()=>{if(r)return a.actions.goToOption({focus:B.Nothing});let C=i.calculateIndex(u);a.actions.goToOption({focus:B.Specific,idx:C})}),z=Pt(),K=R(C=>z.update(C)),v=R(C=>{if(!z.wasMoved(C)||r||h)return;let J=i.calculateIndex(u);a.actions.goToOption({focus:B.Specific,idx:J},ae.Pointer)}),L=R(C=>{z.wasMoved(C)&&(r||h&&(i.optionsPropsRef.current.hold||a.actions.goToOption({focus:B.Nothing})))}),N=d.useMemo(()=>({active:h,focus:h,selected:V,disabled:r}),[h,V,r]),Y={id:c,ref:k,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":V,disabled:void 0,onMouseDown:$,onFocus:F,onPointerEnter:K,onMouseEnter:K,onPointerMove:v,onMouseMove:v,onPointerLeave:L,onMouseLeave:L};return he()({ourProps:Y,theirProps:b,slot:N,defaultTag:Dn,name:"Combobox.Option"})}let Ln=me(Rn),tt=me(Vn),nt=me(Fn),Nn=Ft,ot=me(Bn),st=me(kn),qn=Object.assign(Ln,{Input:nt,Button:tt,Label:Nn,Options:ot,Option:st});const Wn=`
  jn-relative
`,Hn=`
  jn-pointer-events-none
  jn-top-2
  jn-left-[0.9375rem]
`,Un=`
  jn-rounded-3px
  jn-bg-theme-textinput
  jn-text-theme-textinput
  jn-border
  jn-text-base
  jn-leading-4
  jn-w-full
  jn-px-4
  jn-h-textinput
  jn-text-left
  jn-overflow-hidden
  jn-text-ellipsis
  jn-whitespace-nowrap
  focus:jn-outline-none
  focus:jn-ring-2
  focus:jn-ring-theme-focus
`,Kn=`
  jn-pt-[1.125rem] 
  jn-pb-1
`,Yn=`
  jn-py-4
`,Jn=`
  jn-cursor-not-allowed
  jn-pointer-events-none
  jn-opacity-50
`,Gn=`
  jn-border-theme-textinput-default
`,Qn=`
  jn-border-theme-success
`,Xn=`
  jn-border-theme-error
`,Zn=`
  jn-absolute
  jn-top-0
  jn-right-0
  jn-h-textinput
  jn-w-6
  jn-h-4
  jn-border-l-0
  jn-border-y-[1px]
  jn-border-r-[1px]
  jn-rounded-tr
  jn-rounded-br
  jn-appearance-none
  jn-bg-theme-textinput
  jn-text-theme-textinput
`,eo=`
  jn-border-theme-textinput-default
`,to=`
  jn-border-theme-error
`,no=`
  jn-border-theme-success
`,oo=`
  jn-cursor-not-allowed
  jn-pointer-events-none
  jn-bg-transparent
  jn-opacity-50
`,so=`
  jn-rounded
  jn-bg-theme-background-lvl-1
  jn-w-full
  jn-overflow-y-auto
`,io=`
  jn-absolute
  jn-top-[.4rem]
  jn-right-6
`,ao=`
  jn-absolute
  jn-top-1/2
  jn-left-1/2
  jn-translate-y-[-50%]
  jn-translate-x-[-0.75rem]
`,xe=d.createContext(void 0),We=({ariaLabel:e,children:o,className:t="",defaultValue:s="",disabled:n=!1,error:i=!1,errortext:a="",helptext:l="",id:c="",invalid:u=!1,loading:r=!1,label:x,name:b="",onBlur:m,onChange:f,onFocus:h,onInputChange:V,placeholder:_="Select…",required:I=!1,successtext:S="",truncateOptions:k=!1,valid:w=!1,value:M="",valueLabel:$,width:F="full",wrapperClassName:z="",...K})=>{const v=E=>!(typeof E=="string"&&E.trim().length===0),L=c||"juno-combobox-"+d.useId(),N="juno-combobox-helptext-"+d.useId(),[Y,C]=d.useState(!1),[J,se]=d.useState(new Map),[ee,X]=d.useState(""),[te,ne]=d.useState(M),[G,oe]=d.useState(!1),[p,q]=d.useState(!1),[g,P]=d.useState(!1),[j,H]=d.useState(!1),[O,it]=d.useState(!1),{x:at,y:lt,strategy:rt,refs:Me,context:$e}=gt({open:Y,onOpenChange:C,placement:"bottom-start",middleware:[Ot(4),Et(),It(),wt({apply({availableWidth:E,availableHeight:W,elements:Z,rects:ue}){Object.assign(Z.floating.style,{maxWidth:`${E}px`,maxHeight:`${W}px`,minWidth:`${ue.reference.width}px`,overflowY:"auto"})}})],whileElementsMounted:Ct}),{getReferenceProps:ut,getFloatingProps:dt}=xt([yt($e),St($e)]),ct=(E,W,Z)=>{se(ue=>new Map([...Array.from(ue),[E??Z,{val:E,label:W,children:Z}]]))},Re=d.useMemo(()=>u||!!(a&&v(a)),[u,a]),_e=d.useMemo(()=>w||!!(S&&v(S)),[w,S]);d.useEffect(()=>{ne(M)},[M]),d.useEffect(()=>{q(i)},[i]),d.useEffect(()=>{oe(r)},[r]),d.useEffect(()=>{H(Re)},[Re]),d.useEffect(()=>{it(_e)},[_e]);const pt=E=>{ne(E),f&&f(E)},ft=E=>{var W;X((W=E==null?void 0:E.target)==null?void 0:W.value),V&&V(E)},mt=E=>{P(!0),h&&h(E)},ht=E=>{P(!1),m&&m(E)},bt=Mt(),vt=ee===""?A.Children.toArray(o):A.Children.toArray(o).filter(E=>{var W;if(A.isValidElement(E)){const Z=((W=E.props.children)==null?void 0:W.toString())||E.props.label||E.props.value;return Z==null?void 0:Z.toLowerCase().includes(ee.toLowerCase())}else return!1});return T.jsx(xe.Provider,{value:{selectedValue:te,truncateOptions:k,addOptionValueAndLabel:ct},children:T.jsxs("div",{className:`
          juno-combobox-wrapper
          jn-relative
          ${F=="auto"?"jn-inline-block":"jn-block"}
          ${F=="auto"?"jn-w-auto":"jn-w-full"}
          ${z}
        `,children:[T.jsx(qn,{defaultValue:s,disabled:n||G||p,name:b,onChange:pt,value:te||s,as:"div",...K,children:({open:E})=>(d.useEffect(()=>{E!==Y&&C(E)},[E]),T.jsxs(T.Fragment,{children:[T.jsxs("div",{ref:Me.setReference,className:`juno-combobox-input-wrapper ${Wn} ${n?"jn-cursor-not-allowed":""}`,children:[x&&v(x)&&!G&&!p?T.jsx(jt,{text:x,disabled:n,required:I,htmlFor:L,className:`${Hn}`,floating:!0,minimized:!!(_||g||ee&&v(ee)||te&&v(te)),...ut()}):"",T.jsx(nt,{autoComplete:"off","aria-label":e||x,"aria-describedby":l?N:"",id:L,onBlur:ht,onChange:ft,onFocus:mt,placeholder:!G&&!p?_:"",displayValue:W=>{var Z,ue,Fe;return((ue=(Z=J.get(W))==null?void 0:Z.children)==null?void 0:ue.toString())||((Fe=J.get(W))==null?void 0:Fe.label)||$||(W==null?void 0:W.toString())||""},className:`
                      juno-combobox-input 
                      ${Un} 
                      ${x&&v(x)?Kn:Yn}
                      ${n?Jn:""}
                      ${j?"juno-combobox-invalid "+Xn:""} 
                      ${O?"juno-combobox-valid "+Qn:""}  
                      ${O||j?"":Gn} 
                      ${G?"juno-combobox-loading jn-cursor-not-allowed":""}
                      ${p?"juno-combobox-error jn-cursor-not-allowed":""}
                      ${t}
                    `}),G||p?T.jsx("span",{className:`${ao}`,children:G?T.jsx(Tt,{className:"jn-cursor-not-allowed"}):T.jsx(ve,{icon:"errorOutline",color:"jn-text-theme-error",className:"jn-cursor-not-allowed"})}):O||j?T.jsx("span",{className:`
                        juno-combobox-icon-container 
                        ${io} 
                        ${n?"jn-opacity-50":""}
                      `,children:T.jsx(ve,{icon:O?"checkCircle":"dangerous",color:O?"jn-text-theme-success":"jn-text-theme-error"})}):"",!p&&!G?T.jsx(tt,{className:`
                        juno-combobox-toggle 
                        ${Zn}
                        ${n?oo:""}
                        ${j?"juno-combobox-toggle-invalid "+to:""} 
                        ${O?"juno-combobox-toggle-valid "+no:""}  
                        ${O||j?"":eo} 
                      `,children:T.jsx(ve,{icon:E?"expandLess":"expandMore"})}):null]}),E&&ie.createPortal(T.jsx("div",{ref:Me.setFloating,className:`juno-combobox-options ${so}`,style:{position:rt,top:lt??0,left:at??0},...dt(),children:T.jsx(ot,{static:!0,className:"jn-w-full",children:vt})}),bt??document.body)]}))}),a&&v(a)?T.jsx(Se,{text:a,variant:"error"}):"",S&&v(S)?T.jsx(Se,{text:S,variant:"success"}):"",l&&v(l)?T.jsx(Se,{text:l,id:N}):""]})})};try{xe.displayName="ComboBoxContext",xe.__docgenInfo={description:"",displayName:"ComboBoxContext",props:{}}}catch{}try{We.displayName="ComboBox",We.__docgenInfo={description:"",displayName:"ComboBox",props:{ariaLabel:{defaultValue:null,description:"The aria-label of the ComboBox. Defaults to the label if label was passed.",name:"ariaLabel",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"The children to Render. Use `ComboBox.Option` elements.",name:"children",required:!1,type:{name:"any"}},className:{defaultValue:{value:""},description:"A custom className. Will be passed to the internal text input element of the ComboBox",name:"className",required:!1,type:{name:"string"}},defaultValue:{defaultValue:{value:""},description:"Pass a defaultValue to use as an uncontrolled Component that will handle its state internally",name:"defaultValue",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Whether the ComboBox is disabled",name:"disabled",required:!1,type:{name:"boolean"}},error:{defaultValue:{value:"false"},description:"Whether the ComboBox has an error. Note this refers to an internal error like failing to load options etc., to indicate failed validation use `invalid` instead.",name:"error",required:!1,type:{name:"boolean"}},errortext:{defaultValue:{value:""},description:"An errortext to display when the ComboBox failed validation or an internal error occurred.",name:"errortext",required:!1,type:{name:"any"}},helptext:{defaultValue:{value:""},description:"A helptext to render to explain meaning and significance of the ComboBox",name:"helptext",required:!1,type:{name:"any"}},id:{defaultValue:{value:""},description:"The Id of the ComboBox. Will be assigned to the text input part of the ComboBox. If not passed, an id will be auto-generated.",name:"id",required:!1,type:{name:"string"}},invalid:{defaultValue:{value:"false"},description:"Whether the ComboBox failed validation",name:"invalid",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"The label of the ComboBox",name:"label",required:!1,type:{name:"string"}},loading:{defaultValue:{value:"false"},description:"Whether the ComboBox is busy loading options",name:"loading",required:!1,type:{name:"boolean"}},name:{defaultValue:{value:""},description:"The name attribute of the ComboBox when used as part of a form",name:"name",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"A handler to execute when the ComboBox looses focus",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onChange:{defaultValue:null,description:"A handler to execute when the ComboBox' selected value changes",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},onFocus:{defaultValue:null,description:"A handler to execute when the ComboBox input receives focus",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onInputChange:{defaultValue:null,description:"Handler to execute when the ComboBox text input value changes",name:"onInputChange",required:!1,type:{name:"ChangeEventHandler<HTMLInputElement>"}},placeholder:{defaultValue:{value:"Select…"},description:"A placeholder to render in the text input",name:"placeholder",required:!1,type:{name:"string"}},required:{defaultValue:{value:"false"},description:"Whether the ComboBox is required",name:"required",required:!1,type:{name:"boolean"}},successtext:{defaultValue:{value:""},description:"A text to display in case the ComboBox was successfully validated. Will set the ComboBox to `valid` when passed.",name:"successtext",required:!1,type:{name:"any"}},truncateOptions:{defaultValue:{value:"false"},description:"Whether the option labels should be truncated in case they are longer/wider than the available space in an option or not. Default is FALSE.",name:"truncateOptions",required:!1,type:{name:"boolean"}},valid:{defaultValue:{value:"false"},description:"Whether the ComboBox was successfully validated",name:"valid",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"The selected value of the ComboBox in Controlled Mode.",name:"value",required:!1,type:{name:"string"}},valueLabel:{defaultValue:null,description:"The label of the passed value or defaultValue. If you want to use controlled mode or pass as defaultValue in uncontrolled mode and additionally use labels for human-readable SelectOptions, you need to also pass the matching label for the passed value/defaultValue so that the Select component can render itself properly",name:"valueLabel",required:!1,type:{name:"string"}},width:{defaultValue:{value:"full"},description:"The width of the text input. Either 'full' (default) or 'auto'.",name:"width",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"full"'}]}},wrapperClassName:{defaultValue:{value:""},description:"Pass a custom classname to the wrapping <div> element. This can be useful if you must add styling to the outermost wrapping element of this component, e.g. for positioning.",name:"wrapperClassName",required:!1,type:{name:"string"}}}}}catch{}const lo=`
  jn-flex
  jn-pt-[0.6875rem]
  jn-pb-[0.5rem]
  jn-pr-[0.875rem]
  jn-select-none
  data-[headlessui-state~=active]:jn-outline-none
  data-[headlessui-state~=active]:jn-ring-2
  data-[headlessui-state~=active]:jn-ring-inset
  data-[headlessui-state~=active]:jn-ring-theme-focus
  data-[headlessui-state~=active]:jn-bg-theme-background-lvl-3
`,ro=`
  jn-text-theme-default
  jn-pl-[2.375rem]
`,uo=`
  jn-text-theme-accent
  jn-pl-3.5
`,co=`
  jn-inline-block
  jn-mr-1.5
`,po=`
  jn-opacity-50
  jn-cursor-not-allowed
`,fo=`
  jn-block
  jn-h-6
  jn-overflow-hidden
  jn-text-ellipsis
  jn-whitespace-nowrap
`,He=({children:e,disabled:o=!1,value:t="",label:s="",className:n="",...i})=>{const a=d.useContext(xe),{selectedValue:l,truncateOptions:c,addOptionValueAndLabel:u}=a||{};d.useEffect(()=>{u&&u(t,s,e)},[t,s,e]);const r=t||e;return T.jsx(st,{value:r,disabled:o,as:d.Fragment,children:T.jsxs("li",{className:`
          juno-combobox-option 
          ${lo}
          ${l===t?uo:ro}
          ${o?"jn-cursor-not-allowed":""}
          ${n}
        `,...i,children:[l===r?T.jsx(ve,{icon:"check",size:"18",className:`${co}`}):"",T.jsx("span",{className:`
            ${o?po:""}
            ${c?fo:""}
          `,children:e||s||t})]})})};try{He.displayName="ComboBoxOption",He.__docgenInfo={description:"",displayName:"ComboBoxOption",props:{children:{defaultValue:null,description:"Content to render inside the ComboBoxOption. Is specified should be string.",name:"children",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"If option is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"Option value.",name:"value",required:!1,type:{name:"string"}},label:{defaultValue:{value:""},description:"Option label.",name:"label",required:!1,type:{name:"string"}},className:{defaultValue:{value:""},description:"CSS class for the option.",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{We as C,He as a};
