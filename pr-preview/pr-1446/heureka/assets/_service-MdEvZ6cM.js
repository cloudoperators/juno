import{y as j,j as e,P as h,o as m,n as u,c as p,V as f,f as v,a as S,l as C,I as y,J as P,x as I,O as b,E as V,m as $}from"./App-DEHrrKKr.js";import{r as a}from"./index-DvKfwmvA.js";import{I as E,u as L}from"./IssueCountsPerSeverityLevel-DQHPvmpt.js";import{S as R}from"./index-Ck4YwUWX.js";import{S as D}from"./SectionContentHeading-CfQfWd73.js";const K=({servicePromise:t})=>{const{data:i}=a.use(t),s=j(i).services[0];return e.jsxs(e.Fragment,{children:[e.jsxs(D,{children:["Service ",s.name]}),e.jsxs(h,{columns:2,gridColumnTemplate:"20% auto",className:"mb-6",children:[e.jsxs(m,{children:[e.jsx(u,{children:"Details"}),e.jsx(p,{children:e.jsxs(f,{gap:"1",direction:"horizontal",wrap:!0,children:[e.jsx(v,{pillKey:"service",pillKeyLabel:"service",pillValue:s.name,pillValueLabel:s.name}),s.serviceDetails?.supportGroups?.map(r=>e.jsx(v,{pillKey:"support_group",pillKeyLabel:"support_group",pillValue:r,pillValueLabel:r},r))]})})]}),e.jsxs(m,{children:[e.jsx(u,{children:"Vulnerabilities Counts"}),e.jsx(p,{children:e.jsx(E,{counts:s.issuesCount})})]})]})]})},N=()=>{const t=S(),{queryClient:i,apiClient:s}=L({from:"/services/$service"}),{servicePromise:r}=C({from:"/services/$service"}),{service:o}=y({from:"/services/$service"}),[n,x]=a.useState(void 0),[l,g]=a.useState(void 0),d=P()({to:"/services/$service/images/$image"});return a.useEffect(()=>{const c=I({queryClient:i,apiClient:s,filter:{service:[o]},after:n});g(c)},[n,o,i,s]),d?e.jsx(b,{}):e.jsxs(e.Fragment,{children:[e.jsx(V,{displayErrorMessage:!0,children:e.jsx(a.Suspense,{fallback:e.jsx($,{className:"mt-4"}),children:e.jsx(K,{servicePromise:r})})}),l&&e.jsx(R,{imagesPromise:l,onImageItemClick:c=>{t({to:"/services/$service/images/$image",params:{service:o,image:c.repository}})},goToPage:x})]})},T=N;export{T as component};
