import{j as e,g as O,K as F,Z as it,z as lt,L as ct,m as ot,u as B,n as Re,o as Q,p as X,k as K,q as Y,t as se,A as W,w as Oe,y as dt,e as Z,B as ut,D as Be,s as ne,a as Me,c as G,E as re,F as He,G as xe,I as Ve,J as ge,M as I,N as fe,O as Ue,f as Se,r as Fe,P as We,l as ae,C,h as E,v as y,Q as ht,S as Ae,T as Ee,i as be,x as J,U as qe,V as mt,X as pt,Y as xt,_ as gt,$ as ft,a0 as Ne,a1 as we,a2 as bt,a3 as jt,a4 as vt,a5 as yt,a6 as St,a7 as Ft,H as At,a8 as Et,a9 as Nt,aa as wt,ab as Tt,ac as Ct,ad as Lt,W as kt,ae as _t,af as Te,ag as It,ah as $t,ai as ue,aj as Ce,ak as he,al as Pt,am as Dt,an as Rt,ao as Ot,ap as Bt,aq as Mt,ar as Ht,as as Vt}from"./App-BCGO1-cP.js";import{r as S,R as M,g as Ut}from"./index-Crf_ySMw.js";import{D as $,s as Wt,l as qt,g as zt,a as ze,p as ie,d as Ye,E as Yt,R as Kt,u as le,C as Gt,F as Qt}from"./FirefoxCorsWarning-T8PHInJR.js";import"./index-Bnm_m_UL.js";const Xt=({severity:t},s)=>{const r=()=>{switch(t){case"critical":return"text-theme-danger";case"warning":return"text-theme-warning";case"info":return"text-theme-info"}};return e.jsx(e.Fragment,{children:t==="critical"?e.jsx(O,{ref:s,icon:"danger",color:r()}):t?.match(/^(warning|info)$/)?e.jsx(O,{icon:t,color:r(),ref:s}):e.jsx(O,{ref:s,icon:"errorOutline"})})},Ke=S.forwardRef(Xt),Ge=({startTimestamp:t})=>{const s={...$.DATE_MED},r={...$.TIME_24_WITH_SHORT_OFFSET},n=$.fromISO(t),i=$.now().diff(n,"days");return e.jsxs(F,{direction:"vertical",gap:"1",children:[e.jsx("div",{children:n.toLocaleString(s)}),e.jsx("div",{children:n.toLocaleString(r)}),i.days>7&&e.jsxs(it,{variant:"warning",triggerEvent:"hover",children:[e.jsx(lt,{asChild:!0,children:e.jsx(O,{icon:"warning",color:"text-theme-warning"})}),e.jsx(ct,{children:`Alert has been firing for ${Math.round(i.days)} days`})]})]})},b=1,Qe=2,Xe=4,T=8,je=16,ee=32,P=64,ve={a:{content:b|T,self:!1,type:b|T|ee|P},address:{invalid:["h1","h2","h3","h4","h5","h6","address","article","aside","section","div","header","footer"],self:!1},audio:{children:["track","source"]},br:{type:b|T,void:!0},body:{content:b|Qe|Xe|T|je|ee|P},button:{content:T,type:b|T|ee|P},caption:{content:b,parent:["table"]},col:{parent:["colgroup"],void:!0},colgroup:{children:["col"],parent:["table"]},details:{children:["summary"],type:b|ee|P},dd:{content:b,parent:["dl"]},dl:{children:["dt","dd"],type:b},dt:{content:b,invalid:["footer","header"],parent:["dl"]},figcaption:{content:b,parent:["figure"]},footer:{invalid:["footer","header"]},header:{invalid:["footer","header"]},hr:{type:b,void:!0},img:{void:!0},li:{content:b,parent:["ul","ol","menu"]},main:{self:!1},ol:{children:["li"],type:b},picture:{children:["source","img"],type:b|T|je},rb:{parent:["ruby","rtc"]},rp:{parent:["ruby","rtc"]},rt:{content:T,parent:["ruby","rtc"]},rtc:{content:T,parent:["ruby"]},ruby:{children:["rb","rp","rt","rtc"]},source:{parent:["audio","video","picture"],void:!0},summary:{content:T,parent:["details"]},table:{children:["caption","colgroup","thead","tbody","tfoot","tr"],type:b},tbody:{parent:["table"],children:["tr"]},td:{content:b,parent:["tr"]},tfoot:{parent:["table"],children:["tr"]},th:{content:b,parent:["tr"]},thead:{parent:["table"],children:["tr"]},tr:{parent:["table","tbody","thead","tfoot"],children:["th","td"]},track:{parent:["audio","video"],void:!0},ul:{children:["li"],type:b},video:{children:["track","source"]},wbr:{type:b|T,void:!0}};function H(t){return s=>{ve[s]={...t,...ve[s]}}}["address","main","div","figure","p","pre"].forEach(H({content:b,type:b|P}));["abbr","b","bdi","bdo","cite","code","data","dfn","em","i","kbd","mark","q","ruby","samp","strong","sub","sup","time","u","var"].forEach(H({content:T,type:b|T|P}));["p","pre"].forEach(H({content:T,type:b|P}));["s","small","span","del","ins"].forEach(H({content:T,type:b|T}));["article","aside","footer","header","nav","section","blockquote"].forEach(H({content:b,type:b|Qe|P}));["h1","h2","h3","h4","h5","h6"].forEach(H({content:T,type:b|Xe|P}));["audio","canvas","iframe","img","video"].forEach(H({type:b|T|je|P}));const ye=Object.freeze(ve),Zt=["applet","base","body","command","embed","frame","frameset","head","html","link","meta","noscript","object","script","style","title"],Jt=Object.keys(ye).filter(t=>t!=="canvas"&&t!=="iframe"),j=1,es=2,z=3,U=4,Ze=5,Le=Object.freeze({alt:j,cite:j,class:j,colspan:z,controls:U,datetime:j,default:U,disabled:U,dir:j,height:j,href:j,id:j,kind:j,label:j,lang:j,loading:j,loop:U,media:j,muted:U,poster:j,rel:j,role:j,rowspan:z,scope:j,sizes:j,span:z,start:z,style:Ze,src:j,srclang:j,srcset:j,tabindex:j,target:j,title:j,type:j,width:j}),ts=Object.freeze({class:"className",colspan:"colSpan",datetime:"dateTime",rowspan:"rowSpan",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex"});function te(){return te=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},te.apply(this,arguments)}function Je({attributes:t={},className:s,children:r=null,selfClose:n=!1,tagName:i}){const a=i;return n?M.createElement(a,te({className:s},t)):M.createElement(a,te({className:s},t),r)}class ss{attribute(s,r){return r}node(s,r){return r}}/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var me,ke;function ns(){if(ke)return me;ke=1;var t=/["'&<>]/;me=s;function s(r){var n=""+r,i=t.exec(n);if(!i)return n;var a,u="",o=0,h=0;for(o=i.index;o<n.length;o++){switch(n.charCodeAt(o)){case 34:a="&quot;";break;case 38:a="&amp;";break;case 39:a="&#39;";break;case 60:a="&lt;";break;case 62:a="&gt;";break;default:continue}h!==o&&(u+=n.substring(h,o)),h=o+1,u+=a}return h!==o?u+n.substring(h,o):u}return me}var rs=ns();const as=Ut(rs);function R(t,s,r){return s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}const is=/(url|image|image-set)\(/i;class ls extends ss{attribute(s,r){return s==="style"&&Object.keys(r).forEach(n=>{String(r[n]).match(is)&&delete r[n]}),r}}const _e=1,cs=3,os=/^<(!doctype|(html|head|body)(\s|>))/i,ds=/^(aria-|data-|\w+:)/iu,us=/{{{(\w+)\/?}}}/;function hs(){if(!(typeof window>"u"||typeof document>"u"))return document.implementation.createHTMLDocument("Interweave")}class ms{constructor(s,r={},n=[],i=[]){var a;R(this,"allowed",void 0),R(this,"banned",void 0),R(this,"blocked",void 0),R(this,"container",void 0),R(this,"content",[]),R(this,"props",void 0),R(this,"matchers",void 0),R(this,"filters",void 0),R(this,"keyIndex",void 0),this.props=r,this.matchers=n,this.filters=[...i,new ls],this.keyIndex=-1,this.container=this.createContainer(s||""),this.allowed=new Set((a=r.allowList)!==null&&a!==void 0?a:Jt),this.banned=new Set(Zt),this.blocked=new Set(r.blockList)}applyAttributeFilters(s,r){return this.filters.reduce((n,i)=>n!==null&&typeof i.attribute=="function"?i.attribute(s,n):n,r)}applyNodeFilters(s,r){return this.filters.reduce((n,i)=>n!==null&&typeof i.node=="function"?i.node(s,n):n,r)}applyMatchers(s,r){const n={},{props:i}=this;let a=s,u=0,o=null;return this.matchers.forEach(h=>{const m=h.asTag().toLowerCase(),l=this.getTagConfig(m);if(i[h.inverseName]||!this.isTagAllowed(m)||!this.canRenderChild(r,l))return;let c="";for(;a&&(o=h.match(a));){const{index:d,length:f,match:x,valid:w,void:k,...p}=o,L=h.propName+String(u);d>0&&(c+=a.slice(0,d)),w?(c+=k?`{{{${L}/}}}`:`{{{${L}}}}${x}{{{/${L}}}}`,this.keyIndex+=1,u+=1,n[L]={children:x,matcher:h,props:{...i,...p,key:this.keyIndex}}):c+=x,h.greedy?(a=c+a.slice(d+f),c=""):a=a.slice(d+(f||x.length))}h.greedy||(a=c+a)}),u===0?s:this.replaceTokens(a,n)}canRenderChild(s,r){return!s.tagName||!r.tagName||s.void?!1:s.children.length>0?s.children.includes(r.tagName):s.invalid.length>0&&s.invalid.includes(r.tagName)?!1:r.parent.length>0?r.parent.includes(s.tagName):!s.self&&s.tagName===r.tagName?!1:!!(s&&s.content&r.type)}convertLineBreaks(s){const{noHtml:r,disableLineBreaks:n}=this.props;if(r||n||s.match(/<((?:\/[ a-z]+)|(?:[ a-z]+\/))>/gi))return s;let i=s.replace(/\r\n/g,`
`);return i=i.replace(/\n{3,}/g,`


`),i=i.replace(/\n/g,"<br/>"),i}createContainer(s){var r;const i=(typeof global<"u"&&global.INTERWEAVE_SSR_POLYFILL||hs)();if(!i)return;const a=(r=this.props.containerTagName)!==null&&r!==void 0?r:"body",u=a==="body"||a==="fragment"?i.body:i.createElement(a);return s.match(os)||(u.innerHTML=this.convertLineBreaks(this.props.escapeHtml?as(s):s)),u}extractAttributes(s){const{allowAttributes:r}=this.props,n={};let i=0;return s.nodeType!==_e||!s.attributes||([...s.attributes].forEach(a=>{const{name:u,value:o}=a,h=u.toLowerCase(),m=Le[h]||Le[u];if(!this.isSafe(s)||!h.match(ds)&&(!r&&(!m||m===es)||h.startsWith("on")||o.replace(/(\s|\0|&#x0([9AD]);)/,"").match(/(javascript|vbscript|livescript|xss):/i)))return;let l=h==="style"?this.extractStyleAttribute(s):o;m===U?l=!0:m===z?l=Number.parseFloat(String(l)):m!==Ze&&(l=String(l)),n[ts[h]||h]=this.applyAttributeFilters(h,l),i+=1}),i===0)?null:n}extractStyleAttribute(s){const r={};return Array.from(s.style).forEach(n=>{const i=s.style[n];(typeof i=="string"||typeof i=="number")&&(r[n.replace(/-([a-z])/g,(a,u)=>String(u).toUpperCase())]=i)}),r}getTagConfig(s){const r={children:[],content:0,invalid:[],parent:[],self:!0,tagName:"",type:0,void:!1};return ye[s]?{...r,...ye[s],tagName:s}:r}isSafe(s){if(typeof HTMLAnchorElement<"u"&&s instanceof HTMLAnchorElement){const r=s.getAttribute("href");if(r!=null&&r.startsWith("#"))return!0;const n=s.protocol.toLowerCase();return n===":"||n==="http:"||n==="https:"||n==="mailto:"||n==="tel:"}return!0}isTagAllowed(s){return this.banned.has(s)||this.blocked.has(s)?!1:this.props.allowElements||this.allowed.has(s)}parse(){return this.container?this.parseNode(this.container,this.getTagConfig(this.container.nodeName.toLowerCase())):[]}parseNode(s,r){const{noHtml:n,noHtmlExceptMatchers:i,allowElements:a,transform:u,transformOnlyAllowList:o}=this.props;let h=[],m="";return[...s.childNodes].forEach(l=>{if(l.nodeType===_e){const d=l.nodeName.toLowerCase(),f=this.getTagConfig(d);m&&(h.push(m),m="");const x=this.applyNodeFilters(d,l);if(!x)return;let w;if(u&&!(o&&!this.isTagAllowed(d))){this.keyIndex+=1;const k=this.keyIndex;w=this.parseNode(x,f);const p=u(x,w,f);if(p===null)return;if(typeof p<"u"){h.push(M.cloneElement(p,{key:k}));return}this.keyIndex=k-1}if(this.banned.has(d))return;if(!(n||i&&d!=="br")&&this.isTagAllowed(d)&&(a||this.canRenderChild(r,f))){var c;this.keyIndex+=1;const k=this.extractAttributes(x),p={tagName:d};k&&(p.attributes=k),f.void&&(p.selfClose=f.void),h.push(M.createElement(Je,{...p,key:this.keyIndex},(c=w)!==null&&c!==void 0?c:this.parseNode(x,f)))}else h=[...h,...this.parseNode(x,f.tagName?f:r)]}else if(l.nodeType===cs){const d=n&&!i?l.textContent:this.applyMatchers(l.textContent||"",r);Array.isArray(d)?h=[...h,...d]:m+=d}}),m&&h.push(m),h}replaceTokens(s,r){if(!s.includes("{{{"))return s;const n=[];let i=s,a=null;for(;a=i.match(us);){const[u,o]=a,h=a.index,m=u.includes("/");h>0&&(n.push(i.slice(0,h)),i=i.slice(h));const{children:l,matcher:c,props:d}=r[o];let f;if(m)f=u.length,n.push(c.createElement(l,d));else{const x=i.match(new RegExp(`{{{/${o}}}}`));f=x.index+x[0].length,n.push(c.createElement(this.replaceTokens(i.slice(u.length,x.index),r),d))}i=i.slice(f)}return i.length>0&&n.push(i),n.length===0?"":n.length===1&&typeof n[0]=="string"?n[0]:n}}function ps(t){var s;const{attributes:r,className:n,containerTagName:i,content:a,emptyContent:u,parsedContent:o,tagName:h,noWrap:m}=t,l=(s=i??h)!==null&&s!==void 0?s:"span",c=l==="fragment"?!0:m;let d;if(o)d=o;else{const f=new ms(a??"",t).parse();f.length>0&&(d=f)}return d||(d=u),c?M.createElement(M.Fragment,null,d):M.createElement(Je,{attributes:r,className:n,tagName:l},d)}const ce=({description:t,subdued:s})=>e.jsx(ps,{content:ot(t?.replace(/`([^`]+)`/g,"<code class='inline-code'>$1</code>")),tagName:"div",className:s?"text-theme-light":""}),et=({alert:t,className:s})=>e.jsxs(F,{gap:"3",className:s,children:[t?.generatorURL&&e.jsx("a",{className:"underline",href:t?.generatorURL,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"Prometheus"}),t?.labels?.playbook&&e.jsx("a",{className:"underline",href:t.labels.playbook.startsWith("http")?t.labels.playbook:`https://operations.global.cloud.sap/${t.labels.playbook}`,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"Playbook"}),t?.labels?.kibana&&e.jsx("a",{className:"underline",href:`https://logs.${t?.labels?.region}.cloud.sap/${t?.labels?.kibana}`,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"Logs"}),t?.labels?.dashboard&&e.jsx("a",{className:"underline",href:`https://plutono.${t?.labels?.region}.cloud.sap/d/${t?.labels?.dashboard}`,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"Plutono"}),t?.labels?.spc&&e.jsx("a",{className:"underline",href:`https://spc.ondemand.com/ticket_create/?${t?.labels?.spc}`,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"SPC Ticket"}),t?.labels?.sentry&&e.jsx("a",{className:"underline",href:`https://sentry.${t?.labels?.region}.cloud.sap/monsoon/${t?.labels?.sentry}`,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"Sentry"}),t?.labels?.cloudops&&e.jsx("a",{className:"underline",href:`https://dashboard.${t?.labels?.region}.cloud.sap/ccadmin/cloud_admin/cloudops#/universal-search/${t?.labels?.cloudops}`,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"CloudOps"}),t?.labels?.report&&e.jsx("a",{className:"underline",href:`https://dashboard.${t?.labels?.region}.cloud.sap/${t?.labels?.report}`,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"Report"}),t?.annotations?.mail_subject&&e.jsx("a",{className:"underline",href:`mailto:?subject=${encodeURIComponent(t?.annotations?.mail_subject)}&body=${encodeURIComponent(t?.annotations?.mail_body)}`,rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),children:"Email Owner"})]}),tt=({alert:t,showAll:s})=>{const r=B(),n=s?Object.keys(t?.labels):Re(),i=Q(),{addActiveFilter:a,removeActiveFilter:u}=X(),o=(m,l,c)=>{i?.[l]?.includes(c)?h(m,l,c):(m.stopPropagation(),a(l,c),r({to:"/alerts",search:d=>se({...d},`${W}${l}`,c)}))},h=(m,l,c)=>{m.stopPropagation(),u(l,c),r({to:"/alerts",search:d=>Y({...d},`${W}${l}`,c)})};return e.jsx(F,{gap:"2",alignment:"start",wrap:!0,children:n.map(m=>{const l=t?.labels?.[m],c=i?.[m]?.includes(l);return l&&e.jsx(K,{pillKey:m,pillValue:l,onClick:(d,f)=>o(d,m,l),closeable:c,onClose:(d,f)=>h(d,m,l)},m)})})},Ie=({matchers:t,onClickCallback:s,closeable:r})=>{const n=S.useMemo(()=>!t||t?.length<=0?[]:t.sort((a,u)=>a.configurable-u.configurable),[t]),i=a=>{const u={onClick:()=>a.configurable&&s(a),onClose:()=>s(a)};return a.configurable?u:{}};return e.jsx(F,{gap:"2",alignment:"start",wrap:!0,children:n.length>0?t.map(a=>S.createElement(K,{className:a.configurable?"opacity-100":"opacity-70",closeable:a.configurable&&r,...i(a),key:a.name,pillKey:a.name,pillValue:a.value})):e.jsx("span",{className:"text-theme-light",children:"No excluded matchers found"})})},xs=t=>`
      transition-all
      ease-out
      max-h-0
      overflow-y-auto
			${t?"duration-1000 max-h-[34rem]":"duration-300"}
		`.replace(/\n/g," ").replace(/\s+/g," "),gs=({matchers:t,onMatchersChanged:s})=>{const[r,n]=S.useState(!1),i=a=>{a.preventDefault(),n(!r)};return e.jsx(e.Fragment,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"advance-link mt-4",children:e.jsx("a",{href:"#",rel:"noopener noreferrer",onClick:i,children:e.jsxs(F,{alignment:"center",children:["Advanced options",e.jsx(O,{color:"jn-global-text",icon:r?"expandLess":"expandMore"})]})})}),e.jsx("div",{className:"advanced-area overflow-hidden",children:e.jsxs("div",{className:xs(r),children:[e.jsx("p",{className:"mt-2",children:"Matchers attached to this silence"}),e.jsx("div",{className:"mt-2",children:e.jsx(Ie,{matchers:t.filter(a=>!a.excluded),onClickCallback:s,closeable:!0})}),e.jsx("p",{className:"mt-4",children:"The default silence configuration excludes the following matchers because they typically make the silence too specific which can lead to alerts bypassing the silence unexpectedly. If you do want to include any of these matchers in the silence configuration, click on them to add them. If you change your mind, click again to remove."}),e.jsx("div",{className:"my-2",children:e.jsx(Ie,{matchers:t.filter(a=>a.excluded),onClickCallback:s,closeable:!1})})]})})]})})},fs=t=>{const n={};return t?.comment?.length<3&&(n.comment||(n.comment=[]),n.comment.push("Please enter at least 3 characters")),t?.createdBy?.length<1&&(n.createdBy||(n.createdBy=[]),n.createdBy.push("Please enter a name")),n},$e=t=>t.map((s,r)=>e.jsx("span",{className:"block text-theme-danger ",children:s},r)),Pe={duration:2,comment:""},st=({alert:t,size:s,variant:r})=>{const n=Oe(),i=dt(),{getMappingSilences:a,setSilences:u}=Z(),o=ut(),h=Be(),[m,l]=S.useState(!1),[c,d]=S.useState(Pe),[f,x]=S.useState(null),[w,k]=S.useState({}),{addMessage:p}=ne(),L=Me();S.useLayoutEffect(()=>{d({...c,...Pe,createdBy:h||"",matchers:Wt(t?.labels,i,o)}),x(qt(a(t))),k({})},[m]);const D=S.useMemo(()=>{const g=zt(f??0);return g.firstNotCovered&&d({...c,duration:g.firstNotCovered.value}),g.items},[f]),{mutate:V}=ze("createSilences",{onMutate:g=>{n.cancelQueries({queryKey:["silences"]});const A={...g.silence,status:{state:G.SILENCE_ACTIVE}},_=[...L,A];u({items:_}),l(!1)},onSuccess:g=>{p({variant:"success",text:`A silence object with id ${g?.silenceID} was created successfully. Please note that it may
            take up to 5 minutes for the alert to show up as silenced.`})},onError:g=>{p({variant:"error",text:ie(g)})},onSettled:()=>{n.invalidateQueries({queryKey:["silences"]})}}),oe=Ye(()=>{const g=fs(c);if(k(g),Object.keys(g).length>0)return;const A={...c};A.matchers?.length>0&&(A.matchers=A.matchers.filter(de=>!de.excluded).map(({...de})=>de));const _=new Date,q=new Date;q.setHours(q.getHours()+Number.parseInt(A.duration||4));const at={...A,status:{state:G.SILENCE_ACTIVE},startsAt:_.toISOString(),endsAt:q.toISOString(),alertFingerprint:t.fingerprint};V({silence:at})},200),v=({key:g,value:A})=>{A&&d({...c,[g]:A})},N=g=>{const A=c.matchers.findIndex(q=>q.name==g.name),_=c.matchers.slice();A>=0&&(_[A]={..._[A],excluded:!g.excluded}),d({...c,matchers:_})};return e.jsxs(e.Fragment,{children:[e.jsx(re,{size:s,variant:r,onClick:g=>{g.stopPropagation(),l(!m)},children:"Silence"}),m&&e.jsxs(He,{title:"New Silence for",size:"large",open:!0,confirmButtonLabel:"Save",onCancel:()=>l(!1),onConfirm:oe,children:[f&&e.jsxs(xe,{className:"mb-6",variant:"info",children:["There is already a silence for this alert that expires at",e.jsx("b",{children:$.fromISO(f).toLocaleString($.DATETIME_SHORT)})]}),e.jsx("span",{className:"text-lg font-bold",children:t?.labels?.alertname}),e.jsx(Ve,{className:"mt-2",children:e.jsx(ce,{description:t.annotations?.description})}),e.jsxs(e.Fragment,{children:[e.jsx(gs,{matchers:c.matchers,onMatchersChanged:N}),e.jsxs(ge,{className:"mt-6",children:[e.jsx(I,{children:e.jsx(fe,{required:!0,label:"Silenced by",value:c.createdBy,onChange:g=>v({key:"createdBy",value:g.target.value}),errortext:w.createdBy&&$e(w.createdBy),disabled:!!h})}),e.jsx(I,{children:e.jsx(Ue,{className:"h-20",label:"Description",value:c.comment,onChange:g=>v({key:"comment",value:g.target.value}),errortext:w.comment&&$e(w.comment),required:!0})}),e.jsx(I,{children:e.jsx(Se,{required:!0,label:"Duration",value:c.duration,onChange:g=>v({key:"duration",value:g}),children:D?.map(g=>e.jsx(Fe,{label:g.label,value:String(g.value)},g.value))})})]})]})]})]})},bs=(t,s)=>{if(!t)return null;const r=t.map(i=>s.find(a=>a.fingerprint===i));return r[0]?r.sort((i,a)=>new Date(a.endsAt).getTime()-new Date(i.endsAt).getTime())[0]:null},nt=({alert:t})=>{if(!t)return null;const s=We(),{getMappingSilences:r}=Z(),n=r(t).sort((u,o)=>new Date(o?.endsAt).getTime()-new Date(u?.endsAt).getTime()),i=n.length>0?n[0]:null,a=bs(t?.status?.inhibitedBy,s);return e.jsxs("div",{className:"cursor-default",children:[t&&e.jsx("span",{children:t?.status?.state}),a&&e.jsx("div",{className:"text-xs mt-2",children:e.jsxs(F,{direction:"vertical",children:[e.jsx("span",{children:"Inhibited by:"}),e.jsx("span",{children:a?.annotations?.summary})]})}),i&&e.jsx("div",{className:"text-xs mt-2",children:e.jsxs(F,{direction:"vertical",children:[e.jsx("span",{children:"Silenced by:"}),e.jsx("span",{children:i?.createdBy||i.id},i.id)]})})]})},rt=({region:t,cluster:s})=>e.jsxs(e.Fragment,{children:[t,t!==s&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("span",{className:"text-theme-light",children:s})]})]}),js=t=>{switch(t){case G.SILENCE_ACTIVE:return"info";default:return"default"}},vs=({alert:t})=>{const s={...$.DATETIME_SHORT},{getSilencesForAlert:r}=Z(),n=r(t),i=a=>$.fromISO(a).toLocaleString(s);return e.jsx(e.Fragment,{children:n.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold mb-2 mt-8",children:"Silences"}),e.jsxs(ae,{columns:6,minContentColumns:[5],children:[e.jsxs(C,{children:[e.jsx(E,{children:"Status"}),e.jsx(E,{children:"Silence start"}),e.jsx(E,{children:"Silence end"}),e.jsx(E,{children:"Created by"}),e.jsx(E,{children:"Comment"}),e.jsx(E,{children:"Action"})]}),n.map(a=>e.jsxs(C,{children:[e.jsx(y,{children:e.jsx("div",{children:e.jsx(ht,{variant:js(a?.status?.state),children:a.status?.state})})}),e.jsx(y,{children:i(a.startsAt)}),e.jsx(y,{children:i(a.endsAt)}),e.jsx(y,{children:a.createdBy}),e.jsx(y,{className:"break-all",children:a.comment}),e.jsx(y,{children:a?.status?.state===G.SILENCE_ACTIVE?e.jsx(Yt,{silence:a,fingerprint:t.fingerprint}):e.jsx(Kt,{silence:a,fingerprint:t.fingerprint})})]},a.id))]})]})})},ys=({alert:t})=>{const s=B(),{getAlertByFingerprint:r}=Ae(),{setShowDetailsFor:n}=Ee(),{setSilences:i}=Z(),{addMessage:a}=ne(),{error:u,data:o,isLoading:h}=le("silences");return S.useEffect(()=>{o&&i({items:o?.silences})},[o]),u&&a({variant:"error",text:ie(u)}),e.jsxs(be,{py:!0,px:!1,children:[h?e.jsxs(F,{gap:"2",children:[e.jsx("span",{children:"Loading"}),e.jsx(J,{variant:"primary"})]}):e.jsx(vs,{alert:t}),t.status.inhibitedBy.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold mb-2 mt-8",children:"Inhibited by"}),e.jsxs(ae,{columns:2,children:[e.jsxs(C,{children:[e.jsx(E,{children:"Alert"}),e.jsx(E,{})]}),t.status.inhibitedBy.map(m=>e.jsxs(C,{children:[e.jsxs(y,{children:[e.jsx("div",{children:r(m)?.annotations?.summary}),e.jsx(ce,{description:r(m)?.annotations?.description})]}),e.jsx(y,{children:e.jsx(re,{size:"small",onClick:()=>{n(m),s({to:"/",search:l=>({...l,showDetailsFor:m})})},icon:"exitToApp",children:"Go to details"})})]},m))]})]})]})},Ss=()=>{const t=B(),s=qe(),{setShowDetailsFor:r}=Ee(),{getAlertByFingerprint:n}=Ae(),[i,a]=S.useState(void 0),u=We(),o=()=>{r(null),t({to:"/alerts",search:m=>{const{showDetailsFor:l,...c}=m;return{...c}}})},{isLoading:h}=le("alerts");return S.useEffect(()=>{u?.length>0&&a(n(s))},[u,s]),e.jsxs(mt,{heading:e.jsxs(F,{gap:"2",children:[e.jsx(Ke,{severity:i?.labels?.severity}),e.jsx("span",{children:i?.annotations?.summary||"Not found"})]}),opened:!!s,onClose:o,size:"large",children:[e.jsxs(pt,{children:[e.jsx(xt,{className:"pb-6 absolute"}),e.jsxs(gt,{children:[e.jsxs(ft,{children:[e.jsx(Ne,{children:"Details"}),e.jsx(Ne,{children:"Raw Data"})]}),e.jsx(we,{children:e.jsx(be,{px:!1,py:!0,children:i?e.jsxs(e.Fragment,{children:[e.jsxs(ae,{columns:2,children:[e.jsxs(C,{children:[e.jsx(E,{children:"Status"}),e.jsx(y,{children:e.jsx(nt,{alert:i})})]}),e.jsxs(C,{children:[e.jsx(E,{children:"Firing Since"}),e.jsx(y,{children:e.jsx(Ge,{startTimestamp:i?.startsAt})})]}),e.jsxs(C,{children:[e.jsx(E,{children:"Service"}),e.jsx(y,{children:i?.labels?.service})]}),e.jsxs(C,{children:[e.jsx(E,{children:"Region"}),e.jsx(y,{children:e.jsx(rt,{region:i?.labels?.region,cluster:i?.labels?.cluster})})]}),e.jsxs(C,{children:[e.jsx(E,{children:"Description"}),e.jsx(y,{children:e.jsx(ce,{description:i?.annotations?.description})})]}),e.jsxs(C,{children:[e.jsx(E,{children:"Links"}),e.jsx(y,{children:e.jsx(et,{alert:i})})]}),e.jsxs(C,{children:[e.jsx(E,{children:"Labels"}),e.jsx(y,{children:e.jsx(tt,{alert:i,showAll:!0})})]})]}),e.jsx(ys,{alert:i})]}):h?e.jsxs(F,{gap:"2",children:[e.jsx("span",{children:"Loading"}),e.jsx(J,{variant:"primary"})]}):"Not found - the alert is probably not firing at the moment"})}),e.jsx(we,{children:e.jsx(be,{px:!1,py:!0,children:e.jsx(bt,{children:i&&e.jsx(jt,{data:i,expanded:!0})})})})]})]}),e.jsx(vt,{children:i&&e.jsx(st,{alert:i,variant:"primary"})})]})},Fs=(t,s)=>{let r=`
    text-lg/5
  `;if(!s||s<1)return`${r} text-theme-light`;switch(t){case"critical":r+=" bg-theme-danger/50";break;case"warning":r+=" bg-theme-warning/50";break;case"info":r+=" bg-theme-info/40";break}return r},As=(t,s)=>t?s?t-s:t:"--",pe=({severity:t,severityCountTotal:s,severityCountSuppressed:r})=>e.jsxs(F,{direction:"vertical",alignment:"stretch",distribution:"center",className:Fs(t,s),children:[e.jsx(F,{direction:"vertical",alignment:"center",distribution:"center",className:"h-full",children:As(s,r)}),r&&e.jsx("div",{className:"text-xs bg-black/10 mt-auto",children:e.jsxs(F,{alignment:"center",distribution:"center",children:[e.jsx(O,{icon:"notificationsOff",size:"0.75rem"}),e.jsx("span",{children:r})]})})]}),Es=`
  grid
  grid-cols-[repeat(4,_minmax(5rem,_1fr))]

  group
  bg-theme-background-lvl-1
  hover:bg-theme-background-lvl-2
  hover:text-theme-high
  cursor-pointer
`,Ns=`
  bg-theme-background-lvl-2
  group-hover:bg-theme-background-lvl-3
  font-bold
  px-3
  py-2
  whitespace-nowrap
`,ws=({region:t,severityCounts:s})=>{const r=B(),{addActiveFilter:n,removeActiveFilter:i}=X(),a=Q(),u=()=>{a?.region?.includes(t)?(i("region",t),r({to:"/alerts",search:o=>Y({...o},`${W}region`,t)})):(n("region",t),r({to:"/alerts",search:o=>se({...o},`${W}region`,t)}))};return e.jsxs("div",{className:`region ${Es}`,onClick:()=>u(),children:[e.jsx(F,{alignment:"center",distribution:"center",className:Ns,children:t||"Counts"}),e.jsx(pe,{severity:"critical",severityCountTotal:s?.critical?.total,severityCountSuppressed:s?.critical?.suppressed}),e.jsx(pe,{severity:"warning",severityCountTotal:s?.warning?.total,severityCountSuppressed:s?.warning?.suppressed}),e.jsx(pe,{severity:"info",severityCountTotal:s?.info?.total,severityCountSuppressed:s?.info?.suppressed})]})},Ts=`
  grid
  auto-rows-fr
  grid-cols-[repeat(auto-fit,_minmax(21rem,_1fr))]
  gap-3
  mb-8
`,Cs=()=>{const{isLoading:t}=le("alerts"),s=yt(),r=St(),n=()=>!t&&r?e.jsx("div",{className:`regions ${Ts}`,children:r.map(i=>e.jsx(ws,{region:i,severityCounts:s[i]},`${i}`))}):null;return e.jsx(e.Fragment,{children:n()})},Ls=t=>{let s="border-text-theme-default";switch(t){case"critical":s="border-theme-danger";break;case"warning":s="border-theme-warning";break;case"info":s="border-theme-info";break}return`
    border-l-2
    ${s}
    h-full
    pl-5
  `},ks=({alert:t},s)=>{const r=B(),n=S.useRef(null),i=a=>{a.target.parentNode!==n.current&&!a.target.classList.contains("interactive")&&!a.target.closest(".interactive")||(a.stopPropagation(),a.preventDefault(),r({to:"/alerts",search:u=>({...u,showDetailsFor:t?.fingerprint})}))};return e.jsxs(C,{className:`cursor-pointer ${qe()===t?.fingerprint?"active":""}`,ref:n,onClick:a=>i(a),children:[e.jsx(y,{className:"pl-0 interactive",children:e.jsx("div",{className:Ls(t.labels?.severity),children:e.jsx(Ke,{ref:s,severity:t.labels?.severity})})}),e.jsx(y,{className:"interactive",children:e.jsx(rt,{region:t.labels?.region,cluster:t.labels?.cluster})}),e.jsx(y,{children:t.labels?.service}),e.jsxs(y,{className:"cursor-default",children:[e.jsx("div",{className:"interactive text-theme-high cursor-pointer",children:t.annotations?.summary}),e.jsxs("div",{children:[e.jsx(ce,{description:t.annotations?.description,subdued:!0}),e.jsx(et,{alert:t,className:"mb-4 mt-1"})]}),e.jsx(tt,{alert:t})]}),e.jsx(y,{className:"interactive",children:e.jsx(Ge,{startTimestamp:t.startsAt})}),e.jsx(y,{children:e.jsx(nt,{alert:t})}),e.jsx(y,{children:e.jsx(st,{alert:t,size:"small"})})]})},_s=S.forwardRef(ks),Is=()=>{const t=Ft(),{scrollListItems:s,iterator:r}=At(t,{loadingObject:e.jsx(C,{children:e.jsx(y,{colSpan:3,children:e.jsxs(F,{gap:"3",alignment:"center",direction:"horizontal",children:["Loading...",e.jsx(J,{})]})})}),refFunction:n=>e.jsx(C,{children:e.jsx(y,{colSpan:3,className:"border-b-0 py-0",children:e.jsx("span",{ref:n})})})});return e.jsxs(ae,{columns:7,minContentColumns:[0,2,5],cellVerticalAlignment:"top",className:"alerts",children:[e.jsxs(C,{children:[e.jsx(E,{children:e.jsx(O,{icon:"monitorHeart"})}),e.jsx(E,{children:"Region"}),e.jsx(E,{children:"Service"}),e.jsx(E,{children:"Description"}),e.jsx(E,{children:"Firing Since"}),e.jsx(E,{children:"Status"}),e.jsx(E,{})]}),s?.length?r.map(n=>e.jsx(_s,{alert:n},n.fingerprint)):e.jsx(C,{className:"no-hover",children:e.jsx(y,{colSpan:7,children:e.jsxs(F,{gap:"3",children:[e.jsx(O,{icon:"info",color:"text-theme-info"}),e.jsx("div",{children:"We couldn't find anything. It's possible that the matching alerts are not active at the moment, or the chosen filters could be overly limiting."})]})})})]})},$s=`
  bg-theme-background-lvl-1
  py-1.5
  px-4
  my-px
  text-theme-light
`,Ps=({totalCounts:t,isUpdating:s,updatedAt:r})=>e.jsxs(F,{className:`status-bar ${$s}`,alignment:"center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-theme-default pr-2",children:`${t.total} alerts`}),e.jsx("span",{children:`(${t.critical||0} critical, ${t.warning||0} warning, ${t.info||0} info)`})]}),e.jsxs(F,{alignment:"center",className:"ml-auto",children:[s&&e.jsx(J,{size:"small",className:"mr-2"}),r&&`updated ${$.fromMillis(r).toLocaleString({...$.TIME_24_WITH_SHORT_OFFSET})}`]})]}),Ds=()=>{const t=B(),[s,r]=S.useState(""),[n,i]=S.useState(""),{addActiveFilter:a,loadFilterLabelValues:u,clearFilters:o,setSearchTerm:h}=X(),m=Re(),l=Et(),c=Q(),d=Nt(),f=p=>{r(p),l[p]?.values||u(p)},x=p=>{i(p),s.trim()!==""&&p.trim()!==""&&(a(s,p),t({to:"/alerts",search:L=>se({...L},`${W}${s}`,p)})),setTimeout(()=>{i("")},0)},w=p=>{const L=setTimeout(()=>{h(p.target.value),t({to:"/alerts",search:D=>({...D,searchTerm:p.target.value.trim()})})},500);return()=>clearTimeout(L)};return e.jsxs(F,{alignment:"center",gap:"8",children:[e.jsxs(wt,{children:[e.jsx(Se,{name:"filter",className:"filter-label-select w-64 mb-0",label:"Filter",value:s,onChange:p=>f(p),children:m?.map(p=>e.jsx(Fe,{value:p,label:Tt(p)},p))}),e.jsx(Ct,{value:n,name:"filterValue",onChange:p=>x(p),disabled:!l[s],loading:l[s]?.isLoading,className:"filter-value-select w-96 bg-theme-background-lvl-0",children:l[s]?.values?.filter(p=>!c[s]?.includes(p)).slice(0,100).map(p=>e.jsx(Lt,{value:p},p))})]}),k(),e.jsx(kt,{placeholder:"search term or regular expression",className:"w-96 ml-auto",value:d||"",onSearch:p=>h(p),onClear:()=>{h(""),t({to:"/alerts",search:p=>({...p,searchTerm:""})})},onChange:p=>w(p)})]});function k(){return c&&Object.keys(c).length>0&&e.jsx(re,{label:"Clear all",onClick:()=>{o(),t({to:"/alerts",search:p=>Object.entries(p).reduce((L,[D,V])=>(V&&!D.startsWith("f_")&&!D.startsWith("pf_")&&(L[D]=V),L),{})})},variant:"subdued"})}},Rs=()=>{const t=B(),s=Q(),r=_t(),{removeActiveFilter:n,addActiveFilter:i,addPausedFilter:a,removePausedFilter:u}=X(),o=(l,c)=>{a(l,c),t({to:"/alerts",search:d=>({...d,...It("pf_",se(r,l,c))})})},h=(l,c)=>{n(l,c),u(l,c),t({to:"/alerts",search:d=>{const f=Y({...d},`${W}${l}`,c);return Y({...f},`${Te}${l}`,c)}})},m=(l,c)=>{i(l,c),u(l,c),t({to:"/alerts",search:d=>Y({...d},`${Te}${l}`,c)})};return e.jsx(F,{gap:"2",wrap:!0,children:Object.entries(s).map(([l,c])=>c?.map(d=>r[l]?.includes(d)?e.jsx(K,{className:"bg-theme-background-lvl-4 opacity-70",pillKey:l,pillValue:d,closeable:!0,onClose:()=>h(l,d),onClick:()=>m(l,d)},`${l}:${d}`):e.jsx(K,{pillKey:l,pillValue:d,closeable:!0,onClose:()=>h(l,d),onClick:()=>o(l,d)},`${l}:${d}`)))})},Os=`
  bg-theme-background-lvl-1
  py-2
  px-4
  my-px
`,Bs=()=>e.jsxs(F,{direction:"vertical",gap:"4",className:`filters ${Os}`,children:[e.jsx(Ds,{}),e.jsx(Rs,{})]}),Ms=t=>{let n=t,i=!1;return n.comment.value.length<3&&(i=!0,n={...n,comment:{...n.comment,error:"Please enter at least 3 characters"}}),(!n?.createdBy?.value||n?.createdBy?.value.length<1)&&(i=!0,n={...n,createdBy:{...n.createdBy,error:"Created by cannot be empty"}}),new Date(n.date.start)>=new Date(n.date.end)&&(i=!0,n={...n,date:{...n.date,error:"The start date need to be before the end date"}}),Object.keys(n.editable_labels).map(a=>{Hs(n.editable_labels[a].value)||(i=!0,n={...n,editable_labels:{...n.editable_labels,[a]:{...n.editable_labels[a],error:`Value for ${a} is not a valid regular expression`}}}),n.editable_labels[a]?.value||(i=!0,n={...n,editable_labels:{...n.editable_labels,[a]:{...n.editable_labels[a],error:`Value for ${a} is empty`}}})}),i?n:null},Hs=t=>{try{return!!new RegExp(t)}catch(s){return console.error(s),!1}},De={fixed_labels:{},editable_labels:{},comment:{value:"",error:null},createdBy:{value:"",error:null},date:{start:null,end:null,error:null}},Vs=()=>{const t=Be(),{addMessage:s}=ne(),r=$t(),[n,i]=S.useState(null),a=Oe(),u=Me(),{setSilences:o}=Z(),[h,m]=S.useState(null),l=S.useMemo(()=>{const v=new Date;return`${v.getFullYear()}-${v.getMonth()+1}-${v.getDate()}`},[]),[c,d]=S.useState(De),[f,x]=S.useState(!0),{mutate:w}=ze("createSilences",{onMutate:v=>{a.cancelQueries({queryKey:["silences"]});const N={...v.silence,status:{state:G.SILENCE_ACTIVE}},g=[...u,N];o({items:g})},onSuccess:v=>{x(!0),s({variant:"success",text:`A silence object with id ${v?.silenceID} was created successfully. Please note that it may take up
          to 5 minutes for the alert to show up as silenced.`})},onError:v=>{i(ie(v))},onSettled:()=>{a.invalidateQueries({queryKey:["silences"]})}}),k=Ye(()=>{i(null);const v=Ms(c);if(v){d(v),i("Please fix the errors in the form");return}const N={startsAt:c.date.start,endsAt:c.date.end,comment:c.comment.value,createdBy:c.createdBy.value,matchers:[]};for(const[g,A]of Object.entries(c.editable_labels)){const _={name:g,value:A.value,isRegex:!0};N.matchers.push(_)}for(const[g,A]of Object.entries(c.fixed_labels)){const _={name:g,value:A,isRegex:!0};N.matchers.push(_)}w({silence:N})},200),p=v=>{const N=r.find(A=>A.id===v),g={...De,fixed_labels:N?.fixed_labels||{},createdBy:{value:t,error:null},editable_labels:N?.editable_labels?.reduce((A,_)=>({...A,[_]:{value:"",error:null}}),{})};d(g),m(N)},L=({key:v,value:N})=>{d({...c,[v]:{value:N,error:null}})},D=v=>{const N=v.target.id;d(he(g=>{g.editable_labels[N].value=v.target.value,g.editable_labels[N].error=null}))},V=(v,N)=>{d(he(g=>{g.date.start=N,g.date.error=null}))},oe=(v,N)=>{d(he(g=>{g.date.end=N,g.date.error=null}))};return e.jsx(e.Fragment,{children:Us(r,x,f,h,k,n,p,c,L,t,l,V,oe,D)})};function Us(t,s,r,n,i,a,u,o,h,m,l,c,d,f){return t&&t?.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(re,{onClick:x=>{x.stopPropagation(),s(!1)},children:"Schedule Silence"}),!r&&e.jsxs(He,{title:"Schedule new silence",size:"large",open:!0,confirmButtonLabel:!n||n?.invalid?void 0:"Save",onConfirm:!n||n?.invalid?void 0:i,onCancel:()=>s(!0),children:[a&&e.jsx(xe,{text:a,variant:"danger"}),e.jsxs(ge,{className:"mt-6",children:[n&&n?.invalid&&e.jsx(I,{children:e.jsx(xe,{text:`This silence template is invalid. ${n.invalid}`,variant:"error"})}),e.jsx(I,{children:e.jsx(Se,{required:!0,label:"Silence Template",value:n?.id||"Select",onValueChange:x=>{u(x)},children:t?.map(x=>e.jsx(Fe,{id:x.id,label:x.title,value:x.id},x.id))})}),n&&!n?.invalid&&e.jsx(I,{children:e.jsx(Ve,{children:n?.description})})]}),n&&!n?.invalid&&e.jsxs(ge,{children:[e.jsxs(ue,{children:[e.jsx(I,{children:e.jsx(fe,{required:!0,label:"Silenced by",value:o?.createdBy?.value,errortext:o?.createdBy?.error,onChange:x=>h({key:"createdBy",value:x.target.value}),disabled:!!m})}),e.jsx(I,{children:e.jsxs("div",{className:"grid gap-2 grid-cols-2",children:[e.jsx(Ce,{value:o?.date?.start||l,dateFormat:"Y-m-d H:i:S",label:"Select a start date",enableTime:!0,time_24hr:!0,required:!0,errortext:o?.date?.error,onChange:c,enableSeconds:!0}),e.jsx(Ce,{value:o?.date?.end||l,dateFormat:"Y-m-d H:i:S",label:"Select a end date",enableTime:!0,time_24hr:!0,required:!0,errortext:o?.date?.error,onChange:d,enableSeconds:!0})]})}),e.jsx(I,{children:e.jsx(Ue,{label:"Comment",value:o.comment.value,errortext:o.comment.error,onChange:x=>h({key:"comment",value:x.target.value}),required:!0})})]}),o?.editable_labels&&Object.keys(o?.editable_labels).length>0&&e.jsxs(ue,{children:[e.jsx(I,{children:e.jsx("p",{children:"Editable Labels are labels that are editable. You can use regular expressions."})}),e.jsx(I,{children:e.jsx("div",{className:"grid gap-2 grid-cols-2",children:Object.keys(o.editable_labels).map((x,w)=>e.jsx(fe,{required:!0,label:x,id:x,value:o?.editable_labels[x].value,errortext:o?.editable_labels[x]?.error,onChange:f},w))})})]}),Object.keys(o?.fixed_labels).length>0&&e.jsxs(ue,{children:[e.jsx(I,{children:e.jsx("p",{children:"Fixed Labels are labels that are not editable."})}),e.jsx(I,{children:e.jsx(F,{gap:"2",alignment:"start",wrap:!0,className:"mt-2",children:Object.keys(o.fixed_labels).map((x,w)=>e.jsx(K,{pillKey:x,pillKeyLabel:x,pillValue:o?.fixed_labels[x],pillValueLabel:o?.fixed_labels[x]},w))})})]})]})]})," "]})}const Ws=()=>{const t=B(),s=Pt(),r=Dt(),n=a=>{typeof a=="string"&&t({to:"/alerts",search:u=>({...u,predefinedFilter:a})})};return e.jsxs(F,{children:[i(),e.jsx("div",{className:"ml-auto",children:e.jsx(Vs,{})})]});function i(){return s&&r&&e.jsx(Rt,{activeItem:r,onActiveItemChange:n,children:s?.map(a=>e.jsx(Ot,{value:a.name,label:a.displayName},a.name))})}},qs=()=>{const t=Bt(),s=Mt(),{setAlertsData:r}=Ae(),{addMessage:n,resetMessages:i}=ne(),{data:a,isLoading:u,error:o}=le("alerts");return o&&(i(),o instanceof Gt&&n({variant:"warning",text:e.jsx(Qt,{})}),n({variant:"error",text:ie(o)})),S.useEffect(()=>{a&&r({items:a.alerts,counts:a.counts})},[a]),e.jsx(e.Fragment,{children:u?e.jsxs(F,{gap:"2",children:[e.jsx("span",{children:"Loading"}),e.jsx(J,{variant:"primary"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ws,{}),e.jsx(Bs,{}),e.jsx(Ps,{totalCounts:t,isUpdating:u,updatedAt:s}),e.jsx(Is,{})]})})};function Qs(){const{appStateFromUrl:{activeFilters:t,pausedFilters:s,predefinedFilter:r,searchTerm:n,showDetailsFor:i}}=Ht.useRouteContext(),{setShowDetailsFor:a}=Ee(),u=Q(),{setActiveFilters:o,setPausedFilters:h,setActivePredefinedFilter:m,setSearchTerm:l}=X();return S.useLayoutEffect(()=>{o({...u,...t}),h(s),m(r),l(n),a(i)},[t,s,r,n,i]),e.jsxs(e.Fragment,{children:[e.jsx(Vt,{children:e.jsx(Ss,{})}),e.jsx(Cs,{}),e.jsx(qs,{})]})}export{Qs as component};
