import{aq as it,S as Ne,p as Z,j as e,ar as ct,u as V,T as Pe,Q as we,O as Me,U as ot,V as dt,X as ht,Y as ut,_ as mt,$ as Ee,a0 as Te,i as ge,l as re,C as _,h as S,v as y,K as N,x as J,a1 as pt,a2 as xt,a3 as gt,a4 as bt,a5 as jt,ao as ft,ap as vt,s as se,e as G,Z as yt,z as kt,g as P,L as Nt,m as wt,n as Ve,o as ae,k as Q,R as ne,w as Re,y as St,B as Ct,D as He,a as ze,c as Y,E as qe,F as be,G as Ze,I as je,J as L,M as fe,N as We,f as Se,r as Ce,ak as Et,al as Tt,am as _t,an as At,a6 as Ft,H as $t,q as U,A as q,t as le,P as Lt,ag as It,a7 as Ot,a8 as Dt,a9 as Bt,aa as Pt,ab as Mt,ac as Vt,W as Rt,ad as Ht,ah as ue,ai as _e,ae as Ae,af as zt,aj as me}from"./App-kFpdkFRX-UKe7xZHW.js";import{j as k,V as M,$ as qt}from"./_extensionId._-BVGEu3N1.js";import{b as ie,p as Zt,x as Wt,v as ce,y as I,a as Kt,O as Ut,d as Qt,c as Ke,e as Ue,k as Yt,E as Jt}from"./FirefoxCorsWarning-C4VDEzjc-BZbe3DyQ.js";import"./index-DWW7LtsL.js";import"./Shell-CnPPzi6s.js";import"./index-ChQBRl_L.js";const Gt=({severity:r},t)=>{const s=()=>{switch(r){case"critical":return"text-theme-danger";case"warning":return"text-theme-warning";case"info":return"text-theme-info"}};return e.jsx(e.Fragment,{children:r==="critical"?e.jsx(P,{ref:t,icon:"danger",color:s()}):r?.match(/^(warning|info)$/)?e.jsx(P,{icon:r,color:s(),ref:t}):e.jsx(P,{ref:t,icon:"errorOutline"})})},Qe=k.forwardRef(Gt),Ye=({startTimestamp:r})=>{const t={...I.DATE_MED},s={...I.TIME_24_WITH_SHORT_OFFSET},a=I.fromISO(r),n=I.now().diff(a,"days");return e.jsxs(N,{direction:"vertical",gap:"1",children:[e.jsx("div",{children:a.toLocaleString(t)}),e.jsx("div",{children:a.toLocaleString(s)}),n.days>7&&e.jsxs(yt,{variant:"warning",triggerEvent:"hover",children:[e.jsx(kt,{asChild:!0,children:e.jsx(P,{icon:"warning",color:"text-theme-warning"})}),e.jsx(Nt,{children:`Alert has been firing for ${Math.round(n.days)} days`})]})]})},j=1,Je=2,Ge=4,T=8,ve=16,X=32,O=64,ye={a:{content:j|T,self:!1,type:j|T|X|O},address:{invalid:["h1","h2","h3","h4","h5","h6","address","article","aside","section","div","header","footer"],self:!1},audio:{children:["track","source"]},br:{type:j|T,void:!0},body:{content:j|Je|Ge|T|ve|X|O},button:{content:T,type:j|T|X|O},caption:{content:j,parent:["table"]},col:{parent:["colgroup"],void:!0},colgroup:{children:["col"],parent:["table"]},details:{children:["summary"],type:j|X|O},dd:{content:j,parent:["dl"]},dl:{children:["dt","dd"],type:j},dt:{content:j,invalid:["footer","header"],parent:["dl"]},figcaption:{content:j,parent:["figure"]},footer:{invalid:["footer","header"]},header:{invalid:["footer","header"]},hr:{type:j,void:!0},img:{void:!0},li:{content:j,parent:["ul","ol","menu"]},main:{self:!1},ol:{children:["li"],type:j},picture:{children:["source","img"],type:j|T|ve},rb:{parent:["ruby","rtc"]},rp:{parent:["ruby","rtc"]},rt:{content:T,parent:["ruby","rtc"]},rtc:{content:T,parent:["ruby"]},ruby:{children:["rb","rp","rt","rtc"]},source:{parent:["audio","video","picture"],void:!0},summary:{content:T,parent:["details"]},table:{children:["caption","colgroup","thead","tbody","tfoot","tr"],type:j},tbody:{parent:["table"],children:["tr"]},td:{content:j,parent:["tr"]},tfoot:{parent:["table"],children:["tr"]},th:{content:j,parent:["tr"]},thead:{parent:["table"],children:["tr"]},tr:{parent:["table","tbody","thead","tfoot"],children:["th","td"]},track:{parent:["audio","video"],void:!0},ul:{children:["li"],type:j},video:{children:["track","source"]},wbr:{type:j|T,void:!0}};function R(r){return t=>{ye[t]={...r,...ye[t]}}}["address","main","div","figure","p","pre"].forEach(R({content:j,type:j|O}));["abbr","b","bdi","bdo","cite","code","data","dfn","em","i","kbd","mark","q","ruby","samp","strong","sub","sup","time","u","var"].forEach(R({content:T,type:j|T|O}));["p","pre"].forEach(R({content:T,type:j|O}));["s","small","span","del","ins"].forEach(R({content:T,type:j|T}));["article","aside","footer","header","nav","section","blockquote"].forEach(R({content:j,type:j|Je|O}));["h1","h2","h3","h4","h5","h6"].forEach(R({content:T,type:j|Ge|O}));["audio","canvas","iframe","img","video"].forEach(R({type:j|T|ve|O}));const ke=Object.freeze(ye),Xt=["applet","base","body","command","embed","frame","frameset","head","html","link","meta","noscript","object","script","style","title"],er=Object.keys(ke).filter(r=>r!=="canvas"&&r!=="iframe"),f=1,tr=2,K=3,z=4,Xe=5,Fe=Object.freeze({alt:f,cite:f,class:f,colspan:K,controls:z,datetime:f,default:z,disabled:z,dir:f,height:f,href:f,id:f,kind:f,label:f,lang:f,loading:f,loop:z,media:f,muted:z,poster:f,rel:f,role:f,rowspan:K,scope:f,sizes:f,span:K,start:K,style:Xe,src:f,srclang:f,srcset:f,tabindex:f,target:f,title:f,type:f,width:f}),rr=Object.freeze({class:"className",colspan:"colSpan",datetime:"dateTime",rowspan:"rowSpan",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex"});function te(){return te=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])}return r},te.apply(this,arguments)}function et({attributes:r={},className:t,children:s=null,selfClose:a=!1,tagName:n}){const l=n;return a?M.createElement(l,te({className:t},r)):M.createElement(l,te({className:t},r),s)}class sr{attribute(t,s){return s}node(t,s){return s}}/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var pe,$e;function ar(){if($e)return pe;$e=1;var r=/["'&<>]/;pe=t;function t(s){var a=""+s,n=r.exec(a);if(!n)return a;var l,u="",i=0,h=0;for(i=n.index;i<a.length;i++){switch(a.charCodeAt(i)){case 34:l="&quot;";break;case 38:l="&amp;";break;case 39:l="&#39;";break;case 60:l="&lt;";break;case 62:l="&gt;";break;default:continue}h!==i&&(u+=a.substring(h,i)),h=i+1,u+=l}return h!==i?u+a.substring(h,i):u}return pe}var nr=ar();const lr=qt(nr);var ee={};function B(r,t,s){return t in r?Object.defineProperty(r,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[t]=s,r}const ir=/(url|image|image-set)\(/i;class cr extends sr{attribute(t,s){return t==="style"&&Object.keys(s).forEach(a=>{String(s[a]).match(ir)&&delete s[a]}),s}}const Le=1,or=3,dr=/^<(!doctype|(html|head|body)(\s|>))/i,hr=/^(aria-|data-|\w+:)/iu,ur=/{{{(\w+)\/?}}}/;function mr(){if(!(typeof window>"u"||typeof document>"u"))return document.implementation.createHTMLDocument("Interweave")}class pr{constructor(t,s={},a=[],n=[]){var l;if(B(this,"allowed",void 0),B(this,"banned",void 0),B(this,"blocked",void 0),B(this,"container",void 0),B(this,"content",[]),B(this,"props",void 0),B(this,"matchers",void 0),B(this,"filters",void 0),B(this,"keyIndex",void 0),ee.NODE_ENV!=="production"&&t&&typeof t!="string")throw new TypeError("Interweave parser requires a valid string.");this.props=s,this.matchers=a,this.filters=[...n,new cr],this.keyIndex=-1,this.container=this.createContainer(t||""),this.allowed=new Set((l=s.allowList)!==null&&l!==void 0?l:er),this.banned=new Set(Xt),this.blocked=new Set(s.blockList)}applyAttributeFilters(t,s){return this.filters.reduce((a,n)=>a!==null&&typeof n.attribute=="function"?n.attribute(t,a):a,s)}applyNodeFilters(t,s){return this.filters.reduce((a,n)=>a!==null&&typeof n.node=="function"?n.node(t,a):a,s)}applyMatchers(t,s){const a={},{props:n}=this;let l=t,u=0,i=null;return this.matchers.forEach(h=>{const m=h.asTag().toLowerCase(),c=this.getTagConfig(m);if(n[h.inverseName]||!this.isTagAllowed(m)||!this.canRenderChild(s,c))return;let o="";for(;l&&(i=h.match(l));){const{index:d,length:b,match:x,valid:E,void:F,...p}=i,A=h.propName+String(u);d>0&&(o+=l.slice(0,d)),E?(o+=F?`{{{${A}/}}}`:`{{{${A}}}}${x}{{{/${A}}}}`,this.keyIndex+=1,u+=1,a[A]={children:x,matcher:h,props:{...n,...p,key:this.keyIndex}}):o+=x,h.greedy?(l=o+l.slice(d+b),o=""):l=l.slice(d+(b||x.length))}h.greedy||(l=o+l)}),u===0?t:this.replaceTokens(l,a)}canRenderChild(t,s){return!t.tagName||!s.tagName||t.void?!1:t.children.length>0?t.children.includes(s.tagName):t.invalid.length>0&&t.invalid.includes(s.tagName)?!1:s.parent.length>0?s.parent.includes(t.tagName):!t.self&&t.tagName===s.tagName?!1:!!(t&&t.content&s.type)}convertLineBreaks(t){const{noHtml:s,disableLineBreaks:a}=this.props;if(s||a||t.match(/<((?:\/[ a-z]+)|(?:[ a-z]+\/))>/gi))return t;let n=t.replace(/\r\n/g,`
`);return n=n.replace(/\n{3,}/g,`


`),n=n.replace(/\n/g,"<br/>"),n}createContainer(t){var s;const a=(typeof global<"u"&&global.INTERWEAVE_SSR_POLYFILL||mr)();if(!a)return;const n=(s=this.props.containerTagName)!==null&&s!==void 0?s:"body",l=n==="body"||n==="fragment"?a.body:a.createElement(n);if(t.match(dr)){if(ee.NODE_ENV!=="production")throw new Error("HTML documents as Interweave content are not supported.")}else l.innerHTML=this.convertLineBreaks(this.props.escapeHtml?lr(t):t);return l}extractAttributes(t){const{allowAttributes:s}=this.props,a={};let n=0;return t.nodeType!==Le||!t.attributes||([...t.attributes].forEach(l=>{const{name:u,value:i}=l,h=u.toLowerCase(),m=Fe[h]||Fe[u];if(!this.isSafe(t)||!h.match(hr)&&(!s&&(!m||m===tr)||h.startsWith("on")||i.replace(/(\s|\0|&#x0([9AD]);)/,"").match(/(javascript|vbscript|livescript|xss):/i)))return;let c=h==="style"?this.extractStyleAttribute(t):i;m===z?c=!0:m===K?c=Number.parseFloat(String(c)):m!==Xe&&(c=String(c)),a[rr[h]||h]=this.applyAttributeFilters(h,c),n+=1}),n===0)?null:a}extractStyleAttribute(t){const s={};return Array.from(t.style).forEach(a=>{const n=t.style[a];(typeof n=="string"||typeof n=="number")&&(s[a.replace(/-([a-z])/g,(l,u)=>String(u).toUpperCase())]=n)}),s}getTagConfig(t){const s={children:[],content:0,invalid:[],parent:[],self:!0,tagName:"",type:0,void:!1};return ke[t]?{...s,...ke[t],tagName:t}:s}isSafe(t){if(typeof HTMLAnchorElement<"u"&&t instanceof HTMLAnchorElement){const s=t.getAttribute("href");if(s!=null&&s.startsWith("#"))return!0;const a=t.protocol.toLowerCase();return a===":"||a==="http:"||a==="https:"||a==="mailto:"||a==="tel:"}return!0}isTagAllowed(t){return this.banned.has(t)||this.blocked.has(t)?!1:this.props.allowElements||this.allowed.has(t)}parse(){return this.container?this.parseNode(this.container,this.getTagConfig(this.container.nodeName.toLowerCase())):[]}parseNode(t,s){const{noHtml:a,noHtmlExceptMatchers:n,allowElements:l,transform:u,transformOnlyAllowList:i}=this.props;let h=[],m="";return[...t.childNodes].forEach(c=>{if(c.nodeType===Le){const d=c.nodeName.toLowerCase(),b=this.getTagConfig(d);m&&(h.push(m),m="");const x=this.applyNodeFilters(d,c);if(!x)return;let E;if(u&&!(i&&!this.isTagAllowed(d))){this.keyIndex+=1;const F=this.keyIndex;E=this.parseNode(x,b);const p=u(x,E,b);if(p===null)return;if(typeof p<"u"){h.push(M.cloneElement(p,{key:F}));return}this.keyIndex=F-1}if(this.banned.has(d))return;if(!(a||n&&d!=="br")&&this.isTagAllowed(d)&&(l||this.canRenderChild(s,b))){var o;this.keyIndex+=1;const F=this.extractAttributes(x),p={tagName:d};F&&(p.attributes=F),b.void&&(p.selfClose=b.void),h.push(M.createElement(et,{...p,key:this.keyIndex},(o=E)!==null&&o!==void 0?o:this.parseNode(x,b)))}else h=[...h,...this.parseNode(x,b.tagName?b:s)]}else if(c.nodeType===or){const d=a&&!n?c.textContent:this.applyMatchers(c.textContent||"",s);Array.isArray(d)?h=[...h,...d]:m+=d}}),m&&h.push(m),h}replaceTokens(t,s){if(!t.includes("{{{"))return t;const a=[];let n=t,l=null;for(;l=n.match(ur);){const[u,i]=l,h=l.index,m=u.includes("/");if(ee.NODE_ENV!=="production"&&!s[i])throw new Error(`Token "${i}" found but no matching element to replace with.`);h>0&&(a.push(n.slice(0,h)),n=n.slice(h));const{children:c,matcher:o,props:d}=s[i];let b;if(m)b=u.length,a.push(o.createElement(c,d));else{const x=n.match(new RegExp(`{{{/${i}}}}`));if(ee.NODE_ENV!=="production"&&!x)throw new Error(`Closing token missing for interpolated element "${i}".`);b=x.index+x[0].length,a.push(o.createElement(this.replaceTokens(n.slice(u.length,x.index),s),d))}n=n.slice(b)}return n.length>0&&a.push(n),a.length===0?"":a.length===1&&typeof a[0]=="string"?a[0]:a}}function xr(r){var t;const{attributes:s,className:a,containerTagName:n,content:l,emptyContent:u,parsedContent:i,tagName:h,noWrap:m}=r,c=(t=n??h)!==null&&t!==void 0?t:"span",o=c==="fragment"?!0:m;let d;if(i)d=i;else{const b=new pr(l??"",r).parse();b.length>0&&(d=b)}return d||(d=u),o?M.createElement(M.Fragment,null,d):M.createElement(et,{attributes:s,className:a,tagName:c},d)}const oe=({description:r,subdued:t})=>e.jsx(xr,{content:wt(r?.replace(/`([^`]+)`/g,"<code class='inline-code'>$1</code>")),tagName:"div",className:t?"text-theme-light":""}),tt=({alert:r,className:t})=>e.jsxs(N,{gap:"3",className:t,children:[r?.generatorURL&&e.jsx("a",{className:"underline",href:r?.generatorURL,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"Prometheus"}),r?.labels?.playbook&&e.jsx("a",{className:"underline",href:r.labels.playbook.startsWith("http")?r.labels.playbook:`https://operations.global.cloud.sap/${r.labels.playbook}`,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"Playbook"}),r?.labels?.kibana&&e.jsx("a",{className:"underline",href:`https://logs.${r?.labels?.region}.cloud.sap/${r?.labels?.kibana}`,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"Logs"}),r?.labels?.dashboard&&e.jsx("a",{className:"underline",href:`https://plutono.${r?.labels?.region}.cloud.sap/d/${r?.labels?.dashboard}`,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"Plutono"}),r?.labels?.spc&&e.jsx("a",{className:"underline",href:`https://spc.ondemand.com/ticket_create/?${r?.labels?.spc}`,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"SPC Ticket"}),r?.labels?.sentry&&e.jsx("a",{className:"underline",href:`https://sentry.${r?.labels?.region}.cloud.sap/monsoon/${r?.labels?.sentry}`,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"Sentry"}),r?.labels?.cloudops&&e.jsx("a",{className:"underline",href:`https://dashboard.${r?.labels?.region}.cloud.sap/ccadmin/cloud_admin/cloudops#/universal-search/${r?.labels?.cloudops}`,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"CloudOps"}),r?.labels?.report&&e.jsx("a",{className:"underline",href:`https://dashboard.${r?.labels?.region}.cloud.sap/${r?.labels?.report}`,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"Report"}),r?.annotations?.mail_subject&&e.jsx("a",{className:"underline",href:`mailto:?subject=${encodeURIComponent(r?.annotations?.mail_subject)}&body=${encodeURIComponent(r?.annotations?.mail_body)}`,rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),children:"Email Owner"})]}),rt=({alert:r,showAll:t})=>{const s=V(),a=t?Object.keys(r?.labels):Ve(),n=ae(),{addActiveFilter:l,removeActiveFilter:u}=Z(),i=(m,c,o)=>{n?.[c]?.includes(o)?h(m,c,o):(m.stopPropagation(),l(c,o),s({to:"/alerts",search:d=>le({...d},`${q}${c}`,o)}))},h=(m,c,o)=>{m.stopPropagation(),u(c,o),s({to:"/alerts",search:d=>U({...d},`${q}${c}`,o)})};return e.jsx(N,{gap:"2",alignment:"start",wrap:!0,children:a.map(m=>{const c=r?.labels?.[m],o=n?.[m]?.includes(c);return c&&e.jsx(Q,{pillKey:m,pillValue:c,onClick:(d,b)=>i(d,m,c),closeable:o,onClose:(d,b)=>h(d,m,c)},m)})})},Ie=({matchers:r,onClickCallback:t,closeable:s})=>{const a=k.useMemo(()=>!r||r?.length<=0?[]:r.sort((l,u)=>l.configurable-u.configurable),[r]),n=l=>{const u={onClick:()=>l.configurable&&t(l),onClose:()=>t(l)};return l.configurable?u:{}};return e.jsx(N,{gap:"2",alignment:"start",wrap:!0,children:a.length>0?r.map(l=>k.createElement(Q,{className:l.configurable?"opacity-100":"opacity-70",closeable:l.configurable&&s,...n(l),key:l.name,pillKey:l.name,pillValue:l.value})):e.jsx("span",{className:"text-theme-light",children:"No excluded matchers found"})})},gr=r=>`
      transition-all
      ease-out
      max-h-0
      overflow-y-auto
			${r?"duration-1000 max-h-[34rem]":"duration-300"}
		`.replace(/\n/g," ").replace(/\s+/g," "),br=({matchers:r,onMatchersChanged:t})=>{const[s,a]=k.useState(!1),n=l=>{l.preventDefault(),a(!s)};return e.jsx(e.Fragment,{children:r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"advance-link mt-4",children:e.jsx("a",{href:"#",rel:"noopener noreferrer",onClick:n,children:e.jsxs(N,{alignment:"center",children:["Advanced options",e.jsx(P,{color:"jn-global-text",icon:s?"expandLess":"expandMore"})]})})}),e.jsx("div",{className:"advanced-area overflow-hidden",children:e.jsxs("div",{className:gr(s),children:[e.jsx("p",{className:"mt-2",children:"Matchers attached to this silence"}),e.jsx("div",{className:"mt-2",children:e.jsx(Ie,{matchers:r.filter(l=>!l.excluded),onClickCallback:t,closeable:!0})}),e.jsx("p",{className:"mt-4",children:"The default silence configuration excludes the following matchers because they typically make the silence too specific which can lead to alerts bypassing the silence unexpectedly. If you do want to include any of these matchers in the silence configuration, click on them to add them. If you change your mind, click again to remove."}),e.jsx("div",{className:"my-2",children:e.jsx(Ie,{matchers:r.filter(l=>l.excluded),onClickCallback:t,closeable:!1})})]})})]})})},jr=r=>{const t={};return r?.comment?.length<3&&(t.comment||(t.comment=[]),t.comment.push("Please enter at least 3 characters")),r?.createdBy?.length<1&&(t.createdBy||(t.createdBy=[]),t.createdBy.push("Please enter a name")),t},Oe=r=>r.map((t,s)=>e.jsx("span",{className:"block text-theme-danger ",children:t},s)),De={duration:2,comment:""},st=({alert:r,size:t,variant:s})=>{const a=Re(),n=St(),{getMappingSilences:l,setSilences:u}=G(),i=Ct(),h=He(),[m,c]=k.useState(!1),[o,d]=k.useState(De),[b,x]=k.useState(null),[E,F]=k.useState({}),{addMessage:p}=se(),A=ze();k.useLayoutEffect(()=>{d({...o,...De,createdBy:h||"",matchers:Kt(r?.labels,n,i)}),x(Ut(l(r))),F({})},[m]);const D=k.useMemo(()=>{const g=Qt(b??0);return g.firstNotCovered&&d({...o,duration:g.firstNotCovered.value}),g.items},[b]),{mutate:H}=Ke("createSilences",{onMutate:g=>{a.cancelQueries({queryKey:["silences"]});const w={...g.silence,status:{state:Y.SILENCE_ACTIVE}},$=[...A,w];u({items:$}),c(!1)},onSuccess:g=>{p({variant:"success",text:`A silence object with id ${g?.silenceID} was created successfully. Please note that it may
            take up to 5 minutes for the alert to show up as silenced.`})},onError:g=>{p({variant:"error",text:ce(g)})},onSettled:()=>{a.invalidateQueries({queryKey:["silences"]})}}),de=Ue(()=>{const g=jr(o);if(F(g),Object.keys(g).length>0)return;const w={...o};w.matchers?.length>0&&(w.matchers=w.matchers.filter(he=>!he.excluded).map(({...he})=>he));const $=new Date,W=new Date;W.setHours(W.getHours()+Number.parseInt(w.duration||4));const lt={...w,status:{state:Y.SILENCE_ACTIVE},startsAt:$.toISOString(),endsAt:W.toISOString(),alertFingerprint:r.fingerprint};H({silence:lt})},200),v=({key:g,value:w})=>{w&&d({...o,[g]:w})},C=g=>{const w=o.matchers.findIndex(W=>W.name==g.name),$=o.matchers.slice();w>=0&&($[w]={...$[w],excluded:!g.excluded}),d({...o,matchers:$})};return e.jsxs(e.Fragment,{children:[e.jsx(ne,{size:t,variant:s,onClick:g=>{g.stopPropagation(),c(!m)},children:"Silence"}),m&&e.jsxs(qe,{title:"New Silence for",size:"large",open:!0,confirmButtonLabel:"Save",onCancel:()=>c(!1),onConfirm:de,children:[b&&e.jsxs(be,{className:"mb-6",variant:"info",children:["There is already a silence for this alert that expires at",e.jsx("b",{children:I.fromISO(b).toLocaleString(I.DATETIME_SHORT)})]}),e.jsx("span",{className:"text-lg font-bold",children:r?.labels?.alertname}),e.jsx(Ze,{className:"mt-2",children:e.jsx(oe,{description:r.annotations?.description})}),e.jsxs(e.Fragment,{children:[e.jsx(br,{matchers:o.matchers,onMatchersChanged:C}),e.jsxs(je,{className:"mt-6",children:[e.jsx(L,{children:e.jsx(fe,{required:!0,label:"Silenced by",value:o.createdBy,onChange:g=>v({key:"createdBy",value:g.target.value}),errortext:E.createdBy&&Oe(E.createdBy),disabled:!!h})}),e.jsx(L,{children:e.jsx(We,{className:"h-20",label:"Description",value:o.comment,onChange:g=>v({key:"comment",value:g.target.value}),errortext:E.comment&&Oe(E.comment),required:!0})}),e.jsx(L,{children:e.jsx(Se,{required:!0,label:"Duration",value:o.duration,onChange:g=>v({key:"duration",value:g}),children:D?.map(g=>e.jsx(Ce,{label:g.label,value:String(g.value)},g.value))})})]})]})]})]})},fr=(r,t)=>{if(!r)return null;const s=r.map(a=>t.find(n=>n.fingerprint===a));return s[0]?s.sort((a,n)=>new Date(n.endsAt).getTime()-new Date(a.endsAt).getTime())[0]:null},at=({alert:r})=>{if(!r)return null;const t=Me(),{getMappingSilences:s}=G(),a=s(r).sort((u,i)=>new Date(i?.endsAt).getTime()-new Date(u?.endsAt).getTime()),n=a.length>0?a[0]:null,l=fr(r?.status?.inhibitedBy,t);return e.jsxs("div",{className:"cursor-default",children:[r&&e.jsx("span",{children:r?.status?.state}),l&&e.jsx("div",{className:"text-xs mt-2",children:e.jsxs(N,{direction:"vertical",children:[e.jsx("span",{children:"Inhibited by:"}),e.jsx("span",{children:l?.annotations?.summary})]})}),n&&e.jsx("div",{className:"text-xs mt-2",children:e.jsxs(N,{direction:"vertical",children:[e.jsx("span",{children:"Silenced by:"}),e.jsx("span",{children:n?.createdBy||n.id},n.id)]})})]})},nt=({region:r,cluster:t})=>e.jsxs(e.Fragment,{children:[r,r!==t&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("span",{className:"text-theme-light",children:t})]})]}),vr=r=>{switch(r){case Y.SILENCE_ACTIVE:return"info";default:return"default"}},yr=({alert:r})=>{const t={...I.DATETIME_SHORT},{getSilencesForAlert:s}=G(),a=s(r),n=l=>I.fromISO(l).toLocaleString(t);return e.jsx(e.Fragment,{children:a.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold mb-2 mt-8",children:"Silences"}),e.jsxs(re,{columns:6,minContentColumns:[5],children:[e.jsxs(_,{children:[e.jsx(S,{children:"Status"}),e.jsx(S,{children:"Silence start"}),e.jsx(S,{children:"Silence end"}),e.jsx(S,{children:"Created by"}),e.jsx(S,{children:"Comment"}),e.jsx(S,{children:"Action"})]}),a.map(l=>e.jsxs(_,{children:[e.jsx(y,{children:e.jsx("div",{children:e.jsx(Lt,{variant:vr(l?.status?.state),children:l.status?.state})})}),e.jsx(y,{children:n(l.startsAt)}),e.jsx(y,{children:n(l.endsAt)}),e.jsx(y,{children:l.createdBy}),e.jsx(y,{className:"break-all",children:l.comment}),e.jsx(y,{children:l?.status?.state===Y.SILENCE_ACTIVE?e.jsx(Yt,{silence:l,fingerprint:r.fingerprint}):e.jsx(Jt,{silence:l,fingerprint:r.fingerprint})})]},l.id))]})]})})},kr=({alert:r})=>{const t=V(),{getAlertByFingerprint:s}=we(),{setShowDetailsFor:a}=Ne(),{setSilences:n}=G(),{addMessage:l}=se(),{error:u,data:i,isLoading:h}=ie("silences");return k.useEffect(()=>{i&&n({items:i?.silences})},[i]),u&&l({variant:"error",text:ce(u)}),e.jsxs(ge,{py:!0,px:!1,children:[h?e.jsxs(N,{gap:"2",children:[e.jsx("span",{children:"Loading"}),e.jsx(J,{variant:"primary"})]}):e.jsx(yr,{alert:r}),r.status.inhibitedBy.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold mb-2 mt-8",children:"Inhibited by"}),e.jsxs(re,{columns:2,children:[e.jsxs(_,{children:[e.jsx(S,{children:"Alert"}),e.jsx(S,{})]}),r.status.inhibitedBy.map(m=>e.jsxs(_,{children:[e.jsxs(y,{children:[e.jsx("div",{children:s(m)?.annotations?.summary}),e.jsx(oe,{description:s(m)?.annotations?.description})]}),e.jsx(y,{children:e.jsx(ne,{size:"small",onClick:()=>{a(m),t({to:"/",search:c=>({...c,showDetailsFor:m})})},icon:"exitToApp",children:"Go to details"})})]},m))]})]})]})},Nr=()=>{const r=V(),t=Pe(),{setShowDetailsFor:s}=Ne(),{getAlertByFingerprint:a}=we(),[n,l]=k.useState(void 0),u=Me(),i=()=>{s(null),r({to:"/alerts",search:m=>{const{showDetailsFor:c,...o}=m;return{...o}}})},{isLoading:h}=ie("alerts");return k.useEffect(()=>{u?.length>0&&l(a(t))},[u,t]),e.jsxs(ot,{heading:e.jsxs(N,{gap:"2",children:[e.jsx(Qe,{severity:n?.labels?.severity}),e.jsx("span",{children:n?.annotations?.summary||"Not found"})]}),opened:!!t,onClose:i,size:"large",children:[e.jsxs(dt,{children:[e.jsx(ht,{className:"pb-6 absolute"}),e.jsxs(ut,{children:[e.jsxs(mt,{children:[e.jsx(Ee,{children:"Details"}),e.jsx(Ee,{children:"Raw Data"})]}),e.jsx(Te,{children:e.jsx(ge,{px:!1,py:!0,children:n?e.jsxs(e.Fragment,{children:[e.jsxs(re,{columns:2,children:[e.jsxs(_,{children:[e.jsx(S,{children:"Status"}),e.jsx(y,{children:e.jsx(at,{alert:n})})]}),e.jsxs(_,{children:[e.jsx(S,{children:"Firing Since"}),e.jsx(y,{children:e.jsx(Ye,{startTimestamp:n?.startsAt})})]}),e.jsxs(_,{children:[e.jsx(S,{children:"Service"}),e.jsx(y,{children:n?.labels?.service})]}),e.jsxs(_,{children:[e.jsx(S,{children:"Region"}),e.jsx(y,{children:e.jsx(nt,{region:n?.labels?.region,cluster:n?.labels?.cluster})})]}),e.jsxs(_,{children:[e.jsx(S,{children:"Description"}),e.jsx(y,{children:e.jsx(oe,{description:n?.annotations?.description})})]}),e.jsxs(_,{children:[e.jsx(S,{children:"Links"}),e.jsx(y,{children:e.jsx(tt,{alert:n})})]}),e.jsxs(_,{children:[e.jsx(S,{children:"Labels"}),e.jsx(y,{children:e.jsx(rt,{alert:n,showAll:!0})})]})]}),e.jsx(kr,{alert:n})]}):h?e.jsxs(N,{gap:"2",children:[e.jsx("span",{children:"Loading"}),e.jsx(J,{variant:"primary"})]}):"Not found - the alert is probably not firing at the moment"})}),e.jsx(Te,{children:e.jsx(ge,{px:!1,py:!0,children:e.jsx(pt,{children:n&&e.jsx(xt,{data:n,expanded:!0})})})})]})]}),e.jsx(gt,{children:n&&e.jsx(st,{alert:n,variant:"primary"})})]})},wr=(r,t)=>{let s=`
    text-lg/5
  `;if(!t||t<1)return`${s} text-theme-light`;switch(r){case"critical":s+=" bg-theme-danger/50";break;case"warning":s+=" bg-theme-warning/50";break;case"info":s+=" bg-theme-info/40";break}return s},Sr=(r,t)=>r?t?r-t:r:"--",xe=({severity:r,severityCountTotal:t,severityCountSuppressed:s})=>e.jsxs(N,{direction:"vertical",alignment:"stretch",distribution:"center",className:wr(r,t),children:[e.jsx(N,{direction:"vertical",alignment:"center",distribution:"center",className:"h-full",children:Sr(t,s)}),s&&e.jsx("div",{className:"text-xs bg-black/10 mt-auto",children:e.jsxs(N,{alignment:"center",distribution:"center",children:[e.jsx(P,{icon:"notificationsOff",size:"0.75rem"}),e.jsx("span",{children:s})]})})]}),Cr=`
  grid
  grid-cols-[repeat(4,_minmax(5rem,_1fr))]

  group
  bg-theme-background-lvl-1
  hover:bg-theme-background-lvl-2
  hover:text-theme-high
  cursor-pointer
`,Er=`
  bg-theme-background-lvl-2
  group-hover:bg-theme-background-lvl-3
  font-bold
  px-3
  py-2
  whitespace-nowrap
`,Tr=({region:r,severityCounts:t})=>{const s=V(),{addActiveFilter:a,removeActiveFilter:n}=Z(),l=ae(),u=()=>{l?.region?.includes(r)?(n("region",r),s({to:"/alerts",search:i=>U({...i},`${q}region`,r)})):(a("region",r),s({to:"/alerts",search:i=>le({...i},`${q}region`,r)}))};return e.jsxs("div",{className:`region ${Cr}`,onClick:()=>u(),children:[e.jsx(N,{alignment:"center",distribution:"center",className:Er,children:r||"Counts"}),e.jsx(xe,{severity:"critical",severityCountTotal:t?.critical?.total,severityCountSuppressed:t?.critical?.suppressed}),e.jsx(xe,{severity:"warning",severityCountTotal:t?.warning?.total,severityCountSuppressed:t?.warning?.suppressed}),e.jsx(xe,{severity:"info",severityCountTotal:t?.info?.total,severityCountSuppressed:t?.info?.suppressed})]})},_r=`
  grid
  auto-rows-fr
  grid-cols-[repeat(auto-fit,_minmax(21rem,_1fr))]
  gap-3
  mb-8
`,Ar=()=>{const{isLoading:r}=ie("alerts"),t=bt(),s=jt(),a=()=>!r&&s?e.jsx("div",{className:`regions ${_r}`,children:s.map(n=>e.jsx(Tr,{region:n,severityCounts:t[n]},`${n}`))}):null;return e.jsx(e.Fragment,{children:a()})},Fr=r=>{let t="border-text-theme-default";switch(r){case"critical":t="border-theme-danger";break;case"warning":t="border-theme-warning";break;case"info":t="border-theme-info";break}return`
    border-l-2
    ${t}
    h-full
    pl-5
  `},$r=({alert:r},t)=>{const s=V(),a=k.useRef(null),n=l=>{l.target.parentNode!==a.current&&!l.target.classList.contains("interactive")&&!l.target.closest(".interactive")||(l.stopPropagation(),l.preventDefault(),s({to:"/alerts",search:u=>({...u,showDetailsFor:r?.fingerprint})}))};return e.jsxs(_,{className:`cursor-pointer ${Pe()===r?.fingerprint?"active":""}`,ref:a,onClick:l=>n(l),children:[e.jsx(y,{className:"pl-0 interactive",children:e.jsx("div",{className:Fr(r.labels?.severity),children:e.jsx(Qe,{ref:t,severity:r.labels?.severity})})}),e.jsx(y,{className:"interactive",children:e.jsx(nt,{region:r.labels?.region,cluster:r.labels?.cluster})}),e.jsx(y,{children:r.labels?.service}),e.jsxs(y,{className:"cursor-default",children:[e.jsx("div",{className:"interactive text-theme-high cursor-pointer",children:r.annotations?.summary}),e.jsxs("div",{children:[e.jsx(oe,{description:r.annotations?.description,subdued:!0}),e.jsx(tt,{alert:r,className:"mb-4 mt-1"})]}),e.jsx(rt,{alert:r})]}),e.jsx(y,{className:"interactive",children:e.jsx(Ye,{startTimestamp:r.startsAt})}),e.jsx(y,{children:e.jsx(at,{alert:r})}),e.jsx(y,{children:e.jsx(st,{alert:r,size:"small"})})]})},Lr=k.forwardRef($r),Ir=()=>{const r=Ft(),{scrollListItems:t,iterator:s}=$t(r,{loadingObject:e.jsx(_,{children:e.jsx(y,{colSpan:3,children:e.jsxs(N,{gap:"3",alignment:"center",direction:"horizontal",children:["Loading...",e.jsx(J,{})]})})}),refFunction:a=>e.jsx(_,{children:e.jsx(y,{colSpan:3,className:"border-b-0 py-0",children:e.jsx("span",{ref:a})})})});return e.jsxs(re,{columns:7,minContentColumns:[0,2,5],cellVerticalAlignment:"top",className:"alerts",children:[e.jsxs(_,{children:[e.jsx(S,{children:e.jsx(P,{icon:"monitorHeart"})}),e.jsx(S,{children:"Region"}),e.jsx(S,{children:"Service"}),e.jsx(S,{children:"Description"}),e.jsx(S,{children:"Firing Since"}),e.jsx(S,{children:"Status"}),e.jsx(S,{})]}),t?.length?s.map(a=>e.jsx(Lr,{alert:a},a.fingerprint)):e.jsx(_,{className:"no-hover",children:e.jsx(y,{colSpan:7,children:e.jsxs(N,{gap:"3",children:[e.jsx(P,{icon:"info",color:"text-theme-info"}),e.jsx("div",{children:"We couldn't find anything. It's possible that the matching alerts are not active at the moment, or the chosen filters could be overly limiting."})]})})})]})},Or=`
  bg-theme-background-lvl-1
  py-1.5
  px-4
  my-px
  text-theme-light
`,Dr=({totalCounts:r,isUpdating:t,updatedAt:s})=>e.jsxs(N,{className:`status-bar ${Or}`,alignment:"center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-theme-default pr-2",children:`${r.total} alerts`}),e.jsx("span",{children:`(${r.critical||0} critical, ${r.warning||0} warning, ${r.info||0} info)`})]}),e.jsxs(N,{alignment:"center",className:"ml-auto",children:[t&&e.jsx(J,{size:"small",className:"mr-2"}),s&&`updated ${I.fromMillis(s).toLocaleString({...I.TIME_24_WITH_SHORT_OFFSET})}`]})]}),Br=()=>{const r=V(),[t,s]=k.useState(""),[a,n]=k.useState(""),{addActiveFilter:l,loadFilterLabelValues:u,clearFilters:i,setSearchTerm:h}=Z(),m=Ve(),c=Ot(),o=ae(),d=Dt(),b=p=>{s(p),c[p]?.values||u(p)},x=p=>{n(p),t.trim()!==""&&p.trim()!==""&&(l(t,p),r({to:"/alerts",search:A=>le({...A},`${q}${t}`,p)})),setTimeout(()=>{n("")},0)},E=p=>{const A=setTimeout(()=>{h(p.target.value),r({to:"/alerts",search:D=>({...D,searchTerm:p.target.value.trim()})})},500);return()=>clearTimeout(A)};return e.jsxs(N,{alignment:"center",gap:"8",children:[e.jsxs(Bt,{children:[e.jsx(Se,{name:"filter",className:"filter-label-select w-64 mb-0",label:"Filter",value:t,onChange:p=>b(p),children:m?.map(p=>e.jsx(Ce,{value:p,label:Pt(p)},p))}),e.jsx(Mt,{value:a,name:"filterValue",onChange:p=>x(p),disabled:!c[t],loading:c[t]?.isLoading,className:"filter-value-select w-96 bg-theme-background-lvl-0",children:c[t]?.values?.filter(p=>!o[t]?.includes(p)).slice(0,100).map(p=>e.jsx(Vt,{value:p},p))})]}),F(),e.jsx(Rt,{placeholder:"search term or regular expression",className:"w-96 ml-auto",value:d||"",onSearch:p=>h(p),onClear:()=>{h(""),r({to:"/alerts",search:p=>({...p,searchTerm:""})})},onChange:p=>E(p)})]});function F(){return o&&Object.keys(o).length>0&&e.jsx(ne,{label:"Clear all",onClick:()=>{i(),r({to:"/alerts",search:p=>Object.entries(p).reduce((A,[D,H])=>(H&&!D.startsWith("f_")&&!D.startsWith("pf_")&&(A[D]=H),A),{})})},variant:"subdued"})}},Pr=()=>{const r=V(),t=ae(),s=Ht(),{removeActiveFilter:a,addActiveFilter:n,addPausedFilter:l,removePausedFilter:u}=Z(),i=(c,o)=>{l(c,o),r({to:"/alerts",search:d=>({...d,...zt("pf_",le(s,c,o))})})},h=(c,o)=>{a(c,o),u(c,o),r({to:"/alerts",search:d=>{const b=U({...d},`${q}${c}`,o);return U({...b},`${Ae}${c}`,o)}})},m=(c,o)=>{n(c,o),u(c,o),r({to:"/alerts",search:d=>U({...d},`${Ae}${c}`,o)})};return e.jsx(N,{gap:"2",wrap:!0,children:Object.entries(t).map(([c,o])=>o?.map(d=>s[c]?.includes(d)?e.jsx(Q,{className:"bg-theme-background-lvl-4 opacity-70",pillKey:c,pillValue:d,closeable:!0,onClose:()=>h(c,d),onClick:()=>m(c,d)},`${c}:${d}`):e.jsx(Q,{pillKey:c,pillValue:d,closeable:!0,onClose:()=>h(c,d),onClick:()=>i(c,d)},`${c}:${d}`)))})},Mr=`
  bg-theme-background-lvl-1
  py-2
  px-4
  my-px
`,Vr=()=>e.jsxs(N,{direction:"vertical",gap:"4",className:`filters ${Mr}`,children:[e.jsx(Br,{}),e.jsx(Pr,{})]}),Rr=r=>{let t=r,s=!1;return t.comment.value.length<3&&(s=!0,t={...t,comment:{...t.comment,error:"Please enter at least 3 characters"}}),(!t?.createdBy?.value||t?.createdBy?.value.length<1)&&(s=!0,t={...t,createdBy:{...t.createdBy,error:"Created by cannot be empty"}}),new Date(t.date.start)>=new Date(t.date.end)&&(s=!0,t={...t,date:{...t.date,error:"The start date need to be before the end date"}}),Object.keys(t.editable_labels).map(a=>{Hr(t.editable_labels[a].value)||(s=!0,t={...t,editable_labels:{...t.editable_labels,[a]:{...t.editable_labels[a],error:`Value for ${a} is not a valid regular expression`}}}),t.editable_labels[a]?.value||(s=!0,t={...t,editable_labels:{...t.editable_labels,[a]:{...t.editable_labels[a],error:`Value for ${a} is empty`}}})}),s?t:null},Hr=r=>{try{return!!new RegExp(r)}catch(t){return console.error(t),!1}},Be={fixed_labels:{},editable_labels:{},comment:{value:"",error:null},createdBy:{value:"",error:null},date:{start:null,end:null,error:null}},zr=()=>{const r=He(),{addMessage:t}=se(),s=It(),[a,n]=k.useState(null),l=Re(),u=ze(),{setSilences:i}=G(),[h,m]=k.useState(null),c=k.useMemo(()=>{const v=new Date;return`${v.getFullYear()}-${v.getMonth()+1}-${v.getDate()}`},[]),[o,d]=k.useState(Be),[b,x]=k.useState(!0),{mutate:E}=Ke("createSilences",{onMutate:v=>{l.cancelQueries({queryKey:["silences"]});const C={...v.silence,status:{state:Y.SILENCE_ACTIVE}},g=[...u,C];i({items:g})},onSuccess:v=>{x(!0),t({variant:"success",text:`A silence object with id ${v?.silenceID} was created successfully. Please note that it may take up
          to 5 minutes for the alert to show up as silenced.`})},onError:v=>{n(ce(v))},onSettled:()=>{l.invalidateQueries({queryKey:["silences"]})}}),F=Ue(()=>{n(null);const v=Rr(o);if(v){d(v),n("Please fix the errors in the form");return}const C={startsAt:o.date.start,endsAt:o.date.end,comment:o.comment.value,createdBy:o.createdBy.value,matchers:[]};for(const[g,w]of Object.entries(o.editable_labels)){const $={name:g,value:w.value,isRegex:!0};C.matchers.push($)}for(const[g,w]of Object.entries(o.fixed_labels)){const $={name:g,value:w,isRegex:!0};C.matchers.push($)}E({silence:C})},200),p=v=>{const C=s.find(w=>w.id===v),g={...Be,fixed_labels:C?.fixed_labels||{},createdBy:{value:r,error:null},editable_labels:C?.editable_labels?.reduce((w,$)=>({...w,[$]:{value:"",error:null}}),{})};d(g),m(C)},A=({key:v,value:C})=>{d({...o,[v]:{value:C,error:null}})},D=v=>{const C=v.target.id;d(me(g=>{g.editable_labels[C].value=v.target.value,g.editable_labels[C].error=null}))},H=(v,C)=>{d(me(g=>{g.date.start=C,g.date.error=null}))},de=(v,C)=>{d(me(g=>{g.date.end=C,g.date.error=null}))};return e.jsx(e.Fragment,{children:qr(s,x,b,h,F,a,p,o,A,r,c,H,de,D)})};function qr(r,t,s,a,n,l,u,i,h,m,c,o,d,b){return r&&r?.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ne,{onClick:x=>{x.stopPropagation(),t(!1)},children:"Schedule Silence"}),!s&&e.jsxs(qe,{title:"Schedule new silence",size:"large",open:!0,confirmButtonLabel:!a||a?.invalid?void 0:"Save",onConfirm:!a||a?.invalid?void 0:n,onCancel:()=>t(!0),children:[l&&e.jsx(be,{text:l,variant:"danger"}),e.jsxs(je,{className:"mt-6",children:[a&&a?.invalid&&e.jsx(L,{children:e.jsx(be,{text:`This silence template is invalid. ${a.invalid}`,variant:"error"})}),e.jsx(L,{children:e.jsx(Se,{required:!0,label:"Silence Template",value:a?.id||"Select",onValueChange:x=>{u(x)},children:r?.map(x=>e.jsx(Ce,{id:x.id,label:x.title,value:x.id},x.id))})}),a&&!a?.invalid&&e.jsx(L,{children:e.jsx(Ze,{children:a?.description})})]}),a&&!a?.invalid&&e.jsxs(je,{children:[e.jsxs(ue,{children:[e.jsx(L,{children:e.jsx(fe,{required:!0,label:"Silenced by",value:i?.createdBy?.value,errortext:i?.createdBy?.error,onChange:x=>h({key:"createdBy",value:x.target.value}),disabled:!!m})}),e.jsx(L,{children:e.jsxs("div",{className:"grid gap-2 grid-cols-2",children:[e.jsx(_e,{value:i?.date?.start||c,dateFormat:"Y-m-d H:i:S",label:"Select a start date",enableTime:!0,time_24hr:!0,required:!0,errortext:i?.date?.error,onChange:o,enableSeconds:!0}),e.jsx(_e,{value:i?.date?.end||c,dateFormat:"Y-m-d H:i:S",label:"Select a end date",enableTime:!0,time_24hr:!0,required:!0,errortext:i?.date?.error,onChange:d,enableSeconds:!0})]})}),e.jsx(L,{children:e.jsx(We,{label:"Comment",value:i.comment.value,errortext:i.comment.error,onChange:x=>h({key:"comment",value:x.target.value}),required:!0})})]}),i?.editable_labels&&Object.keys(i?.editable_labels).length>0&&e.jsxs(ue,{children:[e.jsx(L,{children:e.jsx("p",{children:"Editable Labels are labels that are editable. You can use regular expressions."})}),e.jsx(L,{children:e.jsx("div",{className:"grid gap-2 grid-cols-2",children:Object.keys(i.editable_labels).map((x,E)=>e.jsx(fe,{required:!0,label:x,id:x,value:i?.editable_labels[x].value,errortext:i?.editable_labels[x]?.error,onChange:b},E))})})]}),Object.keys(i?.fixed_labels).length>0&&e.jsxs(ue,{children:[e.jsx(L,{children:e.jsx("p",{children:"Fixed Labels are labels that are not editable."})}),e.jsx(L,{children:e.jsx(N,{gap:"2",alignment:"start",wrap:!0,className:"mt-2",children:Object.keys(i.fixed_labels).map((x,E)=>e.jsx(Q,{pillKey:x,pillKeyLabel:x,pillValue:i?.fixed_labels[x],pillValueLabel:i?.fixed_labels[x]},E))})})]})]})]})," "]})}const Zr=()=>{const{setActivePredefinedFilter:r}=Z(),t=Et(),s=Tt(),[a,n]=k.useState(s),l=i=>{n(i),r(i)};return e.jsxs(N,{children:[u(),e.jsx("div",{className:"ml-auto",children:e.jsx(zr,{})})]});function u(){return t&&a&&e.jsx(_t,{activeItem:a,onActiveItemChange:l,children:t?.map(i=>e.jsx(At,{value:i.name,label:i.displayName},i.name))})}},Wr=()=>{const r=ft(),t=vt(),{setAlertsData:s}=we(),{addMessage:a,resetMessages:n}=se(),{data:l,isLoading:u,error:i}=ie("alerts");return i&&(n(),i instanceof Zt&&a({variant:"warning",text:e.jsx(Wt,{})}),a({variant:"error",text:ce(i)})),k.useEffect(()=>{l&&s({items:l.alerts,counts:l.counts})},[l]),e.jsx(e.Fragment,{children:u?e.jsxs(N,{gap:"2",children:[e.jsx("span",{children:"Loading"}),e.jsx(J,{variant:"primary"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Zr,{}),e.jsx(Vr,{}),e.jsx(Dr,{totalCounts:r,isUpdating:u,updatedAt:t}),e.jsx(Ir,{})]})})};function Xr(){const{appStateFromUrl:{activeFilters:r,pausedFilters:t,activePredefinedFilter:s,searchTerm:a,showDetailsFor:n}}=it.useRouteContext(),{setShowDetailsFor:l}=Ne(),{setActiveFilters:u,setPausedFilters:i,setActivePredefinedFilter:h,setSearchTerm:m}=Z();return k.useLayoutEffect(()=>{u(r),i(t),h(s),m(a),l(n)},[r,t,s,a,n]),e.jsxs(e.Fragment,{children:[e.jsx(ct,{children:e.jsx(Nr,{})}),e.jsx(Ar,{}),e.jsx(Wr,{})]})}export{Xr as component};
