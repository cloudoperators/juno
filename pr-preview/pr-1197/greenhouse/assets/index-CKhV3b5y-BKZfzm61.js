import{j as e,K as c,T as o,E as j,r as p,G as v,A as h,B as b,C as F,D as x,F as C,X as N}from"./App-DhRrck4P-BFS5leDz.js";import{w as i}from"./_extensionId._-DT7BCZT5.js";const w=({filtersPromise:n,onChange:a})=>{const[l,d]=i.useState(""),[m,t]=i.useState(""),r=i.use(n),f=r.find(s=>s.filterName===l)?.values?.filter(s=>s),g=i.useCallback(s=>{t(s),!h(l)&&!h(s)&&a({name:l,value:s}),setTimeout(()=>{t("")},0)},[l,t,a]);return e.jsx(c,{alignment:"center",gap:"8",children:e.jsxs(o,{children:[e.jsx(b,{className:"filter-label-select w-64 mb-0",name:"filter","data-testid":"select-filterValue",label:"Filter",value:l,onChange:s=>{d(String(s))},children:r?.map(({displayName:s,filterName:u})=>e.jsx(F,{value:u,label:s,"data-testid":u},u))}),e.jsx(x,{className:"filter-value-select w-64 bg-theme-background-lvl-0",name:"filterValue","data-testid":"combobox-filterValue",value:m,disabled:!l,onChange:g,children:f?.map(s=>e.jsx(C,{value:s,label:s,"data-testid":s},s))})]})})},V=({selectedFilters:n,onDelete:a})=>e.jsx(c,{gap:"2",wrap:!0,children:n?.map(l=>e.jsx(N,{closeable:!0,pillKey:l.name,pillValue:l.value,onClose:()=>a(l)},`${l.name}:${l.value}`))}),k=()=>e.jsx(c,{alignment:"center",gap:"8",children:e.jsxs(o,{children:[e.jsx(b,{loading:!0,className:"filter-label-select w-64 mb-0",name:"filter","data-testid":"select-filterValue",label:"Filter"}),e.jsx(x,{disabled:!0,className:"filter-value-select w-64 bg-theme-background-lvl-0",name:"filterValue","data-testid":"combobox-filterValue"})]})}),q=({filtersPromise:n,filterSettings:a,onFilterChange:l,searchInputPlaceholder:d})=>{const m=i.useCallback(t=>{l({...a,selectedFilters:a.selectedFilters?.filter(r=>!(r.name===t.name&&r.value===t.value))})},[a,l]);return e.jsxs(c,{direction:"vertical",gap:"4",className:"bg-theme-background-lvl-1 py-2 px-4 ",children:[e.jsxs(c,{alignment:"center",gap:"4",children:[e.jsx(o,{children:e.jsx(j,{displayErrorMessage:!0,children:e.jsx(i.Suspense,{fallback:e.jsx(k,{}),children:e.jsx(w,{filtersPromise:n,onChange:t=>{a.selectedFilters?.some(r=>r.name===t.name&&r.value===t.value)||l({...a,selectedFilters:[...a.selectedFilters||[],t]})}})})})}),e.jsx(p,{label:"Clear all",className:"ml-4",onClick:()=>l({...a,selectedFilters:[]}),variant:"subdued"}),e.jsx(v,{placeholder:d||"search term for",className:"w-96 ml-auto","data-testid":"searchbar",value:a.searchTerm,onSearch:t=>{l({...a,searchTerm:t})},onClear:()=>l({...a,searchTerm:""})})]}),a.selectedFilters&&a.selectedFilters.length>0&&e.jsx(V,{selectedFilters:a.selectedFilters,onDelete:m})]})};export{q as g};
