import{A as b,j as e,K as n,T as x,B as j,C as F,D as p,F as v,X as V,E as k,r as y,G as E}from"./App-9CBx-09A.js";import{a as r}from"./index-D_aEHqRi.js";const N=({filtersPromise:d,onChange:l})=>{const[a,i]=r.useState(""),[u,t]=r.useState(""),c=r.use(d),m=c.find(s=>s.filterName===a)?.values?.filter(s=>s),h=r.useCallback(s=>{t(s),!b(a)&&!b(s)&&l({name:a,value:s}),setTimeout(()=>{t("")},0)},[a,t,l]);return e.jsx(n,{alignment:"center",gap:"8",children:e.jsxs(x,{children:[e.jsx(j,{className:"filter-label-select w-64 mb-0",name:"filter","data-testid":"select-filterValue",label:"Filter",value:a,onChange:s=>{i(String(s))},children:c?.map(({displayName:s,filterName:o})=>e.jsx(F,{value:o,label:s,"data-testid":o},o))}),e.jsx(p,{className:"filter-value-select w-64 bg-theme-background-lvl-0",name:"filterValue","data-testid":"combobox-filterValue",value:u,disabled:!a,onChange:h,children:m?.map(s=>e.jsx(v,{value:s,label:s,"data-testid":s},s))})]})})},w=({selectedFilters:d,onDelete:l})=>e.jsx(n,{gap:"2",wrap:!0,children:d?.map(a=>e.jsx(V,{closeable:!0,pillKey:a.name,pillValue:a.value,onClose:()=>l(a)},`${a.name}:${a.value}`))}),B=()=>e.jsx(n,{alignment:"center",gap:"8",children:e.jsxs(x,{children:[e.jsx(j,{loading:!0,className:"filter-label-select w-64 mb-0",name:"filter","data-testid":"select-filterValue",label:"Filter"}),e.jsx(p,{disabled:!0,className:"filter-value-select w-64 bg-theme-background-lvl-0",name:"filterValue","data-testid":"combobox-filterValue"})]})}),g=({filtersPromise:d,filterSettings:l,onFilterChange:a,searchInputPlaceholder:i})=>{const u=r.useCallback(t=>{a({...l,selectedFilters:l.selectedFilters?.filter(c=>!(c.name===t.name&&c.value===t.value))})},[l,a]);return e.jsxs(n,{direction:"vertical",gap:"4",className:"bg-theme-background-lvl-1 py-2 px-4 ",children:[e.jsxs(n,{alignment:"center",gap:"4",children:[e.jsx(x,{children:e.jsx(k,{displayErrorMessage:!0,children:e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(N,{filtersPromise:d,onChange:t=>{l.selectedFilters?.some(m=>m.name===t.name&&m.value===t.value)||a({...l,selectedFilters:[...l.selectedFilters||[],t]})}})})})}),e.jsx(y,{label:"Clear all",className:"ml-4",onClick:()=>a({...l,selectedFilters:[]}),variant:"subdued"}),e.jsx(E,{placeholder:i||"search term for",className:"w-96 ml-auto","data-testid":"searchbar",value:l.searchTerm,onSearch:t=>{a({...l,searchTerm:t})},onClear:()=>a({...l,searchTerm:""})})]}),l.selectedFilters&&l.selectedFilters.length>0&&e.jsx(w,{selectedFilters:l.selectedFilters,onDelete:u})]})};export{g as F};
