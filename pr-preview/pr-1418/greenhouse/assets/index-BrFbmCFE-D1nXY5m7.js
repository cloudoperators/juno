import{j as e,V as c,G as u,E as v,Y as p,I as F,F as g,R as f,K as C,N as b,H as N,f as V}from"./App-I4fcO6R_-BsWkePyB.js";import{G as n}from"./_extensionId._-DIeNzT7m.js";const k=({filtersPromise:i,onChange:l})=>{const[a,d]=n.useState(""),[o,t]=n.useState(""),r=n.use(i),x=r.find(s=>s.filterName===a)?.values?.filter(s=>s),j=n.useCallback(s=>{t(s),!g(a)&&!g(s)&&l({name:a,value:s}),setTimeout(()=>{t("")},0)},[a,t,l]);return e.jsx(c,{alignment:"center",gap:"8",children:e.jsxs(u,{children:[e.jsx(f,{className:"filter-label-select w-64 mb-0",name:"filter","data-testid":"select-filterValue",label:"Filter",value:a,onChange:s=>{d(String(s))},children:r?.map(({displayName:s,filterName:m})=>e.jsx(C,{value:m,label:s,"data-testid":m},m))}),e.jsx(b,{className:"filter-value-select w-64 bg-theme-background-lvl-0",name:"filterValue","data-testid":"combobox-filterValue",value:o,disabled:!a,onChange:j,children:x?.map(s=>e.jsx(N,{value:s,label:s,"data-testid":s},s))})]})})},w=({selectedFilters:i,onDelete:l})=>e.jsx(c,{gap:"2",wrap:!0,children:i?.map(a=>e.jsx(V,{closeable:!0,pillKey:a.name,pillValue:a.value,onClose:()=>l(a)},`${a.name}:${a.value}`))}),h=({loading:i,error:l})=>e.jsx(c,{alignment:"center",gap:"8",children:e.jsxs(u,{children:[e.jsx(f,{loading:i,className:"filter-label-select w-64 mb-0",name:"filter","data-testid":"select-filterValue",label:"Filter",errortext:l?l.message||"Error loading filters":void 0}),e.jsx(b,{disabled:!0,className:"filter-value-select w-64 bg-theme-background-lvl-0",name:"filterValue","data-testid":"combobox-filterValue"})]})}),y=({filtersPromise:i,filterSettings:l,onFilterChange:a,searchInputPlaceholder:d})=>{const o=n.useCallback(t=>{a({...l,selectedFilters:l.selectedFilters?.filter(r=>!(r.name===t.name&&r.value===t.value))})},[l,a]);return e.jsxs(c,{direction:"vertical",gap:"4",className:"bg-theme-background-lvl-1 py-2 px-4 ",children:[e.jsxs(c,{alignment:"start",gap:"4",children:[e.jsx(u,{children:e.jsx(v,{displayErrorMessage:!0,fallbackRender:t=>e.jsx(h,{...t}),children:e.jsx(n.Suspense,{fallback:e.jsx(h,{loading:!0}),children:e.jsx(k,{filtersPromise:i,onChange:t=>{l.selectedFilters?.some(r=>r.name===t.name&&r.value===t.value)||a({...l,selectedFilters:[...l.selectedFilters||[],t]})}})})})}),e.jsx(p,{label:"Clear all",className:"ml-4",onClick:()=>a({...l,selectedFilters:[]}),variant:"subdued"}),e.jsx(F,{placeholder:d||"search term for",className:"w-96 ml-auto","data-testid":"searchbar",value:l.searchTerm,onSearch:t=>{a({...l,searchTerm:t})},onClear:()=>a({...l,searchTerm:""})})]}),l.selectedFilters&&l.selectedFilters.length>0&&e.jsx(w,{selectedFilters:l.selectedFilters,onDelete:o})]})};export{y as K};
