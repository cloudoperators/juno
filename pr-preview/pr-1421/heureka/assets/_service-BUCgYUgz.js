import{z as h,j as e,P as S,o as p,n as v,c as g,V as C,f as x,a as P,l as y,J as $,L as b,y as I,O as V,E as L,m as D}from"./App-DSoREZdQ.js";import{r as i}from"./index-CcXZx4YX.js";import{I as E,u as R}from"./IssueCountsPerSeverityLevel-CFi-XCtT.js";import{S as K}from"./index-DprYNqZc.js";import{S as N}from"./SectionContentHeading-DzuN5H8_.js";import"./CursorPagination-Bdrq8zWk.js";const O=({servicePromise:t})=>{const{data:a}=i.use(t),s=h(a).services[0];return e.jsxs(e.Fragment,{children:[e.jsxs(N,{children:["Service ",s.name]}),e.jsxs(S,{columns:2,gridColumnTemplate:"20% auto",className:"mb-6",children:[e.jsxs(p,{children:[e.jsx(v,{children:"Details"}),e.jsx(g,{children:e.jsxs(C,{gap:"1",direction:"horizontal",wrap:!0,children:[e.jsx(x,{pillKey:"service",pillKeyLabel:"service",pillValue:s.name,pillValueLabel:s.name}),s.serviceDetails?.supportGroups?.map(r=>e.jsx(x,{pillKey:"support_group",pillKeyLabel:"support_group",pillValue:r,pillValueLabel:r},r))]})})]}),e.jsxs(p,{children:[e.jsx(v,{children:"Vulnerabilities Counts"}),e.jsx(g,{children:e.jsx(E,{counts:s.issuesCount})})]})]})]})},w=()=>{const t=P(),{queryClient:a,apiClient:s}=R({from:"/services/$service"}),{servicePromise:r}=y({from:"/services/$service"}),{service:o}=$({from:"/services/$service"}),[l,d]=i.useState(void 0),[m,j]=i.useState(void 0),u=b(),f=u({to:"/services/$service/images/$image"}),n=u({to:"/services/$service/images/$image/versions/$version"});return i.useEffect(()=>{if(n)return;const c=I({queryClient:a,apiClient:s,filter:{service:[o]},after:l});j(c)},[l,o,a,s,n]),f||n?e.jsx(V,{}):e.jsxs(e.Fragment,{children:[e.jsx(L,{displayErrorMessage:!0,children:e.jsx(i.Suspense,{fallback:e.jsx(D,{className:"mt-4"}),children:e.jsx(O,{servicePromise:r})})}),m&&e.jsx(K,{imagesPromise:m,onImageItemClick:c=>{t({to:"/services/$service/images/$image",params:{service:o,image:c.repository}})},goToPage:d})]})},q=w;export{q as component};
