import{a as h,l as y,J as C,L as $,j as e,y as b,O as L,E as P,m as E,z as V,P as K,o as u,n as v,c as j,V as H,f as x}from"./App-D9HKdvlg-BRh-Fi_d.js";import{G as r}from"./_extensionId._-CytiG_xx.js";import{C as S,E as G}from"./IssueCountsPerSeverityLevel-BBfw2S8R-BJs_Yk0h.js";import{P as T}from"./index-DB0KjxLE-BAdJfSZp.js";import{n as _}from"./SectionContentHeading-Cn23HaEO-BpQhWimp.js";import"./index-qkF2fjjl.js";import"./Shell-Bziu4l_E.js";import"./index-DRskXj0V.js";import"./CursorPagination-Bwo_yUxs-CniofpaK.js";const k=({servicePromise:l})=>{const{data:a}=r.use(l),s=V(a).services[0];return e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:["Service ",s.name]}),e.jsxs(K,{columns:2,gridColumnTemplate:"20% auto",className:"mb-6",children:[e.jsxs(u,{children:[e.jsx(v,{children:"Details"}),e.jsx(j,{children:e.jsxs(H,{gap:"1",direction:"horizontal",wrap:!0,children:[e.jsx(x,{pillKey:"service",pillKeyLabel:"service",pillValue:s.name,pillValueLabel:s.name}),s.serviceDetails?.supportGroups?.map(i=>e.jsx(x,{pillKey:"support_group",pillKeyLabel:"support_group",pillValue:i,pillValueLabel:i},i))]})})]}),e.jsxs(u,{children:[e.jsx(v,{children:"Vulnerabilities Counts"}),e.jsx(j,{children:e.jsx(G,{counts:s.issuesCount})})]})]})]})},q=()=>{const l=h(),{queryClient:a,apiClient:s}=S({from:"/services/$service"}),{servicePromise:i}=y({from:"/services/$service"}),{service:o}=C({from:"/services/$service"}),[m,d]=r.useState(void 0),[n,g]=r.useState(void 0),p=$(),f=p({to:"/services/$service/images/$image"}),t=p({to:"/services/$service/images/$image/versions/$version"});return r.useEffect(()=>{if(t)return;const c=b({queryClient:a,apiClient:s,filter:{service:[o]},after:m});g(c)},[m,o,a,s,t]),f||t?e.jsx(L,{}):e.jsxs(e.Fragment,{children:[e.jsx(P,{displayErrorMessage:!0,children:e.jsx(r.Suspense,{fallback:e.jsx(E,{className:"mt-4"}),children:e.jsx(k,{servicePromise:i})})}),n&&e.jsx(T,{imagesPromise:n,onImageItemClick:c=>{l({to:"/services/$service/images/$image",params:{service:o,image:c.repository}})},goToPage:d})]})},M=q;export{M as component};
