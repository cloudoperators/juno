import{a as h,l as y,J as C,L as $,j as e,y as b,O as L,E as P,m as E,z as V,P as K,o as u,n as v,c as j,V as H,f as x}from"./App-BQk8RP7q-CnbQkqTu.js";import{G as i}from"./_extensionId._-C6qpIImd.js";import{C as S,E as G}from"./IssueCountsPerSeverityLevel-BfkLaxaZ-C4QMKi9f.js";import{P as J}from"./index-CMw9rrl2-D_n_t8EC.js";import{n as N}from"./SectionContentHeading-DkaJxedS-kEX7qM4H.js";import"./index-Dix4Az1T.js";import"./Shell-CWncoRB9.js";import"./index-CK2QkhwD.js";import"./CursorPagination-uK4EcnKd-Kk617Nsi.js";const T=({servicePromise:l})=>{const{data:a}=i.use(l),s=V(a).services[0];return e.jsxs(e.Fragment,{children:[e.jsxs(N,{children:["Service ",s.name]}),e.jsxs(K,{columns:2,gridColumnTemplate:"20% auto",className:"mb-6",children:[e.jsxs(u,{children:[e.jsx(v,{children:"Details"}),e.jsx(j,{children:e.jsxs(H,{gap:"1",direction:"horizontal",wrap:!0,children:[e.jsx(x,{pillKey:"service",pillKeyLabel:"service",pillValue:s.name,pillValueLabel:s.name}),s.serviceDetails?.supportGroups?.map(r=>e.jsx(x,{pillKey:"support_group",pillKeyLabel:"support_group",pillValue:r,pillValueLabel:r},r))]})})]}),e.jsxs(u,{children:[e.jsx(v,{children:"Vulnerabilities Counts"}),e.jsx(j,{children:e.jsx(G,{counts:s.issuesCount})})]})]})]})},_=()=>{const l=h(),{queryClient:a,apiClient:s}=S({from:"/services/$service"}),{servicePromise:r}=y({from:"/services/$service"}),{service:o}=C({from:"/services/$service"}),[m,d]=i.useState(void 0),[n,g]=i.useState(void 0),p=$(),f=p({to:"/services/$service/images/$image"}),t=p({to:"/services/$service/images/$image/versions/$version"});return i.useEffect(()=>{if(t)return;const c=b({queryClient:a,apiClient:s,filter:{service:[o]},after:m});g(c)},[m,o,a,s,t]),f||t?e.jsx(L,{}):e.jsxs(e.Fragment,{children:[e.jsx(P,{displayErrorMessage:!0,children:e.jsx(i.Suspense,{fallback:e.jsx(E,{className:"mt-4"}),children:e.jsx(T,{servicePromise:r})})}),n&&e.jsx(J,{imagesPromise:n,onImageItemClick:c=>{l({to:"/services/$service/images/$image",params:{service:o,image:c.repository}})},goToPage:d})]})},X=_;export{X as component};
