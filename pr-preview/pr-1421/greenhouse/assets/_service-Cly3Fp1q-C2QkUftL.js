import{a as h,l as y,J as $,L as C,j as e,y as b,O as P,E,m as V,z as L,P as G,o as u,n as v,c as j,V as K,f as d}from"./App-BW_MrYFG-a2Mle5AC.js";import{G as r}from"./_extensionId._-DPGachgW.js";import{C as S,E as z}from"./IssueCountsPerSeverityLevel-DP0ME6BC-DmX74uNM.js";import{P as F}from"./index-C7m7Bdhr-Db5iZC1g.js";import{n as T}from"./SectionContentHeading-CwN0SFr0-BX_D8ey-.js";import"./index-DbLSj9-S.js";import"./Shell-BdgWVXzG.js";import"./index-xDw3V3KT.js";import"./CursorPagination-Cm__Ela7-BCAa4Umz.js";const _=({servicePromise:l})=>{const{data:a}=r.use(l),s=L(a).services[0];return e.jsxs(e.Fragment,{children:[e.jsxs(T,{children:["Service ",s.name]}),e.jsxs(G,{columns:2,gridColumnTemplate:"20% auto",className:"mb-6",children:[e.jsxs(u,{children:[e.jsx(v,{children:"Details"}),e.jsx(j,{children:e.jsxs(K,{gap:"1",direction:"horizontal",wrap:!0,children:[e.jsx(d,{pillKey:"service",pillKeyLabel:"service",pillValue:s.name,pillValueLabel:s.name}),s.serviceDetails?.supportGroups?.map(i=>e.jsx(d,{pillKey:"support_group",pillKeyLabel:"support_group",pillValue:i,pillValueLabel:i},i))]})})]}),e.jsxs(u,{children:[e.jsx(v,{children:"Vulnerabilities Counts"}),e.jsx(j,{children:e.jsx(z,{counts:s.issuesCount})})]})]})]})},k=()=>{const l=h(),{queryClient:a,apiClient:s}=S({from:"/services/$service"}),{servicePromise:i}=y({from:"/services/$service"}),{service:o}=$({from:"/services/$service"}),[m,x]=r.useState(void 0),[n,g]=r.useState(void 0),p=C(),f=p({to:"/services/$service/images/$image"}),c=p({to:"/services/$service/images/$image/versions/$version"});return r.useEffect(()=>{if(c)return;const t=b({queryClient:a,apiClient:s,filter:{service:[o]},after:m});g(t)},[m,o,a,s,c]),f||c?e.jsx(P,{}):e.jsxs(e.Fragment,{children:[e.jsx(E,{displayErrorMessage:!0,children:e.jsx(r.Suspense,{fallback:e.jsx(V,{className:"mt-4"}),children:e.jsx(_,{servicePromise:i})})}),n&&e.jsx(F,{imagesPromise:n,onImageItemClick:t=>{l({to:"/services/$service/images/$image",params:{service:o,image:t.repository}})},goToPage:x})]})},J=k;export{J as component};
