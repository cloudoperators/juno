import{j}from"./jsx-runtime-D_zvdyIk.js";import{r as d,e as z}from"./index-DI7CEG0L.js";import{u as Et,f as It,a as jt,d as wt,h as Tt,o as Mt,s as $t,g as Rt,k as _t}from"./floating-ui.react-D61D_8ca.js";import{L as Pt}from"./Label.component-B6h6U6xd.js";import{F as Oe}from"./FormHint.component-F7CCEkle.js";import{I as ce}from"./Icon.component-BavwJ0_M.js";import{S as Fe}from"./Spinner.component-HUeMJffL.js";import{u as Ft}from"./PortalProvider.component--bS0Im1B.js";import{r as ae}from"./index-DnsdnBHL.js";import{a2 as Qe,b as $,a9 as Ve,aa as Vt,ab as At,E as kt,c as D,u as pe,d as Xe,k as zt,f as Ae,P as Bt,e as Dt,K as be,V as Lt,S as L,y as Se,n as ue,a4 as Nt,L as ve,g as qt,F as Wt,q as Ie,B as Ht,N as je,U as Ut,$ as Ye,l as Ze,_ as we,i as Kt,j as me,a as Gt,w as Jt,m as Qt,p as Xt,R as Yt,T as Zt,r as en,s as tn,v as nn,z as on,A as sn,C as an,D as ke,G as ln,H as rn,I as un,Q as dn,J as cn,M as pn,t as xe,O as ze,X as Q,W as fn,a3 as mn,ac as hn}from"./portal-BOpe4IRm.js";import{l as Be,f as bn,a as vn,T as gn,u as xn,j as yn}from"./frozen-CpDHlynW.js";import{F as Sn}from"./use-tree-walker-BTnp_bYR.js";function de(t,s,e){let o=e.initialDeps??[],n;function i(){var a,l,c,u;let r;e.key&&((a=e.debug)!=null&&a.call(e))&&(r=Date.now());const v=t();if(!(v.length!==o.length||v.some((f,O)=>o[O]!==f)))return n;o=v;let m;if(e.key&&((l=e.debug)!=null&&l.call(e))&&(m=Date.now()),n=s(...v),e.key&&((c=e.debug)!=null&&c.call(e))){const f=Math.round((Date.now()-r)*100)/100,O=Math.round((Date.now()-m)*100)/100,C=O/16,V=(R,w)=>{for(R=String(R);R.length<w;)R=" "+R;return R};console.info(`%c⏱ ${V(O,5)} /${V(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*C,120))}deg 100% 31%);`,e==null?void 0:e.key)}return(u=e==null?void 0:e.onChange)==null||u.call(e,n),n}return i.updateDeps=a=>{o=a},i}function Ce(t,s){if(t===void 0)throw new Error("Unexpected undefined");return t}const On=(t,s)=>Math.abs(t-s)<=1,Cn=(t,s,e)=>{let o;return function(...n){t.clearTimeout(o),o=t.setTimeout(()=>s.apply(this,n),e)}},De=t=>{const{offsetWidth:s,offsetHeight:e}=t;return{width:s,height:e}},En=t=>t,In=t=>{const s=Math.max(t.startIndex-t.overscan,0),e=Math.min(t.endIndex+t.overscan,t.count-1),o=[];for(let n=s;n<=e;n++)o.push(n);return o},jn=(t,s)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;const n=a=>{const{width:l,height:c}=a;s({width:Math.round(l),height:Math.round(c)})};if(n(De(e)),!o.ResizeObserver)return()=>{};const i=new o.ResizeObserver(a=>{const l=()=>{const c=a[0];if(c!=null&&c.borderBoxSize){const u=c.borderBoxSize[0];if(u){n({width:u.inlineSize,height:u.blockSize});return}}n(De(e))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(e,{box:"border-box"}),()=>{i.unobserve(e)}},Le={passive:!0},Ne=typeof window>"u"?!0:"onscrollend"in window,wn=(t,s)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;let n=0;const i=t.options.useScrollendEvent&&Ne?()=>{}:Cn(o,()=>{s(n,!1)},t.options.isScrollingResetDelay),a=r=>()=>{const{horizontal:v,isRtl:b}=t.options;n=v?e.scrollLeft*(b&&-1||1):e.scrollTop,i(),s(n,r)},l=a(!0),c=a(!1);c(),e.addEventListener("scroll",l,Le);const u=t.options.useScrollendEvent&&Ne;return u&&e.addEventListener("scrollend",c,Le),()=>{e.removeEventListener("scroll",l),u&&e.removeEventListener("scrollend",c)}},Tn=(t,s,e)=>{if(s!=null&&s.borderBoxSize){const o=s.borderBoxSize[0];if(o)return Math.round(o[e.options.horizontal?"inlineSize":"blockSize"])}return t[e.options.horizontal?"offsetWidth":"offsetHeight"]},Mn=(t,{adjustments:s=0,behavior:e},o)=>{var n,i;const a=t+s;(i=(n=o.scrollElement)==null?void 0:n.scrollTo)==null||i.call(n,{[o.options.horizontal?"left":"top"]:a,behavior:e})};class $n{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const o=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(n=>{n.forEach(i=>{const a=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var n;(n=o())==null||n.disconnect(),e=null},observe:n=>{var i;return(i=o())==null?void 0:i.observe(n,{box:"border-box"})},unobserve:n=>{var i;return(i=o())==null?void 0:i.unobserve(n)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([o,n])=>{typeof n>"u"&&delete e[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:En,rangeExtractor:In,onChange:()=>{},measureElement:Tn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var o,n;(n=(o=this.options).onChange)==null||n.call(o,this,e)},this.maybeNotify=de(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const o=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==o){if(this.cleanup(),!o){this.maybeNotify();return}this.scrollElement=o,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(n=>{this.observer.observe(n)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(n,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,o)=>{const n=new Map,i=new Map;for(let a=o-1;a>=0;a--){const l=e[a];if(n.has(l.lane))continue;const c=i.get(l.lane);if(c==null||l.end>c.end?i.set(l.lane,l):l.end<c.end&&n.set(l.lane,!0),n.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((a,l)=>a.end===l.end?a.index-l.index:a.end-l.end)[0]:void 0},this.getMeasurementOptions=de(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,o,n,i,a)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:o,scrollMargin:n,getItemKey:i,enabled:a}),{key:!1}),this.getMeasurements=de(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:o,scrollMargin:n,getItemKey:i,enabled:a},l)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(r=>{this.itemSizeCache.set(r.key,r.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,c);for(let r=c;r<e;r++){const v=i(r),b=this.options.lanes===1?u[r-1]:this.getFurthestMeasurement(u,r),m=b?b.end+this.options.gap:o+n,f=l.get(v),O=typeof f=="number"?f:this.options.estimateSize(r),C=m+O,V=b?b.lane:r%this.options.lanes;u[r]={index:r,start:m,size:O,end:C,key:v,lane:V}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=de(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,o,n,i)=>this.range=e.length>0&&o>0?Rn({measurements:e,outerSize:o,scrollOffset:n,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=de(()=>{let e=null,o=null;const n=this.calculateRange();return n&&(e=n.startIndex,o=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,o]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,o]},(e,o,n,i,a)=>i===null||a===null?[]:e({startIndex:i,endIndex:a,overscan:o,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const o=this.options.indexAttribute,n=e.getAttribute(o);return n?parseInt(n,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(e,o)=>{const n=this.indexFromElement(e),i=this.measurementsCache[n];if(!i)return;const a=i.key,l=this.elementsCache.get(a);l!==e&&(l&&this.observer.unobserve(l),this.observer.observe(e),this.elementsCache.set(a,e)),e.isConnected&&this.resizeItem(n,this.options.measureElement(e,o,this))},this.resizeItem=(e,o)=>{const n=this.measurementsCache[e];if(!n)return;const i=this.itemSizeCache.get(n.key)??n.size,a=o-i;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,a,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,o)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((o,n)=>{o.isConnected||(this.observer.unobserve(o),this.elementsCache.delete(n))});return}this._measureElement(e,void 0)},this.getVirtualItems=de(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,o)=>{const n=[];for(let i=0,a=e.length;i<a;i++){const l=e[i],c=o[l];n.push(c)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const o=this.getMeasurements();if(o.length!==0)return Ce(o[et(0,o.length-1,n=>Ce(o[n]).start,e)])},this.getOffsetForAlignment=(e,o,n=0)=>{const i=this.getSize(),a=this.getScrollOffset();o==="auto"&&(o=e>=a+i?"end":"start"),o==="center"?e+=(n-i)/2:o==="end"&&(e-=i);const l=this.getTotalSize()-i;return Math.max(Math.min(l,e),0)},this.getOffsetForIndex=(e,o="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const n=this.measurementsCache[e];if(!n)return;const i=this.getSize(),a=this.getScrollOffset();if(o==="auto")if(n.end>=a+i-this.options.scrollPaddingEnd)o="end";else if(n.start<=a+this.options.scrollPaddingStart)o="start";else return[a,o];const l=o==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,o,n.size),o]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:o="start",behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,o),{adjustments:void 0,behavior:n})},this.scrollToIndex=(e,{align:o="auto",behavior:n}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const i=this.getOffsetForIndex(e,o);if(!i)return;const[a,l]=i;this._scrollToOffset(a,{adjustments:void 0,behavior:n}),n!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(e))){const[u]=Ce(this.getOffsetForIndex(e,l)),r=this.getScrollOffset();On(u,r)||this.scrollToIndex(e,{align:l,behavior:n})}else this.scrollToIndex(e,{align:l,behavior:n})}))},this.scrollBy=(e,{behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var e;const o=this.getMeasurements();let n;if(o.length===0)n=this.options.paddingStart;else if(this.options.lanes===1)n=((e=o[o.length-1])==null?void 0:e.end)??0;else{const i=Array(this.options.lanes).fill(null);let a=o.length-1;for(;a>=0&&i.some(l=>l===null);){const l=o[a];i[l.lane]===null&&(i[l.lane]=l.end),a--}n=Math.max(...i.filter(l=>l!==null))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:o,behavior:n})=>{this.options.scrollToFn(e,{behavior:n,adjustments:o},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(s)}}const et=(t,s,e,o)=>{for(;t<=s;){const n=(t+s)/2|0,i=e(n);if(i<o)t=n+1;else if(i>o)s=n-1;else return n}return t>0?t-1:0};function Rn({measurements:t,outerSize:s,scrollOffset:e,lanes:o}){const n=t.length-1,i=c=>t[c].start;if(t.length<=o)return{startIndex:0,endIndex:n};let a=et(0,n,i,e),l=a;if(o===1)for(;l<n&&t[l].end<e+s;)l++;else if(o>1){const c=Array(o).fill(0);for(;l<n&&c.some(r=>r<e+s);){const r=t[l];c[r.lane]=r.end,l++}const u=Array(o).fill(e+s);for(;a>=0&&u.some(r=>r>=e);){const r=t[a];u[r.lane]=r.start,a--}a=Math.max(0,a-a%o),l=Math.min(n,l+(o-1-l%o))}return{startIndex:a,endIndex:l}}const qe=typeof document<"u"?d.useLayoutEffect:d.useEffect;function _n(t){const s=d.useReducer(()=>({}),{})[1],e={...t,onChange:(n,i)=>{var a;i?ae.flushSync(s):s(),(a=t.onChange)==null||a.call(t,n,i)}},[o]=d.useState(()=>new $n(e));return o.setOptions(e),qe(()=>o._didMount(),[]),qe(()=>o._willUpdate()),o}function Pn(t){return _n({observeElementRect:jn,observeElementOffset:wn,scrollToFn:Mn,...t})}function Fn(t,s,e,o){let n=Qe(e);d.useEffect(()=>{t=t??window;function i(a){n.current(a)}return t.addEventListener(s,i,o),()=>t.removeEventListener(s,i,o)},[t,s,o])}function tt(t){let s=d.useRef({value:"",selectionStart:null,selectionEnd:null});return Fn(t,"blur",e=>{let o=e.target;Ve(o)&&(s.current={value:o.value,selectionStart:o.selectionStart,selectionEnd:o.selectionEnd})}),$(()=>{if(document.activeElement!==t&&Ve(t)&&t.isConnected){if(t.focus({preventScroll:!0}),t.value!==s.current.value)t.setSelectionRange(t.value.length,t.value.length);else{let{selectionStart:e,selectionEnd:o}=s.current;e!==null&&o!==null&&t.setSelectionRange(e,o)}s.current={value:"",selectionStart:null,selectionEnd:null}}})}function We(t,s){let e=d.useRef([]),o=$(t);d.useEffect(()=>{let n=[...e.current];for(let[i,a]of s.entries())if(e.current[i]!==a){let l=o(s,n);return e.current=s,l}},[o,...s])}function Vn(t){function s(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",s))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",s),s())}let re=[];Vn(()=>{function t(s){if(!Vt(s.target)||s.target===document.body||re[0]===s.target)return;let e=s.target;e=e.closest(At),re.unshift(e??s.target),re=re.filter(o=>o!=null&&o.isConnected),re.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});var Te=(t=>(t[t.Left=0]="Left",t[t.Right=2]="Right",t))(Te||{}),An=Object.defineProperty,kn=(t,s,e)=>s in t?An(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,He=(t,s,e)=>(kn(t,typeof s!="symbol"?s+"":s,e),e),x=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(x||{}),Y=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(Y||{}),le=(t=>(t[t.Pointer=0]="Pointer",t[t.Focus=1]="Focus",t[t.Other=2]="Other",t))(le||{}),nt=(t=>(t[t.OpenCombobox=0]="OpenCombobox",t[t.CloseCombobox=1]="CloseCombobox",t[t.GoToOption=2]="GoToOption",t[t.SetTyping=3]="SetTyping",t[t.RegisterOption=4]="RegisterOption",t[t.UnregisterOption=5]="UnregisterOption",t[t.DefaultToFirstOption=6]="DefaultToFirstOption",t[t.SetActivationTrigger=7]="SetActivationTrigger",t[t.UpdateVirtualConfiguration=8]="UpdateVirtualConfiguration",t[t.SetInputElement=9]="SetInputElement",t[t.SetButtonElement=10]="SetButtonElement",t[t.SetOptionsElement=11]="SetOptionsElement",t))(nt||{});function Ee(t,s=e=>e){let e=t.activeOptionIndex!==null?t.options[t.activeOptionIndex]:null,o=s(t.options.slice()),n=o.length>0&&o[0].dataRef.current.order!==null?o.sort((a,l)=>a.dataRef.current.order-l.dataRef.current.order):Bt(o,a=>a.dataRef.current.domRef.current),i=e?n.indexOf(e):null;return i===-1&&(i=null),{options:n,activeOptionIndex:i}}let zn={1(t){var s;return(s=t.dataRef.current)!=null&&s.disabled||t.comboboxState===1?t:{...t,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(t){var s,e;if((s=t.dataRef.current)!=null&&s.disabled||t.comboboxState===0)return t;if((e=t.dataRef.current)!=null&&e.value){let o=t.dataRef.current.calculateIndex(t.dataRef.current.value);if(o!==-1)return{...t,activeOptionIndex:o,comboboxState:0,__demoMode:!1}}return{...t,comboboxState:0,__demoMode:!1}},3(t,s){return t.isTyping===s.isTyping?t:{...t,isTyping:s.isTyping}},2(t,s){var e,o,n,i;if((e=t.dataRef.current)!=null&&e.disabled||t.optionsElement&&!((o=t.dataRef.current)!=null&&o.optionsPropsRef.current.static)&&t.comboboxState===1)return t;if(t.virtual){let{options:u,disabled:r}=t.virtual,v=s.focus===D.Specific?s.idx:Ae(s,{resolveItems:()=>u,resolveActiveIndex:()=>{var m,f;return(f=(m=t.activeOptionIndex)!=null?m:u.findIndex(O=>!r(O)))!=null?f:null},resolveDisabled:r,resolveId(){throw new Error("Function not implemented.")}}),b=(n=s.trigger)!=null?n:2;return t.activeOptionIndex===v&&t.activationTrigger===b?t:{...t,activeOptionIndex:v,activationTrigger:b,isTyping:!1,__demoMode:!1}}let a=Ee(t);if(a.activeOptionIndex===null){let u=a.options.findIndex(r=>!r.dataRef.current.disabled);u!==-1&&(a.activeOptionIndex=u)}let l=s.focus===D.Specific?s.idx:Ae(s,{resolveItems:()=>a.options,resolveActiveIndex:()=>a.activeOptionIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled}),c=(i=s.trigger)!=null?i:2;return t.activeOptionIndex===l&&t.activationTrigger===c?t:{...t,...a,isTyping:!1,activeOptionIndex:l,activationTrigger:c,__demoMode:!1}},4:(t,s)=>{var e,o,n,i;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:[...t.options,s.payload]};let a=s.payload,l=Ee(t,u=>(u.push(a),u));t.activeOptionIndex===null&&(n=(o=t.dataRef.current).isSelected)!=null&&n.call(o,s.payload.dataRef.current.value)&&(l.activeOptionIndex=l.options.indexOf(a));let c={...t,...l,activationTrigger:2};return(i=t.dataRef.current)!=null&&i.__demoMode&&t.dataRef.current.value===void 0&&(c.activeOptionIndex=0),c},5:(t,s)=>{var e;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:t.options.filter(n=>n.id!==s.id)};let o=Ee(t,n=>{let i=n.findIndex(a=>a.id===s.id);return i!==-1&&n.splice(i,1),n});return{...t,...o,activationTrigger:2}},6:(t,s)=>t.defaultToFirstOption===s.value?t:{...t,defaultToFirstOption:s.value},7:(t,s)=>t.activationTrigger===s.trigger?t:{...t,activationTrigger:s.trigger},8:(t,s)=>{var e,o;if(t.virtual===null)return{...t,virtual:{options:s.options,disabled:(e=s.disabled)!=null?e:()=>!1}};if(t.virtual.options===s.options&&t.virtual.disabled===s.disabled)return t;let n=t.activeOptionIndex;if(t.activeOptionIndex!==null){let i=s.options.indexOf(t.virtual.options[t.activeOptionIndex]);i!==-1?n=i:n=null}return{...t,activeOptionIndex:n,virtual:{options:s.options,disabled:(o=s.disabled)!=null?o:()=>!1}}},9:(t,s)=>t.inputElement===s.element?t:{...t,inputElement:s.element},10:(t,s)=>t.buttonElement===s.element?t:{...t,buttonElement:s.element},11:(t,s)=>t.optionsElement===s.element?t:{...t,optionsElement:s.element}};class Me extends kt{constructor(s){super(s),He(this,"actions",{onChange:e=>{let{onChange:o,compare:n,mode:i,value:a}=this.state.dataRef.current;return pe(i,{0:()=>o==null?void 0:o(e),1:()=>{let l=a.slice(),c=l.findIndex(u=>n(u,e));return c===-1?l.push(e):l.splice(c,1),o==null?void 0:o(l)}})},registerOption:(e,o)=>(this.send({type:4,payload:{id:e,dataRef:o}}),()=>{this.state.activeOptionIndex===this.state.dataRef.current.calculateIndex(o.current.value)&&this.send({type:6,value:!0}),this.send({type:5,id:e})}),goToOption:(e,o)=>(this.send({type:6,value:!1}),this.send({type:2,...e,trigger:o})),setIsTyping:e=>{this.send({type:3,isTyping:e})},closeCombobox:()=>{var e,o;this.send({type:1}),this.send({type:6,value:!1}),(o=(e=this.state.dataRef.current).onClose)==null||o.call(e)},openCombobox:()=>{this.send({type:0}),this.send({type:6,value:!0})},setActivationTrigger:e=>{this.send({type:7,trigger:e})},selectActiveOption:()=>{let e=this.selectors.activeOptionIndex(this.state);if(e!==null){if(this.actions.setIsTyping(!1),this.state.virtual)this.actions.onChange(this.state.virtual.options[e]);else{let{dataRef:o}=this.state.options[e];this.actions.onChange(o.current.value)}this.actions.goToOption({focus:D.Specific,idx:e})}},setInputElement:e=>{this.send({type:9,element:e})},setButtonElement:e=>{this.send({type:10,element:e})},setOptionsElement:e=>{this.send({type:11,element:e})}}),He(this,"selectors",{activeDescendantId:e=>{var o,n;let i=this.selectors.activeOptionIndex(e);if(i!==null)return e.virtual?(n=e.options.find(a=>!a.dataRef.current.disabled&&e.dataRef.current.compare(a.dataRef.current.value,e.virtual.options[i])))==null?void 0:n.id:(o=e.options[i])==null?void 0:o.id},activeOptionIndex:e=>{if(e.defaultToFirstOption&&e.activeOptionIndex===null&&(e.virtual?e.virtual.options.length>0:e.options.length>0)){if(e.virtual){let{options:n,disabled:i}=e.virtual,a=n.findIndex(l=>{var c;return!((c=i==null?void 0:i(l))!=null&&c)});if(a!==-1)return a}let o=e.options.findIndex(n=>!n.dataRef.current.disabled);if(o!==-1)return o}return e.activeOptionIndex},activeOption:e=>{var o,n;let i=this.selectors.activeOptionIndex(e);return i===null?null:e.virtual?e.virtual.options[i??0]:(n=(o=e.options[i])==null?void 0:o.dataRef.current.value)!=null?n:null},isActive:(e,o,n)=>{var i;let a=this.selectors.activeOptionIndex(e);return a===null?!1:e.virtual?a===e.dataRef.current.calculateIndex(o):((i=e.options[a])==null?void 0:i.id)===n},shouldScrollIntoView:(e,o,n)=>!(e.virtual||e.__demoMode||e.comboboxState!==0||e.activationTrigger===0||!this.selectors.isActive(e,o,n))});{let e=this.state.id,o=Xe.get(null);this.disposables.add(o.on(zt.Push,n=>{!o.selectors.isTop(n,e)&&this.state.comboboxState===0&&this.actions.closeCombobox()})),this.on(0,()=>o.actions.push(e)),this.on(1,()=>o.actions.pop(e))}}static new({id:s,virtual:e=null,__demoMode:o=!1}){var n;return new Me({id:s,dataRef:{current:{}},comboboxState:o?0:1,isTyping:!1,options:[],virtual:e?{options:e.options,disabled:(n=e.disabled)!=null?n:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:o})}reduce(s,e){return pe(e.type,zn,s,e)}}const ot=d.createContext(null);function ge(t){let s=d.useContext(ot);if(s===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,st),e}return s}function st({id:t,virtual:s=null,__demoMode:e=!1}){let o=d.useMemo(()=>Me.new({id:t,virtual:s,__demoMode:e}),[]);return Dt(()=>o.dispose()),o}let he=d.createContext(null);he.displayName="ComboboxDataContext";function fe(t){let s=d.useContext(he);if(s===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,fe),e}return s}let it=d.createContext(null);function Bn(t){let s=ge("VirtualProvider"),e=fe("VirtualProvider"),{options:o}=e.virtual,n=L(s,m=>m.optionsElement),[i,a]=d.useMemo(()=>{let m=n;if(!m)return[0,0];let f=window.getComputedStyle(m);return[parseFloat(f.paddingBlockStart||f.paddingTop),parseFloat(f.paddingBlockEnd||f.paddingBottom)]},[n]),l=Pn({enabled:o.length!==0,scrollPaddingStart:i,scrollPaddingEnd:a,count:o.length,estimateSize(){return 40},getScrollElement(){return s.state.optionsElement},overscan:12}),[c,u]=d.useState(0);ue(()=>{u(m=>m+1)},[o]);let r=l.getVirtualItems(),v=L(s,m=>m.activationTrigger===le.Pointer),b=L(s,s.selectors.activeOptionIndex);return r.length===0?null:z.createElement(it.Provider,{value:l},z.createElement("div",{style:{position:"relative",width:"100%",height:`${l.getTotalSize()}px`},ref:m=>{m&&(v||b!==null&&o.length>b&&l.scrollToIndex(b))}},r.map(m=>{var f;return z.createElement(d.Fragment,{key:m.key},z.cloneElement((f=t.children)==null?void 0:f.call(t,{...t.slot,option:o[m.index]}),{key:`${c}-${m.key}`,"data-index":m.index,"aria-setsize":o.length,"aria-posinset":m.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${m.start}px)`,overflowAnchor:"none"}}))})))}let Dn=d.Fragment;function Ln(t,s){let e=d.useId(),o=rn(),{value:n,defaultValue:i,onChange:a,form:l,name:c,by:u,invalid:r=!1,disabled:v=o||!1,onClose:b,__demoMode:m=!1,multiple:f=!1,immediate:O=!1,virtual:C=null,nullable:V,...R}=t,w=vn(i),[P=f?[]:void 0,B]=gn(n,a,w),y=st({id:e,virtual:C,__demoMode:m}),H=d.useRef({static:!1,hold:!1}),T=xn(u),N=$(h=>C?u===null?C.options.indexOf(h):C.options.findIndex(F=>T(F,h)):y.state.options.findIndex(F=>T(F.dataRef.current.value,h))),X=d.useCallback(h=>pe(k.mode,{[Y.Multi]:()=>P.some(F=>T(F,h)),[Y.Single]:()=>T(P,h)}),[P]),_=L(y,h=>h.virtual),g=$(()=>b==null?void 0:b()),k=d.useMemo(()=>({__demoMode:m,immediate:O,optionsPropsRef:H,value:P,defaultValue:w,disabled:v,invalid:r,mode:f?Y.Multi:Y.Single,virtual:C?_:null,onChange:B,isSelected:X,calculateIndex:N,compare:T,onClose:g}),[P,w,v,r,f,B,X,m,y,C,_,g]);ue(()=>{var h;C&&y.send({type:nt.UpdateVirtualConfiguration,options:C.options,disabled:(h=C.disabled)!=null?h:null})},[C,C==null?void 0:C.options,C==null?void 0:C.disabled]),ue(()=>{y.state.dataRef.current=k},[k]);let[A,E,G,ie]=L(y,h=>[h.comboboxState,h.buttonElement,h.inputElement,h.optionsElement]),Z=Xe.get(null),ee=L(Z,d.useCallback(h=>Z.selectors.isTop(h,e),[Z,e]));un(ee,[E,G,ie],()=>y.actions.closeCombobox());let te=L(y,y.selectors.activeOptionIndex),ne=L(y,y.selectors.activeOption),U=d.useMemo(()=>({open:A===x.Open,disabled:v,invalid:r,activeIndex:te,activeOption:ne,value:P}),[k,v,P,r,ne,A]),[se,p]=dn(),K=s===null?{}:{ref:s},M=d.useCallback(()=>{if(w!==void 0)return B==null?void 0:B(w)},[B,w]),q=ve();return z.createElement(p,{value:se,props:{htmlFor:G==null?void 0:G.id},slot:{open:A===x.Open,disabled:v}},z.createElement(cn,null,z.createElement(he.Provider,{value:k},z.createElement(ot.Provider,{value:y},z.createElement(pn,{value:pe(A,{[x.Open]:xe.Open,[x.Closed]:xe.Closed})},c!=null&&z.createElement(yn,{disabled:v,data:P!=null?{[c]:P}:{},form:l,onReset:M}),q({ourProps:K,theirProps:R,slot:U,defaultTag:Dn,name:"Combobox"}))))))}let Nn="input";function qn(t,s){var e,o;let n=ge("Combobox.Input"),i=fe("Combobox.Input"),a=d.useId(),l=qt(),{id:c=l||`headlessui-combobox-input-${a}`,onChange:u,displayValue:r,disabled:v=i.disabled||!1,autoFocus:b=!1,type:m="text",...f}=t,[O]=L(n,p=>[p.inputElement]),C=d.useRef(null),V=Se(C,s,Wt(),n.actions.setInputElement),R=Ie(O),[w,P]=L(n,p=>[p.comboboxState,p.isTyping]),B=Ht(),y=$(()=>{n.actions.onChange(null),n.state.optionsElement&&(n.state.optionsElement.scrollTop=0),n.actions.goToOption({focus:D.Nothing})}),H=d.useMemo(()=>{var p;return typeof r=="function"&&i.value!==void 0?(p=r(i.value))!=null?p:"":typeof i.value=="string"?i.value:""},[i.value,r]);We(([p,K],[M,q])=>{if(n.state.isTyping)return;let h=C.current;h&&((q===x.Open&&K===x.Closed||p!==M)&&(h.value=p),requestAnimationFrame(()=>{if(n.state.isTyping||!h||(R==null?void 0:R.activeElement)!==h)return;let{selectionStart:F,selectionEnd:S}=h;Math.abs((S??0)-(F??0))===0&&F===0&&h.setSelectionRange(h.value.length,h.value.length)}))},[H,w,R,P]),We(([p],[K])=>{if(p===x.Open&&K===x.Closed){if(n.state.isTyping)return;let M=C.current;if(!M)return;let q=M.value,{selectionStart:h,selectionEnd:F,selectionDirection:S}=M;M.value="",M.value=q,S!==null?M.setSelectionRange(h,F,S):M.setSelectionRange(h,F)}},[w]);let T=d.useRef(!1),N=$(()=>{T.current=!0}),X=$(()=>{B.nextFrame(()=>{T.current=!1})}),_=$(p=>{switch(n.actions.setIsTyping(!0),p.key){case Q.Enter:if(n.state.comboboxState!==x.Open||T.current)return;if(p.preventDefault(),p.stopPropagation(),n.selectors.activeOptionIndex(n.state)===null){n.actions.closeCombobox();return}n.actions.selectActiveOption(),i.mode===Y.Single&&n.actions.closeCombobox();break;case Q.ArrowDown:return p.preventDefault(),p.stopPropagation(),pe(n.state.comboboxState,{[x.Open]:()=>n.actions.goToOption({focus:D.Next}),[x.Closed]:()=>n.actions.openCombobox()});case Q.ArrowUp:return p.preventDefault(),p.stopPropagation(),pe(n.state.comboboxState,{[x.Open]:()=>n.actions.goToOption({focus:D.Previous}),[x.Closed]:()=>{ae.flushSync(()=>n.actions.openCombobox()),i.value||n.actions.goToOption({focus:D.Last})}});case Q.Home:if(p.shiftKey)break;return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:D.First});case Q.PageUp:return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:D.First});case Q.End:if(p.shiftKey)break;return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:D.Last});case Q.PageDown:return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:D.Last});case Q.Escape:return n.state.comboboxState!==x.Open?void 0:(p.preventDefault(),n.state.optionsElement&&!i.optionsPropsRef.current.static&&p.stopPropagation(),i.mode===Y.Single&&i.value===null&&y(),n.actions.closeCombobox());case Q.Tab:if(n.state.comboboxState!==x.Open)return;i.mode===Y.Single&&n.state.activationTrigger!==le.Focus&&n.actions.selectActiveOption(),n.actions.closeCombobox();break}}),g=$(p=>{u==null||u(p),i.mode===Y.Single&&p.target.value===""&&y(),n.actions.openCombobox()}),k=$(p=>{var K,M,q;let h=(K=p.relatedTarget)!=null?K:re.find(F=>F!==p.currentTarget);if(!((M=n.state.optionsElement)!=null&&M.contains(h))&&!((q=n.state.buttonElement)!=null&&q.contains(h))&&n.state.comboboxState===x.Open)return p.preventDefault(),i.mode===Y.Single&&i.value===null&&y(),n.actions.closeCombobox()}),A=$(p=>{var K,M,q;let h=(K=p.relatedTarget)!=null?K:re.find(F=>F!==p.currentTarget);(M=n.state.buttonElement)!=null&&M.contains(h)||(q=n.state.optionsElement)!=null&&q.contains(h)||i.disabled||i.immediate&&n.state.comboboxState!==x.Open&&B.microTask(()=>{ae.flushSync(()=>n.actions.openCombobox()),n.actions.setActivationTrigger(le.Focus)})}),E=je(),G=Ut(),{isFocused:ie,focusProps:Z}=Ye({autoFocus:b}),{isHovered:ee,hoverProps:te}=Ze({isDisabled:v}),ne=L(n,p=>p.optionsElement),U=d.useMemo(()=>({open:w===x.Open,disabled:v,invalid:i.invalid,hover:ee,focus:ie,autofocus:b}),[i,ee,ie,b,v,i.invalid]),se=we({ref:V,id:c,role:"combobox",type:m,"aria-controls":ne==null?void 0:ne.id,"aria-expanded":w===x.Open,"aria-activedescendant":L(n,n.selectors.activeDescendantId),"aria-labelledby":E,"aria-describedby":G,"aria-autocomplete":"list",defaultValue:(o=(e=t.defaultValue)!=null?e:i.defaultValue!==void 0?r==null?void 0:r(i.defaultValue):null)!=null?o:i.defaultValue,disabled:v||void 0,autoFocus:b,onCompositionStart:N,onCompositionEnd:X,onKeyDown:_,onChange:g,onFocus:A,onBlur:k},Z,te);return ve()({ourProps:se,theirProps:f,slot:U,defaultTag:Nn,name:"Combobox.Input"})}let Wn="button";function Hn(t,s){let e=ge("Combobox.Button"),o=fe("Combobox.Button"),[n,i]=d.useState(null),a=Se(s,i,e.actions.setButtonElement),l=d.useId(),{id:c=`headlessui-combobox-button-${l}`,disabled:u=o.disabled||!1,autoFocus:r=!1,...v}=t,[b,m,f]=L(e,g=>[g.comboboxState,g.inputElement,g.optionsElement]),O=tt(m),C=b===x.Open;Kt(C,{trigger:n,action:d.useCallback(g=>{if(n!=null&&n.contains(g.target))return me.Ignore;if(m!=null&&m.contains(g.target))return me.Ignore;let k=g.target.closest('[role="option"]:not([data-disabled])');return Gt(k)?me.Select(k):f!=null&&f.contains(g.target)?me.Ignore:me.Close},[n,m,f]),close:e.actions.closeCombobox,select:e.actions.selectActiveOption});let V=$(g=>{switch(g.key){case Q.Space:case Q.Enter:g.preventDefault(),g.stopPropagation(),e.state.comboboxState===x.Closed&&ae.flushSync(()=>e.actions.openCombobox()),O();return;case Q.ArrowDown:g.preventDefault(),g.stopPropagation(),e.state.comboboxState===x.Closed&&(ae.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:D.First})),O();return;case Q.ArrowUp:g.preventDefault(),g.stopPropagation(),e.state.comboboxState===x.Closed&&(ae.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:D.Last})),O();return;case Q.Escape:if(e.state.comboboxState!==x.Open)return;g.preventDefault(),e.state.optionsElement&&!o.optionsPropsRef.current.static&&g.stopPropagation(),ae.flushSync(()=>e.actions.closeCombobox()),O();return;default:return}}),R=$(g=>{g.preventDefault(),!fn(g.currentTarget)&&(g.button===Te.Left&&(e.state.comboboxState===x.Open?e.actions.closeCombobox():e.actions.openCombobox()),O())}),w=je([c]),{isFocusVisible:P,focusProps:B}=Ye({autoFocus:r}),{isHovered:y,hoverProps:H}=Ze({isDisabled:u}),{pressed:T,pressProps:N}=Jt({disabled:u}),X=d.useMemo(()=>({open:b===x.Open,active:T||b===x.Open,disabled:u,invalid:o.invalid,value:o.value,hover:y,focus:P}),[o,y,P,T,u,b]),_=we({ref:a,id:c,type:Qt(t,n),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":f==null?void 0:f.id,"aria-expanded":b===x.Open,"aria-labelledby":w,disabled:u||void 0,autoFocus:r,onPointerDown:R,onKeyDown:V},B,H,N);return ve()({ourProps:_,theirProps:v,slot:X,defaultTag:Wn,name:"Combobox.Button"})}let Un="div",Kn=ze.RenderStrategy|ze.Static;function Gn(t,s){var e,o,n;let i=d.useId(),{id:a=`headlessui-combobox-options-${i}`,hold:l=!1,anchor:c,portal:u=!1,modal:r=!0,transition:v=!1,...b}=t,m=ge("Combobox.Options"),f=fe("Combobox.Options"),O=Xt(c);O&&(u=!0);let[C,V]=Yt(O),[R,w]=d.useState(null),P=Zt(),B=Se(s,O?C:null,m.actions.setOptionsElement,w),[y,H,T,N,X]=L(m,S=>[S.comboboxState,S.inputElement,S.buttonElement,S.optionsElement,S.activationTrigger]),_=Ie(H||T),g=Ie(N),k=en(),[A,E]=tn(v,R,k!==null?(k&xe.Open)===xe.Open:y===x.Open);nn(A,H,m.actions.closeCombobox);let G=f.__demoMode?!1:r&&y===x.Open;on(G,g);let ie=f.__demoMode?!1:r&&y===x.Open;sn(ie,{allowed:d.useCallback(()=>[H,T,N],[H,T,N])}),ue(()=>{var S;f.optionsPropsRef.current.static=(S=t.static)!=null?S:!1},[f.optionsPropsRef,t.static]),ue(()=>{f.optionsPropsRef.current.hold=l},[f.optionsPropsRef,l]),Sn(y===x.Open,{container:N,accept(S){return S.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:S.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(S){S.setAttribute("role","none")}});let Z=je([T==null?void 0:T.id]),ee=d.useMemo(()=>({open:y===x.Open,option:void 0}),[y]),te=$(()=>{m.actions.setActivationTrigger(le.Pointer)}),ne=$(S=>{S.preventDefault(),m.actions.setActivationTrigger(le.Pointer)}),U=we(O?P():{},{"aria-labelledby":Z,role:"listbox","aria-multiselectable":f.mode===Y.Multi?!0:void 0,id:a,ref:B,style:{...b.style,...V,"--input-width":ke(H,!0).width,"--button-width":ke(T,!0).width},onWheel:X===le.Pointer?void 0:te,onMouseDown:ne,...an(E)}),se=A&&y===x.Closed,p=Be(se,(e=f.virtual)==null?void 0:e.options),K=Be(se,f.value),M=$(S=>f.compare(K,S)),q=d.useMemo(()=>{if(!f.virtual)return f;if(p===void 0)throw new Error("Missing `options` in virtual mode");return p!==f.virtual.options?{...f,virtual:{...f.virtual,options:p}}:f},[f,p,(o=f.virtual)==null?void 0:o.options]);f.virtual&&Object.assign(b,{children:z.createElement(he.Provider,{value:q},z.createElement(Bn,{slot:ee},b.children))});let h=ve(),F=d.useMemo(()=>f.mode===Y.Multi?f:{...f,isSelected:M},[f,M]);return z.createElement(ln,{enabled:u?t.static||A:!1,ownerDocument:_},z.createElement(he.Provider,{value:F},h({ourProps:U,theirProps:{...b,children:z.createElement(bn,{freeze:se},typeof b.children=="function"?(n=b.children)==null?void 0:n.call(b,ee):b.children)},slot:ee,defaultTag:Un,features:Kn,visible:A,name:"Combobox.Options"})))}let Jn="div";function Qn(t,s){var e,o,n;let i=fe("Combobox.Option"),a=ge("Combobox.Option"),l=d.useId(),{id:c=`headlessui-combobox-option-${l}`,value:u,disabled:r=(n=(o=(e=i.virtual)==null?void 0:e.disabled)==null?void 0:o.call(e,u))!=null?n:!1,order:v=null,...b}=t,[m]=L(a,E=>[E.inputElement]),f=tt(m),O=L(a,d.useCallback(E=>a.selectors.isActive(E,u,c),[u,c])),C=i.isSelected(u),V=d.useRef(null),R=Qe({disabled:r,value:u,domRef:V,order:v}),w=d.useContext(it),P=Se(s,V,w?w.measureElement:null),B=$(()=>{a.actions.setIsTyping(!1),a.actions.onChange(u)});ue(()=>a.actions.registerOption(c,R),[R,c]);let y=L(a,d.useCallback(E=>a.selectors.shouldScrollIntoView(E,u,c),[u,c]));ue(()=>{if(y)return mn().requestAnimationFrame(()=>{var E,G;(G=(E=V.current)==null?void 0:E.scrollIntoView)==null||G.call(E,{block:"nearest"})})},[y,V]);let H=$(E=>{E.preventDefault(),E.button===Te.Left&&(r||(B(),hn()||requestAnimationFrame(()=>f()),i.mode===Y.Single&&a.actions.closeCombobox()))}),T=$(()=>{if(r)return a.actions.goToOption({focus:D.Nothing});let E=i.calculateIndex(u);a.actions.goToOption({focus:D.Specific,idx:E})}),N=Nt(),X=$(E=>N.update(E)),_=$(E=>{if(!N.wasMoved(E)||r||O)return;let G=i.calculateIndex(u);a.actions.goToOption({focus:D.Specific,idx:G},le.Pointer)}),g=$(E=>{N.wasMoved(E)&&(r||O&&(i.optionsPropsRef.current.hold||a.actions.goToOption({focus:D.Nothing})))}),k=d.useMemo(()=>({active:O,focus:O,selected:C,disabled:r}),[O,C,r]),A={id:c,ref:P,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":C,disabled:void 0,onMouseDown:H,onFocus:T,onPointerEnter:X,onMouseEnter:X,onPointerMove:_,onMouseMove:_,onPointerLeave:g,onMouseLeave:g};return ve()({ourProps:A,theirProps:b,slot:k,defaultTag:Jn,name:"Combobox.Option"})}let Xn=be(Ln),at=be(Hn),lt=be(qn),Yn=Lt,rt=be(Gn),ut=be(Qn),Zn=Object.assign(Xn,{Input:lt,Button:at,Label:Yn,Options:rt,Option:ut});const eo=`
  jn:relative
`,to=`
  jn:pointer-events-none
  jn:top-2
  jn:left-[0.9375rem]
`,no=`
  jn:rounded-3px
  jn:bg-theme-textinput
  jn:text-theme-textinput
  jn:border
  jn:text-base
  jn:leading-4
  jn:w-full
  jn:px-4
  jn:h-textinput
  jn:text-left
  jn:overflow-hidden
  jn:text-ellipsis
  jn:whitespace-nowrap
  jn:focus:outline-hidden
  jn:focus:ring-2
  jn:focus:ring-theme-focus
`,oo=`
  jn:pt-[1.125rem] 
  jn:pb-1
`,so=`
  jn:py-4
`,io=`
  jn:cursor-not-allowed
  jn:pointer-events-none
  jn:opacity-50
`,ao=`
  jn:border-theme-textinput-default
`,lo=`
  jn:border-theme-success
`,ro=`
  jn:border-theme-error
`,uo=`
  jn:absolute
  jn:top-0
  jn:right-0
  jn:h-textinput
  jn:w-6
  jn:h-4
  jn:border-l-0
  jn:border-y-[1px]
  jn:border-r-[1px]
  jn:rounded-tr
  jn:rounded-br
  jn:appearance-none
  jn:bg-theme-textinput
  jn:text-theme-textinput
`,co=`
  jn:border-theme-textinput-default
`,po=`
  jn:border-theme-error
`,fo=`
  jn:border-theme-success
`,mo=`
  jn:cursor-not-allowed
  jn:pointer-events-none
  jn:bg-transparent
  jn:opacity-50
`,ho=`
  jn:rounded
  jn:bg-theme-background-lvl-1
  jn:w-full
  jn:overflow-y-auto
`,Ue=`
  jn:absolute
  jn:top-[.4rem]
  jn:right-6
`,Ke=`
  jn:absolute
  jn:top-1/2
  jn:left-1/2
  jn:translate-y-[-50%]
  jn:translate-x-[-0.75rem]
`,ye=d.createContext(void 0),Ge=({ariaLabel:t,children:s,className:e="",defaultValue:o="",disabled:n=!1,error:i=!1,errortext:a="",helptext:l="",id:c="",invalid:u=!1,loading:r=!1,label:v,name:b="",onBlur:m,onChange:f,onFocus:O,onInputChange:C,placeholder:V="Select…",required:R=!1,successtext:w="",truncateOptions:P=!1,valid:B=!1,value:y="",valueLabel:H,width:T="full",wrapperClassName:N="",...X})=>{const _=I=>!(typeof I=="string"&&I.trim().length===0),g=c||"juno-combobox-"+d.useId(),k="juno-combobox-helptext-"+d.useId(),[A,E]=d.useState(!1),[G,ie]=d.useState(new Map),[Z,ee]=d.useState(""),[te,ne]=d.useState(y),[U,se]=d.useState(!1),[p,K]=d.useState(!1),[M,q]=d.useState(!1),[h,F]=d.useState(!1),[S,dt]=d.useState(!1),{x:ct,y:pt,strategy:ft,refs:$e,context:Re}=Et({open:A,onOpenChange:E,placement:"bottom-start",middleware:[Mt(4),$t(),Rt(),_t({apply({availableWidth:I,availableHeight:J,elements:W,rects:oe}){Object.assign(W.floating.style,{maxWidth:`${I}px`,maxHeight:`${J}px`,minWidth:`${oe.reference.width}px`,overflowY:"auto"})}})],whileElementsMounted:Tt}),{getReferenceProps:mt,getFloatingProps:ht}=It([jt(Re),wt(Re)]),bt=(I,J,W)=>{ie(oe=>new Map([...Array.from(oe),[I??W,{val:I,label:J,children:W}]]))},_e=d.useMemo(()=>u||!!(a&&_(a)),[u,a]),Pe=d.useMemo(()=>B||!!(w&&_(w)),[B,w]);d.useEffect(()=>{ne(y)},[y]),d.useEffect(()=>{K(i)},[i]),d.useEffect(()=>{se(r)},[r]),d.useEffect(()=>{F(_e)},[_e]),d.useEffect(()=>{dt(Pe)},[Pe]);const vt=I=>{ne(I),I&&E(!1),f&&f(I)},gt=I=>{var J;ee((J=I==null?void 0:I.target)==null?void 0:J.value),C&&C(I)},xt=I=>{q(!0),A||E(!0),O&&O(I)},yt=I=>{q(!1),E(!1),m&&m(I)},St=Ft(),Ot=Z===""?z.Children.toArray(s):z.Children.toArray(s).filter(I=>{var J;if(z.isValidElement(I)){const W=((J=I.props.children)==null?void 0:J.toString())||I.props.label||I.props.value;return W==null?void 0:W.toLowerCase().includes(Z.toLowerCase())}else return!1}),Ct=I=>{const J=oe=>oe==null?"":typeof oe=="object"?String(oe)!=="[object Object]"?String(oe):"":String(oe),W=G.get(I);return(W==null?void 0:W.children)&&J(W.children)||(W==null?void 0:W.label)||H||J(I)||""};return j.jsx(ye.Provider,{value:{selectedValue:te,truncateOptions:P,addOptionValueAndLabel:bt},children:j.jsxs("div",{className:`
          juno-combobox-wrapper
          jn:relative
          ${T=="auto"?"jn:inline-block":"jn:block"}
          ${T=="auto"?"jn:w-auto":"jn:w-full"}
          ${N}
        `,children:[j.jsx(Zn,{defaultValue:o,disabled:n||U||p,name:b,onChange:vt,value:te||o,as:"div",...X,children:({open:I})=>(d.useEffect(()=>{I!==A&&E(I)},[I]),j.jsxs(j.Fragment,{children:[j.jsxs("div",{ref:$e.setReference,className:`
                juno-combobox-input-wrapper
                ${eo}
                ${n?"jn:cursor-not-allowed":""}
              `,children:[v&&_(v)&&!U&&!p?j.jsx(Pt,{text:v,disabled:n,required:R,htmlFor:g,className:`${to}`,floating:!0,minimized:!!(V||M||Z&&_(Z)||te&&_(te)),...mt()}):"",j.jsx(lt,{autoComplete:"off","aria-label":t||v,"aria-describedby":l?k:"",id:g,onBlur:yt,onChange:gt,onFocus:xt,placeholder:!U&&!p?V:"",displayValue:J=>Ct(J),className:`
                  juno-combobox-input 
                  ${no} 
                  ${v&&_(v)?oo:so}
                  ${n?io:""}
                  ${h?"juno-combobox-invalid "+ro:""} 
                  ${S?"juno-combobox-valid "+lo:""}  
                  ${S||h?"":ao} 
                  ${U?"juno-combobox-loading jn:cursor-not-allowed":""}
                  ${p?"juno-combobox-error jn:cursor-not-allowed":""}
                  ${e}
                `}),U||p?j.jsx("span",{className:`${Ke}`,children:U?j.jsx(Fe,{className:"jn:cursor-not-allowed"}):j.jsx(ce,{icon:"errorOutline",color:"jn:text-theme-error",className:"jn:cursor-not-allowed"})}):S||h?j.jsx("span",{className:`
                        juno-combobox-icon-container 
                        ${Ue} 
                        ${n?"jn:opacity-50":""}
                      `,children:j.jsx(ce,{icon:S?"checkCircle":"dangerous",color:S?"jn:text-theme-success":"jn:text-theme-error"})}):"",U||p?j.jsx("span",{className:`${Ke}`,children:U?j.jsx(Fe,{className:"jn-cursor-not-allowed"}):j.jsx(ce,{icon:"errorOutline",color:"jn-text-theme-error",className:"jn-cursor-not-allowed"})}):S||h?j.jsx("span",{className:`
                        juno-combobox-icon-container 
                        ${Ue} 
                        ${n?"jn-opacity-50":""}
                      `,children:j.jsx(ce,{icon:S?"checkCircle":"dangerous",color:S?"jn-text-theme-success":"jn-text-theme-error"})}):"",!p&&!U?j.jsx(at,{className:`
                        juno-combobox-toggle 
                        ${uo}
                        ${n?mo:""}
                        ${h?"juno-combobox-toggle-invalid "+po:""} 
                        ${S?"juno-combobox-toggle-valid "+fo:""}  
                        ${S||h?"":co} 
                      `,children:j.jsx(ce,{icon:A?"expandLess":"expandMore"})}):null]}),A&&ae.createPortal(j.jsx("div",{ref:$e.setFloating,className:`juno-combobox-options ${ho}`,style:{position:ft,top:pt??0,left:ct??0},...ht(),children:j.jsx(rt,{static:!0,className:"jn-w-full",children:Ot})}),St??document.body)]}))}),a&&_(a)?j.jsx(Oe,{text:a,variant:"error"}):"",w&&_(w)?j.jsx(Oe,{text:w,variant:"success"}):"",l&&_(l)?j.jsx(Oe,{text:l,id:k}):""]})})};try{ye.displayName="ComboBoxContext",ye.__docgenInfo={description:"",displayName:"ComboBoxContext",props:{}}}catch{}try{Ge.displayName="ComboBox",Ge.__docgenInfo={description:"",displayName:"ComboBox",props:{ariaLabel:{defaultValue:null,description:"The aria-label of the ComboBox. Defaults to the label if label was passed.",name:"ariaLabel",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"The children to Render. Use `ComboBox.Option` elements.",name:"children",required:!1,type:{name:"ReactNode"}},className:{defaultValue:{value:""},description:"A custom className. Will be passed to the internal text input element of the ComboBox",name:"className",required:!1,type:{name:"string"}},defaultValue:{defaultValue:{value:""},description:"Pass a defaultValue to use as an uncontrolled Component that will handle its state internally",name:"defaultValue",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Whether the ComboBox is disabled",name:"disabled",required:!1,type:{name:"boolean"}},error:{defaultValue:{value:"false"},description:"Whether the ComboBox has an error. Note this refers to an internal error like failing to load options etc., to indicate failed validation use `invalid` instead.",name:"error",required:!1,type:{name:"boolean"}},errortext:{defaultValue:{value:""},description:"An errortext to display when the ComboBox failed validation or an internal error occurred.",name:"errortext",required:!1,type:{name:"ReactNode"}},helptext:{defaultValue:{value:""},description:"A helptext to render to explain meaning and significance of the ComboBox",name:"helptext",required:!1,type:{name:"ReactNode"}},id:{defaultValue:{value:""},description:"The Id of the ComboBox. Will be assigned to the text input part of the ComboBox. If not passed, an id will be auto-generated.",name:"id",required:!1,type:{name:"string"}},invalid:{defaultValue:{value:"false"},description:"Whether the ComboBox failed validation",name:"invalid",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"The label of the ComboBox",name:"label",required:!1,type:{name:"string"}},loading:{defaultValue:{value:"false"},description:"Whether the ComboBox is busy loading options",name:"loading",required:!1,type:{name:"boolean"}},name:{defaultValue:{value:""},description:"The name attribute of the ComboBox when used as part of a form",name:"name",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"A handler to execute when the ComboBox looses focus",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onChange:{defaultValue:null,description:"A handler to execute when the ComboBox' selected value changes",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},onFocus:{defaultValue:null,description:"A handler to execute when the ComboBox input receives focus",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onInputChange:{defaultValue:null,description:"Handler to execute when the ComboBox text input value changes",name:"onInputChange",required:!1,type:{name:"ChangeEventHandler<HTMLInputElement>"}},placeholder:{defaultValue:{value:"Select…"},description:"A placeholder to render in the text input",name:"placeholder",required:!1,type:{name:"string"}},required:{defaultValue:{value:"false"},description:"Whether the ComboBox is required",name:"required",required:!1,type:{name:"boolean"}},successtext:{defaultValue:{value:""},description:"A text to display in case the ComboBox was successfully validated. Will set the ComboBox to `valid` when passed.",name:"successtext",required:!1,type:{name:"ReactNode"}},truncateOptions:{defaultValue:{value:"false"},description:"Whether the option labels should be truncated in case they are longer/wider than the available space in an option or not. Default is FALSE.",name:"truncateOptions",required:!1,type:{name:"boolean"}},valid:{defaultValue:{value:"false"},description:"Whether the ComboBox was successfully validated",name:"valid",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"The selected value of the ComboBox in Controlled Mode.",name:"value",required:!1,type:{name:"string"}},valueLabel:{defaultValue:null,description:"The label of the passed value or defaultValue. If you want to use controlled mode or pass as defaultValue in uncontrolled mode and additionally use labels for human-readable SelectOptions, you need to also pass the matching label for the passed value/defaultValue so that the Select component can render itself properly",name:"valueLabel",required:!1,type:{name:"string"}},width:{defaultValue:{value:"full"},description:"The width of the text input. Either 'full' (default) or 'auto'.",name:"width",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"full"'}]}},wrapperClassName:{defaultValue:{value:""},description:"Pass a custom classname to the wrapping <div> element. This can be useful if you must add styling to the outermost wrapping element of this component, e.g. for positioning.",name:"wrapperClassName",required:!1,type:{name:"string"}}}}}catch{}const bo=`
  jn:flex
  jn:pt-[0.6875rem]
  jn:pb-[0.5rem]
  jn:pr-[0.875rem]
  jn:select-none
  jn:data-[headlessui-state=active]:outline-hidden
  jn:data-[headlessui-state=active]:ring-2
  jn:data-[headlessui-state=active]:ring-inset
  jn:data-[headlessui-state=active]:ring-theme-focus
  jn:data-[headlessui-state=active]:bg-theme-background-lvl-3
`,vo=`
  jn:text-theme-default
  jn:pl-[2.375rem]
`,go=`
  jn:text-theme-accent
  jn:pl-3.5
`,xo=`
  jn:inline-block
  jn:mr-1.5
`,yo=`
  jn:opacity-50
  jn:cursor-not-allowed
`,So=`
  jn:block
  jn:h-6
  jn:overflow-hidden
  jn:text-ellipsis
  jn:whitespace-nowrap
`,Je=({children:t,disabled:s=!1,value:e="",label:o="",className:n="",...i})=>{const a=d.useContext(ye),{selectedValue:l,truncateOptions:c,addOptionValueAndLabel:u}=a||{};d.useEffect(()=>{u&&u(e,o,t)},[e,o,t]);const r=e||t;return j.jsx(ut,{value:r,disabled:s,as:d.Fragment,children:j.jsxs("li",{className:`
          juno-combobox-option 
          ${bo}
          ${l===e?go:vo}
          ${s?"jn:cursor-not-allowed":""}
          ${n}
        `,...i,children:[l===r?j.jsx(ce,{icon:"check",size:"18",className:`${xo}`}):"",j.jsx("span",{className:`
            ${s?yo:""}
            ${c?So:""}
          `,children:t||o||e})]})})};try{Je.displayName="ComboBoxOption",Je.__docgenInfo={description:"",displayName:"ComboBoxOption",props:{children:{defaultValue:null,description:"Content to render inside the ComboBoxOption. Is specified should be string.",name:"children",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"If option is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"Option value.",name:"value",required:!1,type:{name:"string"}},label:{defaultValue:{value:""},description:"Option label.",name:"label",required:!1,type:{name:"string"}},className:{defaultValue:{value:""},description:"CSS class for the option.",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{Ge as C,Je as a};
