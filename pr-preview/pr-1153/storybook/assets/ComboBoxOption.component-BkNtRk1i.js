import{r as d,b as ae,e as k,j as T}from"./iframe-CbeOvx6e.js";import{u as St,f as Ot,a as Ct,d as Et,h as wt,o as It,s as jt,g as Tt,k as Mt}from"./floating-ui.react-DXqBQfQ2.js";import{L as $t}from"./Label.component-CI742BtA.js";import{F as Oe}from"./FormHint.component-DjeRh_pK.js";import{I as ge}from"./Icon.component-B8jZzrlX.js";import{S as Rt}from"./Spinner.component-Wa88E4pd.js";import{u as _t}from"./PortalProvider.component-BLGbJap6.js";import{a7 as Ke,b as $,a9 as Pe,aa as Pt,ab as Ft,E as Vt,d as D,u as ce,c as Ge,k as At,f as Fe,P as zt,e as kt,K as he,a2 as Bt,S as L,y as Se,n as ue,g as Dt,L as be,a3 as Lt,F as Nt,i as Ee,s as qt,a4 as we,a5 as Wt,$ as Ye,D as Je,_ as Ie,B as Ht,C as fe,a as Ut,G as Kt,H as Gt,h as Yt,R as Jt,T as Qt,j as Xt,l as Zt,p as en,q as tn,r as nn,t as on,v as Ve,z as sn,a6 as an,I as ln,Q as rn,J as un,M as dn,m as xe,O as Ae,U as K,Y as cn,a1 as pn,ac as fn}from"./portal-BF2gclax.js";import{l as ze,f as mn,a as hn,T as bn,u as vn,j as gn}from"./frozen-CDjrEVj1.js";import{F as xn}from"./use-tree-walker-CVLPgu_H.js";function de(t,s,e){let o=e.initialDeps??[],n;function i(){var a,l,c,r;let u;e.key&&((a=e.debug)!=null&&a.call(e))&&(u=Date.now());const v=t();if(!(v.length!==o.length||v.some((p,S)=>o[S]!==p)))return n;o=v;let m;if(e.key&&((l=e.debug)!=null&&l.call(e))&&(m=Date.now()),n=s(...v),e.key&&((c=e.debug)!=null&&c.call(e))){const p=Math.round((Date.now()-u)*100)/100,S=Math.round((Date.now()-m)*100)/100,O=S/16,V=(R,I)=>{for(R=String(R);R.length<I;)R=" "+R;return R};console.info(`%c⏱ ${V(S,5)} /${V(p,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*O,120))}deg 100% 31%);`,e?.key)}return(r=e?.onChange)==null||r.call(e,n),n}return i.updateDeps=a=>{o=a},i}function ke(t,s){if(t===void 0)throw new Error("Unexpected undefined");return t}const yn=(t,s)=>Math.abs(t-s)<1.01,Sn=(t,s,e)=>{let o;return function(...n){t.clearTimeout(o),o=t.setTimeout(()=>s.apply(this,n),e)}},Be=t=>{const{offsetWidth:s,offsetHeight:e}=t;return{width:s,height:e}},On=t=>t,Cn=t=>{const s=Math.max(t.startIndex-t.overscan,0),e=Math.min(t.endIndex+t.overscan,t.count-1),o=[];for(let n=s;n<=e;n++)o.push(n);return o},En=(t,s)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;const n=a=>{const{width:l,height:c}=a;s({width:Math.round(l),height:Math.round(c)})};if(n(Be(e)),!o.ResizeObserver)return()=>{};const i=new o.ResizeObserver(a=>{const l=()=>{const c=a[0];if(c?.borderBoxSize){const r=c.borderBoxSize[0];if(r){n({width:r.inlineSize,height:r.blockSize});return}}n(Be(e))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(e,{box:"border-box"}),()=>{i.unobserve(e)}},De={passive:!0},Le=typeof window>"u"?!0:"onscrollend"in window,wn=(t,s)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;let n=0;const i=t.options.useScrollendEvent&&Le?()=>{}:Sn(o,()=>{s(n,!1)},t.options.isScrollingResetDelay),a=u=>()=>{const{horizontal:v,isRtl:h}=t.options;n=v?e.scrollLeft*(h&&-1||1):e.scrollTop,i(),s(n,u)},l=a(!0),c=a(!1);c(),e.addEventListener("scroll",l,De);const r=t.options.useScrollendEvent&&Le;return r&&e.addEventListener("scrollend",c,De),()=>{e.removeEventListener("scroll",l),r&&e.removeEventListener("scrollend",c)}},In=(t,s,e)=>{if(s?.borderBoxSize){const o=s.borderBoxSize[0];if(o)return Math.round(o[e.options.horizontal?"inlineSize":"blockSize"])}return t[e.options.horizontal?"offsetWidth":"offsetHeight"]},jn=(t,{adjustments:s=0,behavior:e},o)=>{var n,i;const a=t+s;(i=(n=o.scrollElement)==null?void 0:n.scrollTo)==null||i.call(n,{[o.options.horizontal?"left":"top"]:a,behavior:e})};class Tn{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const o=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(n=>{n.forEach(i=>{const a=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var n;(n=o())==null||n.disconnect(),e=null},observe:n=>{var i;return(i=o())==null?void 0:i.observe(n,{box:"border-box"})},unobserve:n=>{var i;return(i=o())==null?void 0:i.unobserve(n)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([o,n])=>{typeof n>"u"&&delete e[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:On,rangeExtractor:Cn,onChange:()=>{},measureElement:In,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var o,n;(n=(o=this.options).onChange)==null||n.call(o,this,e)},this.maybeNotify=de(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const o=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==o){if(this.cleanup(),!o){this.maybeNotify();return}this.scrollElement=o,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(n=>{this.observer.observe(n)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(n,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,o)=>{const n=new Map,i=new Map;for(let a=o-1;a>=0;a--){const l=e[a];if(n.has(l.lane))continue;const c=i.get(l.lane);if(c==null||l.end>c.end?i.set(l.lane,l):l.end<c.end&&n.set(l.lane,!0),n.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((a,l)=>a.end===l.end?a.index-l.index:a.end-l.end)[0]:void 0},this.getMeasurementOptions=de(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,o,n,i,a)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:o,scrollMargin:n,getItemKey:i,enabled:a}),{key:!1}),this.getMeasurements=de(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:o,scrollMargin:n,getItemKey:i,enabled:a},l)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(u=>{this.itemSizeCache.set(u.key,u.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const r=this.measurementsCache.slice(0,c);for(let u=c;u<e;u++){const v=i(u),h=this.options.lanes===1?r[u-1]:this.getFurthestMeasurement(r,u),m=h?h.end+this.options.gap:o+n,p=l.get(v),S=typeof p=="number"?p:this.options.estimateSize(u),O=m+S,V=h?h.lane:u%this.options.lanes;r[u]={index:u,start:m,size:S,end:O,key:v,lane:V}}return this.measurementsCache=r,r},{key:!1,debug:()=>this.options.debug}),this.calculateRange=de(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,o,n,i)=>this.range=e.length>0&&o>0?Mn({measurements:e,outerSize:o,scrollOffset:n,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=de(()=>{let e=null,o=null;const n=this.calculateRange();return n&&(e=n.startIndex,o=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,o]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,o]},(e,o,n,i,a)=>i===null||a===null?[]:e({startIndex:i,endIndex:a,overscan:o,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const o=this.options.indexAttribute,n=e.getAttribute(o);return n?parseInt(n,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(e,o)=>{const n=this.indexFromElement(e),i=this.measurementsCache[n];if(!i)return;const a=i.key,l=this.elementsCache.get(a);l!==e&&(l&&this.observer.unobserve(l),this.observer.observe(e),this.elementsCache.set(a,e)),e.isConnected&&this.resizeItem(n,this.options.measureElement(e,o,this))},this.resizeItem=(e,o)=>{const n=this.measurementsCache[e];if(!n)return;const i=this.itemSizeCache.get(n.key)??n.size,a=o-i;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,a,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,o)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((o,n)=>{o.isConnected||(this.observer.unobserve(o),this.elementsCache.delete(n))});return}this._measureElement(e,void 0)},this.getVirtualItems=de(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,o)=>{const n=[];for(let i=0,a=e.length;i<a;i++){const l=e[i],c=o[l];n.push(c)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const o=this.getMeasurements();if(o.length!==0)return ke(o[Qe(0,o.length-1,n=>ke(o[n]).start,e)])},this.getOffsetForAlignment=(e,o,n=0)=>{const i=this.getSize(),a=this.getScrollOffset();o==="auto"&&(o=e>=a+i?"end":"start"),o==="center"?e+=(n-i)/2:o==="end"&&(e-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,e),0)},this.getOffsetForIndex=(e,o="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const n=this.measurementsCache[e];if(!n)return;const i=this.getSize(),a=this.getScrollOffset();if(o==="auto")if(n.end>=a+i-this.options.scrollPaddingEnd)o="end";else if(n.start<=a+this.options.scrollPaddingStart)o="start";else return[a,o];const l=o==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,o,n.size),o]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:o="start",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,o),{adjustments:void 0,behavior:n})},this.scrollToIndex=(e,{align:o="auto",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e=Math.max(0,Math.min(e,this.options.count-1));let i=0;const a=10,l=r=>{if(!this.targetWindow)return;const u=this.getOffsetForIndex(e,r);if(!u){console.warn("Failed to get offset for index:",e);return}const[v,h]=u;this._scrollToOffset(v,{adjustments:void 0,behavior:n}),this.targetWindow.requestAnimationFrame(()=>{const m=this.getScrollOffset(),p=this.getOffsetForIndex(e,h);if(!p){console.warn("Failed to get offset for index:",e);return}yn(p[0],m)||c(h)})},c=r=>{this.targetWindow&&(i++,i<a?this.targetWindow.requestAnimationFrame(()=>l(r)):console.warn(`Failed to scroll to index ${e} after ${a} attempts.`))};l(o)},this.scrollBy=(e,{behavior:o}={})=>{o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var e;const o=this.getMeasurements();let n;if(o.length===0)n=this.options.paddingStart;else if(this.options.lanes===1)n=((e=o[o.length-1])==null?void 0:e.end)??0;else{const i=Array(this.options.lanes).fill(null);let a=o.length-1;for(;a>=0&&i.some(l=>l===null);){const l=o[a];i[l.lane]===null&&(i[l.lane]=l.end),a--}n=Math.max(...i.filter(l=>l!==null))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:o,behavior:n})=>{this.options.scrollToFn(e,{behavior:n,adjustments:o},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(s)}}const Qe=(t,s,e,o)=>{for(;t<=s;){const n=(t+s)/2|0,i=e(n);if(i<o)t=n+1;else if(i>o)s=n-1;else return n}return t>0?t-1:0};function Mn({measurements:t,outerSize:s,scrollOffset:e,lanes:o}){const n=t.length-1,i=c=>t[c].start;if(t.length<=o)return{startIndex:0,endIndex:n};let a=Qe(0,n,i,e),l=a;if(o===1)for(;l<n&&t[l].end<e+s;)l++;else if(o>1){const c=Array(o).fill(0);for(;l<n&&c.some(u=>u<e+s);){const u=t[l];c[u.lane]=u.end,l++}const r=Array(o).fill(e+s);for(;a>=0&&r.some(u=>u>=e);){const u=t[a];r[u.lane]=u.start,a--}a=Math.max(0,a-a%o),l=Math.min(n,l+(o-1-l%o))}return{startIndex:a,endIndex:l}}const Ne=typeof document<"u"?d.useLayoutEffect:d.useEffect;function $n(t){const s=d.useReducer(()=>({}),{})[1],e={...t,onChange:(n,i)=>{var a;i?ae.flushSync(s):s(),(a=t.onChange)==null||a.call(t,n,i)}},[o]=d.useState(()=>new Tn(e));return o.setOptions(e),Ne(()=>o._didMount(),[]),Ne(()=>o._willUpdate()),o}function Rn(t){return $n({observeElementRect:En,observeElementOffset:wn,scrollToFn:jn,...t})}function _n(t,s,e,o){let n=Ke(e);d.useEffect(()=>{t=t??window;function i(a){n.current(a)}return t.addEventListener(s,i,o),()=>t.removeEventListener(s,i,o)},[t,s,o])}function Xe(t){let s=d.useRef({value:"",selectionStart:null,selectionEnd:null});return _n(t,"blur",e=>{let o=e.target;Pe(o)&&(s.current={value:o.value,selectionStart:o.selectionStart,selectionEnd:o.selectionEnd})}),$(()=>{if(document.activeElement!==t&&Pe(t)&&t.isConnected){if(t.focus({preventScroll:!0}),t.value!==s.current.value)t.setSelectionRange(t.value.length,t.value.length);else{let{selectionStart:e,selectionEnd:o}=s.current;e!==null&&o!==null&&t.setSelectionRange(e,o)}s.current={value:"",selectionStart:null,selectionEnd:null}}})}function qe(t,s){let e=d.useRef([]),o=$(t);d.useEffect(()=>{let n=[...e.current];for(let[i,a]of s.entries())if(e.current[i]!==a){let l=o(s,n);return e.current=s,l}},[o,...s])}function Pn(t){function s(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",s))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",s),s())}let re=[];Pn(()=>{function t(s){if(!Pt(s.target)||s.target===document.body||re[0]===s.target)return;let e=s.target;e=e.closest(Ft),re.unshift(e??s.target),re=re.filter(o=>o!=null&&o.isConnected),re.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});var je=(t=>(t[t.Left=0]="Left",t[t.Right=2]="Right",t))(je||{}),Fn=Object.defineProperty,Vn=(t,s,e)=>s in t?Fn(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,We=(t,s,e)=>(Vn(t,typeof s!="symbol"?s+"":s,e),e),x=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(x||{}),J=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(J||{}),le=(t=>(t[t.Pointer=0]="Pointer",t[t.Focus=1]="Focus",t[t.Other=2]="Other",t))(le||{}),Ze=(t=>(t[t.OpenCombobox=0]="OpenCombobox",t[t.CloseCombobox=1]="CloseCombobox",t[t.GoToOption=2]="GoToOption",t[t.SetTyping=3]="SetTyping",t[t.RegisterOption=4]="RegisterOption",t[t.UnregisterOption=5]="UnregisterOption",t[t.DefaultToFirstOption=6]="DefaultToFirstOption",t[t.SetActivationTrigger=7]="SetActivationTrigger",t[t.UpdateVirtualConfiguration=8]="UpdateVirtualConfiguration",t[t.SetInputElement=9]="SetInputElement",t[t.SetButtonElement=10]="SetButtonElement",t[t.SetOptionsElement=11]="SetOptionsElement",t))(Ze||{});function Ce(t,s=e=>e){let e=t.activeOptionIndex!==null?t.options[t.activeOptionIndex]:null,o=s(t.options.slice()),n=o.length>0&&o[0].dataRef.current.order!==null?o.sort((a,l)=>a.dataRef.current.order-l.dataRef.current.order):zt(o,a=>a.dataRef.current.domRef.current),i=e?n.indexOf(e):null;return i===-1&&(i=null),{options:n,activeOptionIndex:i}}let An={1(t){var s;return(s=t.dataRef.current)!=null&&s.disabled||t.comboboxState===1?t:{...t,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(t){var s,e;if((s=t.dataRef.current)!=null&&s.disabled||t.comboboxState===0)return t;if((e=t.dataRef.current)!=null&&e.value){let o=t.dataRef.current.calculateIndex(t.dataRef.current.value);if(o!==-1)return{...t,activeOptionIndex:o,comboboxState:0,__demoMode:!1}}return{...t,comboboxState:0,__demoMode:!1}},3(t,s){return t.isTyping===s.isTyping?t:{...t,isTyping:s.isTyping}},2(t,s){var e,o,n,i;if((e=t.dataRef.current)!=null&&e.disabled||t.optionsElement&&!((o=t.dataRef.current)!=null&&o.optionsPropsRef.current.static)&&t.comboboxState===1)return t;if(t.virtual){let{options:r,disabled:u}=t.virtual,v=s.focus===D.Specific?s.idx:Fe(s,{resolveItems:()=>r,resolveActiveIndex:()=>{var m,p;return(p=(m=t.activeOptionIndex)!=null?m:r.findIndex(S=>!u(S)))!=null?p:null},resolveDisabled:u,resolveId(){throw new Error("Function not implemented.")}}),h=(n=s.trigger)!=null?n:2;return t.activeOptionIndex===v&&t.activationTrigger===h?t:{...t,activeOptionIndex:v,activationTrigger:h,isTyping:!1,__demoMode:!1}}let a=Ce(t);if(a.activeOptionIndex===null){let r=a.options.findIndex(u=>!u.dataRef.current.disabled);r!==-1&&(a.activeOptionIndex=r)}let l=s.focus===D.Specific?s.idx:Fe(s,{resolveItems:()=>a.options,resolveActiveIndex:()=>a.activeOptionIndex,resolveId:r=>r.id,resolveDisabled:r=>r.dataRef.current.disabled}),c=(i=s.trigger)!=null?i:2;return t.activeOptionIndex===l&&t.activationTrigger===c?t:{...t,...a,isTyping:!1,activeOptionIndex:l,activationTrigger:c,__demoMode:!1}},4:(t,s)=>{var e,o,n,i;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:[...t.options,s.payload]};let a=s.payload,l=Ce(t,r=>(r.push(a),r));t.activeOptionIndex===null&&(n=(o=t.dataRef.current).isSelected)!=null&&n.call(o,s.payload.dataRef.current.value)&&(l.activeOptionIndex=l.options.indexOf(a));let c={...t,...l,activationTrigger:2};return(i=t.dataRef.current)!=null&&i.__demoMode&&t.dataRef.current.value===void 0&&(c.activeOptionIndex=0),c},5:(t,s)=>{var e;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:t.options.filter(n=>n.id!==s.id)};let o=Ce(t,n=>{let i=n.findIndex(a=>a.id===s.id);return i!==-1&&n.splice(i,1),n});return{...t,...o,activationTrigger:2}},6:(t,s)=>t.defaultToFirstOption===s.value?t:{...t,defaultToFirstOption:s.value},7:(t,s)=>t.activationTrigger===s.trigger?t:{...t,activationTrigger:s.trigger},8:(t,s)=>{var e,o;if(t.virtual===null)return{...t,virtual:{options:s.options,disabled:(e=s.disabled)!=null?e:()=>!1}};if(t.virtual.options===s.options&&t.virtual.disabled===s.disabled)return t;let n=t.activeOptionIndex;if(t.activeOptionIndex!==null){let i=s.options.indexOf(t.virtual.options[t.activeOptionIndex]);i!==-1?n=i:n=null}return{...t,activeOptionIndex:n,virtual:{options:s.options,disabled:(o=s.disabled)!=null?o:()=>!1}}},9:(t,s)=>t.inputElement===s.element?t:{...t,inputElement:s.element},10:(t,s)=>t.buttonElement===s.element?t:{...t,buttonElement:s.element},11:(t,s)=>t.optionsElement===s.element?t:{...t,optionsElement:s.element}};class Te extends Vt{constructor(s){super(s),We(this,"actions",{onChange:e=>{let{onChange:o,compare:n,mode:i,value:a}=this.state.dataRef.current;return ce(i,{0:()=>o?.(e),1:()=>{let l=a.slice(),c=l.findIndex(r=>n(r,e));return c===-1?l.push(e):l.splice(c,1),o?.(l)}})},registerOption:(e,o)=>(this.send({type:4,payload:{id:e,dataRef:o}}),()=>{this.state.activeOptionIndex===this.state.dataRef.current.calculateIndex(o.current.value)&&this.send({type:6,value:!0}),this.send({type:5,id:e})}),goToOption:(e,o)=>(this.send({type:6,value:!1}),this.send({type:2,...e,trigger:o})),setIsTyping:e=>{this.send({type:3,isTyping:e})},closeCombobox:()=>{var e,o;this.send({type:1}),this.send({type:6,value:!1}),(o=(e=this.state.dataRef.current).onClose)==null||o.call(e)},openCombobox:()=>{this.send({type:0}),this.send({type:6,value:!0})},setActivationTrigger:e=>{this.send({type:7,trigger:e})},selectActiveOption:()=>{let e=this.selectors.activeOptionIndex(this.state);if(e!==null){if(this.actions.setIsTyping(!1),this.state.virtual)this.actions.onChange(this.state.virtual.options[e]);else{let{dataRef:o}=this.state.options[e];this.actions.onChange(o.current.value)}this.actions.goToOption({focus:D.Specific,idx:e})}},setInputElement:e=>{this.send({type:9,element:e})},setButtonElement:e=>{this.send({type:10,element:e})},setOptionsElement:e=>{this.send({type:11,element:e})}}),We(this,"selectors",{activeDescendantId:e=>{var o,n;let i=this.selectors.activeOptionIndex(e);if(i!==null)return e.virtual?(n=e.options.find(a=>!a.dataRef.current.disabled&&e.dataRef.current.compare(a.dataRef.current.value,e.virtual.options[i])))==null?void 0:n.id:(o=e.options[i])==null?void 0:o.id},activeOptionIndex:e=>{if(e.defaultToFirstOption&&e.activeOptionIndex===null&&(e.virtual?e.virtual.options.length>0:e.options.length>0)){if(e.virtual){let{options:n,disabled:i}=e.virtual,a=n.findIndex(l=>{var c;return!((c=i?.(l))!=null&&c)});if(a!==-1)return a}let o=e.options.findIndex(n=>!n.dataRef.current.disabled);if(o!==-1)return o}return e.activeOptionIndex},activeOption:e=>{var o,n;let i=this.selectors.activeOptionIndex(e);return i===null?null:e.virtual?e.virtual.options[i??0]:(n=(o=e.options[i])==null?void 0:o.dataRef.current.value)!=null?n:null},isActive:(e,o,n)=>{var i;let a=this.selectors.activeOptionIndex(e);return a===null?!1:e.virtual?a===e.dataRef.current.calculateIndex(o):((i=e.options[a])==null?void 0:i.id)===n},shouldScrollIntoView:(e,o,n)=>!(e.virtual||e.__demoMode||e.comboboxState!==0||e.activationTrigger===0||!this.selectors.isActive(e,o,n))});{let e=this.state.id,o=Ge.get(null);this.disposables.add(o.on(At.Push,n=>{!o.selectors.isTop(n,e)&&this.state.comboboxState===0&&this.actions.closeCombobox()})),this.on(0,()=>o.actions.push(e)),this.on(1,()=>o.actions.pop(e))}}static new({id:s,virtual:e=null,__demoMode:o=!1}){var n;return new Te({id:s,dataRef:{current:{}},comboboxState:o?0:1,isTyping:!1,options:[],virtual:e?{options:e.options,disabled:(n=e.disabled)!=null?n:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:o})}reduce(s,e){return ce(e.type,An,s,e)}}const et=d.createContext(null);function ve(t){let s=d.useContext(et);if(s===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,tt),e}return s}function tt({id:t,virtual:s=null,__demoMode:e=!1}){let o=d.useMemo(()=>Te.new({id:t,virtual:s,__demoMode:e}),[]);return kt(()=>o.dispose()),o}let me=d.createContext(null);me.displayName="ComboboxDataContext";function pe(t){let s=d.useContext(me);if(s===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,pe),e}return s}let nt=d.createContext(null);function zn(t){let s=ve("VirtualProvider"),e=pe("VirtualProvider"),{options:o}=e.virtual,n=L(s,m=>m.optionsElement),[i,a]=d.useMemo(()=>{let m=n;if(!m)return[0,0];let p=window.getComputedStyle(m);return[parseFloat(p.paddingBlockStart||p.paddingTop),parseFloat(p.paddingBlockEnd||p.paddingBottom)]},[n]),l=Rn({enabled:o.length!==0,scrollPaddingStart:i,scrollPaddingEnd:a,count:o.length,estimateSize(){return 40},getScrollElement(){return s.state.optionsElement},overscan:12}),[c,r]=d.useState(0);ue(()=>{r(m=>m+1)},[o]);let u=l.getVirtualItems(),v=L(s,m=>m.activationTrigger===le.Pointer),h=L(s,s.selectors.activeOptionIndex);return u.length===0?null:k.createElement(nt.Provider,{value:l},k.createElement("div",{style:{position:"relative",width:"100%",height:`${l.getTotalSize()}px`},ref:m=>{m&&(v||h!==null&&o.length>h&&l.scrollToIndex(h))}},u.map(m=>{var p;return k.createElement(d.Fragment,{key:m.key},k.cloneElement((p=t.children)==null?void 0:p.call(t,{...t.slot,option:o[m.index]}),{key:`${c}-${m.key}`,"data-index":m.index,"aria-setsize":o.length,"aria-posinset":m.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${m.start}px)`,overflowAnchor:"none"}}))})))}let kn=d.Fragment;function Bn(t,s){let e=d.useId(),o=an(),{value:n,defaultValue:i,onChange:a,form:l,name:c,by:r,invalid:u=!1,disabled:v=o||!1,onClose:h,__demoMode:m=!1,multiple:p=!1,immediate:S=!1,virtual:O=null,nullable:V,...R}=t,I=hn(i),[P=p?[]:void 0,B]=bn(n,a,I),y=tt({id:e,virtual:O,__demoMode:m}),W=d.useRef({static:!1,hold:!1}),j=vn(r),N=$(b=>O?r===null?O.options.indexOf(b):O.options.findIndex(F=>j(F,b)):y.state.options.findIndex(F=>j(F.dataRef.current.value,b))),G=d.useCallback(b=>ce(z.mode,{[J.Multi]:()=>P.some(F=>j(F,b)),[J.Single]:()=>j(P,b)}),[P]),_=L(y,b=>b.virtual),g=$(()=>h?.()),z=d.useMemo(()=>({__demoMode:m,immediate:S,optionsPropsRef:W,value:P,defaultValue:I,disabled:v,invalid:u,mode:p?J.Multi:J.Single,virtual:O?_:null,onChange:B,isSelected:G,calculateIndex:N,compare:j,onClose:g}),[P,I,v,u,p,B,G,m,y,O,_,g]);ue(()=>{var b;O&&y.send({type:Ze.UpdateVirtualConfiguration,options:O.options,disabled:(b=O.disabled)!=null?b:null})},[O,O?.options,O?.disabled]),ue(()=>{y.state.dataRef.current=z},[z]);let[A,C,U,se]=L(y,b=>[b.comboboxState,b.buttonElement,b.inputElement,b.optionsElement]),Q=Ge.get(null),X=L(Q,d.useCallback(b=>Q.selectors.isTop(b,e),[Q,e]));ln(X,[C,U,se],()=>y.actions.closeCombobox());let Z=L(y,y.selectors.activeOptionIndex),ee=L(y,y.selectors.activeOption),Y=d.useMemo(()=>({open:A===x.Open,disabled:v,invalid:u,activeIndex:Z,activeOption:ee,value:P}),[z,v,P,u,ee,A]),[ne,f]=rn(),H=s===null?{}:{ref:s},M=d.useCallback(()=>{if(I!==void 0)return B?.(I)},[B,I]),q=be();return k.createElement(f,{value:ne,props:{htmlFor:U?.id},slot:{open:A===x.Open,disabled:v}},k.createElement(un,null,k.createElement(me.Provider,{value:z},k.createElement(et.Provider,{value:y},k.createElement(dn,{value:ce(A,{[x.Open]:xe.Open,[x.Closed]:xe.Closed})},c!=null&&k.createElement(gn,{disabled:v,data:P!=null?{[c]:P}:{},form:l,onReset:M}),q({ourProps:H,theirProps:R,slot:Y,defaultTag:kn,name:"Combobox"}))))))}let Dn="input";function Ln(t,s){var e,o;let n=ve("Combobox.Input"),i=pe("Combobox.Input"),a=d.useId(),l=Lt(),{id:c=l||`headlessui-combobox-input-${a}`,onChange:r,displayValue:u,disabled:v=i.disabled||!1,autoFocus:h=!1,type:m="text",...p}=t,[S]=L(n,f=>[f.inputElement]),O=d.useRef(null),V=Se(O,s,Nt(),n.actions.setInputElement),R=Ee(S),[I,P]=L(n,f=>[f.comboboxState,f.isTyping]),B=qt(),y=$(()=>{n.actions.onChange(null),n.state.optionsElement&&(n.state.optionsElement.scrollTop=0),n.actions.goToOption({focus:D.Nothing})}),W=d.useMemo(()=>{var f;return typeof u=="function"&&i.value!==void 0?(f=u(i.value))!=null?f:"":typeof i.value=="string"?i.value:""},[i.value,u]);qe(([f,H],[M,q])=>{if(n.state.isTyping)return;let b=O.current;b&&((q===x.Open&&H===x.Closed||f!==M)&&(b.value=f),requestAnimationFrame(()=>{if(n.state.isTyping||!b||R?.activeElement!==b)return;let{selectionStart:F,selectionEnd:E}=b;Math.abs((E??0)-(F??0))===0&&F===0&&b.setSelectionRange(b.value.length,b.value.length)}))},[W,I,R,P]),qe(([f],[H])=>{if(f===x.Open&&H===x.Closed){if(n.state.isTyping)return;let M=O.current;if(!M)return;let q=M.value,{selectionStart:b,selectionEnd:F,selectionDirection:E}=M;M.value="",M.value=q,E!==null?M.setSelectionRange(b,F,E):M.setSelectionRange(b,F)}},[I]);let j=d.useRef(!1),N=$(()=>{j.current=!0}),G=$(()=>{B.nextFrame(()=>{j.current=!1})}),_=$(f=>{switch(n.actions.setIsTyping(!0),f.key){case K.Enter:if(n.state.comboboxState!==x.Open||j.current)return;if(f.preventDefault(),f.stopPropagation(),n.selectors.activeOptionIndex(n.state)===null){n.actions.closeCombobox();return}n.actions.selectActiveOption(),i.mode===J.Single&&n.actions.closeCombobox();break;case K.ArrowDown:return f.preventDefault(),f.stopPropagation(),ce(n.state.comboboxState,{[x.Open]:()=>n.actions.goToOption({focus:D.Next}),[x.Closed]:()=>n.actions.openCombobox()});case K.ArrowUp:return f.preventDefault(),f.stopPropagation(),ce(n.state.comboboxState,{[x.Open]:()=>n.actions.goToOption({focus:D.Previous}),[x.Closed]:()=>{ae.flushSync(()=>n.actions.openCombobox()),i.value||n.actions.goToOption({focus:D.Last})}});case K.Home:if(f.shiftKey)break;return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:D.First});case K.PageUp:return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:D.First});case K.End:if(f.shiftKey)break;return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:D.Last});case K.PageDown:return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:D.Last});case K.Escape:return n.state.comboboxState!==x.Open?void 0:(f.preventDefault(),n.state.optionsElement&&!i.optionsPropsRef.current.static&&f.stopPropagation(),i.mode===J.Single&&i.value===null&&y(),n.actions.closeCombobox());case K.Tab:if(n.state.comboboxState!==x.Open)return;i.mode===J.Single&&n.state.activationTrigger!==le.Focus&&n.actions.selectActiveOption(),n.actions.closeCombobox();break}}),g=$(f=>{r?.(f),i.mode===J.Single&&f.target.value===""&&y(),n.actions.openCombobox()}),z=$(f=>{var H,M,q;let b=(H=f.relatedTarget)!=null?H:re.find(F=>F!==f.currentTarget);if(!((M=n.state.optionsElement)!=null&&M.contains(b))&&!((q=n.state.buttonElement)!=null&&q.contains(b))&&n.state.comboboxState===x.Open)return f.preventDefault(),i.mode===J.Single&&i.value===null&&y(),n.actions.closeCombobox()}),A=$(f=>{var H,M,q;let b=(H=f.relatedTarget)!=null?H:re.find(F=>F!==f.currentTarget);(M=n.state.buttonElement)!=null&&M.contains(b)||(q=n.state.optionsElement)!=null&&q.contains(b)||i.disabled||i.immediate&&n.state.comboboxState!==x.Open&&B.microTask(()=>{ae.flushSync(()=>n.actions.openCombobox()),n.actions.setActivationTrigger(le.Focus)})}),C=we(),U=Wt(),{isFocused:se,focusProps:Q}=Ye({autoFocus:h}),{isHovered:X,hoverProps:Z}=Je({isDisabled:v}),ee=L(n,f=>f.optionsElement),Y=d.useMemo(()=>({open:I===x.Open,disabled:v,invalid:i.invalid,hover:X,focus:se,autofocus:h}),[i,X,se,h,v,i.invalid]),ne=Ie({ref:V,id:c,role:"combobox",type:m,"aria-controls":ee?.id,"aria-expanded":I===x.Open,"aria-activedescendant":L(n,n.selectors.activeDescendantId),"aria-labelledby":C,"aria-describedby":U,"aria-autocomplete":"list",defaultValue:(o=(e=t.defaultValue)!=null?e:i.defaultValue!==void 0?u?.(i.defaultValue):null)!=null?o:i.defaultValue,disabled:v||void 0,autoFocus:h,onCompositionStart:N,onCompositionEnd:G,onKeyDown:_,onChange:g,onFocus:A,onBlur:z},Q,Z);return be()({ourProps:ne,theirProps:p,slot:Y,defaultTag:Dn,name:"Combobox.Input"})}let Nn="button";function qn(t,s){let e=ve("Combobox.Button"),o=pe("Combobox.Button"),[n,i]=d.useState(null),a=Se(s,i,e.actions.setButtonElement),l=d.useId(),{id:c=`headlessui-combobox-button-${l}`,disabled:r=o.disabled||!1,autoFocus:u=!1,...v}=t,[h,m,p]=L(e,g=>[g.comboboxState,g.inputElement,g.optionsElement]),S=Xe(m),O=h===x.Open;Ht(O,{trigger:n,action:d.useCallback(g=>{if(n!=null&&n.contains(g.target))return fe.Ignore;if(m!=null&&m.contains(g.target))return fe.Ignore;let z=g.target.closest('[role="option"]:not([data-disabled])');return Ut(z)?fe.Select(z):p!=null&&p.contains(g.target)?fe.Ignore:fe.Close},[n,m,p]),close:e.actions.closeCombobox,select:e.actions.selectActiveOption});let V=$(g=>{switch(g.key){case K.Space:case K.Enter:g.preventDefault(),g.stopPropagation(),e.state.comboboxState===x.Closed&&ae.flushSync(()=>e.actions.openCombobox()),S();return;case K.ArrowDown:g.preventDefault(),g.stopPropagation(),e.state.comboboxState===x.Closed&&(ae.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:D.First})),S();return;case K.ArrowUp:g.preventDefault(),g.stopPropagation(),e.state.comboboxState===x.Closed&&(ae.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:D.Last})),S();return;case K.Escape:if(e.state.comboboxState!==x.Open)return;g.preventDefault(),e.state.optionsElement&&!o.optionsPropsRef.current.static&&g.stopPropagation(),ae.flushSync(()=>e.actions.closeCombobox()),S();return;default:return}}),R=$(g=>{g.preventDefault(),!cn(g.currentTarget)&&(g.button===je.Left&&(e.state.comboboxState===x.Open?e.actions.closeCombobox():e.actions.openCombobox()),S())}),I=we([c]),{isFocusVisible:P,focusProps:B}=Ye({autoFocus:u}),{isHovered:y,hoverProps:W}=Je({isDisabled:r}),{pressed:j,pressProps:N}=Kt({disabled:r}),G=d.useMemo(()=>({open:h===x.Open,active:j||h===x.Open,disabled:r,invalid:o.invalid,value:o.value,hover:y,focus:P}),[o,y,P,j,r,h]),_=Ie({ref:a,id:c,type:Gt(t,n),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":p?.id,"aria-expanded":h===x.Open,"aria-labelledby":I,disabled:r||void 0,autoFocus:u,onPointerDown:R,onKeyDown:V},B,W,N);return be()({ourProps:_,theirProps:v,slot:G,defaultTag:Nn,name:"Combobox.Button"})}let Wn="div",Hn=Ae.RenderStrategy|Ae.Static;function Un(t,s){var e,o,n;let i=d.useId(),{id:a=`headlessui-combobox-options-${i}`,hold:l=!1,anchor:c,portal:r=!1,modal:u=!0,transition:v=!1,...h}=t,m=ve("Combobox.Options"),p=pe("Combobox.Options"),S=Yt(c);S&&(r=!0);let[O,V]=Jt(S),[R,I]=d.useState(null),P=Qt(),B=Se(s,S?O:null,m.actions.setOptionsElement,I),[y,W,j,N,G]=L(m,E=>[E.comboboxState,E.inputElement,E.buttonElement,E.optionsElement,E.activationTrigger]),_=Ee(W||j),g=Ee(N),z=Xt(),[A,C]=Zt(v,R,z!==null?(z&xe.Open)===xe.Open:y===x.Open);en(A,W,m.actions.closeCombobox);let U=p.__demoMode?!1:u&&y===x.Open;tn(U,g);let se=p.__demoMode?!1:u&&y===x.Open;nn(se,{allowed:d.useCallback(()=>[W,j,N],[W,j,N])}),ue(()=>{var E;p.optionsPropsRef.current.static=(E=t.static)!=null?E:!1},[p.optionsPropsRef,t.static]),ue(()=>{p.optionsPropsRef.current.hold=l},[p.optionsPropsRef,l]),xn(y===x.Open,{container:N,accept(E){return E.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:E.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(E){E.setAttribute("role","none")}});let Q=we([j?.id]),X=d.useMemo(()=>({open:y===x.Open,option:void 0}),[y]),Z=$(()=>{m.actions.setActivationTrigger(le.Pointer)}),ee=$(E=>{E.preventDefault(),m.actions.setActivationTrigger(le.Pointer)}),Y=Ie(S?P():{},{"aria-labelledby":Q,role:"listbox","aria-multiselectable":p.mode===J.Multi?!0:void 0,id:a,ref:B,style:{...h.style,...V,"--input-width":Ve(W,!0).width,"--button-width":Ve(j,!0).width},onWheel:G===le.Pointer?void 0:Z,onMouseDown:ee,...on(C)}),ne=A&&y===x.Closed,f=ze(ne,(e=p.virtual)==null?void 0:e.options),H=ze(ne,p.value),M=$(E=>p.compare(H,E)),q=d.useMemo(()=>{if(!p.virtual)return p;if(f===void 0)throw new Error("Missing `options` in virtual mode");return f!==p.virtual.options?{...p,virtual:{...p.virtual,options:f}}:p},[p,f,(o=p.virtual)==null?void 0:o.options]);p.virtual&&Object.assign(h,{children:k.createElement(me.Provider,{value:q},k.createElement(zn,{slot:X},h.children))});let b=be(),F=d.useMemo(()=>p.mode===J.Multi?p:{...p,isSelected:M},[p,M]);return k.createElement(sn,{enabled:r?t.static||A:!1,ownerDocument:_},k.createElement(me.Provider,{value:F},b({ourProps:Y,theirProps:{...h,children:k.createElement(mn,{freeze:ne},typeof h.children=="function"?(n=h.children)==null?void 0:n.call(h,X):h.children)},slot:X,defaultTag:Wn,features:Hn,visible:A,name:"Combobox.Options"})))}let Kn="div";function Gn(t,s){var e,o,n;let i=pe("Combobox.Option"),a=ve("Combobox.Option"),l=d.useId(),{id:c=`headlessui-combobox-option-${l}`,value:r,disabled:u=(n=(o=(e=i.virtual)==null?void 0:e.disabled)==null?void 0:o.call(e,r))!=null?n:!1,order:v=null,...h}=t,[m]=L(a,C=>[C.inputElement]),p=Xe(m),S=L(a,d.useCallback(C=>a.selectors.isActive(C,r,c),[r,c])),O=i.isSelected(r),V=d.useRef(null),R=Ke({disabled:u,value:r,domRef:V,order:v}),I=d.useContext(nt),P=Se(s,V,I?I.measureElement:null),B=$(()=>{a.actions.setIsTyping(!1),a.actions.onChange(r)});ue(()=>a.actions.registerOption(c,R),[R,c]);let y=L(a,d.useCallback(C=>a.selectors.shouldScrollIntoView(C,r,c),[r,c]));ue(()=>{if(y)return pn().requestAnimationFrame(()=>{var C,U;(U=(C=V.current)==null?void 0:C.scrollIntoView)==null||U.call(C,{block:"nearest"})})},[y,V]);let W=$(C=>{C.preventDefault(),C.button===je.Left&&(u||(B(),fn()||requestAnimationFrame(()=>p()),i.mode===J.Single&&a.actions.closeCombobox()))}),j=$(()=>{if(u)return a.actions.goToOption({focus:D.Nothing});let C=i.calculateIndex(r);a.actions.goToOption({focus:D.Specific,idx:C})}),N=Dt(),G=$(C=>N.update(C)),_=$(C=>{if(!N.wasMoved(C)||u||S)return;let U=i.calculateIndex(r);a.actions.goToOption({focus:D.Specific,idx:U},le.Pointer)}),g=$(C=>{N.wasMoved(C)&&(u||S&&(i.optionsPropsRef.current.hold||a.actions.goToOption({focus:D.Nothing})))}),z=d.useMemo(()=>({active:S,focus:S,selected:O,disabled:u}),[S,O,u]),A={id:c,ref:P,role:"option",tabIndex:u===!0?void 0:-1,"aria-disabled":u===!0?!0:void 0,"aria-selected":O,disabled:void 0,onMouseDown:W,onFocus:j,onPointerEnter:G,onMouseEnter:G,onPointerMove:_,onMouseMove:_,onPointerLeave:g,onMouseLeave:g};return be()({ourProps:A,theirProps:h,slot:z,defaultTag:Kn,name:"Combobox.Option"})}let Yn=he(Bn),ot=he(qn),st=he(Ln),Jn=Bt,it=he(Un),at=he(Gn),Qn=Object.assign(Yn,{Input:st,Button:ot,Label:Jn,Options:it,Option:at});const Xn=`
  jn:relative
`,Zn=`
  jn:pointer-events-none
  jn:top-2
  jn:left-[0.9375rem]
`,eo=`
  jn:rounded-3px
  jn:bg-theme-textinput
  jn:text-theme-textinput
  jn:border
  jn:text-base
  jn:leading-4
  jn:w-full
  jn:px-4
  jn:h-textinput
  jn:text-left
  jn:overflow-hidden
  jn:text-ellipsis
  jn:whitespace-nowrap
  jn:focus:outline-hidden
  jn:focus:ring-2
  jn:focus:ring-theme-focus
`,to=`
  jn:pt-[1.125rem] 
  jn:pb-1
`,no=`
  jn:py-4
`,oo=`
  jn:cursor-not-allowed
  jn:pointer-events-none
  jn:opacity-50
`,so=`
  jn:border-theme-textinput-default
`,io=`
  jn:border-theme-success
`,ao=`
  jn:border-theme-error
`,lo=`
  jn:absolute
  jn:top-0
  jn:right-0
  jn:h-textinput
  jn:w-6
  jn:h-4
  jn:border-l-0
  jn:border-y-[1px]
  jn:border-r-[1px]
  jn:rounded-tr
  jn:rounded-br
  jn:appearance-none
  jn:bg-theme-textinput
  jn:text-theme-textinput
`,ro=`
  jn:border-theme-textinput-default
`,uo=`
  jn:border-theme-error
`,co=`
  jn:border-theme-success
`,po=`
  jn:cursor-not-allowed
  jn:pointer-events-none
  jn:bg-transparent
  jn:opacity-50
`,fo=`
  jn:rounded
  jn:bg-theme-background-lvl-1
  jn:w-full
  jn:overflow-y-auto
`,mo=`
  jn:absolute
  jn:top-[.4rem]
  jn:right-6
`,ho=`
  jn:absolute
  jn:top-1/2
  jn:left-1/2
  jn:translate-y-[-50%]
  jn:translate-x-[-0.75rem]
`,ye=d.createContext(void 0),He=({ariaLabel:t,children:s,className:e="",defaultValue:o="",disabled:n=!1,error:i=!1,errortext:a="",helptext:l="",id:c="",invalid:r=!1,loading:u=!1,label:v,name:h="",onBlur:m,onChange:p,onFocus:S,onInputChange:O,placeholder:V="Select…",required:R=!1,successtext:I="",truncateOptions:P=!1,valid:B=!1,value:y="",valueLabel:W,width:j="full",wrapperClassName:N="",...G})=>{const _=w=>!(typeof w=="string"&&w.trim().length===0),g=c||"juno-combobox-"+d.useId(),z="juno-combobox-helptext-"+d.useId(),[A,C]=d.useState(!1),[U,se]=d.useState(new Map),[Q,X]=d.useState(""),[Z,ee]=d.useState(y),[Y,ne]=d.useState(!1),[f,H]=d.useState(!1),[M,q]=d.useState(!1),[b,F]=d.useState(!1),[E,lt]=d.useState(!1),{x:rt,y:ut,strategy:dt,refs:Me,context:$e}=St({open:A,onOpenChange:C,placement:"bottom-start",middleware:[It(4),jt(),Tt(),Mt({apply({availableWidth:w,availableHeight:oe,elements:ie,rects:te}){Object.assign(ie.floating.style,{maxWidth:`${w}px`,maxHeight:`${oe}px`,minWidth:`${te.reference.width}px`,overflowY:"auto"})}})],whileElementsMounted:wt}),{getReferenceProps:ct,getFloatingProps:pt}=Ot([Ct($e),Et($e)]),ft=(w,oe,ie)=>{se(te=>new Map([...Array.from(te),[w??ie,{val:w,label:oe,children:ie}]]))},Re=d.useMemo(()=>r||!!(a&&_(a)),[r,a]),_e=d.useMemo(()=>B||!!(I&&_(I)),[B,I]);d.useEffect(()=>{ee(y)},[y]),d.useEffect(()=>{H(i)},[i]),d.useEffect(()=>{ne(u)},[u]),d.useEffect(()=>{F(Re)},[Re]),d.useEffect(()=>{lt(_e)},[_e]);const mt=w=>{ee(w),w&&C(!1),p&&p(w)},ht=w=>{X(w?.target?.value),O&&O(w)},bt=w=>{q(!0),A||C(!0),S&&S(w)},vt=w=>{q(!1),C(!1),m&&m(w)},gt=_t(),xt=Q===""?k.Children.toArray(s):k.Children.toArray(s).filter(w=>k.isValidElement(w)?(w.props.children?.toString()||w.props.label||w.props.value)?.toLowerCase().includes(Q.toLowerCase()):!1),yt=w=>{const oe=te=>te==null?"":typeof te=="object"?String(te)!=="[object Object]"?String(te):"":String(te),ie=U.get(w);return ie?.children&&oe(ie.children)||ie?.label||W||oe(w)||""};return T.jsx(ye.Provider,{value:{selectedValue:Z,truncateOptions:P,addOptionValueAndLabel:ft},children:T.jsxs("div",{className:`
          juno-combobox-wrapper
          jn:relative
          ${j=="auto"?"jn:inline-block":"jn:block"}
          ${j=="auto"?"jn:w-auto":"jn:w-full"}
          ${N}
        `,"data-row-stop-propagation":!0,children:[T.jsx(Qn,{defaultValue:o,disabled:n||Y||f,name:h,onChange:mt,value:Z||o,as:"div",...G,children:({open:w})=>(d.useEffect(()=>{w!==A&&C(w)},[w]),T.jsxs(T.Fragment,{children:[T.jsxs("div",{ref:Me.setReference,className:`
                juno-combobox-input-wrapper
                ${Xn}
                ${n?"jn:cursor-not-allowed":""}
              `,children:[v&&_(v)&&!Y&&!f?T.jsx($t,{text:v,disabled:n,required:R,htmlFor:g,className:`${Zn}`,floating:!0,minimized:!!(V||M||Q&&_(Q)||Z&&_(Z)),...ct()}):"",T.jsx(st,{autoComplete:"off","aria-label":t||v,"aria-describedby":l?z:"",id:g,onBlur:vt,onChange:ht,onFocus:bt,placeholder:!Y&&!f?V:"",displayValue:oe=>yt(oe),className:`
                  juno-combobox-input 
                  ${eo} 
                  ${v&&_(v)?to:no}
                  ${n?oo:""}
                  ${b?"juno-combobox-invalid "+ao:""} 
                  ${E?"juno-combobox-valid "+io:""}  
                  ${E||b?"":so} 
                  ${Y?"juno-combobox-loading jn:cursor-not-allowed":""}
                  ${f?"juno-combobox-error jn:cursor-not-allowed":""}
                  ${e}
                `}),Y||f?T.jsx("span",{className:`${ho}`,children:Y?T.jsx(Rt,{className:"jn:cursor-not-allowed"}):T.jsx(ge,{icon:"errorOutline",color:"jn:text-theme-error",className:"jn:cursor-not-allowed"})}):E||b?T.jsx("span",{className:`
                        juno-combobox-icon-container 
                        ${mo} 
                        ${n?"jn:opacity-50":""}
                      `,children:T.jsx(ge,{icon:E?"checkCircle":"dangerous",color:E?"jn:text-theme-success":"jn:text-theme-error"})}):"",!f&&!Y?T.jsx(ot,{className:`
                        juno-combobox-toggle 
                        ${lo}
                        ${n?po:""}
                        ${b?"juno-combobox-toggle-invalid "+uo:""} 
                        ${E?"juno-combobox-toggle-valid "+co:""}  
                        ${E||b?"":ro} 
                      `,children:T.jsx(ge,{icon:A?"expandLess":"expandMore"})}):null]}),A&&ae.createPortal(T.jsx("div",{ref:Me.setFloating,className:`juno-combobox-options ${fo}`,style:{position:dt,top:ut??0,left:rt??0},...pt(),children:T.jsx(it,{static:!0,className:"jn:w-full",children:xt})}),gt??document.body)]}))}),a&&_(a)?T.jsx(Oe,{text:a,variant:"error"}):"",I&&_(I)?T.jsx(Oe,{text:I,variant:"success"}):"",l&&_(l)?T.jsx(Oe,{text:l,id:z}):""]})})};try{ye.displayName="ComboBoxContext",ye.__docgenInfo={description:"",displayName:"ComboBoxContext",props:{}}}catch{}try{He.displayName="ComboBox",He.__docgenInfo={description:"",displayName:"ComboBox",props:{ariaLabel:{defaultValue:null,description:"The aria-label of the ComboBox. Defaults to the label if label was passed.",name:"ariaLabel",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"The children to Render. Use `ComboBox.Option` elements.",name:"children",required:!1,type:{name:"ReactNode"}},className:{defaultValue:{value:""},description:"A custom className. Will be passed to the internal text input element of the ComboBox",name:"className",required:!1,type:{name:"string"}},defaultValue:{defaultValue:{value:""},description:"Pass a defaultValue to use as an uncontrolled Component that will handle its state internally",name:"defaultValue",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Whether the ComboBox is disabled",name:"disabled",required:!1,type:{name:"boolean"}},error:{defaultValue:{value:"false"},description:"Whether the ComboBox has an error. Note this refers to an internal error like failing to load options etc., to indicate failed validation use `invalid` instead.",name:"error",required:!1,type:{name:"boolean"}},errortext:{defaultValue:{value:""},description:"An errortext to display when the ComboBox failed validation or an internal error occurred.",name:"errortext",required:!1,type:{name:"ReactNode"}},helptext:{defaultValue:{value:""},description:"A helptext to render to explain meaning and significance of the ComboBox",name:"helptext",required:!1,type:{name:"ReactNode"}},id:{defaultValue:{value:""},description:"The Id of the ComboBox. Will be assigned to the text input part of the ComboBox. If not passed, an id will be auto-generated.",name:"id",required:!1,type:{name:"string"}},invalid:{defaultValue:{value:"false"},description:"Whether the ComboBox failed validation",name:"invalid",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"The label of the ComboBox",name:"label",required:!1,type:{name:"string"}},loading:{defaultValue:{value:"false"},description:"Whether the ComboBox is busy loading options",name:"loading",required:!1,type:{name:"boolean"}},name:{defaultValue:{value:""},description:"The name attribute of the ComboBox when used as part of a form",name:"name",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"A handler to execute when the ComboBox looses focus",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onChange:{defaultValue:null,description:"A handler to execute when the ComboBox' selected value changes",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},onFocus:{defaultValue:null,description:"A handler to execute when the ComboBox input receives focus",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onInputChange:{defaultValue:null,description:"Handler to execute when the ComboBox text input value changes",name:"onInputChange",required:!1,type:{name:"ChangeEventHandler<HTMLInputElement>"}},placeholder:{defaultValue:{value:"Select…"},description:"A placeholder to render in the text input",name:"placeholder",required:!1,type:{name:"string"}},required:{defaultValue:{value:"false"},description:"Whether the ComboBox is required",name:"required",required:!1,type:{name:"boolean"}},successtext:{defaultValue:{value:""},description:"A text to display in case the ComboBox was successfully validated. Will set the ComboBox to `valid` when passed.",name:"successtext",required:!1,type:{name:"ReactNode"}},truncateOptions:{defaultValue:{value:"false"},description:"Whether the option labels should be truncated in case they are longer/wider than the available space in an option or not. Default is FALSE.",name:"truncateOptions",required:!1,type:{name:"boolean"}},valid:{defaultValue:{value:"false"},description:"Whether the ComboBox was successfully validated",name:"valid",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"The selected value of the ComboBox in Controlled Mode.",name:"value",required:!1,type:{name:"string"}},valueLabel:{defaultValue:null,description:"The label of the passed value or defaultValue. If you want to use controlled mode or pass as defaultValue in uncontrolled mode and additionally use labels for human-readable SelectOptions, you need to also pass the matching label for the passed value/defaultValue so that the Select component can render itself properly",name:"valueLabel",required:!1,type:{name:"string"}},width:{defaultValue:{value:"full"},description:"The width of the text input. Either 'full' (default) or 'auto'.",name:"width",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"full"'}]}},wrapperClassName:{defaultValue:{value:""},description:"Pass a custom classname to the wrapping <div> element. This can be useful if you must add styling to the outermost wrapping element of this component, e.g. for positioning.",name:"wrapperClassName",required:!1,type:{name:"string"}}}}}catch{}const bo=`
  jn:flex
  jn:pt-[0.6875rem]
  jn:pb-[0.5rem]
  jn:pr-[0.875rem]
  jn:select-none
  jn:hover:outline-hidden
  jn:hover:ring-2
  jn:hover:ring-inset
  jn:hover:ring-theme-focus
  jn:hover:bg-theme-background-lvl-3
`,vo=`
  jn:text-theme-default
  jn:pl-[2.375rem]
`,go=`
  jn:text-theme-accent
  jn:pl-3.5
`,xo=`
  jn:inline-block
  jn:mr-1.5
`,yo=`
  jn:opacity-50
  jn:cursor-not-allowed
`,So=`
  jn:block
  jn:h-6
  jn:overflow-hidden
  jn:text-ellipsis
  jn:whitespace-nowrap
`,Ue=({children:t,disabled:s=!1,value:e="",label:o="",className:n="",...i})=>{const a=d.useContext(ye),{selectedValue:l,truncateOptions:c,addOptionValueAndLabel:r}=a||{};d.useEffect(()=>{r&&r(e,o,t)},[e,o,t]);const u=e||t;return T.jsx(at,{value:u,disabled:s,as:d.Fragment,children:T.jsxs("li",{className:`
          juno-combobox-option 
          ${bo}
          ${l===e?go:vo}
          ${s?"jn:cursor-not-allowed":""}
          ${n}
        `,...i,children:[l===u?T.jsx(ge,{icon:"check",size:"18",className:`${xo}`}):"",T.jsx("span",{className:`
            ${s?yo:""}
            ${c?So:""}
          `,children:t||o||e})]})})};try{Ue.displayName="ComboBoxOption",Ue.__docgenInfo={description:"",displayName:"ComboBoxOption",props:{children:{defaultValue:null,description:"Content to render inside the ComboBoxOption. Is specified should be string.",name:"children",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"If option is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"Option value.",name:"value",required:!1,type:{name:"string"}},label:{defaultValue:{value:""},description:"Option label.",name:"label",required:!1,type:{name:"string"}},className:{defaultValue:{value:""},description:"CSS class for the option.",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{He as C,Ue as a};
