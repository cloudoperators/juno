{
  "kind": "Dashboard",
  "metadata": {
    "name": "greenhouse-insights",
    "createdAt": "2025-06-14T13:17:12.482451269Z",
    "updatedAt": "2025-06-14T18:57:11.027698602Z",
    "version": 15,
    "project": "playground"
  },
  "spec": {
    "display": {
      "name": "Greenhouse Insights"
    },
    "panels": {
      "PluginWorkloadStatus": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Plugin Workload Status"
          },
          "plugin": {
            "kind": "Table",
            "spec": {
              "cellSettings": [
                {
                  "condition": {
                    "kind": "Value",
                    "spec": {
                      "value": "0"
                    }
                  },
                  "text": "Failing"
                },
                {
                  "condition": {
                    "kind": "Value",
                    "spec": {
                      "value": "1"
                    }
                  },
                  "text": "Ok"
                }
              ],
              "columnSettings": [
                {
                  "name": "plugin"
                },
                {
                  "name": "pluginDefinition"
                },
                {
                  "header": "Status",
                  "hide": false,
                  "name": "value"
                },
                {
                  "hide": true,
                  "name": "__name__"
                },
                {
                  "hide": true,
                  "name": "cluster"
                },
                {
                  "hide": true,
                  "name": "container"
                },
                {
                  "hide": true,
                  "name": "endpoint"
                },
                {
                  "hide": true,
                  "name": "instance"
                },
                {
                  "hide": true,
                  "name": "job"
                },
                {
                  "hide": true,
                  "name": "pod"
                },
                {
                  "hide": true,
                  "name": "prometheus"
                },
                {
                  "hide": true,
                  "name": "region"
                },
                {
                  "format": {
                    "unit": "weeks"
                  },
                  "hide": true,
                  "name": "timestamp"
                },
                {
                  "hide": true,
                  "name": "service"
                },
                {
                  "hide": true,
                  "name": "organization"
                }
              ],
              "density": "standard"
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource",
                      "name": "kube-monitoring-prometheus"
                    },
                    "query": "greenhouse_plugin_workload_status_up{}",
                    "seriesNameFormat": ""
                  }
                }
              }
            }
          ]
        }
      },
      "Pluginswithfailingtests": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Plugins with failing tests"
          },
          "plugin": {
            "kind": "Table",
            "spec": {
              "columnSettings": [
                {
                  "header": "Plugin",
                  "name": "plugin"
                },
                {
                  "name": "pluginDefinition"
                },
                {
                  "header": "Retry Attempts",
                  "hide": true,
                  "name": "value"
                },
                {
                  "hide": true,
                  "name": "__name__"
                },
                {
                  "hide": true,
                  "name": "cluster"
                },
                {
                  "hide": true,
                  "name": "container"
                },
                {
                  "hide": true,
                  "name": "endpoint"
                },
                {
                  "hide": true,
                  "name": "instance"
                },
                {
                  "hide": true,
                  "name": "job"
                },
                {
                  "hide": true,
                  "name": "pod"
                },
                {
                  "hide": true,
                  "name": "prometheus"
                },
                {
                  "hide": true,
                  "name": "region"
                },
                {
                  "format": {
                    "unit": "weeks"
                  },
                  "hide": true,
                  "name": "timestamp"
                },
                {
                  "hide": true,
                  "name": "service"
                },
                {
                  "hide": true,
                  "name": "organization"
                },
                {
                  "header": "Namespace",
                  "name": "namespace"
                },
                {
                  "hide": true,
                  "name": "result"
                }
              ],
              "density": "standard"
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "greenhouse_plugin_chart_test_runs_total{result!=\"Success\", result!=\"NoTests\"}"
                  }
                }
              }
            }
          ]
        }
      },
      "TeamMembers": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Onboarded Teams Overview"
          },
          "plugin": {
            "kind": "Table",
            "spec": {
              "columnSettings": [
                {
                  "header": "Team",
                  "name": "team"
                },
                {
                  "header": "Namespace",
                  "name": "namespace"
                },
                {
                  "header": "Members Count",
                  "name": "value"
                },
                {
                  "hide": true,
                  "name": "__name__"
                },
                {
                  "hide": true,
                  "name": "cluster"
                },
                {
                  "hide": true,
                  "name": "container"
                },
                {
                  "hide": true,
                  "name": "endpoint"
                },
                {
                  "hide": true,
                  "name": "instance"
                },
                {
                  "hide": true,
                  "name": "job"
                },
                {
                  "hide": true,
                  "name": "organization"
                },
                {
                  "hide": true,
                  "name": "pod"
                },
                {
                  "hide": true,
                  "name": "prometheus"
                },
                {
                  "hide": true,
                  "name": "region"
                },
                {
                  "format": {
                    "unit": "weeks"
                  },
                  "hide": true,
                  "name": "timestamp"
                },
                {
                  "hide": true,
                  "name": "service"
                }
              ],
              "density": "standard"
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "greenhouse_teammembership_members_count"
                  }
                }
              }
            }
          ]
        }
      },
      "TeamMembers-2": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Kubeconfig Expiry"
          },
          "plugin": {
            "kind": "Table",
            "spec": {
              "columnSettings": [
                {
                  "header": "Remote Cluster",
                  "hide": false,
                  "name": "cluster"
                },
                {
                  "header": "Team",
                  "name": "team"
                },
                {
                  "header": "Namespace",
                  "hide": true,
                  "name": "namespace"
                },
                {
                  "header": "Expiring in",
                  "hide": false,
                  "name": "value",
                  "format": {
                    "unit": "seconds"
                  }
                },
                {
                  "hide": true,
                  "name": "__name__"
                },
                {
                  "hide": true,
                  "name": "container"
                },
                {
                  "hide": true,
                  "name": "endpoint"
                },
                {
                  "hide": true,
                  "name": "instance"
                },
                {
                  "hide": true,
                  "name": "job"
                },
                {
                  "hide": true,
                  "name": "organization"
                },
                {
                  "hide": true,
                  "name": "pod"
                },
                {
                  "hide": true,
                  "name": "prometheus"
                },
                {
                  "hide": true,
                  "name": "region"
                },
                {
                  "format": {
                    "unit": "weeks"
                  },
                  "hide": true,
                  "name": "timestamp"
                },
                {
                  "hide": true,
                  "name": "service"
                },
                {
                  "header": "K8s Version",
                  "name": "version"
                }
              ],
              "density": "standard"
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "greenhouse_cluster_kubeconfig_validity_seconds"
                  }
                }
              }
            }
          ]
        }
      }
    },
    "layouts": [
      {
        "kind": "Grid",
        "spec": {
          "display": {
            "title": "Overview",
            "collapse": {
              "open": true
            }
          },
          "items": [
            {
              "x": 0,
              "y": 0,
              "width": 12,
              "height": 6,
              "content": {
                "$ref": "#/spec/panels/PluginWorkloadStatus"
              }
            },
            {
              "x": 12,
              "y": 0,
              "width": 12,
              "height": 6,
              "content": {
                "$ref": "#/spec/panels/Pluginswithfailingtests"
              }
            },
            {
              "x": 0,
              "y": 6,
              "width": 12,
              "height": 6,
              "content": {
                "$ref": "#/spec/panels/TeamMembers"
              }
            },
            {
              "x": 12,
              "y": 6,
              "width": 12,
              "height": 6,
              "content": {
                "$ref": "#/spec/panels/TeamMembers-2"
              }
            }
          ]
        }
      }
    ],
    "variables": [],
    "duration": "1h",
    "refreshInterval": "0s"
  }
}
