#SPDX-FileCopyrightText: 2024 SAP SE or an SAP affiliate company and Juno contributors
#SPDX-License-Identifier: Apache-2.0

# This the list of issues for one selected service and its image version
query GetServiceImageVersionIssues(serviceName, imageVersion){
 issues {
    edges {
        node {
            Severity
            Name
            SourceUrl
            EarliestTargetRemediationDate
            Description

            }
    }
        totalCountgit push
        pageInfo {
            pageNumber
            pages {
                after
                pageNumber
            }
    }
}}

# The list of image versions for one selected service:
query GetServiceImageVersions(serviceName) {
    imageVersions {
        edges {
            node {
                repository
                tag
                version
                issueCounts {
                    critical
                    high
                    medium
                    low
                    none
                }
                imageRegisteryUrl
            }
        }
        pageInfo {
            pageNumber
            pages {
                after
                pageNumber
            }
        }
        totalCount
    } 
}

# The list of all services
query GetServices {
    services {
        edges {
            node {
                name
                issueCounts {
                    totalCount
                    critical
                    high
                    medium
                    low
                    none
                }
                supportGroups {
                    edges {
                        node {
                            id
                            name
                        }
                    }
                }
            }
        }
        totalCount
        pageInfo {
            pageNumber
            pages {
                after
                pageNumber
            }
        }   
    } 
}
